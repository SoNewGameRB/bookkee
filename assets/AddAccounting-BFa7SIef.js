import{r as s,o as q,h as k,c as m,b as t,t as r,w as K,a as T,i as g,j as n,v as c,k as O,F as J,d as U,l as j,g as f}from"./index-Dir_52Wl.js";import"./chartjs-plugin-datalabels.esm-Di9atHb7.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"main-container"},_={class:"left-section"},$={class:"box"},z={class:"total-amount"},G={class:"form-group"},H={class:"form-group"},P={class:"form-group"},X=["value"],Y={key:0,class:"form-group"},Z={class:"form-group"},h={class:"form-group"},ee={class:"box"},te={class:"form-group"},le={class:"form-group"},oe={class:"form-group"},se={class:"box"},ae={class:"record-list"},ne={class:"record-entry"},ue={class:"record-entry"},ie={class:"record-entry"},re=["onClick"],de={__name:"AddAccounting",setup(ve){const y=s(""),d=s("income"),u=s(""),a=s(""),C=s(!1),b=s(""),S=s(""),i=s([]),N=s(""),w=s(""),I=s(new Date().toISOString().slice(0,7)),R=["薪資","投資","獎金","其他"],F=["飲食","交通","娛樂","醫療","購物","房租","其他"],v=s([]),p=s([]);q(()=>{const o=localStorage.getItem("records");o&&(i.value=JSON.parse(o));const e=localStorage.getItem("incomeCategories");v.value=e?JSON.parse(e):[...R];const l=localStorage.getItem("expenseCategories");p.value=l?JSON.parse(l):[...F]});const V=k(()=>d.value==="income"?v.value:p.value),A=k(()=>i.value.reduce((o,e)=>e.category==="income"?o+e.amount:o-e.amount,0)),M=()=>{u.value==="new"?(C.value=!0,a.value=""):C.value=!1},L=()=>{a.value.trim()!==""&&!V.value.includes(a.value)&&(d.value==="income"?(v.value.push(a.value),localStorage.setItem("incomeCategories",JSON.stringify(v.value))):(p.value.push(a.value),localStorage.setItem("expenseCategories",JSON.stringify(p.value))),u.value=a.value,C.value=!1)},B=k(()=>i.value.filter(o=>{const e=N.value.trim().toLowerCase(),l=e===""||o.note.toLowerCase().includes(e)||o.subCategory.toLowerCase().includes(e)||o.amount.toString().includes(e),x=w.value===""||o.category===w.value;return l&&x&&o.date.startsWith(I.value)})),D=()=>{if(!y.value||!b.value||!u.value){alert("⚠️ 請填寫完整的記帳資料！");return}let o=u.value==="new"?a.value.trim():u.value;if(!o){alert("⚠️ 類別名稱不能為空！");return}const e={amount:parseFloat(y.value),category:d.value,subCategory:o,date:b.value,note:S.value};i.value.push(e),localStorage.setItem("records",JSON.stringify(i.value)),V.value.includes(o)||(d.value==="income"?(v.value.push(o),localStorage.setItem("incomeCategories",JSON.stringify(v.value))):(p.value.push(o),localStorage.setItem("expenseCategories",JSON.stringify(p.value)))),y.value="",u.value="",a.value="",b.value="",S.value="",C.value=!1,alert("✅ 記帳成功！"),updateFilteredRecords()},E=o=>{i.value.splice(o,1),localStorage.setItem("records",JSON.stringify(i.value))};return(o,e)=>(f(),m("div",W,[t("div",_,[t("div",$,[e[25]||(e[25]=t("h2",null,"新增記帳",-1)),t("div",z,"總金額："+r(A.value)+" 元",1),t("form",{onSubmit:K(D,["prevent"]),class:"form"},[t("div",G,[t("label",null,[e[10]||(e[10]=g("金額： ")),n(t("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=l=>y.value=l),required:"",class:"input-field"},null,512),[[c,y.value]])])]),t("div",H,[t("label",null,[e[12]||(e[12]=g("類別： ")),n(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>d.value=l),class:"input-field"},e[11]||(e[11]=[t("option",{value:"income"},"收入",-1),t("option",{value:"expense"},"支出",-1)]),512),[[O,d.value]])])]),t("div",P,[t("label",null,[e[14]||(e[14]=g("類別細項： ")),n(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>u.value=l),class:"input-field",onChange:M},[(f(!0),m(J,null,U(V.value,l=>(f(),m("option",{key:l,value:l},r(l),9,X))),128)),e[13]||(e[13]=t("option",{value:"new"},"+ 新增類別",-1))],544),[[O,u.value]])])]),C.value?(f(),m("div",Y,[t("label",null,[e[15]||(e[15]=g("新類別名稱： ")),n(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=l=>a.value=l),class:"input-field",onKeyup:j(L,["enter"]),placeholder:"輸入新類別名稱..."},null,544),[[c,a.value]])])])):T("",!0),t("div",Z,[t("label",null,[e[16]||(e[16]=g("日期： ")),n(t("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=l=>b.value=l),required:"",class:"input-field"},null,512),[[c,b.value]])])]),t("div",h,[t("label",null,[e[17]||(e[17]=g("備註： ")),n(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=l=>S.value=l),placeholder:"(選填)",class:"input-field"},null,512),[[c,S.value]])])]),e[18]||(e[18]=t("button",{type:"submit",class:"submit-btn"},"新增記帳",-1))],32),t("div",ee,[e[23]||(e[23]=t("h3",null,"篩選記帳紀錄",-1)),t("div",te,[e[19]||(e[19]=t("label",null,"篩選月份：",-1)),n(t("input",{type:"month","onUpdate:modelValue":e[6]||(e[6]=l=>I.value=l),onChange:e[7]||(e[7]=(...l)=>o.updateFilteredRecords&&o.updateFilteredRecords(...l)),class:"input-field"},null,544),[[c,I.value]])]),t("div",le,[e[20]||(e[20]=t("label",null,"搜尋：",-1)),n(t("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=l=>N.value=l),placeholder:"搜尋金額或備註...",class:"input-field"},null,512),[[c,N.value]])]),t("div",oe,[e[22]||(e[22]=t("label",null,"類別篩選：",-1)),n(t("select",{"onUpdate:modelValue":e[9]||(e[9]=l=>w.value=l),class:"input-field"},e[21]||(e[21]=[t("option",{value:""},"全部",-1),t("option",{value:"income"},"收入",-1),t("option",{value:"expense"},"支出",-1)]),512),[[O,w.value]])])]),t("div",se,[e[24]||(e[24]=t("h3",null,"記帳紀錄",-1)),t("ul",ae,[(f(!0),m(J,null,U(B.value,(l,x)=>(f(),m("li",{key:x,class:"record-item"},[t("div",ne,r(l.date),1),t("div",ue,r(l.category==="income"?"收入":"支出")+" - "+r(l.subCategory)+": "+r(l.amount)+" 元",1),t("div",ie,r(l.note),1),t("button",{class:"delete-btn",onClick:pe=>E(x)},"刪除",8,re)]))),128))])])])])]))}},fe=Q(de,[["__scopeId","data-v-62a90dd4"]]);export{fe as default};
