import{r as i,h as d,o as F,c as s,b as t,a as v,j as B,v as H,k as E,x as J,i as c,t as u,n as M,F as V,d as w,g as a}from"./index-Dir_52Wl.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"summary-container"},T={class:"top-section"},W={class:"filter-box"},z={class:"budget-box"},L={key:0,class:"alert-box"},P={key:0,class:"warning"},R={key:1,class:"warning"},$={key:2,class:"critical-warning"},q={class:"summary-box"},A={key:0,class:"warning"},G={key:1,class:"suggest-box"},K={class:"history-box"},Q={key:0},X={key:1},Y={__name:"DashboardSummary",setup(Z){const f=i([]),r=i(new Date().toISOString().slice(0,7)),b=i("70"),S=i(0),n=i(0),x=i([]),I=i({}),h=d(()=>x.value.filter(l=>l.month===r.value)),y=d(()=>f.value.filter(l=>l.category==="income"&&l.date.startsWith(r.value)).reduce((l,e)=>l+e.amount,0)),p=d(()=>f.value.filter(l=>l.category==="expense"&&l.date.startsWith(r.value)).reduce((l,e)=>l+e.amount,0)),k=d(()=>y.value-p.value),g=d(()=>n.value>0?(p.value/n.value*100).toFixed(0):0),N=d(()=>p.value>n.value),D=d(()=>N.value?Object.entries(I.value).sort((l,e)=>e[1]-l[1]).map(([l])=>l).slice(0,2):[]),C=()=>{b.value==="custom"?n.value=S.value:n.value=(y.value*(parseInt(b.value)/100)).toFixed(0);const l=localStorage.getItem("budgetHistory");let e=l?JSON.parse(l):[];const o=e.findIndex(O=>O.month===r.value),m={month:r.value,income:y.value,expense:p.value,budget:n.value,overBudget:p.value>n.value};o!==-1?e[o]=m:e.push(m),localStorage.setItem("budgetHistory",JSON.stringify(e)),x.value=e};return F(()=>{const l=localStorage.getItem("records");l&&(f.value=JSON.parse(l));const e=localStorage.getItem("budgetHistory");e&&(x.value=JSON.parse(e));const o=localStorage.getItem(`budget_${r.value}`);o?n.value=parseFloat(o):n.value=0,C()}),(l,e)=>(a(),s("div",j,[e[18]||(e[18]=t("h2",null,"ğŸ“ˆ æœˆçµé¤˜ & é ç®—ç®¡ç†",-1)),t("div",T,[t("div",W,[e[5]||(e[5]=t("label",null,"ğŸ“… é¸æ“‡æœˆä»½ï¼š",-1)),B(t("input",{type:"month","onUpdate:modelValue":e[0]||(e[0]=o=>r.value=o),onChange:e[1]||(e[1]=(...o)=>l.updateSummary&&l.updateSummary(...o))},null,544),[[H,r.value]])]),t("div",z,[e[8]||(e[8]=t("h3",null,"ğŸ¯ é ç®—è¨­å®š",-1)),e[9]||(e[9]=t("label",null,"é¸æ“‡é ç®—æ¯”ä¾‹ï¼š",-1)),B(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>b.value=o),onChange:C},e[6]||(e[6]=[J('<option value="50" data-v-b4c9452a>50%ï¼ˆç¯€ç´„æ¨¡å¼ï¼‰</option><option value="60" data-v-b4c9452a>60%</option><option value="70" data-v-b4c9452a>70%</option><option value="80" data-v-b4c9452a>80%</option><option value="90" data-v-b4c9452a>90%ï¼ˆå¯¬é¬†æ¨¡å¼ï¼‰</option><option value="custom" data-v-b4c9452a>è‡ªè¨‚</option>',6)]),544),[[E,b.value]]),b.value==="custom"?B((a(),s("input",{key:0,type:"number","onUpdate:modelValue":e[3]||(e[3]=o=>S.value=o),placeholder:"è¼¸å…¥é ç®—",onInput:e[4]||(e[4]=(...o)=>l.saveCustomBudget&&l.saveCustomBudget(...o))},null,544)),[[H,S.value]]):v("",!0),t("p",null,[e[7]||(e[7]=t("strong",null,"ç•¶æœˆé ç®—ï¼š",-1)),c(" "+u(n.value)+" å…ƒ",1)])])]),g.value>=80?(a(),s("div",L,[g.value>=80&&g.value<90?(a(),s("p",P,"âš ï¸ ä½ å·²èŠ±æ‰ 80% é ç®—ï¼Œè«‹æ³¨æ„æ”¯å‡º")):v("",!0),g.value>=90&&g.value<100?(a(),s("p",R,"âš ï¸ ä½ å·²èŠ±æ‰ 90% é ç®—ï¼Œè«‹è¬¹æ…ç®¡ç†")):v("",!0),g.value>=100?(a(),s("p",$,"ğŸš¨ ä½ å·²è¶…å‡ºé ç®—ï¼Œè«‹æ§åˆ¶é–‹éŠ·ï¼")):v("",!0)])):v("",!0),t("div",q,[e[13]||(e[13]=t("h3",null,"ğŸ“Š ç•¶æœˆçµé¤˜",-1)),t("p",null,[e[10]||(e[10]=t("strong",null,"ç¸½æ”¶å…¥ï¼š",-1)),c(" "+u(y.value)+" å…ƒ",1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"ç¸½æ”¯å‡ºï¼š",-1)),c(" "+u(p.value)+" å…ƒ",1)]),t("p",{class:M(k.value<0?"negative":"positive")},[e[12]||(e[12]=t("strong",null,"çµé¤˜ï¼š",-1)),c(" "+u(k.value)+" å…ƒ ",1)],2),k.value<0?(a(),s("p",A,"âš ï¸ ä½ çš„æ”¯å‡ºè¶…éæ”¶å…¥ï¼")):v("",!0)]),N.value?(a(),s("div",G,[e[14]||(e[14]=t("h3",null,"âš ï¸ æ¸›å°‘æ”¯å‡ºå»ºè­°",-1)),e[15]||(e[15]=t("p",null,"ä½ çš„æ”¯å‡ºå·²è¶…éé ç®—ï¼Œå»ºè­°æ¸›å°‘ä»¥ä¸‹é¡åˆ¥é–‹éŠ·ï¼š",-1)),t("ul",null,[(a(!0),s(V,null,w(D.value,(o,m)=>(a(),s("li",{key:m}," ğŸ“Œ "+u(o)+"ï¼ˆ"+u(I.value[o])+" å…ƒï¼‰ ",1))),128))])])):v("",!0),t("div",K,[e[17]||(e[17]=t("h3",null,"ğŸ“œ é ç®—æ­·å²",-1)),h.value.length===0?(a(),s("p",Q,"ç•¶æœˆæ²’æœ‰é ç®—è¨˜éŒ„")):(a(),s("table",X,[e[16]||(e[16]=t("thead",null,[t("tr",null,[t("th",null,"æœˆä»½"),t("th",null,"æ”¶å…¥"),t("th",null,"æ”¯å‡º"),t("th",null,"é ç®—"),t("th",null,"è¶…æ”¯")])],-1)),t("tbody",null,[(a(!0),s(V,null,w(h.value,(o,m)=>(a(),s("tr",{key:m},[t("td",null,u(o.month),1),t("td",null,u(o.income)+" å…ƒ",1),t("td",null,u(o.expense)+" å…ƒ",1),t("td",null,u(o.budget)+" å…ƒ",1),t("td",null,u(o.overBudget?"âœ”":"âŒ"),1)]))),128))])]))])]))}},te=U(Y,[["__scopeId","data-v-b4c9452a"]]);export{te as default};
