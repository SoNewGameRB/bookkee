var vx=Object.defineProperty;var yx=(n,e,t)=>e in n?vx(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var J=(n,e,t)=>yx(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Lg(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const Qe={},qr=[],Qn=()=>{},bx=()=>!1,ch=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Vg=n=>n.startsWith("onUpdate:"),tn=Object.assign,Fg=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},Ex=Object.prototype.hasOwnProperty,je=(n,e)=>Ex.call(n,e),pe=Array.isArray,Gr=n=>_l(n)==="[object Map]",uh=n=>_l(n)==="[object Set]",k_=n=>_l(n)==="[object Date]",we=n=>typeof n=="function",_t=n=>typeof n=="string",ni=n=>typeof n=="symbol",Je=n=>n!==null&&typeof n=="object",Tw=n=>(Je(n)||we(n))&&we(n.then)&&we(n.catch),Sw=Object.prototype.toString,_l=n=>Sw.call(n),wx=n=>_l(n).slice(8,-1),Iw=n=>_l(n)==="[object Object]",Bg=n=>_t(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,ga=Lg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),hh=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},Ax=/-(\w)/g,Dn=hh(n=>n.replace(Ax,(e,t)=>t?t.toUpperCase():"")),Tx=/\B([A-Z])/g,yr=hh(n=>n.replace(Tx,"-$1").toLowerCase()),dh=hh(n=>n.charAt(0).toUpperCase()+n.slice(1)),bd=hh(n=>n?`on${dh(n)}`:""),rs=(n,e)=>!Object.is(n,e),Lc=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},Cw=(n,e,t,i=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:i,value:t})},hu=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let P_;const fh=()=>P_||(P_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ug(n){if(pe(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],s=_t(i)?xx(i):Ug(i);if(s)for(const r in s)e[r]=s[r]}return e}else if(_t(n)||Je(n))return n}const Sx=/;(?![^(]*\))/g,Ix=/:([^]+)/,Cx=/\/\*[^]*?\*\//g;function xx(n){const e={};return n.replace(Cx,"").split(Sx).forEach(t=>{if(t){const i=t.split(Ix);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function tr(n){let e="";if(_t(n))e=n;else if(pe(n))for(let t=0;t<n.length;t++){const i=tr(n[t]);i&&(e+=i+" ")}else if(Je(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const Rx="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Dx=Lg(Rx);function xw(n){return!!n||n===""}function kx(n,e){if(n.length!==e.length)return!1;let t=!0;for(let i=0;t&&i<n.length;i++)t=gh(n[i],e[i]);return t}function gh(n,e){if(n===e)return!0;let t=k_(n),i=k_(e);if(t||i)return t&&i?n.getTime()===e.getTime():!1;if(t=ni(n),i=ni(e),t||i)return n===e;if(t=pe(n),i=pe(e),t||i)return t&&i?kx(n,e):!1;if(t=Je(n),i=Je(e),t||i){if(!t||!i)return!1;const s=Object.keys(n).length,r=Object.keys(e).length;if(s!==r)return!1;for(const o in n){const a=n.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!gh(n[o],e[o]))return!1}}return String(n)===String(e)}function Px(n,e){return n.findIndex(t=>gh(t,e))}const Rw=n=>!!(n&&n.__v_isRef===!0),Xe=n=>_t(n)?n:n==null?"":pe(n)||Je(n)&&(n.toString===Sw||!we(n.toString))?Rw(n)?Xe(n.value):JSON.stringify(n,Dw,2):String(n),Dw=(n,e)=>Rw(e)?Dw(n,e.value):Gr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,s],r)=>(t[Ed(i,r)+" =>"]=s,t),{})}:uh(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Ed(t))}:ni(e)?Ed(e):Je(e)&&!pe(e)&&!Iw(e)?String(e):e,Ed=(n,e="")=>{var t;return ni(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let _n;class Mx{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=_n,!e&&_n&&(this.index=(_n.scopes||(_n.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=_n;try{return _n=this,e()}finally{_n=t}}}on(){_n=this}off(){_n=this.parent}stop(e){if(this._active){this._active=!1;let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(this.effects.length=0,t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Ox(){return _n}let Ye;const wd=new WeakSet;class kw{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,_n&&_n.active&&_n.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,wd.has(this)&&(wd.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Mw(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,M_(this),Ow(this);const e=Ye,t=Ln;Ye=this,Ln=!0;try{return this.fn()}finally{Nw(this),Ye=e,Ln=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)zg(e);this.deps=this.depsTail=void 0,M_(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?wd.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){wf(this)&&this.run()}get dirty(){return wf(this)}}let Pw=0,pa,ma;function Mw(n,e=!1){if(n.flags|=8,e){n.next=ma,ma=n;return}n.next=pa,pa=n}function Hg(){Pw++}function jg(){if(--Pw>0)return;if(ma){let e=ma;for(ma=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;pa;){let e=pa;for(pa=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){n||(n=i)}e=t}}if(n)throw n}function Ow(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Nw(n){let e,t=n.depsTail,i=t;for(;i;){const s=i.prevDep;i.version===-1?(i===t&&(t=s),zg(i),Nx(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=s}n.deps=e,n.depsTail=t}function wf(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Lw(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function Lw(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===za))return;n.globalVersion=za;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!wf(n)){n.flags&=-3;return}const t=Ye,i=Ln;Ye=n,Ln=!0;try{Ow(n);const s=n.fn(n._value);(e.version===0||rs(s,n._value))&&(n._value=s,e.version++)}catch(s){throw e.version++,s}finally{Ye=t,Ln=i,Nw(n),n.flags&=-3}}function zg(n,e=!1){const{dep:t,prevSub:i,nextSub:s}=n;if(i&&(i.nextSub=s,n.prevSub=void 0),s&&(s.prevSub=i,n.nextSub=void 0),t.subs===n&&(t.subs=i,!i&&t.computed)){t.computed.flags&=-5;for(let r=t.computed.deps;r;r=r.nextDep)zg(r,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function Nx(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let Ln=!0;const Vw=[];function Is(){Vw.push(Ln),Ln=!1}function Cs(){const n=Vw.pop();Ln=n===void 0?!0:n}function M_(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=Ye;Ye=void 0;try{e()}finally{Ye=t}}}let za=0;class Lx{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Wg{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Ye||!Ln||Ye===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Ye)t=this.activeLink=new Lx(Ye,this),Ye.deps?(t.prevDep=Ye.depsTail,Ye.depsTail.nextDep=t,Ye.depsTail=t):Ye.deps=Ye.depsTail=t,Fw(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const i=t.nextDep;i.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=i),t.prevDep=Ye.depsTail,t.nextDep=void 0,Ye.depsTail.nextDep=t,Ye.depsTail=t,Ye.deps===t&&(Ye.deps=i)}return t}trigger(e){this.version++,za++,this.notify(e)}notify(e){Hg();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{jg()}}}function Fw(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)Fw(i)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const Af=new WeakMap,nr=Symbol(""),Tf=Symbol(""),Wa=Symbol("");function qt(n,e,t){if(Ln&&Ye){let i=Af.get(n);i||Af.set(n,i=new Map);let s=i.get(t);s||(i.set(t,s=new Wg),s.map=i,s.key=t),s.track()}}function vi(n,e,t,i,s,r){const o=Af.get(n);if(!o){za++;return}const a=l=>{l&&l.trigger()};if(Hg(),e==="clear")o.forEach(a);else{const l=pe(n),c=l&&Bg(t);if(l&&t==="length"){const u=Number(i);o.forEach((d,f)=>{(f==="length"||f===Wa||!ni(f)&&f>=u)&&a(d)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),c&&a(o.get(Wa)),e){case"add":l?c&&a(o.get("length")):(a(o.get(nr)),Gr(n)&&a(o.get(Tf)));break;case"delete":l||(a(o.get(nr)),Gr(n)&&a(o.get(Tf)));break;case"set":Gr(n)&&a(o.get(nr));break}}jg()}function Or(n){const e=He(n);return e===n?e:(qt(e,"iterate",Wa),xn(n)?e:e.map(Gt))}function ph(n){return qt(n=He(n),"iterate",Wa),n}const Vx={__proto__:null,[Symbol.iterator](){return Ad(this,Symbol.iterator,Gt)},concat(...n){return Or(this).concat(...n.map(e=>pe(e)?Or(e):e))},entries(){return Ad(this,"entries",n=>(n[1]=Gt(n[1]),n))},every(n,e){return hi(this,"every",n,e,void 0,arguments)},filter(n,e){return hi(this,"filter",n,e,t=>t.map(Gt),arguments)},find(n,e){return hi(this,"find",n,e,Gt,arguments)},findIndex(n,e){return hi(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return hi(this,"findLast",n,e,Gt,arguments)},findLastIndex(n,e){return hi(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return hi(this,"forEach",n,e,void 0,arguments)},includes(...n){return Td(this,"includes",n)},indexOf(...n){return Td(this,"indexOf",n)},join(n){return Or(this).join(n)},lastIndexOf(...n){return Td(this,"lastIndexOf",n)},map(n,e){return hi(this,"map",n,e,void 0,arguments)},pop(){return Yo(this,"pop")},push(...n){return Yo(this,"push",n)},reduce(n,...e){return O_(this,"reduce",n,e)},reduceRight(n,...e){return O_(this,"reduceRight",n,e)},shift(){return Yo(this,"shift")},some(n,e){return hi(this,"some",n,e,void 0,arguments)},splice(...n){return Yo(this,"splice",n)},toReversed(){return Or(this).toReversed()},toSorted(n){return Or(this).toSorted(n)},toSpliced(...n){return Or(this).toSpliced(...n)},unshift(...n){return Yo(this,"unshift",n)},values(){return Ad(this,"values",Gt)}};function Ad(n,e,t){const i=ph(n),s=i[e]();return i!==n&&!xn(n)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=t(r.value)),r}),s}const Fx=Array.prototype;function hi(n,e,t,i,s,r){const o=ph(n),a=o!==n&&!xn(n),l=o[e];if(l!==Fx[e]){const d=l.apply(n,r);return a?Gt(d):d}let c=t;o!==n&&(a?c=function(d,f){return t.call(this,Gt(d),f,n)}:t.length>2&&(c=function(d,f){return t.call(this,d,f,n)}));const u=l.call(o,c,i);return a&&s?s(u):u}function O_(n,e,t,i){const s=ph(n);let r=t;return s!==n&&(xn(n)?t.length>3&&(r=function(o,a,l){return t.call(this,o,a,l,n)}):r=function(o,a,l){return t.call(this,o,Gt(a),l,n)}),s[e](r,...i)}function Td(n,e,t){const i=He(n);qt(i,"iterate",Wa);const s=i[e](...t);return(s===-1||s===!1)&&Gg(t[0])?(t[0]=He(t[0]),i[e](...t)):s}function Yo(n,e,t=[]){Is(),Hg();const i=He(n)[e].apply(n,t);return jg(),Cs(),i}const Bx=Lg("__proto__,__v_isRef,__isVue"),Bw=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(ni));function Ux(n){ni(n)||(n=String(n));const e=He(this);return qt(e,"has",n),e.hasOwnProperty(n)}class Uw{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){if(t==="__v_skip")return e.__v_skip;const s=this._isReadonly,r=this._isShallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return r;if(t==="__v_raw")return i===(s?r?Yx:Ww:r?zw:jw).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=pe(e);if(!s){let l;if(o&&(l=Vx[t]))return l;if(t==="hasOwnProperty")return Ux}const a=Reflect.get(e,t,Zt(e)?e:i);return(ni(t)?Bw.has(t):Bx(t))||(s||qt(e,"get",t),r)?a:Zt(a)?o&&Bg(t)?a:a.value:Je(a)?s?qw(a):mh(a):a}}class Hw extends Uw{constructor(e=!1){super(!1,e)}set(e,t,i,s){let r=e[t];if(!this._isShallow){const l=ar(r);if(!xn(i)&&!ar(i)&&(r=He(r),i=He(i)),!pe(e)&&Zt(r)&&!Zt(i))return l?!1:(r.value=i,!0)}const o=pe(e)&&Bg(t)?Number(t)<e.length:je(e,t),a=Reflect.set(e,t,i,Zt(e)?e:s);return e===He(s)&&(o?rs(i,r)&&vi(e,"set",t,i):vi(e,"add",t,i)),a}deleteProperty(e,t){const i=je(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&i&&vi(e,"delete",t,void 0),s}has(e,t){const i=Reflect.has(e,t);return(!ni(t)||!Bw.has(t))&&qt(e,"has",t),i}ownKeys(e){return qt(e,"iterate",pe(e)?"length":nr),Reflect.ownKeys(e)}}class Hx extends Uw{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const jx=new Hw,zx=new Hx,Wx=new Hw(!0);const Sf=n=>n,Zl=n=>Reflect.getPrototypeOf(n);function $x(n,e,t){return function(...i){const s=this.__v_raw,r=He(s),o=Gr(r),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=s[n](...i),u=t?Sf:e?If:Gt;return!e&&qt(r,"iterate",l?Tf:nr),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function ec(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function qx(n,e){const t={get(s){const r=this.__v_raw,o=He(r),a=He(s);n||(rs(s,a)&&qt(o,"get",s),qt(o,"get",a));const{has:l}=Zl(o),c=e?Sf:n?If:Gt;if(l.call(o,s))return c(r.get(s));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(s)},get size(){const s=this.__v_raw;return!n&&qt(He(s),"iterate",nr),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,o=He(r),a=He(s);return n||(rs(s,a)&&qt(o,"has",s),qt(o,"has",a)),s===a?r.has(s):r.has(s)||r.has(a)},forEach(s,r){const o=this,a=o.__v_raw,l=He(a),c=e?Sf:n?If:Gt;return!n&&qt(l,"iterate",nr),a.forEach((u,d)=>s.call(r,c(u),c(d),o))}};return tn(t,n?{add:ec("add"),set:ec("set"),delete:ec("delete"),clear:ec("clear")}:{add(s){!e&&!xn(s)&&!ar(s)&&(s=He(s));const r=He(this);return Zl(r).has.call(r,s)||(r.add(s),vi(r,"add",s,s)),this},set(s,r){!e&&!xn(r)&&!ar(r)&&(r=He(r));const o=He(this),{has:a,get:l}=Zl(o);let c=a.call(o,s);c||(s=He(s),c=a.call(o,s));const u=l.call(o,s);return o.set(s,r),c?rs(r,u)&&vi(o,"set",s,r):vi(o,"add",s,r),this},delete(s){const r=He(this),{has:o,get:a}=Zl(r);let l=o.call(r,s);l||(s=He(s),l=o.call(r,s)),a&&a.call(r,s);const c=r.delete(s);return l&&vi(r,"delete",s,void 0),c},clear(){const s=He(this),r=s.size!==0,o=s.clear();return r&&vi(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=$x(s,n,e)}),t}function $g(n,e){const t=qx(n,e);return(i,s,r)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?i:Reflect.get(je(t,s)&&s in i?t:i,s,r)}const Gx={get:$g(!1,!1)},Kx={get:$g(!1,!0)},Qx={get:$g(!0,!1)};const jw=new WeakMap,zw=new WeakMap,Ww=new WeakMap,Yx=new WeakMap;function Xx(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Jx(n){return n.__v_skip||!Object.isExtensible(n)?0:Xx(wx(n))}function mh(n){return ar(n)?n:qg(n,!1,jx,Gx,jw)}function $w(n){return qg(n,!1,Wx,Kx,zw)}function qw(n){return qg(n,!0,zx,Qx,Ww)}function qg(n,e,t,i,s){if(!Je(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const r=s.get(n);if(r)return r;const o=Jx(n);if(o===0)return n;const a=new Proxy(n,o===2?i:t);return s.set(n,a),a}function Kr(n){return ar(n)?Kr(n.__v_raw):!!(n&&n.__v_isReactive)}function ar(n){return!!(n&&n.__v_isReadonly)}function xn(n){return!!(n&&n.__v_isShallow)}function Gg(n){return n?!!n.__v_raw:!1}function He(n){const e=n&&n.__v_raw;return e?He(e):n}function Zx(n){return!je(n,"__v_skip")&&Object.isExtensible(n)&&Cw(n,"__v_skip",!0),n}const Gt=n=>Je(n)?mh(n):n,If=n=>Je(n)?qw(n):n;function Zt(n){return n?n.__v_isRef===!0:!1}function Ce(n){return Gw(n,!1)}function eR(n){return Gw(n,!0)}function Gw(n,e){return Zt(n)?n:new tR(n,e)}class tR{constructor(e,t){this.dep=new Wg,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:He(e),this._value=t?e:Gt(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,i=this.__v_isShallow||xn(e)||ar(e);e=i?e:He(e),rs(e,t)&&(this._rawValue=e,this._value=i?e:Gt(e),this.dep.trigger())}}function ir(n){return Zt(n)?n.value:n}const nR={get:(n,e,t)=>e==="__v_raw"?n:ir(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const s=n[e];return Zt(s)&&!Zt(t)?(s.value=t,!0):Reflect.set(n,e,t,i)}};function Kw(n){return Kr(n)?n:new Proxy(n,nR)}class iR{constructor(e,t,i){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Wg(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=za-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Ye!==this)return Mw(this,!0),!0}get value(){const e=this.dep.track();return Lw(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function sR(n,e,t=!1){let i,s;return we(n)?i=n:(i=n.get,s=n.set),new iR(i,s,t)}const tc={},du=new WeakMap;let Hs;function rR(n,e=!1,t=Hs){if(t){let i=du.get(t);i||du.set(t,i=[]),i.push(n)}}function oR(n,e,t=Qe){const{immediate:i,deep:s,once:r,scheduler:o,augmentJob:a,call:l}=t,c=S=>s?S:xn(S)||s===!1||s===0?yi(S,1):yi(S);let u,d,f,g,m=!1,_=!1;if(Zt(n)?(d=()=>n.value,m=xn(n)):Kr(n)?(d=()=>c(n),m=!0):pe(n)?(_=!0,m=n.some(S=>Kr(S)||xn(S)),d=()=>n.map(S=>{if(Zt(S))return S.value;if(Kr(S))return c(S);if(we(S))return l?l(S,2):S()})):we(n)?e?d=l?()=>l(n,2):n:d=()=>{if(f){Is();try{f()}finally{Cs()}}const S=Hs;Hs=u;try{return l?l(n,3,[g]):n(g)}finally{Hs=S}}:d=Qn,e&&s){const S=d,D=s===!0?1/0:s;d=()=>yi(S(),D)}const y=Ox(),E=()=>{u.stop(),y&&y.active&&Fg(y.effects,u)};if(r&&e){const S=e;e=(...D)=>{S(...D),E()}}let I=_?new Array(n.length).fill(tc):tc;const R=S=>{if(!(!(u.flags&1)||!u.dirty&&!S))if(e){const D=u.run();if(s||m||(_?D.some((N,T)=>rs(N,I[T])):rs(D,I))){f&&f();const N=Hs;Hs=u;try{const T=[D,I===tc?void 0:_&&I[0]===tc?[]:I,g];l?l(e,3,T):e(...T),I=D}finally{Hs=N}}}else u.run()};return a&&a(R),u=new kw(d),u.scheduler=o?()=>o(R,!1):R,g=S=>rR(S,!1,u),f=u.onStop=()=>{const S=du.get(u);if(S){if(l)l(S,4);else for(const D of S)D();du.delete(u)}},e?i?R(!0):I=u.run():o?o(R.bind(null,!0),!0):u.run(),E.pause=u.pause.bind(u),E.resume=u.resume.bind(u),E.stop=E,E}function yi(n,e=1/0,t){if(e<=0||!Je(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,Zt(n))yi(n.value,e,t);else if(pe(n))for(let i=0;i<n.length;i++)yi(n[i],e,t);else if(uh(n)||Gr(n))n.forEach(i=>{yi(i,e,t)});else if(Iw(n)){for(const i in n)yi(n[i],e,t);for(const i of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,i)&&yi(n[i],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function vl(n,e,t,i){try{return i?n(...i):n()}catch(s){_h(s,e,t)}}function ii(n,e,t,i){if(we(n)){const s=vl(n,e,t,i);return s&&Tw(s)&&s.catch(r=>{_h(r,e,t)}),s}if(pe(n)){const s=[];for(let r=0;r<n.length;r++)s.push(ii(n[r],e,t,i));return s}}function _h(n,e,t,i=!0){const s=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Qe;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](n,l,c)===!1)return}a=a.parent}if(r){Is(),vl(r,null,10,[n,l,c]),Cs();return}}aR(n,t,s,i,o)}function aR(n,e,t,i=!0,s=!1){if(s)throw n;console.error(n)}const an=[];let Wn=-1;const Qr=[];let $i=null,Vr=0;const Qw=Promise.resolve();let fu=null;function vh(n){const e=fu||Qw;return n?e.then(this?n.bind(this):n):e}function lR(n){let e=Wn+1,t=an.length;for(;e<t;){const i=e+t>>>1,s=an[i],r=$a(s);r<n||r===n&&s.flags&2?e=i+1:t=i}return e}function Kg(n){if(!(n.flags&1)){const e=$a(n),t=an[an.length-1];!t||!(n.flags&2)&&e>=$a(t)?an.push(n):an.splice(lR(e),0,n),n.flags|=1,Yw()}}function Yw(){fu||(fu=Qw.then(Jw))}function cR(n){pe(n)?Qr.push(...n):$i&&n.id===-1?$i.splice(Vr+1,0,n):n.flags&1||(Qr.push(n),n.flags|=1),Yw()}function N_(n,e,t=Wn+1){for(;t<an.length;t++){const i=an[t];if(i&&i.flags&2){if(n&&i.id!==n.uid)continue;an.splice(t,1),t--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Xw(n){if(Qr.length){const e=[...new Set(Qr)].sort((t,i)=>$a(t)-$a(i));if(Qr.length=0,$i){$i.push(...e);return}for($i=e,Vr=0;Vr<$i.length;Vr++){const t=$i[Vr];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}$i=null,Vr=0}}const $a=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Jw(n){try{for(Wn=0;Wn<an.length;Wn++){const e=an[Wn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),vl(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Wn<an.length;Wn++){const e=an[Wn];e&&(e.flags&=-2)}Wn=-1,an.length=0,Xw(),fu=null,(an.length||Qr.length)&&Jw()}}let yn=null,Zw=null;function gu(n){const e=yn;return yn=n,Zw=n&&n.type.__scopeId||null,e}function uR(n,e=yn,t){if(!e||n._n)return n;const i=(...s)=>{i._d&&K_(-1);const r=gu(e);let o;try{o=n(...s)}finally{gu(r),i._d&&K_(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Sn(n,e){if(yn===null)return n;const t=Ah(yn),i=n.dirs||(n.dirs=[]);for(let s=0;s<e.length;s++){let[r,o,a,l=Qe]=e[s];r&&(we(r)&&(r={mounted:r,updated:r}),r.deep&&yi(o),i.push({dir:r,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function Ns(n,e,t,i){const s=n.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(Is(),ii(l,t,8,[n.el,a,n,e]),Cs())}}const e0=Symbol("_vte"),hR=n=>n.__isTeleport,_a=n=>n&&(n.disabled||n.disabled===""),L_=n=>n&&(n.defer||n.defer===""),V_=n=>typeof SVGElement<"u"&&n instanceof SVGElement,F_=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,Cf=(n,e)=>{const t=n&&n.to;return _t(t)?e?e(t):null:t},t0={name:"Teleport",__isTeleport:!0,process(n,e,t,i,s,r,o,a,l,c){const{mc:u,pc:d,pbc:f,o:{insert:g,querySelector:m,createText:_,createComment:y}}=c,E=_a(e.props);let{shapeFlag:I,children:R,dynamicChildren:S}=e;if(n==null){const D=e.el=_(""),N=e.anchor=_("");g(D,t,i),g(N,t,i);const T=(w,C)=>{I&16&&(s&&s.isCE&&(s.ce._teleportTarget=w),u(R,w,C,s,r,o,a,l))},b=()=>{const w=e.target=Cf(e.props,m),C=n0(w,e,_,g);w&&(o!=="svg"&&V_(w)?o="svg":o!=="mathml"&&F_(w)&&(o="mathml"),E||(T(w,C),Vc(e,!1)))};E&&(T(t,N),Vc(e,!0)),L_(e.props)?on(()=>{b(),e.el.__isMounted=!0},r):b()}else{if(L_(e.props)&&!n.el.__isMounted){on(()=>{t0.process(n,e,t,i,s,r,o,a,l,c),delete n.el.__isMounted},r);return}e.el=n.el,e.targetStart=n.targetStart;const D=e.anchor=n.anchor,N=e.target=n.target,T=e.targetAnchor=n.targetAnchor,b=_a(n.props),w=b?t:N,C=b?D:T;if(o==="svg"||V_(N)?o="svg":(o==="mathml"||F_(N))&&(o="mathml"),S?(f(n.dynamicChildren,S,w,s,r,o,a),Xg(n,e,!0)):l||d(n,e,w,C,s,r,o,a,!1),E)b?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):nc(e,t,D,c,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const x=e.target=Cf(e.props,m);x&&nc(e,x,null,c,0)}else b&&nc(e,N,T,c,1);Vc(e,E)}},remove(n,e,t,{um:i,o:{remove:s}},r){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:u,target:d,props:f}=n;if(d&&(s(c),s(u)),r&&s(l),o&16){const g=r||!_a(f);for(let m=0;m<a.length;m++){const _=a[m];i(_,e,t,g,!!_.dynamicChildren)}}},move:nc,hydrate:dR};function nc(n,e,t,{o:{insert:i},m:s},r=2){r===0&&i(n.targetAnchor,e,t);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=n,d=r===2;if(d&&i(o,e,t),(!d||_a(u))&&l&16)for(let f=0;f<c.length;f++)s(c[f],e,t,2);d&&i(a,e,t)}function dR(n,e,t,i,s,r,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:u}},d){const f=e.target=Cf(e.props,l);if(f){const g=_a(e.props),m=f._lpa||f.firstChild;if(e.shapeFlag&16)if(g)e.anchor=d(o(n),e,a(n),t,i,s,r),e.targetStart=m,e.targetAnchor=m&&o(m);else{e.anchor=o(n);let _=m;for(;_;){if(_&&_.nodeType===8){if(_.data==="teleport start anchor")e.targetStart=_;else if(_.data==="teleport anchor"){e.targetAnchor=_,f._lpa=e.targetAnchor&&o(e.targetAnchor);break}}_=o(_)}e.targetAnchor||n0(f,e,u,c),d(m&&o(m),e,f,t,i,s,r)}Vc(e,g)}return e.anchor&&o(e.anchor)}const fR=t0;function Vc(n,e){const t=n.ctx;if(t&&t.ut){let i,s;for(e?(i=n.el,s=n.anchor):(i=n.targetStart,s=n.targetAnchor);i&&i!==s;)i.nodeType===1&&i.setAttribute("data-v-owner",t.uid),i=i.nextSibling;t.ut()}}function n0(n,e,t,i){const s=e.targetStart=t(""),r=e.targetAnchor=t("");return s[e0]=r,n&&(i(s,n),i(r,n)),r}function Qg(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Qg(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}/*! #__NO_SIDE_EFFECTS__ */function yh(n,e){return we(n)?tn({name:n.name},e,{setup:n}):n}function i0(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function pu(n,e,t,i,s=!1){if(pe(n)){n.forEach((m,_)=>pu(m,e&&(pe(e)?e[_]:e),t,i,s));return}if(va(i)&&!s){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&pu(n,e,t,i.component.subTree);return}const r=i.shapeFlag&4?Ah(i.component):i.el,o=s?null:r,{i:a,r:l}=n,c=e&&e.r,u=a.refs===Qe?a.refs={}:a.refs,d=a.setupState,f=He(d),g=d===Qe?()=>!1:m=>je(f,m);if(c!=null&&c!==l&&(_t(c)?(u[c]=null,g(c)&&(d[c]=null)):Zt(c)&&(c.value=null)),we(l))vl(l,a,12,[o,u]);else{const m=_t(l),_=Zt(l);if(m||_){const y=()=>{if(n.f){const E=m?g(l)?d[l]:u[l]:l.value;s?pe(E)&&Fg(E,r):pe(E)?E.includes(r)||E.push(r):m?(u[l]=[r],g(l)&&(d[l]=u[l])):(l.value=[r],n.k&&(u[n.k]=l.value))}else m?(u[l]=o,g(l)&&(d[l]=o)):_&&(l.value=o,n.k&&(u[n.k]=o))};o?(y.id=-1,on(y,t)):y()}}}fh().requestIdleCallback;fh().cancelIdleCallback;const va=n=>!!n.type.__asyncLoader,s0=n=>n.type.__isKeepAlive;function gR(n,e){r0(n,"a",e)}function pR(n,e){r0(n,"da",e)}function r0(n,e,t=Qt){const i=n.__wdc||(n.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(bh(e,i,t),t){let s=t.parent;for(;s&&s.parent;)s0(s.parent.vnode)&&mR(i,e,t,s),s=s.parent}}function mR(n,e,t,i){const s=bh(e,n,i,!0);o0(()=>{Fg(i[e],s)},t)}function bh(n,e,t=Qt,i=!1){if(t){const s=t[n]||(t[n]=[]),r=e.__weh||(e.__weh=(...o)=>{Is();const a=yl(t),l=ii(e,t,n,o);return a(),Cs(),l});return i?s.unshift(r):s.push(r),r}}const Ni=n=>(e,t=Qt)=>{(!Ga||n==="sp")&&bh(n,(...i)=>e(...i),t)},_R=Ni("bm"),Io=Ni("m"),vR=Ni("bu"),yR=Ni("u"),bR=Ni("bum"),o0=Ni("um"),ER=Ni("sp"),wR=Ni("rtg"),AR=Ni("rtc");function TR(n,e=Qt){bh("ec",n,e)}const SR="components";function IR(n,e){return xR(SR,n,!0,e)||n}const CR=Symbol.for("v-ndc");function xR(n,e,t=!0,i=!1){const s=yn||Qt;if(s){const r=s.type;{const a=pD(r,!1);if(a&&(a===e||a===Dn(e)||a===dh(Dn(e))))return r}const o=B_(s[n]||r[n],e)||B_(s.appContext[n],e);return!o&&i?r:o}}function B_(n,e){return n&&(n[e]||n[Dn(e)]||n[dh(Dn(e))])}function lr(n,e,t,i){let s;const r=t,o=pe(n);if(o||_t(n)){const a=o&&Kr(n);let l=!1;a&&(l=!xn(n),n=ph(n)),s=new Array(n.length);for(let c=0,u=n.length;c<u;c++)s[c]=e(l?Gt(n[c]):n[c],c,void 0,r)}else if(typeof n=="number"){s=new Array(n);for(let a=0;a<n;a++)s[a]=e(a+1,a,void 0,r)}else if(Je(n))if(n[Symbol.iterator])s=Array.from(n,(a,l)=>e(a,l,void 0,r));else{const a=Object.keys(n);s=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];s[l]=e(n[u],u,l,r)}}else s=[];return s}const xf=n=>n?I0(n)?Ah(n):xf(n.parent):null,ya=tn(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>xf(n.parent),$root:n=>xf(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>l0(n),$forceUpdate:n=>n.f||(n.f=()=>{Kg(n.update)}),$nextTick:n=>n.n||(n.n=vh.bind(n.proxy)),$watch:n=>QR.bind(n)}),Sd=(n,e)=>n!==Qe&&!n.__isScriptSetup&&je(n,e),RR={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return i[e];case 2:return s[e];case 4:return t[e];case 3:return r[e]}else{if(Sd(i,e))return o[e]=1,i[e];if(s!==Qe&&je(s,e))return o[e]=2,s[e];if((c=n.propsOptions[0])&&je(c,e))return o[e]=3,r[e];if(t!==Qe&&je(t,e))return o[e]=4,t[e];Rf&&(o[e]=0)}}const u=ya[e];let d,f;if(u)return e==="$attrs"&&qt(n.attrs,"get",""),u(n);if((d=a.__cssModules)&&(d=d[e]))return d;if(t!==Qe&&je(t,e))return o[e]=4,t[e];if(f=l.config.globalProperties,je(f,e))return f[e]},set({_:n},e,t){const{data:i,setupState:s,ctx:r}=n;return Sd(s,e)?(s[e]=t,!0):i!==Qe&&je(i,e)?(i[e]=t,!0):je(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(r[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:s,propsOptions:r}},o){let a;return!!t[o]||n!==Qe&&je(n,o)||Sd(e,o)||(a=r[0])&&je(a,o)||je(i,o)||je(ya,o)||je(s.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:je(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function U_(n){return pe(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Rf=!0;function DR(n){const e=l0(n),t=n.proxy,i=n.ctx;Rf=!1,e.beforeCreate&&H_(e.beforeCreate,n,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:g,updated:m,activated:_,deactivated:y,beforeDestroy:E,beforeUnmount:I,destroyed:R,unmounted:S,render:D,renderTracked:N,renderTriggered:T,errorCaptured:b,serverPrefetch:w,expose:C,inheritAttrs:x,components:O,directives:k,filters:$e}=e;if(c&&kR(c,i,null),o)for(const re in o){const de=o[re];we(de)&&(i[re]=de.bind(t))}if(s){const re=s.call(t,t);Je(re)&&(n.data=mh(re))}if(Rf=!0,r)for(const re in r){const de=r[re],Fe=we(de)?de.bind(t,t):we(de.get)?de.get.bind(t,t):Qn,Tt=!we(de)&&we(de.set)?de.set.bind(t):Qn,xt=lt({get:Fe,set:Tt});Object.defineProperty(i,re,{enumerable:!0,configurable:!0,get:()=>xt.value,set:Be=>xt.value=Be})}if(a)for(const re in a)a0(a[re],i,t,re);if(l){const re=we(l)?l.call(t):l;Reflect.ownKeys(re).forEach(de=>{Fc(de,re[de])})}u&&H_(u,n,"c");function _e(re,de){pe(de)?de.forEach(Fe=>re(Fe.bind(t))):de&&re(de.bind(t))}if(_e(_R,d),_e(Io,f),_e(vR,g),_e(yR,m),_e(gR,_),_e(pR,y),_e(TR,b),_e(AR,N),_e(wR,T),_e(bR,I),_e(o0,S),_e(ER,w),pe(C))if(C.length){const re=n.exposed||(n.exposed={});C.forEach(de=>{Object.defineProperty(re,de,{get:()=>t[de],set:Fe=>t[de]=Fe})})}else n.exposed||(n.exposed={});D&&n.render===Qn&&(n.render=D),x!=null&&(n.inheritAttrs=x),O&&(n.components=O),k&&(n.directives=k),w&&i0(n)}function kR(n,e,t=Qn){pe(n)&&(n=Df(n));for(const i in n){const s=n[i];let r;Je(s)?"default"in s?r=Yn(s.from||i,s.default,!0):r=Yn(s.from||i):r=Yn(s),Zt(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function H_(n,e,t){ii(pe(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function a0(n,e,t,i){let s=i.includes(".")?E0(t,i):()=>t[i];if(_t(n)){const r=e[n];we(r)&&Xn(s,r)}else if(we(n))Xn(s,n.bind(t));else if(Je(n))if(pe(n))n.forEach(r=>a0(r,e,t,i));else{const r=we(n.handler)?n.handler.bind(t):e[n.handler];we(r)&&Xn(s,r,n)}}function l0(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,a=r.get(e);let l;return a?l=a:!s.length&&!t&&!i?l=e:(l={},s.length&&s.forEach(c=>mu(l,c,o,!0)),mu(l,e,o)),Je(e)&&r.set(e,l),l}function mu(n,e,t,i=!1){const{mixins:s,extends:r}=e;r&&mu(n,r,t,!0),s&&s.forEach(o=>mu(n,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const a=PR[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const PR={data:j_,props:z_,emits:z_,methods:ra,computed:ra,beforeCreate:rn,created:rn,beforeMount:rn,mounted:rn,beforeUpdate:rn,updated:rn,beforeDestroy:rn,beforeUnmount:rn,destroyed:rn,unmounted:rn,activated:rn,deactivated:rn,errorCaptured:rn,serverPrefetch:rn,components:ra,directives:ra,watch:OR,provide:j_,inject:MR};function j_(n,e){return e?n?function(){return tn(we(n)?n.call(this,this):n,we(e)?e.call(this,this):e)}:e:n}function MR(n,e){return ra(Df(n),Df(e))}function Df(n){if(pe(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function rn(n,e){return n?[...new Set([].concat(n,e))]:e}function ra(n,e){return n?tn(Object.create(null),n,e):e}function z_(n,e){return n?pe(n)&&pe(e)?[...new Set([...n,...e])]:tn(Object.create(null),U_(n),U_(e??{})):e}function OR(n,e){if(!n)return e;if(!e)return n;const t=tn(Object.create(null),n);for(const i in e)t[i]=rn(n[i],e[i]);return t}function c0(){return{app:null,config:{isNativeTag:bx,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let NR=0;function LR(n,e){return function(i,s=null){we(i)||(i=tn({},i)),s!=null&&!Je(s)&&(s=null);const r=c0(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:NR++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:_D,get config(){return r.config},set config(u){},use(u,...d){return o.has(u)||(u&&we(u.install)?(o.add(u),u.install(c,...d)):we(u)&&(o.add(u),u(c,...d))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,d){return d?(r.components[u]=d,c):r.components[u]},directive(u,d){return d?(r.directives[u]=d,c):r.directives[u]},mount(u,d,f){if(!l){const g=c._ceVNode||Xt(i,s);return g.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),n(g,u,f),l=!0,c._container=u,u.__vue_app__=c,Ah(g.component)}},onUnmount(u){a.push(u)},unmount(){l&&(ii(a,c._instance,16),n(null,c._container),delete c._container.__vue_app__)},provide(u,d){return r.provides[u]=d,c},runWithContext(u){const d=Yr;Yr=c;try{return u()}finally{Yr=d}}};return c}}let Yr=null;function Fc(n,e){if(Qt){let t=Qt.provides;const i=Qt.parent&&Qt.parent.provides;i===t&&(t=Qt.provides=Object.create(i)),t[n]=e}}function Yn(n,e,t=!1){const i=Qt||yn;if(i||Yr){const s=Yr?Yr._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&n in s)return s[n];if(arguments.length>1)return t&&we(e)?e.call(i&&i.proxy):e}}const u0={},h0=()=>Object.create(u0),d0=n=>Object.getPrototypeOf(n)===u0;function VR(n,e,t,i=!1){const s={},r=h0();n.propsDefaults=Object.create(null),f0(n,e,s,r);for(const o in n.propsOptions[0])o in s||(s[o]=void 0);t?n.props=i?s:$w(s):n.type.props?n.props=s:n.props=r,n.attrs=r}function FR(n,e,t,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=n,a=He(s),[l]=n.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(Eh(n.emitsOptions,f))continue;const g=e[f];if(l)if(je(r,f))g!==r[f]&&(r[f]=g,c=!0);else{const m=Dn(f);s[m]=kf(l,a,m,g,n,!1)}else g!==r[f]&&(r[f]=g,c=!0)}}}else{f0(n,e,s,r)&&(c=!0);let u;for(const d in a)(!e||!je(e,d)&&((u=yr(d))===d||!je(e,u)))&&(l?t&&(t[d]!==void 0||t[u]!==void 0)&&(s[d]=kf(l,a,d,void 0,n,!0)):delete s[d]);if(r!==a)for(const d in r)(!e||!je(e,d))&&(delete r[d],c=!0)}c&&vi(n.attrs,"set","")}function f0(n,e,t,i){const[s,r]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(ga(l))continue;const c=e[l];let u;s&&je(s,u=Dn(l))?!r||!r.includes(u)?t[u]=c:(a||(a={}))[u]=c:Eh(n.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(r){const l=He(t),c=a||Qe;for(let u=0;u<r.length;u++){const d=r[u];t[d]=kf(s,l,d,c[d],n,!je(c,d))}}return o}function kf(n,e,t,i,s,r){const o=n[t];if(o!=null){const a=je(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&we(l)){const{propsDefaults:c}=s;if(t in c)i=c[t];else{const u=yl(s);i=c[t]=l.call(null,e),u()}}else i=l;s.ce&&s.ce._setProp(t,i)}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===yr(t))&&(i=!0))}return i}const BR=new WeakMap;function g0(n,e,t=!1){const i=t?BR:e.propsCache,s=i.get(n);if(s)return s;const r=n.props,o={},a=[];let l=!1;if(!we(n)){const u=d=>{l=!0;const[f,g]=g0(d,e,!0);tn(o,f),g&&a.push(...g)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!r&&!l)return Je(n)&&i.set(n,qr),qr;if(pe(r))for(let u=0;u<r.length;u++){const d=Dn(r[u]);W_(d)&&(o[d]=Qe)}else if(r)for(const u in r){const d=Dn(u);if(W_(d)){const f=r[u],g=o[d]=pe(f)||we(f)?{type:f}:tn({},f),m=g.type;let _=!1,y=!0;if(pe(m))for(let E=0;E<m.length;++E){const I=m[E],R=we(I)&&I.name;if(R==="Boolean"){_=!0;break}else R==="String"&&(y=!1)}else _=we(m)&&m.name==="Boolean";g[0]=_,g[1]=y,(_||je(g,"default"))&&a.push(d)}}const c=[o,a];return Je(n)&&i.set(n,c),c}function W_(n){return n[0]!=="$"&&!ga(n)}const p0=n=>n[0]==="_"||n==="$stable",Yg=n=>pe(n)?n.map(Gn):[Gn(n)],UR=(n,e,t)=>{if(e._n)return e;const i=uR((...s)=>Yg(e(...s)),t);return i._c=!1,i},m0=(n,e,t)=>{const i=n._ctx;for(const s in n){if(p0(s))continue;const r=n[s];if(we(r))e[s]=UR(s,r,i);else if(r!=null){const o=Yg(r);e[s]=()=>o}}},_0=(n,e)=>{const t=Yg(e);n.slots.default=()=>t},v0=(n,e,t)=>{for(const i in e)(t||i!=="_")&&(n[i]=e[i])},HR=(n,e,t)=>{const i=n.slots=h0();if(n.vnode.shapeFlag&32){const s=e._;s?(v0(i,e,t),t&&Cw(i,"_",s,!0)):m0(e,i)}else e&&_0(n,e)},jR=(n,e,t)=>{const{vnode:i,slots:s}=n;let r=!0,o=Qe;if(i.shapeFlag&32){const a=e._;a?t&&a===1?r=!1:v0(s,e,t):(r=!e.$stable,m0(e,s)),o=e}else e&&(_0(n,e),o={default:1});if(r)for(const a in s)!p0(a)&&o[a]==null&&delete s[a]},on=nD;function zR(n){return WR(n)}function WR(n,e){const t=fh();t.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:g=Qn,insertStaticContent:m}=n,_=(P,M,L,z=null,q=null,W=null,Z=void 0,Y=null,Q=!!M.dynamicChildren)=>{if(P===M)return;P&&!Xo(P,M)&&(z=j(P),Be(P,q,W,!0),P=null),M.patchFlag===-2&&(Q=!1,M.dynamicChildren=null);const{type:K,ref:ue,shapeFlag:te}=M;switch(K){case wh:y(P,M,L,z);break;case cr:E(P,M,L,z);break;case Bc:P==null&&I(M,L,z,Z);break;case Mt:O(P,M,L,z,q,W,Z,Y,Q);break;default:te&1?D(P,M,L,z,q,W,Z,Y,Q):te&6?k(P,M,L,z,q,W,Z,Y,Q):(te&64||te&128)&&K.process(P,M,L,z,q,W,Z,Y,Q,se)}ue!=null&&q&&pu(ue,P&&P.ref,W,M||P,!M)},y=(P,M,L,z)=>{if(P==null)i(M.el=a(M.children),L,z);else{const q=M.el=P.el;M.children!==P.children&&c(q,M.children)}},E=(P,M,L,z)=>{P==null?i(M.el=l(M.children||""),L,z):M.el=P.el},I=(P,M,L,z)=>{[P.el,P.anchor]=m(P.children,M,L,z,P.el,P.anchor)},R=({el:P,anchor:M},L,z)=>{let q;for(;P&&P!==M;)q=f(P),i(P,L,z),P=q;i(M,L,z)},S=({el:P,anchor:M})=>{let L;for(;P&&P!==M;)L=f(P),s(P),P=L;s(M)},D=(P,M,L,z,q,W,Z,Y,Q)=>{M.type==="svg"?Z="svg":M.type==="math"&&(Z="mathml"),P==null?N(M,L,z,q,W,Z,Y,Q):w(P,M,q,W,Z,Y,Q)},N=(P,M,L,z,q,W,Z,Y)=>{let Q,K;const{props:ue,shapeFlag:te,transition:oe,dirs:fe}=P;if(Q=P.el=o(P.type,W,ue&&ue.is,ue),te&8?u(Q,P.children):te&16&&b(P.children,Q,null,z,q,Id(P,W),Z,Y),fe&&Ns(P,null,z,"created"),T(Q,P,P.scopeId,Z,z),ue){for(const Ae in ue)Ae!=="value"&&!ga(Ae)&&r(Q,Ae,null,ue[Ae],W,z);"value"in ue&&r(Q,"value",null,ue.value,W),(K=ue.onVnodeBeforeMount)&&jn(K,z,P)}fe&&Ns(P,null,z,"beforeMount");const he=$R(q,oe);he&&oe.beforeEnter(Q),i(Q,M,L),((K=ue&&ue.onVnodeMounted)||he||fe)&&on(()=>{K&&jn(K,z,P),he&&oe.enter(Q),fe&&Ns(P,null,z,"mounted")},q)},T=(P,M,L,z,q)=>{if(L&&g(P,L),z)for(let W=0;W<z.length;W++)g(P,z[W]);if(q){let W=q.subTree;if(M===W||A0(W.type)&&(W.ssContent===M||W.ssFallback===M)){const Z=q.vnode;T(P,Z,Z.scopeId,Z.slotScopeIds,q.parent)}}},b=(P,M,L,z,q,W,Z,Y,Q=0)=>{for(let K=Q;K<P.length;K++){const ue=P[K]=Y?qi(P[K]):Gn(P[K]);_(null,ue,M,L,z,q,W,Z,Y)}},w=(P,M,L,z,q,W,Z)=>{const Y=M.el=P.el;let{patchFlag:Q,dynamicChildren:K,dirs:ue}=M;Q|=P.patchFlag&16;const te=P.props||Qe,oe=M.props||Qe;let fe;if(L&&Ls(L,!1),(fe=oe.onVnodeBeforeUpdate)&&jn(fe,L,M,P),ue&&Ns(M,P,L,"beforeUpdate"),L&&Ls(L,!0),(te.innerHTML&&oe.innerHTML==null||te.textContent&&oe.textContent==null)&&u(Y,""),K?C(P.dynamicChildren,K,Y,L,z,Id(M,q),W):Z||de(P,M,Y,null,L,z,Id(M,q),W,!1),Q>0){if(Q&16)x(Y,te,oe,L,q);else if(Q&2&&te.class!==oe.class&&r(Y,"class",null,oe.class,q),Q&4&&r(Y,"style",te.style,oe.style,q),Q&8){const he=M.dynamicProps;for(let Ae=0;Ae<he.length;Ae++){const Pe=he[Ae],Bt=te[Pe],Rt=oe[Pe];(Rt!==Bt||Pe==="value")&&r(Y,Pe,Bt,Rt,q,L)}}Q&1&&P.children!==M.children&&u(Y,M.children)}else!Z&&K==null&&x(Y,te,oe,L,q);((fe=oe.onVnodeUpdated)||ue)&&on(()=>{fe&&jn(fe,L,M,P),ue&&Ns(M,P,L,"updated")},z)},C=(P,M,L,z,q,W,Z)=>{for(let Y=0;Y<M.length;Y++){const Q=P[Y],K=M[Y],ue=Q.el&&(Q.type===Mt||!Xo(Q,K)||Q.shapeFlag&70)?d(Q.el):L;_(Q,K,ue,null,z,q,W,Z,!0)}},x=(P,M,L,z,q)=>{if(M!==L){if(M!==Qe)for(const W in M)!ga(W)&&!(W in L)&&r(P,W,M[W],null,q,z);for(const W in L){if(ga(W))continue;const Z=L[W],Y=M[W];Z!==Y&&W!=="value"&&r(P,W,Y,Z,q,z)}"value"in L&&r(P,"value",M.value,L.value,q)}},O=(P,M,L,z,q,W,Z,Y,Q)=>{const K=M.el=P?P.el:a(""),ue=M.anchor=P?P.anchor:a("");let{patchFlag:te,dynamicChildren:oe,slotScopeIds:fe}=M;fe&&(Y=Y?Y.concat(fe):fe),P==null?(i(K,L,z),i(ue,L,z),b(M.children||[],L,ue,q,W,Z,Y,Q)):te>0&&te&64&&oe&&P.dynamicChildren?(C(P.dynamicChildren,oe,L,q,W,Z,Y),(M.key!=null||q&&M===q.subTree)&&Xg(P,M,!0)):de(P,M,L,ue,q,W,Z,Y,Q)},k=(P,M,L,z,q,W,Z,Y,Q)=>{M.slotScopeIds=Y,P==null?M.shapeFlag&512?q.ctx.activate(M,L,z,Z,Q):$e(M,L,z,q,W,Z,Q):Se(P,M,Q)},$e=(P,M,L,z,q,W,Z)=>{const Y=P.component=uD(P,z,q);if(s0(P)&&(Y.ctx.renderer=se),hD(Y,!1,Z),Y.asyncDep){if(q&&q.registerDep(Y,_e,Z),!P.el){const Q=Y.subTree=Xt(cr);E(null,Q,M,L)}}else _e(Y,P,M,L,q,W,Z)},Se=(P,M,L)=>{const z=M.component=P.component;if(eD(P,M,L))if(z.asyncDep&&!z.asyncResolved){re(z,M,L);return}else z.next=M,z.update();else M.el=P.el,z.vnode=M},_e=(P,M,L,z,q,W,Z)=>{const Y=()=>{if(P.isMounted){let{next:te,bu:oe,u:fe,parent:he,vnode:Ae}=P;{const Ut=y0(P);if(Ut){te&&(te.el=Ae.el,re(P,te,Z)),Ut.asyncDep.then(()=>{P.isUnmounted||Y()});return}}let Pe=te,Bt;Ls(P,!1),te?(te.el=Ae.el,re(P,te,Z)):te=Ae,oe&&Lc(oe),(Bt=te.props&&te.props.onVnodeBeforeUpdate)&&jn(Bt,he,te,Ae),Ls(P,!0);const Rt=q_(P),wn=P.subTree;P.subTree=Rt,_(wn,Rt,d(wn.el),j(wn),P,q,W),te.el=Rt.el,Pe===null&&tD(P,Rt.el),fe&&on(fe,q),(Bt=te.props&&te.props.onVnodeUpdated)&&on(()=>jn(Bt,he,te,Ae),q)}else{let te;const{el:oe,props:fe}=M,{bm:he,m:Ae,parent:Pe,root:Bt,type:Rt}=P,wn=va(M);Ls(P,!1),he&&Lc(he),!wn&&(te=fe&&fe.onVnodeBeforeMount)&&jn(te,Pe,M),Ls(P,!0);{Bt.ce&&Bt.ce._injectChildStyle(Rt);const Ut=P.subTree=q_(P);_(null,Ut,L,z,P,q,W),M.el=Ut.el}if(Ae&&on(Ae,q),!wn&&(te=fe&&fe.onVnodeMounted)){const Ut=M;on(()=>jn(te,Pe,Ut),q)}(M.shapeFlag&256||Pe&&va(Pe.vnode)&&Pe.vnode.shapeFlag&256)&&P.a&&on(P.a,q),P.isMounted=!0,M=L=z=null}};P.scope.on();const Q=P.effect=new kw(Y);P.scope.off();const K=P.update=Q.run.bind(Q),ue=P.job=Q.runIfDirty.bind(Q);ue.i=P,ue.id=P.uid,Q.scheduler=()=>Kg(ue),Ls(P,!0),K()},re=(P,M,L)=>{M.component=P;const z=P.vnode.props;P.vnode=M,P.next=null,FR(P,M.props,z,L),jR(P,M.children,L),Is(),N_(P),Cs()},de=(P,M,L,z,q,W,Z,Y,Q=!1)=>{const K=P&&P.children,ue=P?P.shapeFlag:0,te=M.children,{patchFlag:oe,shapeFlag:fe}=M;if(oe>0){if(oe&128){Tt(K,te,L,z,q,W,Z,Y,Q);return}else if(oe&256){Fe(K,te,L,z,q,W,Z,Y,Q);return}}fe&8?(ue&16&&ht(K,q,W),te!==K&&u(L,te)):ue&16?fe&16?Tt(K,te,L,z,q,W,Z,Y,Q):ht(K,q,W,!0):(ue&8&&u(L,""),fe&16&&b(te,L,z,q,W,Z,Y,Q))},Fe=(P,M,L,z,q,W,Z,Y,Q)=>{P=P||qr,M=M||qr;const K=P.length,ue=M.length,te=Math.min(K,ue);let oe;for(oe=0;oe<te;oe++){const fe=M[oe]=Q?qi(M[oe]):Gn(M[oe]);_(P[oe],fe,L,null,q,W,Z,Y,Q)}K>ue?ht(P,q,W,!0,!1,te):b(M,L,z,q,W,Z,Y,Q,te)},Tt=(P,M,L,z,q,W,Z,Y,Q)=>{let K=0;const ue=M.length;let te=P.length-1,oe=ue-1;for(;K<=te&&K<=oe;){const fe=P[K],he=M[K]=Q?qi(M[K]):Gn(M[K]);if(Xo(fe,he))_(fe,he,L,null,q,W,Z,Y,Q);else break;K++}for(;K<=te&&K<=oe;){const fe=P[te],he=M[oe]=Q?qi(M[oe]):Gn(M[oe]);if(Xo(fe,he))_(fe,he,L,null,q,W,Z,Y,Q);else break;te--,oe--}if(K>te){if(K<=oe){const fe=oe+1,he=fe<ue?M[fe].el:z;for(;K<=oe;)_(null,M[K]=Q?qi(M[K]):Gn(M[K]),L,he,q,W,Z,Y,Q),K++}}else if(K>oe)for(;K<=te;)Be(P[K],q,W,!0),K++;else{const fe=K,he=K,Ae=new Map;for(K=he;K<=oe;K++){const Dt=M[K]=Q?qi(M[K]):Gn(M[K]);Dt.key!=null&&Ae.set(Dt.key,K)}let Pe,Bt=0;const Rt=oe-he+1;let wn=!1,Ut=0;const Bi=new Array(Rt);for(K=0;K<Rt;K++)Bi[K]=0;for(K=fe;K<=te;K++){const Dt=P[K];if(Bt>=Rt){Be(Dt,q,W,!0);continue}let An;if(Dt.key!=null)An=Ae.get(Dt.key);else for(Pe=he;Pe<=oe;Pe++)if(Bi[Pe-he]===0&&Xo(Dt,M[Pe])){An=Pe;break}An===void 0?Be(Dt,q,W,!0):(Bi[An-he]=K+1,An>=Ut?Ut=An:wn=!0,_(Dt,M[An],L,null,q,W,Z,Y,Q),Bt++)}const Vo=wn?qR(Bi):qr;for(Pe=Vo.length-1,K=Rt-1;K>=0;K--){const Dt=he+K,An=M[Dt],Vl=Dt+1<ue?M[Dt+1].el:z;Bi[K]===0?_(null,An,L,Vl,q,W,Z,Y,Q):wn&&(Pe<0||K!==Vo[Pe]?xt(An,L,Vl,2):Pe--)}}},xt=(P,M,L,z,q=null)=>{const{el:W,type:Z,transition:Y,children:Q,shapeFlag:K}=P;if(K&6){xt(P.component.subTree,M,L,z);return}if(K&128){P.suspense.move(M,L,z);return}if(K&64){Z.move(P,M,L,se);return}if(Z===Mt){i(W,M,L);for(let te=0;te<Q.length;te++)xt(Q[te],M,L,z);i(P.anchor,M,L);return}if(Z===Bc){R(P,M,L);return}if(z!==2&&K&1&&Y)if(z===0)Y.beforeEnter(W),i(W,M,L),on(()=>Y.enter(W),q);else{const{leave:te,delayLeave:oe,afterLeave:fe}=Y,he=()=>i(W,M,L),Ae=()=>{te(W,()=>{he(),fe&&fe()})};oe?oe(W,he,Ae):Ae()}else i(W,M,L)},Be=(P,M,L,z=!1,q=!1)=>{const{type:W,props:Z,ref:Y,children:Q,dynamicChildren:K,shapeFlag:ue,patchFlag:te,dirs:oe,cacheIndex:fe}=P;if(te===-2&&(q=!1),Y!=null&&pu(Y,null,L,P,!0),fe!=null&&(M.renderCache[fe]=void 0),ue&256){M.ctx.deactivate(P);return}const he=ue&1&&oe,Ae=!va(P);let Pe;if(Ae&&(Pe=Z&&Z.onVnodeBeforeUnmount)&&jn(Pe,M,P),ue&6)Ft(P.component,L,z);else{if(ue&128){P.suspense.unmount(L,z);return}he&&Ns(P,null,M,"beforeUnmount"),ue&64?P.type.remove(P,M,L,se,z):K&&!K.hasOnce&&(W!==Mt||te>0&&te&64)?ht(K,M,L,!1,!0):(W===Mt&&te&384||!q&&ue&16)&&ht(Q,M,L),z&&qe(P)}(Ae&&(Pe=Z&&Z.onVnodeUnmounted)||he)&&on(()=>{Pe&&jn(Pe,M,P),he&&Ns(P,null,M,"unmounted")},L)},qe=P=>{const{type:M,el:L,anchor:z,transition:q}=P;if(M===Mt){Vt(L,z);return}if(M===Bc){S(P);return}const W=()=>{s(L),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(P.shapeFlag&1&&q&&!q.persisted){const{leave:Z,delayLeave:Y}=q,Q=()=>Z(L,W);Y?Y(P.el,W,Q):Q()}else W()},Vt=(P,M)=>{let L;for(;P!==M;)L=f(P),s(P),P=L;s(M)},Ft=(P,M,L)=>{const{bum:z,scope:q,job:W,subTree:Z,um:Y,m:Q,a:K}=P;$_(Q),$_(K),z&&Lc(z),q.stop(),W&&(W.flags|=8,Be(Z,P,M,L)),Y&&on(Y,M),on(()=>{P.isUnmounted=!0},M),M&&M.pendingBranch&&!M.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===M.pendingId&&(M.deps--,M.deps===0&&M.resolve())},ht=(P,M,L,z=!1,q=!1,W=0)=>{for(let Z=W;Z<P.length;Z++)Be(P[Z],M,L,z,q)},j=P=>{if(P.shapeFlag&6)return j(P.component.subTree);if(P.shapeFlag&128)return P.suspense.next();const M=f(P.anchor||P.el),L=M&&M[e0];return L?f(L):M};let ne=!1;const ee=(P,M,L)=>{P==null?M._vnode&&Be(M._vnode,null,null,!0):_(M._vnode||null,P,M,null,null,null,L),M._vnode=P,ne||(ne=!0,N_(),Xw(),ne=!1)},se={p:_,um:Be,m:xt,r:qe,mt:$e,mc:b,pc:de,pbc:C,n:j,o:n};return{render:ee,hydrate:void 0,createApp:LR(ee)}}function Id({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Ls({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function $R(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Xg(n,e,t=!1){const i=n.children,s=e.children;if(pe(i)&&pe(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=qi(s[r]),a.el=o.el),!t&&a.patchFlag!==-2&&Xg(o,a)),a.type===wh&&(a.el=o.el)}}function qR(n){const e=n.slice(),t=[0];let i,s,r,o,a;const l=n.length;for(i=0;i<l;i++){const c=n[i];if(c!==0){if(s=t[t.length-1],n[s]<c){e[i]=s,t.push(i);continue}for(r=0,o=t.length-1;r<o;)a=r+o>>1,n[t[a]]<c?r=a+1:o=a;c<n[t[r]]&&(r>0&&(e[i]=t[r-1]),t[r]=i)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}function y0(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:y0(e)}function $_(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const GR=Symbol.for("v-scx"),KR=()=>Yn(GR);function Xn(n,e,t){return b0(n,e,t)}function b0(n,e,t=Qe){const{immediate:i,deep:s,flush:r,once:o}=t,a=tn({},t),l=e&&i||!e&&r!=="post";let c;if(Ga){if(r==="sync"){const g=KR();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=Qn,g.resume=Qn,g.pause=Qn,g}}const u=Qt;a.call=(g,m,_)=>ii(g,u,m,_);let d=!1;r==="post"?a.scheduler=g=>{on(g,u&&u.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(g,m)=>{m?g():Kg(g)}),a.augmentJob=g=>{e&&(g.flags|=4),d&&(g.flags|=2,u&&(g.id=u.uid,g.i=u))};const f=oR(n,e,a);return Ga&&(c?c.push(f):l&&f()),f}function QR(n,e,t){const i=this.proxy,s=_t(n)?n.includes(".")?E0(i,n):()=>i[n]:n.bind(i,i);let r;we(e)?r=e:(r=e.handler,t=e);const o=yl(this),a=b0(s,r.bind(i),t);return o(),a}function E0(n,e){const t=e.split(".");return()=>{let i=n;for(let s=0;s<t.length&&i;s++)i=i[t[s]];return i}}const YR=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Dn(e)}Modifiers`]||n[`${yr(e)}Modifiers`];function XR(n,e,...t){if(n.isUnmounted)return;const i=n.vnode.props||Qe;let s=t;const r=e.startsWith("update:"),o=r&&YR(i,e.slice(7));o&&(o.trim&&(s=t.map(u=>_t(u)?u.trim():u)),o.number&&(s=t.map(hu)));let a,l=i[a=bd(e)]||i[a=bd(Dn(e))];!l&&r&&(l=i[a=bd(yr(e))]),l&&ii(l,n,6,s);const c=i[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,ii(c,n,6,s)}}function w0(n,e,t=!1){const i=e.emitsCache,s=i.get(n);if(s!==void 0)return s;const r=n.emits;let o={},a=!1;if(!we(n)){const l=c=>{const u=w0(c,e,!0);u&&(a=!0,tn(o,u))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!r&&!a?(Je(n)&&i.set(n,null),null):(pe(r)?r.forEach(l=>o[l]=null):tn(o,r),Je(n)&&i.set(n,o),o)}function Eh(n,e){return!n||!ch(e)?!1:(e=e.slice(2).replace(/Once$/,""),je(n,e[0].toLowerCase()+e.slice(1))||je(n,yr(e))||je(n,e))}function q_(n){const{type:e,vnode:t,proxy:i,withProxy:s,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:f,setupState:g,ctx:m,inheritAttrs:_}=n,y=gu(n);let E,I;try{if(t.shapeFlag&4){const S=s||i,D=S;E=Gn(c.call(D,S,u,d,g,f,m)),I=a}else{const S=e;E=Gn(S.length>1?S(d,{attrs:a,slots:o,emit:l}):S(d,null)),I=e.props?a:JR(a)}}catch(S){ba.length=0,_h(S,n,1),E=Xt(cr)}let R=E;if(I&&_!==!1){const S=Object.keys(I),{shapeFlag:D}=R;S.length&&D&7&&(r&&S.some(Vg)&&(I=ZR(I,r)),R=oo(R,I,!1,!0))}return t.dirs&&(R=oo(R,null,!1,!0),R.dirs=R.dirs?R.dirs.concat(t.dirs):t.dirs),t.transition&&Qg(R,t.transition),E=R,gu(y),E}const JR=n=>{let e;for(const t in n)(t==="class"||t==="style"||ch(t))&&((e||(e={}))[t]=n[t]);return e},ZR=(n,e)=>{const t={};for(const i in n)(!Vg(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function eD(n,e,t){const{props:i,children:s,component:r}=n,{props:o,children:a,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?G_(i,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==i[f]&&!Eh(c,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?G_(i,o,c):!0:!!o;return!1}function G_(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(e[r]!==n[r]&&!Eh(t,r))return!0}return!1}function tD({vnode:n,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=e.vnode).el=t,e=e.parent;else break}}const A0=n=>n.__isSuspense;function nD(n,e){e&&e.pendingBranch?pe(n)?e.effects.push(...n):e.effects.push(n):cR(n)}const Mt=Symbol.for("v-fgt"),wh=Symbol.for("v-txt"),cr=Symbol.for("v-cmt"),Bc=Symbol.for("v-stc"),ba=[];let bn=null;function ve(n=!1){ba.push(bn=n?null:[])}function iD(){ba.pop(),bn=ba[ba.length-1]||null}let qa=1;function K_(n,e=!1){qa+=n,n<0&&bn&&e&&(bn.hasOnce=!0)}function T0(n){return n.dynamicChildren=qa>0?bn||qr:null,iD(),qa>0&&bn&&bn.push(n),n}function Ie(n,e,t,i,s,r){return T0(H(n,e,t,i,s,r,!0))}function Ea(n,e,t,i,s){return T0(Xt(n,e,t,i,s,!0))}function _u(n){return n?n.__v_isVNode===!0:!1}function Xo(n,e){return n.type===e.type&&n.key===e.key}const S0=({key:n})=>n??null,Uc=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?_t(n)||Zt(n)||we(n)?{i:yn,r:n,k:e,f:!!t}:n:null);function H(n,e=null,t=null,i=0,s=null,r=n===Mt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&S0(e),ref:e&&Uc(e),scopeId:Zw,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:yn};return a?(Jg(l,t),r&128&&n.normalize(l)):t&&(l.shapeFlag|=_t(t)?8:16),qa>0&&!o&&bn&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&bn.push(l),l}const Xt=sD;function sD(n,e=null,t=null,i=0,s=null,r=!1){if((!n||n===CR)&&(n=cr),_u(n)){const a=oo(n,e,!0);return t&&Jg(a,t),qa>0&&!r&&bn&&(a.shapeFlag&6?bn[bn.indexOf(n)]=a:bn.push(a)),a.patchFlag=-2,a}if(mD(n)&&(n=n.__vccOpts),e){e=rD(e);let{class:a,style:l}=e;a&&!_t(a)&&(e.class=tr(a)),Je(l)&&(Gg(l)&&!pe(l)&&(l=tn({},l)),e.style=Ug(l))}const o=_t(n)?1:A0(n)?128:hR(n)?64:Je(n)?4:we(n)?2:0;return H(n,e,t,i,s,o,r,!0)}function rD(n){return n?Gg(n)||d0(n)?tn({},n):n:null}function oo(n,e,t=!1,i=!1){const{props:s,ref:r,patchFlag:o,children:a,transition:l}=n,c=e?aD(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&S0(c),ref:e&&e.ref?t&&r?pe(r)?r.concat(Uc(e)):[r,Uc(e)]:Uc(e):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Mt?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&oo(n.ssContent),ssFallback:n.ssFallback&&oo(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&i&&Qg(u,l.clone(u)),u}function Pn(n=" ",e=0){return Xt(wh,null,n,e)}function oD(n,e){const t=Xt(Bc,null,n);return t.staticCount=e,t}function yt(n="",e=!1){return e?(ve(),Ea(cr,null,n)):Xt(cr,null,n)}function Gn(n){return n==null||typeof n=="boolean"?Xt(cr):pe(n)?Xt(Mt,null,n.slice()):_u(n)?qi(n):Xt(wh,null,String(n))}function qi(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:oo(n)}function Jg(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(pe(e))t=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),Jg(n,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!d0(e)?e._ctx=yn:s===3&&yn&&(yn.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else we(e)?(e={default:e,_ctx:yn},t=32):(e=String(e),i&64?(t=16,e=[Pn(e)]):t=8);n.children=e,n.shapeFlag|=t}function aD(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=tr([e.class,i.class]));else if(s==="style")e.style=Ug([e.style,i.style]);else if(ch(s)){const r=e[s],o=i[s];o&&r!==o&&!(pe(r)&&r.includes(o))&&(e[s]=r?[].concat(r,o):o)}else s!==""&&(e[s]=i[s])}return e}function jn(n,e,t,i=null){ii(n,e,7,[t,i])}const lD=c0();let cD=0;function uD(n,e,t){const i=n.type,s=(e?e.appContext:n.appContext)||lD,r={uid:cD++,vnode:n,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Mx(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:g0(i,s),emitsOptions:w0(i,s),emit:null,emitted:null,propsDefaults:Qe,inheritAttrs:i.inheritAttrs,ctx:Qe,data:Qe,props:Qe,attrs:Qe,slots:Qe,refs:Qe,setupState:Qe,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=XR.bind(null,r),n.ce&&n.ce(r),r}let Qt=null,vu,Pf;{const n=fh(),e=(t,i)=>{let s;return(s=n[t])||(s=n[t]=[]),s.push(i),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};vu=e("__VUE_INSTANCE_SETTERS__",t=>Qt=t),Pf=e("__VUE_SSR_SETTERS__",t=>Ga=t)}const yl=n=>{const e=Qt;return vu(n),n.scope.on(),()=>{n.scope.off(),vu(e)}},Q_=()=>{Qt&&Qt.scope.off(),vu(null)};function I0(n){return n.vnode.shapeFlag&4}let Ga=!1;function hD(n,e=!1,t=!1){e&&Pf(e);const{props:i,children:s}=n.vnode,r=I0(n);VR(n,i,r,e),HR(n,s,t);const o=r?dD(n,e):void 0;return e&&Pf(!1),o}function dD(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,RR);const{setup:i}=t;if(i){Is();const s=n.setupContext=i.length>1?gD(n):null,r=yl(n),o=vl(i,n,0,[n.props,s]),a=Tw(o);if(Cs(),r(),(a||n.sp)&&!va(n)&&i0(n),a){if(o.then(Q_,Q_),e)return o.then(l=>{Y_(n,l)}).catch(l=>{_h(l,n,0)});n.asyncDep=o}else Y_(n,o)}else C0(n)}function Y_(n,e,t){we(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Je(e)&&(n.setupState=Kw(e)),C0(n)}function C0(n,e,t){const i=n.type;n.render||(n.render=i.render||Qn);{const s=yl(n);Is();try{DR(n)}finally{Cs(),s()}}}const fD={get(n,e){return qt(n,"get",""),n[e]}};function gD(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,fD),slots:n.slots,emit:n.emit,expose:e}}function Ah(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Kw(Zx(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in ya)return ya[t](n)},has(e,t){return t in e||t in ya}})):n.proxy}function pD(n,e=!0){return we(n)?n.displayName||n.name:n.name||e&&n.__name}function mD(n){return we(n)&&"__vccOpts"in n}const lt=(n,e)=>sR(n,e,Ga);function Xr(n,e,t){const i=arguments.length;return i===2?Je(e)&&!pe(e)?_u(e)?Xt(n,null,[e]):Xt(n,e):Xt(n,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&_u(t)&&(t=[t]),Xt(n,e,t))}const _D="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Mf;const X_=typeof window<"u"&&window.trustedTypes;if(X_)try{Mf=X_.createPolicy("vue",{createHTML:n=>n})}catch{}const x0=Mf?n=>Mf.createHTML(n):n=>n,vD="http://www.w3.org/2000/svg",yD="http://www.w3.org/1998/Math/MathML",mi=typeof document<"u"?document:null,J_=mi&&mi.createElement("template"),bD={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const s=e==="svg"?mi.createElementNS(vD,n):e==="mathml"?mi.createElementNS(yD,n):t?mi.createElement(n,{is:t}):mi.createElement(n);return n==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:n=>mi.createTextNode(n),createComment:n=>mi.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>mi.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,i,s,r){const o=t?t.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===r||!(s=s.nextSibling)););else{J_.innerHTML=x0(i==="svg"?`<svg>${n}</svg>`:i==="mathml"?`<math>${n}</math>`:n);const a=J_.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},ED=Symbol("_vtc");function wD(n,e,t){const i=n[ED];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Z_=Symbol("_vod"),AD=Symbol("_vsh"),TD=Symbol(""),SD=/(^|;)\s*display\s*:/;function ID(n,e,t){const i=n.style,s=_t(t);let r=!1;if(t&&!s){if(e)if(_t(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&Hc(i,a,"")}else for(const o in e)t[o]==null&&Hc(i,o,"");for(const o in t)o==="display"&&(r=!0),Hc(i,o,t[o])}else if(s){if(e!==t){const o=i[TD];o&&(t+=";"+o),i.cssText=t,r=SD.test(t)}}else e&&n.removeAttribute("style");Z_ in n&&(n[Z_]=r?i.display:"",n[AD]&&(i.display="none"))}const ev=/\s*!important$/;function Hc(n,e,t){if(pe(t))t.forEach(i=>Hc(n,e,i));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const i=CD(n,e);ev.test(t)?n.setProperty(yr(i),t.replace(ev,""),"important"):n[i]=t}}const tv=["Webkit","Moz","ms"],Cd={};function CD(n,e){const t=Cd[e];if(t)return t;let i=Dn(e);if(i!=="filter"&&i in n)return Cd[e]=i;i=dh(i);for(let s=0;s<tv.length;s++){const r=tv[s]+i;if(r in n)return Cd[e]=r}return e}const nv="http://www.w3.org/1999/xlink";function iv(n,e,t,i,s,r=Dx(e)){i&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(nv,e.slice(6,e.length)):n.setAttributeNS(nv,e,t):t==null||r&&!xw(t)?n.removeAttribute(e):n.setAttribute(e,r?"":ni(t)?String(t):t)}function sv(n,e,t,i,s){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?x0(t):t);return}const r=n.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=xw(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(s||e)}function Gs(n,e,t,i){n.addEventListener(e,t,i)}function xD(n,e,t,i){n.removeEventListener(e,t,i)}const rv=Symbol("_vei");function RD(n,e,t,i,s=null){const r=n[rv]||(n[rv]={}),o=r[e];if(i&&o)o.value=i;else{const[a,l]=DD(e);if(i){const c=r[e]=MD(i,s);Gs(n,a,c,l)}else o&&(xD(n,a,o,l),r[e]=void 0)}}const ov=/(?:Once|Passive|Capture)$/;function DD(n){let e;if(ov.test(n)){e={};let i;for(;i=n.match(ov);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):yr(n.slice(2)),e]}let xd=0;const kD=Promise.resolve(),PD=()=>xd||(kD.then(()=>xd=0),xd=Date.now());function MD(n,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;ii(OD(i,t.value),e,5,[i])};return t.value=n,t.attached=PD(),t}function OD(n,e){if(pe(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const av=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,ND=(n,e,t,i,s,r)=>{const o=s==="svg";e==="class"?wD(n,i,o):e==="style"?ID(n,t,i):ch(e)?Vg(e)||RD(n,e,t,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):LD(n,e,i,o))?(sv(n,e,i),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&iv(n,e,i,o,r,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!_t(i))?sv(n,Dn(e),i,r,e):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),iv(n,e,i,o))};function LD(n,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in n&&av(e)&&we(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return av(e)&&_t(t)?!1:e in n}const yu=n=>{const e=n.props["onUpdate:modelValue"]||!1;return pe(e)?t=>Lc(e,t):e};function VD(n){n.target.composing=!0}function lv(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Jr=Symbol("_assign"),Ys={created(n,{modifiers:{lazy:e,trim:t,number:i}},s){n[Jr]=yu(s);const r=i||s.props&&s.props.type==="number";Gs(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),r&&(a=hu(a)),n[Jr](a)}),t&&Gs(n,"change",()=>{n.value=n.value.trim()}),e||(Gs(n,"compositionstart",VD),Gs(n,"compositionend",lv),Gs(n,"change",lv))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:i,trim:s,number:r}},o){if(n[Jr]=yu(o),n.composing)return;const a=(r||n.type==="number")&&!/^0\d/.test(n.value)?hu(n.value):n.value,l=e??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(i&&e===t||s&&n.value.trim()===l)||(n.value=l))}},Ka={deep:!0,created(n,{value:e,modifiers:{number:t}},i){const s=uh(e);Gs(n,"change",()=>{const r=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>t?hu(bu(o)):bu(o));n[Jr](n.multiple?s?new Set(r):r:r[0]),n._assigning=!0,vh(()=>{n._assigning=!1})}),n[Jr]=yu(i)},mounted(n,{value:e}){cv(n,e)},beforeUpdate(n,e,t){n[Jr]=yu(t)},updated(n,{value:e}){n._assigning||cv(n,e)}};function cv(n,e){const t=n.multiple,i=pe(e);if(!(t&&!i&&!uh(e))){for(let s=0,r=n.options.length;s<r;s++){const o=n.options[s],a=bu(o);if(t)if(i){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=Px(e,a)>-1}else o.selected=e.has(a);else if(gh(bu(o),e)){n.selectedIndex!==s&&(n.selectedIndex=s);return}}!t&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function bu(n){return"_value"in n?n._value:n.value}const FD=["ctrl","shift","alt","meta"],BD={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>FD.some(t=>n[`${t}Key`]&&!e.includes(t))},UD=(n,e)=>{const t=n._withMods||(n._withMods={}),i=e.join(".");return t[i]||(t[i]=(s,...r)=>{for(let o=0;o<e.length;o++){const a=BD[e[o]];if(a&&a(s,e))return}return n(s,...r)})},HD=tn({patchProp:ND},bD);let uv;function jD(){return uv||(uv=zR(HD))}const zD=(...n)=>{const e=jD().createApp(...n),{mount:t}=e;return e.mount=i=>{const s=$D(i);if(!s)return;const r=e._component;!we(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=t(s,!1,WD(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function WD(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function $D(n){return _t(n)?document.querySelector(n):n}const qD={id:"app"},GD={__name:"App",setup(n){return Io(()=>{console.log("Vue ")}),(e,t)=>{const i=IR("router-view");return ve(),Ie("div",qD,[Xt(i)])}}};/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Fr=typeof document<"u";function R0(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function KD(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&R0(n.default)}const Ue=Object.assign;function Rd(n,e){const t={};for(const i in e){const s=e[i];t[i]=Hn(s)?s.map(n):n(s)}return t}const wa=()=>{},Hn=Array.isArray,D0=/#/g,QD=/&/g,YD=/\//g,XD=/=/g,JD=/\?/g,k0=/\+/g,ZD=/%5B/g,ek=/%5D/g,P0=/%5E/g,tk=/%60/g,M0=/%7B/g,nk=/%7C/g,O0=/%7D/g,ik=/%20/g;function Zg(n){return encodeURI(""+n).replace(nk,"|").replace(ZD,"[").replace(ek,"]")}function sk(n){return Zg(n).replace(M0,"{").replace(O0,"}").replace(P0,"^")}function Of(n){return Zg(n).replace(k0,"%2B").replace(ik,"+").replace(D0,"%23").replace(QD,"%26").replace(tk,"`").replace(M0,"{").replace(O0,"}").replace(P0,"^")}function rk(n){return Of(n).replace(XD,"%3D")}function ok(n){return Zg(n).replace(D0,"%23").replace(JD,"%3F")}function ak(n){return n==null?"":ok(n).replace(YD,"%2F")}function Qa(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const lk=/\/$/,ck=n=>n.replace(lk,"");function Dd(n,e,t="/"){let i,s={},r="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=e.slice(0,l),r=e.slice(l+1,a>-1?a:e.length),s=n(r)),a>-1&&(i=i||e.slice(0,a),o=e.slice(a,e.length)),i=fk(i??e,t),{fullPath:i+(r&&"?")+r+o,path:i,query:s,hash:Qa(o)}}function uk(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function hv(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function hk(n,e,t){const i=e.matched.length-1,s=t.matched.length-1;return i>-1&&i===s&&ao(e.matched[i],t.matched[s])&&N0(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function ao(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function N0(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!dk(n[t],e[t]))return!1;return!0}function dk(n,e){return Hn(n)?dv(n,e):Hn(e)?dv(e,n):n===e}function dv(n,e){return Hn(e)?n.length===e.length&&n.every((t,i)=>t===e[i]):n.length===1&&n[0]===e}function fk(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),i=n.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let r=t.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+i.slice(o).join("/")}const zi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ya;(function(n){n.pop="pop",n.push="push"})(Ya||(Ya={}));var Aa;(function(n){n.back="back",n.forward="forward",n.unknown=""})(Aa||(Aa={}));function gk(n){if(!n)if(Fr){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),ck(n)}const pk=/^[^#]+#/;function mk(n,e){return n.replace(pk,"#")+e}function _k(n,e){const t=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const Th=()=>({left:window.scrollX,top:window.scrollY});function vk(n){let e;if("el"in n){const t=n.el,i=typeof t=="string"&&t.startsWith("#"),s=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!s)return;e=_k(s,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function fv(n,e){return(history.state?history.state.position-e:-1)+n}const Nf=new Map;function yk(n,e){Nf.set(n,e)}function bk(n){const e=Nf.get(n);return Nf.delete(n),e}let Ek=()=>location.protocol+"//"+location.host;function L0(n,e){const{pathname:t,search:i,hash:s}=e,r=n.indexOf("#");if(r>-1){let a=s.includes(n.slice(r))?n.slice(r).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),hv(l,"")}return hv(t,n)+i+s}function wk(n,e,t,i){let s=[],r=[],o=null;const a=({state:f})=>{const g=L0(n,location),m=t.value,_=e.value;let y=0;if(f){if(t.value=g,e.value=f,o&&o===m){o=null;return}y=_?f.position-_.position:0}else i(g);s.forEach(E=>{E(t.value,m,{delta:y,type:Ya.pop,direction:y?y>0?Aa.forward:Aa.back:Aa.unknown})})};function l(){o=t.value}function c(f){s.push(f);const g=()=>{const m=s.indexOf(f);m>-1&&s.splice(m,1)};return r.push(g),g}function u(){const{history:f}=window;f.state&&f.replaceState(Ue({},f.state,{scroll:Th()}),"")}function d(){for(const f of r)f();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function gv(n,e,t,i=!1,s=!1){return{back:n,current:e,forward:t,replaced:i,position:window.history.length,scroll:s?Th():null}}function Ak(n){const{history:e,location:t}=window,i={value:L0(n,t)},s={value:e.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const d=n.indexOf("#"),f=d>-1?(t.host&&document.querySelector("base")?n:n.slice(d))+l:Ek()+n+l;try{e[u?"replaceState":"pushState"](c,"",f),s.value=c}catch(g){console.error(g),t[u?"replace":"assign"](f)}}function o(l,c){const u=Ue({},e.state,gv(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});r(l,u,!0),i.value=l}function a(l,c){const u=Ue({},s.value,e.state,{forward:l,scroll:Th()});r(u.current,u,!0);const d=Ue({},gv(i.value,l,null),{position:u.position+1},c);r(l,d,!1),i.value=l}return{location:i,state:s,push:a,replace:o}}function Tk(n){n=gk(n);const e=Ak(n),t=wk(n,e.state,e.location,e.replace);function i(r,o=!0){o||t.pauseListeners(),history.go(r)}const s=Ue({location:"",base:n,go:i,createHref:mk.bind(null,n)},e,t);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function Sk(n){return typeof n=="string"||n&&typeof n=="object"}function V0(n){return typeof n=="string"||typeof n=="symbol"}const F0=Symbol("");var pv;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(pv||(pv={}));function lo(n,e){return Ue(new Error,{type:n,[F0]:!0},e)}function di(n,e){return n instanceof Error&&F0 in n&&(e==null||!!(n.type&e))}const mv="[^/]+?",Ik={sensitive:!1,strict:!1,start:!0,end:!0},Ck=/[.+*?^${}()[\]/\\]/g;function xk(n,e){const t=Ue({},Ik,e),i=[];let s=t.start?"^":"";const r=[];for(const c of n){const u=c.length?[]:[90];t.strict&&!c.length&&(s+="/");for(let d=0;d<c.length;d++){const f=c[d];let g=40+(t.sensitive?.25:0);if(f.type===0)d||(s+="/"),s+=f.value.replace(Ck,"\\$&"),g+=40;else if(f.type===1){const{value:m,repeatable:_,optional:y,regexp:E}=f;r.push({name:m,repeatable:_,optional:y});const I=E||mv;if(I!==mv){g+=10;try{new RegExp(`(${I})`)}catch(S){throw new Error(`Invalid custom RegExp for param "${m}" (${I}): `+S.message)}}let R=_?`((?:${I})(?:/(?:${I}))*)`:`(${I})`;d||(R=y&&c.length<2?`(?:/${R})`:"/"+R),y&&(R+="?"),s+=R,g+=20,y&&(g+=-8),_&&(g+=-20),I===".*"&&(g+=-50)}u.push(g)}i.push(u)}if(t.strict&&t.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}t.strict||(s+="/?"),t.end?s+="$":t.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,t.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const g=u[f]||"",m=r[f-1];d[m.name]=g&&m.repeatable?g.split("/"):g}return d}function l(c){let u="",d=!1;for(const f of n){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const g of f)if(g.type===0)u+=g.value;else if(g.type===1){const{value:m,repeatable:_,optional:y}=g,E=m in c?c[m]:"";if(Hn(E)&&!_)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const I=Hn(E)?E.join("/"):E;if(!I)if(y)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);u+=I}}return u||"/"}return{re:o,score:i,keys:r,parse:a,stringify:l}}function Rk(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=e[t]-n[t];if(i)return i;t++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function B0(n,e){let t=0;const i=n.score,s=e.score;for(;t<i.length&&t<s.length;){const r=Rk(i[t],s[t]);if(r)return r;t++}if(Math.abs(s.length-i.length)===1){if(_v(i))return 1;if(_v(s))return-1}return s.length-i.length}function _v(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const Dk={type:0,value:""},kk=/[a-zA-Z0-9_]/;function Pk(n){if(!n)return[[]];if(n==="/")return[[Dk]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(g){throw new Error(`ERR (${t})/"${c}": ${g}`)}let t=0,i=t;const s=[];let r;function o(){r&&s.push(r),r=[]}let a=0,l,c="",u="";function d(){c&&(t===0?r.push({type:0,value:c}):t===1||t===2||t===3?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==2){i=t,t=4;continue}switch(t){case 0:l==="/"?(c&&d(),o()):l===":"?(d(),t=1):f();break;case 4:f(),t=i;break;case 1:l==="("?t=2:kk.test(l)?f():(d(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:t=3:u+=l;break;case 3:d(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),s}function Mk(n,e,t){const i=xk(Pk(n.path),t),s=Ue(i,{record:n,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function Ok(n,e){const t=[],i=new Map;e=Ev({strict:!1,end:!0,sensitive:!1},e);function s(d){return i.get(d)}function r(d,f,g){const m=!g,_=yv(d);_.aliasOf=g&&g.record;const y=Ev(e,d),E=[_];if("alias"in d){const S=typeof d.alias=="string"?[d.alias]:d.alias;for(const D of S)E.push(yv(Ue({},_,{components:g?g.record.components:_.components,path:D,aliasOf:g?g.record:_})))}let I,R;for(const S of E){const{path:D}=S;if(f&&D[0]!=="/"){const N=f.record.path,T=N[N.length-1]==="/"?"":"/";S.path=f.record.path+(D&&T+D)}if(I=Mk(S,f,y),g?g.alias.push(I):(R=R||I,R!==I&&R.alias.push(I),m&&d.name&&!bv(I)&&o(d.name)),U0(I)&&l(I),_.children){const N=_.children;for(let T=0;T<N.length;T++)r(N[T],I,g&&g.children[T])}g=g||I}return R?()=>{o(R)}:wa}function o(d){if(V0(d)){const f=i.get(d);f&&(i.delete(d),t.splice(t.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=t.indexOf(d);f>-1&&(t.splice(f,1),d.record.name&&i.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return t}function l(d){const f=Vk(d,t);t.splice(f,0,d),d.record.name&&!bv(d)&&i.set(d.record.name,d)}function c(d,f){let g,m={},_,y;if("name"in d&&d.name){if(g=i.get(d.name),!g)throw lo(1,{location:d});y=g.record.name,m=Ue(vv(f.params,g.keys.filter(R=>!R.optional).concat(g.parent?g.parent.keys.filter(R=>R.optional):[]).map(R=>R.name)),d.params&&vv(d.params,g.keys.map(R=>R.name))),_=g.stringify(m)}else if(d.path!=null)_=d.path,g=t.find(R=>R.re.test(_)),g&&(m=g.parse(_),y=g.record.name);else{if(g=f.name?i.get(f.name):t.find(R=>R.re.test(f.path)),!g)throw lo(1,{location:d,currentLocation:f});y=g.record.name,m=Ue({},f.params,d.params),_=g.stringify(m)}const E=[];let I=g;for(;I;)E.unshift(I.record),I=I.parent;return{name:y,path:_,params:m,matched:E,meta:Lk(E)}}n.forEach(d=>r(d));function u(){t.length=0,i.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:s}}function vv(n,e){const t={};for(const i of e)i in n&&(t[i]=n[i]);return t}function yv(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:Nk(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Nk(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const i in n.components)e[i]=typeof t=="object"?t[i]:t;return e}function bv(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function Lk(n){return n.reduce((e,t)=>Ue(e,t.meta),{})}function Ev(n,e){const t={};for(const i in n)t[i]=i in e?e[i]:n[i];return t}function Vk(n,e){let t=0,i=e.length;for(;t!==i;){const r=t+i>>1;B0(n,e[r])<0?i=r:t=r+1}const s=Fk(n);return s&&(i=e.lastIndexOf(s,i-1)),i}function Fk(n){let e=n;for(;e=e.parent;)if(U0(e)&&B0(n,e)===0)return e}function U0({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function Bk(n){const e={};if(n===""||n==="?")return e;const i=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<i.length;++s){const r=i[s].replace(k0," "),o=r.indexOf("="),a=Qa(o<0?r:r.slice(0,o)),l=o<0?null:Qa(r.slice(o+1));if(a in e){let c=e[a];Hn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function wv(n){let e="";for(let t in n){const i=n[t];if(t=rk(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(Hn(i)?i.map(r=>r&&Of(r)):[i&&Of(i)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+t,r!=null&&(e+="="+r))})}return e}function Uk(n){const e={};for(const t in n){const i=n[t];i!==void 0&&(e[t]=Hn(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return e}const Hk=Symbol(""),Av=Symbol(""),Sh=Symbol(""),H0=Symbol(""),Lf=Symbol("");function Jo(){let n=[];function e(i){return n.push(i),()=>{const s=n.indexOf(i);s>-1&&n.splice(s,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function Gi(n,e,t,i,s,r=o=>o()){const o=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(lo(4,{from:t,to:e})):f instanceof Error?l(f):Sk(f)?l(lo(2,{from:e,to:f})):(o&&i.enterCallbacks[s]===o&&typeof f=="function"&&o.push(f),a())},u=r(()=>n.call(i&&i.instances[s],e,t,c));let d=Promise.resolve(u);n.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function kd(n,e,t,i,s=r=>r()){const r=[];for(const o of n)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(R0(l)){const u=(l.__vccOpts||l)[e];u&&r.push(Gi(u,t,i,o,a,s))}else{let c=l();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=KD(u)?u.default:u;o.mods[a]=u,o.components[a]=d;const g=(d.__vccOpts||d)[e];return g&&Gi(g,t,i,o,a,s)()}))}}return r}function Tv(n){const e=Yn(Sh),t=Yn(H0),i=lt(()=>{const l=ir(n.to);return e.resolve(l)}),s=lt(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],d=t.matched;if(!u||!d.length)return-1;const f=d.findIndex(ao.bind(null,u));if(f>-1)return f;const g=Sv(l[c-2]);return c>1&&Sv(u)===g&&d[d.length-1].path!==g?d.findIndex(ao.bind(null,l[c-2])):f}),r=lt(()=>s.value>-1&&qk(t.params,i.value.params)),o=lt(()=>s.value>-1&&s.value===t.matched.length-1&&N0(t.params,i.value.params));function a(l={}){if($k(l)){const c=e[ir(n.replace)?"replace":"push"](ir(n.to)).catch(wa);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:i,href:lt(()=>i.value.href),isActive:r,isExactActive:o,navigate:a}}function jk(n){return n.length===1?n[0]:n}const zk=yh({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Tv,setup(n,{slots:e}){const t=mh(Tv(n)),{options:i}=Yn(Sh),s=lt(()=>({[Iv(n.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[Iv(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const r=e.default&&jk(e.default(t));return n.custom?r:Xr("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:s.value},r)}}}),Wk=zk;function $k(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function qk(n,e){for(const t in e){const i=e[t],s=n[t];if(typeof i=="string"){if(i!==s)return!1}else if(!Hn(s)||s.length!==i.length||i.some((r,o)=>r!==s[o]))return!1}return!0}function Sv(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Iv=(n,e,t)=>n??e??t,Gk=yh({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const i=Yn(Lf),s=lt(()=>n.route||i.value),r=Yn(Av,0),o=lt(()=>{let c=ir(r);const{matched:u}=s.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=lt(()=>s.value.matched[o.value]);Fc(Av,lt(()=>o.value+1)),Fc(Hk,a),Fc(Lf,s);const l=Ce();return Xn(()=>[l.value,a.value,n.name],([c,u,d],[f,g,m])=>{u&&(u.instances[d]=c,g&&g!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=g.leaveGuards),u.updateGuards.size||(u.updateGuards=g.updateGuards))),c&&u&&(!g||!ao(u,g)||!f)&&(u.enterCallbacks[d]||[]).forEach(_=>_(c))},{flush:"post"}),()=>{const c=s.value,u=n.name,d=a.value,f=d&&d.components[u];if(!f)return Cv(t.default,{Component:f,route:c});const g=d.props[u],m=g?g===!0?c.params:typeof g=="function"?g(c):g:null,y=Xr(f,Ue({},m,e,{onVnodeUnmounted:E=>{E.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return Cv(t.default,{Component:y,route:c})||y}}});function Cv(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const Kk=Gk;function Qk(n){const e=Ok(n.routes,n),t=n.parseQuery||Bk,i=n.stringifyQuery||wv,s=n.history,r=Jo(),o=Jo(),a=Jo(),l=eR(zi);let c=zi;Fr&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Rd.bind(null,j=>""+j),d=Rd.bind(null,ak),f=Rd.bind(null,Qa);function g(j,ne){let ee,se;return V0(j)?(ee=e.getRecordMatcher(j),se=ne):se=j,e.addRoute(se,ee)}function m(j){const ne=e.getRecordMatcher(j);ne&&e.removeRoute(ne)}function _(){return e.getRoutes().map(j=>j.record)}function y(j){return!!e.getRecordMatcher(j)}function E(j,ne){if(ne=Ue({},ne||l.value),typeof j=="string"){const L=Dd(t,j,ne.path),z=e.resolve({path:L.path},ne),q=s.createHref(L.fullPath);return Ue(L,z,{params:f(z.params),hash:Qa(L.hash),redirectedFrom:void 0,href:q})}let ee;if(j.path!=null)ee=Ue({},j,{path:Dd(t,j.path,ne.path).path});else{const L=Ue({},j.params);for(const z in L)L[z]==null&&delete L[z];ee=Ue({},j,{params:d(L)}),ne.params=d(ne.params)}const se=e.resolve(ee,ne),Oe=j.hash||"";se.params=u(f(se.params));const P=uk(i,Ue({},j,{hash:sk(Oe),path:se.path})),M=s.createHref(P);return Ue({fullPath:P,hash:Oe,query:i===wv?Uk(j.query):j.query||{}},se,{redirectedFrom:void 0,href:M})}function I(j){return typeof j=="string"?Dd(t,j,l.value.path):Ue({},j)}function R(j,ne){if(c!==j)return lo(8,{from:ne,to:j})}function S(j){return T(j)}function D(j){return S(Ue(I(j),{replace:!0}))}function N(j){const ne=j.matched[j.matched.length-1];if(ne&&ne.redirect){const{redirect:ee}=ne;let se=typeof ee=="function"?ee(j):ee;return typeof se=="string"&&(se=se.includes("?")||se.includes("#")?se=I(se):{path:se},se.params={}),Ue({query:j.query,hash:j.hash,params:se.path!=null?{}:j.params},se)}}function T(j,ne){const ee=c=E(j),se=l.value,Oe=j.state,P=j.force,M=j.replace===!0,L=N(ee);if(L)return T(Ue(I(L),{state:typeof L=="object"?Ue({},Oe,L.state):Oe,force:P,replace:M}),ne||ee);const z=ee;z.redirectedFrom=ne;let q;return!P&&hk(i,se,ee)&&(q=lo(16,{to:z,from:se}),xt(se,se,!0,!1)),(q?Promise.resolve(q):C(z,se)).catch(W=>di(W)?di(W,2)?W:Tt(W):de(W,z,se)).then(W=>{if(W){if(di(W,2))return T(Ue({replace:M},I(W.to),{state:typeof W.to=="object"?Ue({},Oe,W.to.state):Oe,force:P}),ne||z)}else W=O(z,se,!0,M,Oe);return x(z,se,W),W})}function b(j,ne){const ee=R(j,ne);return ee?Promise.reject(ee):Promise.resolve()}function w(j){const ne=Vt.values().next().value;return ne&&typeof ne.runWithContext=="function"?ne.runWithContext(j):j()}function C(j,ne){let ee;const[se,Oe,P]=Yk(j,ne);ee=kd(se.reverse(),"beforeRouteLeave",j,ne);for(const L of se)L.leaveGuards.forEach(z=>{ee.push(Gi(z,j,ne))});const M=b.bind(null,j,ne);return ee.push(M),ht(ee).then(()=>{ee=[];for(const L of r.list())ee.push(Gi(L,j,ne));return ee.push(M),ht(ee)}).then(()=>{ee=kd(Oe,"beforeRouteUpdate",j,ne);for(const L of Oe)L.updateGuards.forEach(z=>{ee.push(Gi(z,j,ne))});return ee.push(M),ht(ee)}).then(()=>{ee=[];for(const L of P)if(L.beforeEnter)if(Hn(L.beforeEnter))for(const z of L.beforeEnter)ee.push(Gi(z,j,ne));else ee.push(Gi(L.beforeEnter,j,ne));return ee.push(M),ht(ee)}).then(()=>(j.matched.forEach(L=>L.enterCallbacks={}),ee=kd(P,"beforeRouteEnter",j,ne,w),ee.push(M),ht(ee))).then(()=>{ee=[];for(const L of o.list())ee.push(Gi(L,j,ne));return ee.push(M),ht(ee)}).catch(L=>di(L,8)?L:Promise.reject(L))}function x(j,ne,ee){a.list().forEach(se=>w(()=>se(j,ne,ee)))}function O(j,ne,ee,se,Oe){const P=R(j,ne);if(P)return P;const M=ne===zi,L=Fr?history.state:{};ee&&(se||M?s.replace(j.fullPath,Ue({scroll:M&&L&&L.scroll},Oe)):s.push(j.fullPath,Oe)),l.value=j,xt(j,ne,ee,M),Tt()}let k;function $e(){k||(k=s.listen((j,ne,ee)=>{if(!Ft.listening)return;const se=E(j),Oe=N(se);if(Oe){T(Ue(Oe,{replace:!0,force:!0}),se).catch(wa);return}c=se;const P=l.value;Fr&&yk(fv(P.fullPath,ee.delta),Th()),C(se,P).catch(M=>di(M,12)?M:di(M,2)?(T(Ue(I(M.to),{force:!0}),se).then(L=>{di(L,20)&&!ee.delta&&ee.type===Ya.pop&&s.go(-1,!1)}).catch(wa),Promise.reject()):(ee.delta&&s.go(-ee.delta,!1),de(M,se,P))).then(M=>{M=M||O(se,P,!1),M&&(ee.delta&&!di(M,8)?s.go(-ee.delta,!1):ee.type===Ya.pop&&di(M,20)&&s.go(-1,!1)),x(se,P,M)}).catch(wa)}))}let Se=Jo(),_e=Jo(),re;function de(j,ne,ee){Tt(j);const se=_e.list();return se.length?se.forEach(Oe=>Oe(j,ne,ee)):console.error(j),Promise.reject(j)}function Fe(){return re&&l.value!==zi?Promise.resolve():new Promise((j,ne)=>{Se.add([j,ne])})}function Tt(j){return re||(re=!j,$e(),Se.list().forEach(([ne,ee])=>j?ee(j):ne()),Se.reset()),j}function xt(j,ne,ee,se){const{scrollBehavior:Oe}=n;if(!Fr||!Oe)return Promise.resolve();const P=!ee&&bk(fv(j.fullPath,0))||(se||!ee)&&history.state&&history.state.scroll||null;return vh().then(()=>Oe(j,ne,P)).then(M=>M&&vk(M)).catch(M=>de(M,j,ne))}const Be=j=>s.go(j);let qe;const Vt=new Set,Ft={currentRoute:l,listening:!0,addRoute:g,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:y,getRoutes:_,resolve:E,options:n,push:S,replace:D,go:Be,back:()=>Be(-1),forward:()=>Be(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:_e.add,isReady:Fe,install(j){const ne=this;j.component("RouterLink",Wk),j.component("RouterView",Kk),j.config.globalProperties.$router=ne,Object.defineProperty(j.config.globalProperties,"$route",{enumerable:!0,get:()=>ir(l)}),Fr&&!qe&&l.value===zi&&(qe=!0,S(s.location).catch(Oe=>{}));const ee={};for(const Oe in zi)Object.defineProperty(ee,Oe,{get:()=>l.value[Oe],enumerable:!0});j.provide(Sh,ne),j.provide(H0,$w(ee)),j.provide(Lf,l);const se=j.unmount;Vt.add(j),j.unmount=function(){Vt.delete(j),Vt.size<1&&(c=zi,k&&k(),k=null,l.value=zi,qe=!1,re=!1),se()}}};function ht(j){return j.reduce((ne,ee)=>ne.then(()=>w(ee)),Promise.resolve())}return Ft}function Yk(n,e){const t=[],i=[],s=[],r=Math.max(e.matched.length,n.matched.length);for(let o=0;o<r;o++){const a=e.matched[o];a&&(n.matched.find(c=>ao(c,a))?i.push(a):t.push(a));const l=n.matched[o];l&&(e.matched.find(c=>ao(c,l))||s.push(l))}return[t,i,s]}function ep(){return Yn(Sh)}const Xk=()=>{};var xv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Jk=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=n[t++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=n[t++],o=n[t++],a=n[t++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const r=n[t++],o=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},z0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const r=n[s],o=s+1<n.length,a=o?n[s+1]:0,l=s+2<n.length,c=l?n[s+2]:0,u=r>>2,d=(r&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(f=64)),i.push(t[u],t[d],t[f],t[g])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(j0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Jk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const r=t[n.charAt(s++)],a=s<n.length?t[n.charAt(s)]:0;++s;const c=s<n.length?t[n.charAt(s)]:64;++s;const d=s<n.length?t[n.charAt(s)]:64;if(++s,r==null||a==null||c==null||d==null)throw new Zk;const f=r<<2|a>>4;if(i.push(f),c!==64){const g=a<<4&240|c>>2;if(i.push(g),d!==64){const m=c<<6&192|d;i.push(m)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Zk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eP=function(n){const e=j0(n);return z0.encodeByteArray(e,!0)},Eu=function(n){return eP(n).replace(/\./g,"")},W0=function(n){try{return z0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=()=>tP().__FIREBASE_DEFAULTS__,iP=()=>{if(typeof process>"u"||typeof xv>"u")return;const n=xv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},sP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&W0(n[1]);return e&&JSON.parse(e)},Ih=()=>{try{return Xk()||nP()||iP()||sP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},$0=n=>{var e,t;return(t=(e=Ih())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},rP=n=>{const e=$0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},q0=()=>{var n;return(n=Ih())===null||n===void 0?void 0:n.config},G0=n=>{var e;return(e=Ih())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Eu(JSON.stringify(t)),Eu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function cP(){var n;const e=(n=Ih())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function dP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fP(){const n=nn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function gP(){return!cP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pP(){try{return typeof indexedDB=="object"}catch{return!1}}function mP(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P="FirebaseError";class Li extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=_P,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bl.prototype.create)}}class bl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?vP(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Li(s,a,i)}}function vP(n,e){return n.replace(yP,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const yP=/\{\$([^}]+)}/g;function bP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ur(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const r=n[s],o=e[s];if(Rv(r)&&Rv(o)){if(!ur(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function Rv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function EP(n,e){const t=new wP(n,e);return t.subscribe.bind(t)}class wP{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");AP(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=Pd),s.error===void 0&&(s.error=Pd),s.complete===void 0&&(s.complete=Pd);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Pd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(n){return n&&n._delegate?n._delegate:n}class hr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new oP;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IP(e))try{this.getOrInitializeService({instanceIdentifier:js})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=js){return this.instances.has(e)}getOptions(e=js){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(e,t){var i;const s=this.normalizeInstanceIdentifier(t),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:SP(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=js){return this.component?this.component.multipleInstances?e:js:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SP(n){return n===js?void 0:n}function IP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new TP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Re||(Re={}));const xP={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},RP=Re.INFO,DP={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},kP=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=DP[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tp{constructor(e){this.name=e,this._logLevel=RP,this._logHandler=kP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const PP=(n,e)=>e.some(t=>n instanceof t);let Dv,kv;function MP(){return Dv||(Dv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OP(){return kv||(kv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K0=new WeakMap,Vf=new WeakMap,Q0=new WeakMap,Md=new WeakMap,np=new WeakMap;function NP(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",r),n.removeEventListener("error",o)},r=()=>{t(os(n.result)),s()},o=()=>{i(n.error),s()};n.addEventListener("success",r),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&K0.set(t,n)}).catch(()=>{}),np.set(e,n),e}function LP(n){if(Vf.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",o),n.removeEventListener("abort",o)},r=()=>{t(),s()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",r),n.addEventListener("error",o),n.addEventListener("abort",o)});Vf.set(n,e)}let Ff={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Vf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Q0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return os(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function VP(n){Ff=n(Ff)}function FP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Od(this),e,...t);return Q0.set(i,e.sort?e.sort():[e]),os(i)}:OP().includes(n)?function(...e){return n.apply(Od(this),e),os(K0.get(this))}:function(...e){return os(n.apply(Od(this),e))}}function BP(n){return typeof n=="function"?FP(n):(n instanceof IDBTransaction&&LP(n),PP(n,MP())?new Proxy(n,Ff):n)}function os(n){if(n instanceof IDBRequest)return NP(n);if(Md.has(n))return Md.get(n);const e=BP(n);return e!==n&&(Md.set(n,e),np.set(e,n)),e}const Od=n=>np.get(n);function UP(n,e,{blocked:t,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(n,e),a=os(o);return i&&o.addEventListener("upgradeneeded",l=>{i(os(o.result),l.oldVersion,l.newVersion,os(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const HP=["get","getKey","getAll","getAllKeys","count"],jP=["put","add","delete","clear"],Nd=new Map;function Pv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Nd.get(e))return Nd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=jP.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||HP.includes(t)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),s&&l.done]))[0]};return Nd.set(e,r),r}VP(n=>({...n,get:(e,t,i)=>Pv(e,t)||n.get(e,t,i),has:(e,t)=>!!Pv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(WP(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function WP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bf="@firebase/app",Mv="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=new tp("@firebase/app"),$P="@firebase/app-compat",qP="@firebase/analytics-compat",GP="@firebase/analytics",KP="@firebase/app-check-compat",QP="@firebase/app-check",YP="@firebase/auth",XP="@firebase/auth-compat",JP="@firebase/database",ZP="@firebase/data-connect",eM="@firebase/database-compat",tM="@firebase/functions",nM="@firebase/functions-compat",iM="@firebase/installations",sM="@firebase/installations-compat",rM="@firebase/messaging",oM="@firebase/messaging-compat",aM="@firebase/performance",lM="@firebase/performance-compat",cM="@firebase/remote-config",uM="@firebase/remote-config-compat",hM="@firebase/storage",dM="@firebase/storage-compat",fM="@firebase/firestore",gM="@firebase/vertexai",pM="@firebase/firestore-compat",mM="firebase",_M="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="[DEFAULT]",vM={[Bf]:"fire-core",[$P]:"fire-core-compat",[GP]:"fire-analytics",[qP]:"fire-analytics-compat",[QP]:"fire-app-check",[KP]:"fire-app-check-compat",[YP]:"fire-auth",[XP]:"fire-auth-compat",[JP]:"fire-rtdb",[ZP]:"fire-data-connect",[eM]:"fire-rtdb-compat",[tM]:"fire-fn",[nM]:"fire-fn-compat",[iM]:"fire-iid",[sM]:"fire-iid-compat",[rM]:"fire-fcm",[oM]:"fire-fcm-compat",[aM]:"fire-perf",[lM]:"fire-perf-compat",[cM]:"fire-rc",[uM]:"fire-rc-compat",[hM]:"fire-gcs",[dM]:"fire-gcs-compat",[fM]:"fire-fst",[pM]:"fire-fst-compat",[gM]:"fire-vertex","fire-js":"fire-js",[mM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=new Map,yM=new Map,Hf=new Map;function Ov(n,e){try{n.container.addComponent(e)}catch(t){Ri.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function co(n){const e=n.name;if(Hf.has(e))return Ri.debug(`There were multiple attempts to register component ${e}.`),!1;Hf.set(e,n);for(const t of wu.values())Ov(t,n);for(const t of yM.values())Ov(t,n);return!0}function ip(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function In(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},as=new bl("app","Firebase",bM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw as.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=_M;function Y0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Uf,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw as.create("bad-app-name",{appName:String(s)});if(t||(t=q0()),!t)throw as.create("no-options");const r=wu.get(s);if(r){if(ur(t,r.options)&&ur(i,r.config))return r;throw as.create("duplicate-app",{appName:s})}const o=new CP(s);for(const l of Hf.values())o.addComponent(l);const a=new EM(t,i,o);return wu.set(s,a),a}function X0(n=Uf){const e=wu.get(n);if(!e&&n===Uf&&q0())return Y0();if(!e)throw as.create("no-app",{appName:n});return e}function ls(n,e,t){var i;let s=(i=vM[n])!==null&&i!==void 0?i:n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${s}" with version "${e}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ri.warn(a.join(" "));return}co(new hr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM="firebase-heartbeat-database",AM=1,Xa="firebase-heartbeat-store";let Ld=null;function J0(){return Ld||(Ld=UP(wM,AM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Xa)}catch(t){console.warn(t)}}}}).catch(n=>{throw as.create("idb-open",{originalErrorMessage:n.message})})),Ld}async function TM(n){try{const t=(await J0()).transaction(Xa),i=await t.objectStore(Xa).get(Z0(n));return await t.done,i}catch(e){if(e instanceof Li)Ri.warn(e.message);else{const t=as.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ri.warn(t.message)}}}async function Nv(n,e){try{const i=(await J0()).transaction(Xa,"readwrite");await i.objectStore(Xa).put(e,Z0(n)),await i.done}catch(t){if(t instanceof Li)Ri.warn(t.message);else{const i=as.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ri.warn(i.message)}}}function Z0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=1024,IM=30;class CM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new RM(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Lv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>IM){const o=DM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ri.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Lv(),{heartbeatsToSend:i,unsentEntries:s}=xM(this._heartbeatsCache.heartbeats),r=Eu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return Ri.warn(t),""}}}function Lv(){return new Date().toISOString().substring(0,10)}function xM(n,e=SM){const t=[];let i=n.slice();for(const s of n){const r=t.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),Vv(t)>e){r.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Vv(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class RM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pP()?mP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await TM(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Nv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Nv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Vv(n){return Eu(JSON.stringify({version:2,heartbeats:n})).length}function DM(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(n){co(new hr("platform-logger",e=>new zP(e),"PRIVATE")),co(new hr("heartbeat",e=>new CM(e),"PRIVATE")),ls(Bf,Mv,n),ls(Bf,Mv,"esm2017"),ls("fire-js","")}kM("");var PM="firebase",MM="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ls(PM,MM,"app");var Fv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cs,eA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,b){function w(){}w.prototype=b.prototype,T.D=b.prototype,T.prototype=new w,T.prototype.constructor=T,T.C=function(C,x,O){for(var k=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)k[$e-2]=arguments[$e];return b.prototype[x].apply(C,k)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,b,w){w||(w=0);var C=Array(16);if(typeof b=="string")for(var x=0;16>x;++x)C[x]=b.charCodeAt(w++)|b.charCodeAt(w++)<<8|b.charCodeAt(w++)<<16|b.charCodeAt(w++)<<24;else for(x=0;16>x;++x)C[x]=b[w++]|b[w++]<<8|b[w++]<<16|b[w++]<<24;b=T.g[0],w=T.g[1],x=T.g[2];var O=T.g[3],k=b+(O^w&(x^O))+C[0]+3614090360&4294967295;b=w+(k<<7&4294967295|k>>>25),k=O+(x^b&(w^x))+C[1]+3905402710&4294967295,O=b+(k<<12&4294967295|k>>>20),k=x+(w^O&(b^w))+C[2]+606105819&4294967295,x=O+(k<<17&4294967295|k>>>15),k=w+(b^x&(O^b))+C[3]+3250441966&4294967295,w=x+(k<<22&4294967295|k>>>10),k=b+(O^w&(x^O))+C[4]+4118548399&4294967295,b=w+(k<<7&4294967295|k>>>25),k=O+(x^b&(w^x))+C[5]+1200080426&4294967295,O=b+(k<<12&4294967295|k>>>20),k=x+(w^O&(b^w))+C[6]+2821735955&4294967295,x=O+(k<<17&4294967295|k>>>15),k=w+(b^x&(O^b))+C[7]+4249261313&4294967295,w=x+(k<<22&4294967295|k>>>10),k=b+(O^w&(x^O))+C[8]+1770035416&4294967295,b=w+(k<<7&4294967295|k>>>25),k=O+(x^b&(w^x))+C[9]+2336552879&4294967295,O=b+(k<<12&4294967295|k>>>20),k=x+(w^O&(b^w))+C[10]+4294925233&4294967295,x=O+(k<<17&4294967295|k>>>15),k=w+(b^x&(O^b))+C[11]+2304563134&4294967295,w=x+(k<<22&4294967295|k>>>10),k=b+(O^w&(x^O))+C[12]+1804603682&4294967295,b=w+(k<<7&4294967295|k>>>25),k=O+(x^b&(w^x))+C[13]+4254626195&4294967295,O=b+(k<<12&4294967295|k>>>20),k=x+(w^O&(b^w))+C[14]+2792965006&4294967295,x=O+(k<<17&4294967295|k>>>15),k=w+(b^x&(O^b))+C[15]+1236535329&4294967295,w=x+(k<<22&4294967295|k>>>10),k=b+(x^O&(w^x))+C[1]+4129170786&4294967295,b=w+(k<<5&4294967295|k>>>27),k=O+(w^x&(b^w))+C[6]+3225465664&4294967295,O=b+(k<<9&4294967295|k>>>23),k=x+(b^w&(O^b))+C[11]+643717713&4294967295,x=O+(k<<14&4294967295|k>>>18),k=w+(O^b&(x^O))+C[0]+3921069994&4294967295,w=x+(k<<20&4294967295|k>>>12),k=b+(x^O&(w^x))+C[5]+3593408605&4294967295,b=w+(k<<5&4294967295|k>>>27),k=O+(w^x&(b^w))+C[10]+38016083&4294967295,O=b+(k<<9&4294967295|k>>>23),k=x+(b^w&(O^b))+C[15]+3634488961&4294967295,x=O+(k<<14&4294967295|k>>>18),k=w+(O^b&(x^O))+C[4]+3889429448&4294967295,w=x+(k<<20&4294967295|k>>>12),k=b+(x^O&(w^x))+C[9]+568446438&4294967295,b=w+(k<<5&4294967295|k>>>27),k=O+(w^x&(b^w))+C[14]+3275163606&4294967295,O=b+(k<<9&4294967295|k>>>23),k=x+(b^w&(O^b))+C[3]+4107603335&4294967295,x=O+(k<<14&4294967295|k>>>18),k=w+(O^b&(x^O))+C[8]+1163531501&4294967295,w=x+(k<<20&4294967295|k>>>12),k=b+(x^O&(w^x))+C[13]+2850285829&4294967295,b=w+(k<<5&4294967295|k>>>27),k=O+(w^x&(b^w))+C[2]+4243563512&4294967295,O=b+(k<<9&4294967295|k>>>23),k=x+(b^w&(O^b))+C[7]+1735328473&4294967295,x=O+(k<<14&4294967295|k>>>18),k=w+(O^b&(x^O))+C[12]+2368359562&4294967295,w=x+(k<<20&4294967295|k>>>12),k=b+(w^x^O)+C[5]+4294588738&4294967295,b=w+(k<<4&4294967295|k>>>28),k=O+(b^w^x)+C[8]+2272392833&4294967295,O=b+(k<<11&4294967295|k>>>21),k=x+(O^b^w)+C[11]+1839030562&4294967295,x=O+(k<<16&4294967295|k>>>16),k=w+(x^O^b)+C[14]+4259657740&4294967295,w=x+(k<<23&4294967295|k>>>9),k=b+(w^x^O)+C[1]+2763975236&4294967295,b=w+(k<<4&4294967295|k>>>28),k=O+(b^w^x)+C[4]+1272893353&4294967295,O=b+(k<<11&4294967295|k>>>21),k=x+(O^b^w)+C[7]+4139469664&4294967295,x=O+(k<<16&4294967295|k>>>16),k=w+(x^O^b)+C[10]+3200236656&4294967295,w=x+(k<<23&4294967295|k>>>9),k=b+(w^x^O)+C[13]+681279174&4294967295,b=w+(k<<4&4294967295|k>>>28),k=O+(b^w^x)+C[0]+3936430074&4294967295,O=b+(k<<11&4294967295|k>>>21),k=x+(O^b^w)+C[3]+3572445317&4294967295,x=O+(k<<16&4294967295|k>>>16),k=w+(x^O^b)+C[6]+76029189&4294967295,w=x+(k<<23&4294967295|k>>>9),k=b+(w^x^O)+C[9]+3654602809&4294967295,b=w+(k<<4&4294967295|k>>>28),k=O+(b^w^x)+C[12]+3873151461&4294967295,O=b+(k<<11&4294967295|k>>>21),k=x+(O^b^w)+C[15]+530742520&4294967295,x=O+(k<<16&4294967295|k>>>16),k=w+(x^O^b)+C[2]+3299628645&4294967295,w=x+(k<<23&4294967295|k>>>9),k=b+(x^(w|~O))+C[0]+4096336452&4294967295,b=w+(k<<6&4294967295|k>>>26),k=O+(w^(b|~x))+C[7]+1126891415&4294967295,O=b+(k<<10&4294967295|k>>>22),k=x+(b^(O|~w))+C[14]+2878612391&4294967295,x=O+(k<<15&4294967295|k>>>17),k=w+(O^(x|~b))+C[5]+4237533241&4294967295,w=x+(k<<21&4294967295|k>>>11),k=b+(x^(w|~O))+C[12]+1700485571&4294967295,b=w+(k<<6&4294967295|k>>>26),k=O+(w^(b|~x))+C[3]+2399980690&4294967295,O=b+(k<<10&4294967295|k>>>22),k=x+(b^(O|~w))+C[10]+4293915773&4294967295,x=O+(k<<15&4294967295|k>>>17),k=w+(O^(x|~b))+C[1]+2240044497&4294967295,w=x+(k<<21&4294967295|k>>>11),k=b+(x^(w|~O))+C[8]+1873313359&4294967295,b=w+(k<<6&4294967295|k>>>26),k=O+(w^(b|~x))+C[15]+4264355552&4294967295,O=b+(k<<10&4294967295|k>>>22),k=x+(b^(O|~w))+C[6]+2734768916&4294967295,x=O+(k<<15&4294967295|k>>>17),k=w+(O^(x|~b))+C[13]+1309151649&4294967295,w=x+(k<<21&4294967295|k>>>11),k=b+(x^(w|~O))+C[4]+4149444226&4294967295,b=w+(k<<6&4294967295|k>>>26),k=O+(w^(b|~x))+C[11]+3174756917&4294967295,O=b+(k<<10&4294967295|k>>>22),k=x+(b^(O|~w))+C[2]+718787259&4294967295,x=O+(k<<15&4294967295|k>>>17),k=w+(O^(x|~b))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+b&4294967295,T.g[1]=T.g[1]+(x+(k<<21&4294967295|k>>>11))&4294967295,T.g[2]=T.g[2]+x&4294967295,T.g[3]=T.g[3]+O&4294967295}i.prototype.u=function(T,b){b===void 0&&(b=T.length);for(var w=b-this.blockSize,C=this.B,x=this.h,O=0;O<b;){if(x==0)for(;O<=w;)s(this,T,O),O+=this.blockSize;if(typeof T=="string"){for(;O<b;)if(C[x++]=T.charCodeAt(O++),x==this.blockSize){s(this,C),x=0;break}}else for(;O<b;)if(C[x++]=T[O++],x==this.blockSize){s(this,C),x=0;break}}this.h=x,this.o+=b},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var b=1;b<T.length-8;++b)T[b]=0;var w=8*this.o;for(b=T.length-8;b<T.length;++b)T[b]=w&255,w/=256;for(this.u(T),T=Array(16),b=w=0;4>b;++b)for(var C=0;32>C;C+=8)T[w++]=this.g[b]>>>C&255;return T};function r(T,b){var w=a;return Object.prototype.hasOwnProperty.call(w,T)?w[T]:w[T]=b(T)}function o(T,b){this.h=b;for(var w=[],C=!0,x=T.length-1;0<=x;x--){var O=T[x]|0;C&&O==b||(w[x]=O,C=!1)}this.g=w}var a={};function l(T){return-128<=T&&128>T?r(T,function(b){return new o([b|0],0>b?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return d;if(0>T)return y(c(-T));for(var b=[],w=1,C=0;T>=w;C++)b[C]=T/w|0,w*=4294967296;return new o(b,0)}function u(T,b){if(T.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(T.charAt(0)=="-")return y(u(T.substring(1),b));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=c(Math.pow(b,8)),C=d,x=0;x<T.length;x+=8){var O=Math.min(8,T.length-x),k=parseInt(T.substring(x,x+O),b);8>O?(O=c(Math.pow(b,O)),C=C.j(O).add(c(k))):(C=C.j(w),C=C.add(c(k)))}return C}var d=l(0),f=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(_(this))return-y(this).m();for(var T=0,b=1,w=0;w<this.g.length;w++){var C=this.i(w);T+=(0<=C?C:4294967296+C)*b,b*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(m(this))return"0";if(_(this))return"-"+y(this).toString(T);for(var b=c(Math.pow(T,6)),w=this,C="";;){var x=S(w,b).g;w=E(w,x.j(b));var O=((0<w.g.length?w.g[0]:w.h)>>>0).toString(T);if(w=x,m(w))return O+C;for(;6>O.length;)O="0"+O;C=O+C}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function m(T){if(T.h!=0)return!1;for(var b=0;b<T.g.length;b++)if(T.g[b]!=0)return!1;return!0}function _(T){return T.h==-1}n.l=function(T){return T=E(this,T),_(T)?-1:m(T)?0:1};function y(T){for(var b=T.g.length,w=[],C=0;C<b;C++)w[C]=~T.g[C];return new o(w,~T.h).add(f)}n.abs=function(){return _(this)?y(this):this},n.add=function(T){for(var b=Math.max(this.g.length,T.g.length),w=[],C=0,x=0;x<=b;x++){var O=C+(this.i(x)&65535)+(T.i(x)&65535),k=(O>>>16)+(this.i(x)>>>16)+(T.i(x)>>>16);C=k>>>16,O&=65535,k&=65535,w[x]=k<<16|O}return new o(w,w[w.length-1]&-2147483648?-1:0)};function E(T,b){return T.add(y(b))}n.j=function(T){if(m(this)||m(T))return d;if(_(this))return _(T)?y(this).j(y(T)):y(y(this).j(T));if(_(T))return y(this.j(y(T)));if(0>this.l(g)&&0>T.l(g))return c(this.m()*T.m());for(var b=this.g.length+T.g.length,w=[],C=0;C<2*b;C++)w[C]=0;for(C=0;C<this.g.length;C++)for(var x=0;x<T.g.length;x++){var O=this.i(C)>>>16,k=this.i(C)&65535,$e=T.i(x)>>>16,Se=T.i(x)&65535;w[2*C+2*x]+=k*Se,I(w,2*C+2*x),w[2*C+2*x+1]+=O*Se,I(w,2*C+2*x+1),w[2*C+2*x+1]+=k*$e,I(w,2*C+2*x+1),w[2*C+2*x+2]+=O*$e,I(w,2*C+2*x+2)}for(C=0;C<b;C++)w[C]=w[2*C+1]<<16|w[2*C];for(C=b;C<2*b;C++)w[C]=0;return new o(w,0)};function I(T,b){for(;(T[b]&65535)!=T[b];)T[b+1]+=T[b]>>>16,T[b]&=65535,b++}function R(T,b){this.g=T,this.h=b}function S(T,b){if(m(b))throw Error("division by zero");if(m(T))return new R(d,d);if(_(T))return b=S(y(T),b),new R(y(b.g),y(b.h));if(_(b))return b=S(T,y(b)),new R(y(b.g),b.h);if(30<T.g.length){if(_(T)||_(b))throw Error("slowDivide_ only works with positive integers.");for(var w=f,C=b;0>=C.l(T);)w=D(w),C=D(C);var x=N(w,1),O=N(C,1);for(C=N(C,2),w=N(w,2);!m(C);){var k=O.add(C);0>=k.l(T)&&(x=x.add(w),O=k),C=N(C,1),w=N(w,1)}return b=E(T,x.j(b)),new R(x,b)}for(x=d;0<=T.l(b);){for(w=Math.max(1,Math.floor(T.m()/b.m())),C=Math.ceil(Math.log(w)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),O=c(w),k=O.j(b);_(k)||0<k.l(T);)w-=C,O=c(w),k=O.j(b);m(O)&&(O=f),x=x.add(O),T=E(T,k)}return new R(x,T)}n.A=function(T){return S(this,T).h},n.and=function(T){for(var b=Math.max(this.g.length,T.g.length),w=[],C=0;C<b;C++)w[C]=this.i(C)&T.i(C);return new o(w,this.h&T.h)},n.or=function(T){for(var b=Math.max(this.g.length,T.g.length),w=[],C=0;C<b;C++)w[C]=this.i(C)|T.i(C);return new o(w,this.h|T.h)},n.xor=function(T){for(var b=Math.max(this.g.length,T.g.length),w=[],C=0;C<b;C++)w[C]=this.i(C)^T.i(C);return new o(w,this.h^T.h)};function D(T){for(var b=T.g.length+1,w=[],C=0;C<b;C++)w[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(w,T.h)}function N(T,b){var w=b>>5;b%=32;for(var C=T.g.length-w,x=[],O=0;O<C;O++)x[O]=0<b?T.i(O+w)>>>b|T.i(O+w+1)<<32-b:T.i(O+w);return new o(x,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,eA=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,cs=o}).apply(typeof Fv<"u"?Fv:typeof self<"u"?self:typeof window<"u"?window:{});var ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tA,oa,nA,jc,jf,iA,sA,rA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,p,v){return h==Array.prototype||h==Object.prototype||(h[p]=v.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ic=="object"&&ic];for(var p=0;p<h.length;++p){var v=h[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function s(h,p){if(p)e:{var v=i;h=h.split(".");for(var A=0;A<h.length-1;A++){var V=h[A];if(!(V in v))break e;v=v[V]}h=h[h.length-1],A=v[h],p=p(A),p!=A&&p!=null&&e(v,h,{configurable:!0,writable:!0,value:p})}}function r(h,p){h instanceof String&&(h+="");var v=0,A=!1,V={next:function(){if(!A&&v<h.length){var U=v++;return{value:p(U,h[U]),done:!1}}return A=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(h){return h||function(){return r(this,function(p,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var p=typeof h;return p=p!="object"?p:h?Array.isArray(h)?"array":p:"null",p=="array"||p=="object"&&typeof h.length=="number"}function c(h){var p=typeof h;return p=="object"&&h!=null||p=="function"}function u(h,p,v){return h.call.apply(h.bind,arguments)}function d(h,p,v){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,A),h.apply(p,V)}}return function(){return h.apply(p,arguments)}}function f(h,p,v){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function g(h,p){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function m(h,p){function v(){}v.prototype=p.prototype,h.aa=p.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(A,V,U){for(var X=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)X[Ke-2]=arguments[Ke];return p.prototype[V].apply(A,X)}}function _(h){const p=h.length;if(0<p){const v=Array(p);for(let A=0;A<p;A++)v[A]=h[A];return v}return[]}function y(h,p){for(let v=1;v<arguments.length;v++){const A=arguments[v];if(l(A)){const V=h.length||0,U=A.length||0;h.length=V+U;for(let X=0;X<U;X++)h[V+X]=A[X]}else h.push(A)}}class E{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function I(h){return/^[\s\xa0]*$/.test(h)}function R(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function S(h){return S[" "](h),h}S[" "]=function(){};var D=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function N(h,p,v){for(const A in h)p.call(v,h[A],A,h)}function T(h,p){for(const v in h)p.call(void 0,h[v],v,h)}function b(h){const p={};for(const v in h)p[v]=h[v];return p}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(h,p){let v,A;for(let V=1;V<arguments.length;V++){A=arguments[V];for(v in A)h[v]=A[v];for(let U=0;U<w.length;U++)v=w[U],Object.prototype.hasOwnProperty.call(A,v)&&(h[v]=A[v])}}function x(h){var p=1;h=h.split(":");const v=[];for(;0<p&&h.length;)v.push(h.shift()),p--;return h.length&&v.push(h.join(":")),v}function O(h){a.setTimeout(()=>{throw h},0)}function k(){var h=Fe;let p=null;return h.g&&(p=h.g,h.g=h.g.next,h.g||(h.h=null),p.next=null),p}class $e{constructor(){this.h=this.g=null}add(p,v){const A=Se.get();A.set(p,v),this.h?this.h.next=A:this.g=A,this.h=A}}var Se=new E(()=>new _e,h=>h.reset());class _e{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let re,de=!1,Fe=new $e,Tt=()=>{const h=a.Promise.resolve(void 0);re=()=>{h.then(xt)}};var xt=()=>{for(var h;h=k();){try{h.h.call(h.g)}catch(v){O(v)}var p=Se;p.j(h),100>p.h&&(p.h++,h.next=p.g,p.g=h)}de=!1};function Be(){this.s=this.s,this.C=this.C}Be.prototype.s=!1,Be.prototype.ma=function(){this.s||(this.s=!0,this.N())},Be.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function qe(h,p){this.type=h,this.g=this.target=p,this.defaultPrevented=!1}qe.prototype.h=function(){this.defaultPrevented=!0};var Vt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,p=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};a.addEventListener("test",v,p),a.removeEventListener("test",v,p)}catch{}return h}();function Ft(h,p){if(qe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=p,p=h.relatedTarget){if(D){e:{try{S(p.nodeName);var V=!0;break e}catch{}V=!1}V||(p=null)}}else v=="mouseover"?p=h.fromElement:v=="mouseout"&&(p=h.toElement);this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ht[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ft.aa.h.call(this)}}m(Ft,qe);var ht={2:"touch",3:"pen",4:"mouse"};Ft.prototype.h=function(){Ft.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),ne=0;function ee(h,p,v,A,V){this.listener=h,this.proxy=null,this.src=p,this.type=v,this.capture=!!A,this.ha=V,this.key=++ne,this.da=this.fa=!1}function se(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Oe(h){this.src=h,this.g={},this.h=0}Oe.prototype.add=function(h,p,v,A,V){var U=h.toString();h=this.g[U],h||(h=this.g[U]=[],this.h++);var X=M(h,p,A,V);return-1<X?(p=h[X],v||(p.fa=!1)):(p=new ee(p,this.src,U,!!A,V),p.fa=v,h.push(p)),p};function P(h,p){var v=p.type;if(v in h.g){var A=h.g[v],V=Array.prototype.indexOf.call(A,p,void 0),U;(U=0<=V)&&Array.prototype.splice.call(A,V,1),U&&(se(p),h.g[v].length==0&&(delete h.g[v],h.h--))}}function M(h,p,v,A){for(var V=0;V<h.length;++V){var U=h[V];if(!U.da&&U.listener==p&&U.capture==!!v&&U.ha==A)return V}return-1}var L="closure_lm_"+(1e6*Math.random()|0),z={};function q(h,p,v,A,V){if(Array.isArray(p)){for(var U=0;U<p.length;U++)q(h,p[U],v,A,V);return null}return v=fe(v),h&&h[j]?h.K(p,v,c(A)?!!A.capture:!1,V):W(h,p,v,!1,A,V)}function W(h,p,v,A,V,U){if(!p)throw Error("Invalid event type");var X=c(V)?!!V.capture:!!V,Ke=te(h);if(Ke||(h[L]=Ke=new Oe(h)),v=Ke.add(p,v,A,X,U),v.proxy)return v;if(A=Z(),v.proxy=A,A.src=h,A.listener=v,h.addEventListener)Vt||(V=X),V===void 0&&(V=!1),h.addEventListener(p.toString(),A,V);else if(h.attachEvent)h.attachEvent(K(p.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Z(){function h(v){return p.call(h.src,h.listener,v)}const p=ue;return h}function Y(h,p,v,A,V){if(Array.isArray(p))for(var U=0;U<p.length;U++)Y(h,p[U],v,A,V);else A=c(A)?!!A.capture:!!A,v=fe(v),h&&h[j]?(h=h.i,p=String(p).toString(),p in h.g&&(U=h.g[p],v=M(U,v,A,V),-1<v&&(se(U[v]),Array.prototype.splice.call(U,v,1),U.length==0&&(delete h.g[p],h.h--)))):h&&(h=te(h))&&(p=h.g[p.toString()],h=-1,p&&(h=M(p,v,A,V)),(v=-1<h?p[h]:null)&&Q(v))}function Q(h){if(typeof h!="number"&&h&&!h.da){var p=h.src;if(p&&p[j])P(p.i,h);else{var v=h.type,A=h.proxy;p.removeEventListener?p.removeEventListener(v,A,h.capture):p.detachEvent?p.detachEvent(K(v),A):p.addListener&&p.removeListener&&p.removeListener(A),(v=te(p))?(P(v,h),v.h==0&&(v.src=null,p[L]=null)):se(h)}}}function K(h){return h in z?z[h]:z[h]="on"+h}function ue(h,p){if(h.da)h=!0;else{p=new Ft(p,this);var v=h.listener,A=h.ha||h.src;h.fa&&Q(h),h=v.call(A,p)}return h}function te(h){return h=h[L],h instanceof Oe?h:null}var oe="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(h){return typeof h=="function"?h:(h[oe]||(h[oe]=function(p){return h.handleEvent(p)}),h[oe])}function he(){Be.call(this),this.i=new Oe(this),this.M=this,this.F=null}m(he,Be),he.prototype[j]=!0,he.prototype.removeEventListener=function(h,p,v,A){Y(this,h,p,v,A)};function Ae(h,p){var v,A=h.F;if(A)for(v=[];A;A=A.F)v.push(A);if(h=h.M,A=p.type||p,typeof p=="string")p=new qe(p,h);else if(p instanceof qe)p.target=p.target||h;else{var V=p;p=new qe(A,h),C(p,V)}if(V=!0,v)for(var U=v.length-1;0<=U;U--){var X=p.g=v[U];V=Pe(X,A,!0,p)&&V}if(X=p.g=h,V=Pe(X,A,!0,p)&&V,V=Pe(X,A,!1,p)&&V,v)for(U=0;U<v.length;U++)X=p.g=v[U],V=Pe(X,A,!1,p)&&V}he.prototype.N=function(){if(he.aa.N.call(this),this.i){var h=this.i,p;for(p in h.g){for(var v=h.g[p],A=0;A<v.length;A++)se(v[A]);delete h.g[p],h.h--}}this.F=null},he.prototype.K=function(h,p,v,A){return this.i.add(String(h),p,!1,v,A)},he.prototype.L=function(h,p,v,A){return this.i.add(String(h),p,!0,v,A)};function Pe(h,p,v,A){if(p=h.i.g[String(p)],!p)return!0;p=p.concat();for(var V=!0,U=0;U<p.length;++U){var X=p[U];if(X&&!X.da&&X.capture==v){var Ke=X.listener,kt=X.ha||X.src;X.fa&&P(h.i,X),V=Ke.call(kt,A)!==!1&&V}}return V&&!A.defaultPrevented}function Bt(h,p,v){if(typeof h=="function")v&&(h=f(h,v));else if(h&&typeof h.handleEvent=="function")h=f(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(h,p||0)}function Rt(h){h.g=Bt(()=>{h.g=null,h.i&&(h.i=!1,Rt(h))},h.l);const p=h.h;h.h=null,h.m.apply(null,p)}class wn extends Be{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Rt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ut(h){Be.call(this),this.h=h,this.g={}}m(Ut,Be);var Bi=[];function Vo(h){N(h.g,function(p,v){this.g.hasOwnProperty(v)&&Q(p)},h),h.g={}}Ut.prototype.N=function(){Ut.aa.N.call(this),Vo(this)},Ut.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dt=a.JSON.stringify,An=a.JSON.parse,Vl=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function rd(){}rd.prototype.h=null;function Um(h){return h.h||(h.h=h.i())}function Hm(){}var Fo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function od(){qe.call(this,"d")}m(od,qe);function ad(){qe.call(this,"c")}m(ad,qe);var ks={},jm=null;function Fl(){return jm=jm||new he}ks.La="serverreachability";function zm(h){qe.call(this,ks.La,h)}m(zm,qe);function Bo(h){const p=Fl();Ae(p,new zm(p))}ks.STAT_EVENT="statevent";function Wm(h,p){qe.call(this,ks.STAT_EVENT,h),this.stat=p}m(Wm,qe);function sn(h){const p=Fl();Ae(p,new Wm(p,h))}ks.Ma="timingevent";function $m(h,p){qe.call(this,ks.Ma,h),this.size=p}m($m,qe);function Uo(h,p){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},p)}function Ho(){this.g=!0}Ho.prototype.xa=function(){this.g=!1};function QC(h,p,v,A,V,U){h.info(function(){if(h.g)if(U)for(var X="",Ke=U.split("&"),kt=0;kt<Ke.length;kt++){var Ne=Ke[kt].split("=");if(1<Ne.length){var Ht=Ne[0];Ne=Ne[1];var jt=Ht.split("_");X=2<=jt.length&&jt[1]=="type"?X+(Ht+"="+Ne+"&"):X+(Ht+"=redacted&")}}else X=null;else X=U;return"XMLHTTP REQ ("+A+") [attempt "+V+"]: "+p+`
`+v+`
`+X})}function YC(h,p,v,A,V,U,X){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+V+"]: "+p+`
`+v+`
`+U+" "+X})}function Dr(h,p,v,A){h.info(function(){return"XMLHTTP TEXT ("+p+"): "+JC(h,v)+(A?" "+A:"")})}function XC(h,p){h.info(function(){return"TIMEOUT: "+p})}Ho.prototype.info=function(){};function JC(h,p){if(!h.g)return p;if(!p)return null;try{var v=JSON.parse(p);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var A=v[h];if(!(2>A.length)){var V=A[1];if(Array.isArray(V)&&!(1>V.length)){var U=V[0];if(U!="noop"&&U!="stop"&&U!="close")for(var X=1;X<V.length;X++)V[X]=""}}}}return Dt(v)}catch{return p}}var Bl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ld;function Ul(){}m(Ul,rd),Ul.prototype.g=function(){return new XMLHttpRequest},Ul.prototype.i=function(){return{}},ld=new Ul;function Ui(h,p,v,A){this.j=h,this.i=p,this.l=v,this.R=A||1,this.U=new Ut(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gm}function Gm(){this.i=null,this.g="",this.h=!1}var Km={},cd={};function ud(h,p,v){h.L=1,h.v=Wl(ci(p)),h.m=v,h.P=!0,Qm(h,null)}function Qm(h,p){h.F=Date.now(),Hl(h),h.A=ci(h.v);var v=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),c_(v.i,"t",A),h.C=0,v=h.j.J,h.h=new Gm,h.g=C_(h.j,v?p:null,!h.m),0<h.O&&(h.M=new wn(f(h.Y,h,h.g),h.O)),p=h.U,v=h.g,A=h.ca;var V="readystatechange";Array.isArray(V)||(V&&(Bi[0]=V.toString()),V=Bi);for(var U=0;U<V.length;U++){var X=q(v,V[U],A||p.handleEvent,!1,p.h||p);if(!X)break;p.g[X.key]=X}p=h.H?b(h.H):{},h.m?(h.u||(h.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,p)):(h.u="GET",h.g.ea(h.A,h.u,null,p)),Bo(),QC(h.i,h.u,h.A,h.l,h.R,h.m)}Ui.prototype.ca=function(h){h=h.target;const p=this.M;p&&ui(h)==3?p.j():this.Y(h)},Ui.prototype.Y=function(h){try{if(h==this.g)e:{const jt=ui(this.g);var p=this.g.Ba();const Mr=this.g.Z();if(!(3>jt)&&(jt!=3||this.g&&(this.h.h||this.g.oa()||m_(this.g)))){this.J||jt!=4||p==7||(p==8||0>=Mr?Bo(3):Bo(2)),hd(this);var v=this.g.Z();this.X=v;t:if(Ym(this)){var A=m_(this.g);h="";var V=A.length,U=ui(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ps(this),jo(this);var X="";break t}this.h.i=new a.TextDecoder}for(p=0;p<V;p++)this.h.h=!0,h+=this.h.i.decode(A[p],{stream:!(U&&p==V-1)});A.length=0,this.h.g+=h,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=v==200,YC(this.i,this.u,this.A,this.l,this.R,jt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,kt=this.g;if((Ke=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Ke)){var Ne=Ke;break t}}Ne=null}if(v=Ne)Dr(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dd(this,v);else{this.o=!1,this.s=3,sn(12),Ps(this),jo(this);break e}}if(this.P){v=!0;let kn;for(;!this.J&&this.C<X.length;)if(kn=ZC(this,X),kn==cd){jt==4&&(this.s=4,sn(14),v=!1),Dr(this.i,this.l,null,"[Incomplete Response]");break}else if(kn==Km){this.s=4,sn(15),Dr(this.i,this.l,X,"[Invalid Chunk]"),v=!1;break}else Dr(this.i,this.l,kn,null),dd(this,kn);if(Ym(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||X.length!=0||this.h.h||(this.s=1,sn(16),v=!1),this.o=this.o&&v,!v)Dr(this.i,this.l,X,"[Invalid Chunked Response]"),Ps(this),jo(this);else if(0<X.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),vd(Ht),Ht.M=!0,sn(11))}}else Dr(this.i,this.l,X,null),dd(this,X);jt==4&&Ps(this),this.o&&!this.J&&(jt==4?A_(this.j,this):(this.o=!1,Hl(this)))}else mx(this.g),v==400&&0<X.indexOf("Unknown SID")?(this.s=3,sn(12)):(this.s=0,sn(13)),Ps(this),jo(this)}}}catch{}finally{}};function Ym(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ZC(h,p){var v=h.C,A=p.indexOf(`
`,v);return A==-1?cd:(v=Number(p.substring(v,A)),isNaN(v)?Km:(A+=1,A+v>p.length?cd:(p=p.slice(A,A+v),h.C=A+v,p)))}Ui.prototype.cancel=function(){this.J=!0,Ps(this)};function Hl(h){h.S=Date.now()+h.I,Xm(h,h.I)}function Xm(h,p){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Uo(f(h.ba,h),p)}function hd(h){h.B&&(a.clearTimeout(h.B),h.B=null)}Ui.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(XC(this.i,this.A),this.L!=2&&(Bo(),sn(17)),Ps(this),this.s=2,jo(this)):Xm(this,this.S-h)};function jo(h){h.j.G==0||h.J||A_(h.j,h)}function Ps(h){hd(h);var p=h.M;p&&typeof p.ma=="function"&&p.ma(),h.M=null,Vo(h.U),h.g&&(p=h.g,h.g=null,p.abort(),p.ma())}function dd(h,p){try{var v=h.j;if(v.G!=0&&(v.g==h||fd(v.h,h))){if(!h.K&&fd(v.h,h)&&v.G==3){try{var A=v.Da.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var V=A;if(V[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)Yl(v),Kl(v);else break e;_d(v),sn(18)}}else v.za=V[1],0<v.za-v.T&&37500>V[2]&&v.F&&v.v==0&&!v.C&&(v.C=Uo(f(v.Za,v),6e3));if(1>=e_(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Os(v,11)}else if((h.K||v.g==h)&&Yl(v),!I(p))for(V=v.Da.g.parse(p),p=0;p<V.length;p++){let Ne=V[p];if(v.T=Ne[0],Ne=Ne[1],v.G==2)if(Ne[0]=="c"){v.K=Ne[1],v.ia=Ne[2];const Ht=Ne[3];Ht!=null&&(v.la=Ht,v.j.info("VER="+v.la));const jt=Ne[4];jt!=null&&(v.Aa=jt,v.j.info("SVER="+v.Aa));const Mr=Ne[5];Mr!=null&&typeof Mr=="number"&&0<Mr&&(A=1.5*Mr,v.L=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const kn=h.g;if(kn){const Jl=kn.g?kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jl){var U=A.h;U.g||Jl.indexOf("spdy")==-1&&Jl.indexOf("quic")==-1&&Jl.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(gd(U,U.h),U.h=null))}if(A.D){const yd=kn.g?kn.g.getResponseHeader("X-HTTP-Session-Id"):null;yd&&(A.ya=yd,Ze(A.I,A.D,yd))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),A=v;var X=h;if(A.qa=I_(A,A.J?A.ia:null,A.W),X.K){t_(A.h,X);var Ke=X,kt=A.L;kt&&(Ke.I=kt),Ke.B&&(hd(Ke),Hl(Ke)),A.g=X}else E_(A);0<v.i.length&&Ql(v)}else Ne[0]!="stop"&&Ne[0]!="close"||Os(v,7);else v.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?Os(v,7):md(v):Ne[0]!="noop"&&v.l&&v.l.ta(Ne),v.v=0)}}Bo(4)}catch{}}var ex=class{constructor(h,p){this.g=h,this.map=p}};function Jm(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zm(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function e_(h){return h.h?1:h.g?h.g.size:0}function fd(h,p){return h.h?h.h==p:h.g?h.g.has(p):!1}function gd(h,p){h.g?h.g.add(p):h.h=p}function t_(h,p){h.h&&h.h==p?h.h=null:h.g&&h.g.has(p)&&h.g.delete(p)}Jm.prototype.cancel=function(){if(this.i=n_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function n_(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let p=h.i;for(const v of h.g.values())p=p.concat(v.D);return p}return _(h.i)}function tx(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var p=[],v=h.length,A=0;A<v;A++)p.push(h[A]);return p}p=[],v=0;for(A in h)p[v++]=h[A];return p}function nx(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var p=[];h=h.length;for(var v=0;v<h;v++)p.push(v);return p}p=[],v=0;for(const A in h)p[v++]=A;return p}}}function i_(h,p){if(h.forEach&&typeof h.forEach=="function")h.forEach(p,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,p,void 0);else for(var v=nx(h),A=tx(h),V=A.length,U=0;U<V;U++)p.call(void 0,A[U],v&&v[U],h)}var s_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ix(h,p){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var A=h[v].indexOf("="),V=null;if(0<=A){var U=h[v].substring(0,A);V=h[v].substring(A+1)}else U=h[v];p(U,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Ms(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ms){this.h=h.h,jl(this,h.j),this.o=h.o,this.g=h.g,zl(this,h.s),this.l=h.l;var p=h.i,v=new $o;v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),r_(this,v),this.m=h.m}else h&&(p=String(h).match(s_))?(this.h=!1,jl(this,p[1]||"",!0),this.o=zo(p[2]||""),this.g=zo(p[3]||"",!0),zl(this,p[4]),this.l=zo(p[5]||"",!0),r_(this,p[6]||"",!0),this.m=zo(p[7]||"")):(this.h=!1,this.i=new $o(null,this.h))}Ms.prototype.toString=function(){var h=[],p=this.j;p&&h.push(Wo(p,o_,!0),":");var v=this.g;return(v||p=="file")&&(h.push("//"),(p=this.o)&&h.push(Wo(p,o_,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Wo(v,v.charAt(0)=="/"?ox:rx,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Wo(v,lx)),h.join("")};function ci(h){return new Ms(h)}function jl(h,p,v){h.j=v?zo(p,!0):p,h.j&&(h.j=h.j.replace(/:$/,""))}function zl(h,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);h.s=p}else h.s=null}function r_(h,p,v){p instanceof $o?(h.i=p,cx(h.i,h.h)):(v||(p=Wo(p,ax)),h.i=new $o(p,h.h))}function Ze(h,p,v){h.i.set(p,v)}function Wl(h){return Ze(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function zo(h,p){return h?p?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Wo(h,p,v){return typeof h=="string"?(h=encodeURI(h).replace(p,sx),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function sx(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var o_=/[#\/\?@]/g,rx=/[#\?:]/g,ox=/[#\?]/g,ax=/[#\?@]/g,lx=/#/g;function $o(h,p){this.h=this.g=null,this.i=h||null,this.j=!!p}function Hi(h){h.g||(h.g=new Map,h.h=0,h.i&&ix(h.i,function(p,v){h.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}n=$o.prototype,n.add=function(h,p){Hi(this),this.i=null,h=kr(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(p),this.h+=1,this};function a_(h,p){Hi(h),p=kr(h,p),h.g.has(p)&&(h.i=null,h.h-=h.g.get(p).length,h.g.delete(p))}function l_(h,p){return Hi(h),p=kr(h,p),h.g.has(p)}n.forEach=function(h,p){Hi(this),this.g.forEach(function(v,A){v.forEach(function(V){h.call(p,V,A,this)},this)},this)},n.na=function(){Hi(this);const h=Array.from(this.g.values()),p=Array.from(this.g.keys()),v=[];for(let A=0;A<p.length;A++){const V=h[A];for(let U=0;U<V.length;U++)v.push(p[A])}return v},n.V=function(h){Hi(this);let p=[];if(typeof h=="string")l_(this,h)&&(p=p.concat(this.g.get(kr(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)p=p.concat(h[v])}return p},n.set=function(h,p){return Hi(this),this.i=null,h=kr(this,h),l_(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[p]),this.h+=1,this},n.get=function(h,p){return h?(h=this.V(h),0<h.length?String(h[0]):p):p};function c_(h,p,v){a_(h,p),0<v.length&&(h.i=null,h.g.set(kr(h,p),_(v)),h.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],p=Array.from(this.g.keys());for(var v=0;v<p.length;v++){var A=p[v];const U=encodeURIComponent(String(A)),X=this.V(A);for(A=0;A<X.length;A++){var V=U;X[A]!==""&&(V+="="+encodeURIComponent(String(X[A]))),h.push(V)}}return this.i=h.join("&")};function kr(h,p){return p=String(p),h.j&&(p=p.toLowerCase()),p}function cx(h,p){p&&!h.j&&(Hi(h),h.i=null,h.g.forEach(function(v,A){var V=A.toLowerCase();A!=V&&(a_(this,A),c_(this,V,v))},h)),h.j=p}function ux(h,p){const v=new Ho;if(a.Image){const A=new Image;A.onload=g(ji,v,"TestLoadImage: loaded",!0,p,A),A.onerror=g(ji,v,"TestLoadImage: error",!1,p,A),A.onabort=g(ji,v,"TestLoadImage: abort",!1,p,A),A.ontimeout=g(ji,v,"TestLoadImage: timeout",!1,p,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else p(!1)}function hx(h,p){const v=new Ho,A=new AbortController,V=setTimeout(()=>{A.abort(),ji(v,"TestPingServer: timeout",!1,p)},1e4);fetch(h,{signal:A.signal}).then(U=>{clearTimeout(V),U.ok?ji(v,"TestPingServer: ok",!0,p):ji(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(V),ji(v,"TestPingServer: error",!1,p)})}function ji(h,p,v,A,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),A(v)}catch{}}function dx(){this.g=new Vl}function fx(h,p,v){const A=v||"";try{i_(h,function(V,U){let X=V;c(V)&&(X=Dt(V)),p.push(A+U+"="+encodeURIComponent(X))})}catch(V){throw p.push(A+"type="+encodeURIComponent("_badmap")),V}}function $l(h){this.l=h.Ub||null,this.j=h.eb||!1}m($l,rd),$l.prototype.g=function(){return new ql(this.l,this.j)},$l.prototype.i=function(h){return function(){return h}}({});function ql(h,p){he.call(this),this.D=h,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(ql,he),n=ql.prototype,n.open=function(h,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=p,this.readyState=1,Go(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(p.body=h),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qo(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Go(this)),this.g&&(this.readyState=3,Go(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;u_(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function u_(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var p=h.value?h.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!h.done}))&&(this.response=this.responseText+=p)}h.done?qo(this):Go(this),this.readyState==3&&u_(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,qo(this))},n.Qa=function(h){this.g&&(this.response=h,qo(this))},n.ga=function(){this.g&&qo(this)};function qo(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Go(h)}n.setRequestHeader=function(h,p){this.u.append(h,p)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=p.next();return h.join(`\r
`)};function Go(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ql.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function h_(h){let p="";return N(h,function(v,A){p+=A,p+=":",p+=v,p+=`\r
`}),p}function pd(h,p,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=h_(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):Ze(h,p,v))}function dt(h){he.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(dt,he);var gx=/^https?$/i,px=["POST","PUT"];n=dt.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,p,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);p=p?p.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ld.g(),this.v=this.o?Um(this.o):Um(ld),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(h),!0),this.B=!1}catch(U){d_(this,U);return}if(h=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var V in A)v.set(V,A[V]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const U of A.keys())v.set(U,A.get(U));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(U=>U.toLowerCase()=="content-type"),V=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(px,p,void 0))||A||V||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,X]of v)this.g.setRequestHeader(U,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{p_(this),this.u=!0,this.g.send(h),this.u=!1}catch(U){d_(this,U)}};function d_(h,p){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=p,h.m=5,f_(h),Gl(h)}function f_(h){h.A||(h.A=!0,Ae(h,"complete"),Ae(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ae(this,"complete"),Ae(this,"abort"),Gl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gl(this,!0)),dt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?g_(this):this.bb())},n.bb=function(){g_(this)};function g_(h){if(h.h&&typeof o<"u"&&(!h.v[1]||ui(h)!=4||h.Z()!=2)){if(h.u&&ui(h)==4)Bt(h.Ea,0,h);else if(Ae(h,"readystatechange"),ui(h)==4){h.h=!1;try{const X=h.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var A;if(A=X===0){var V=String(h.D).match(s_)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),A=!gx.test(V?V.toLowerCase():"")}v=A}if(v)Ae(h,"complete"),Ae(h,"success");else{h.m=6;try{var U=2<ui(h)?h.g.statusText:""}catch{U=""}h.l=U+" ["+h.Z()+"]",f_(h)}}finally{Gl(h)}}}}function Gl(h,p){if(h.g){p_(h);const v=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,p||Ae(h,"ready");try{v.onreadystatechange=A}catch{}}}function p_(h){h.I&&(a.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function ui(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<ui(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var p=this.g.responseText;return h&&p.indexOf(h)==0&&(p=p.substring(h.length)),An(p)}};function m_(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function mx(h){const p={};h=(h.g&&2<=ui(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(I(h[A]))continue;var v=x(h[A]);const V=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const U=p[V]||[];p[V]=U,U.push(v)}T(p,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ko(h,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||p}function __(h){this.Aa=0,this.i=[],this.j=new Ho,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ko("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ko("baseRetryDelayMs",5e3,h),this.cb=Ko("retryDelaySeedMs",1e4,h),this.Wa=Ko("forwardChannelMaxRetries",2,h),this.wa=Ko("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Jm(h&&h.concurrentRequestLimit),this.Da=new dx,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=__.prototype,n.la=8,n.G=1,n.connect=function(h,p,v,A){sn(0),this.W=h,this.H=p||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.I=I_(this,null,this.W),Ql(this)};function md(h){if(v_(h),h.G==3){var p=h.U++,v=ci(h.I);if(Ze(v,"SID",h.K),Ze(v,"RID",p),Ze(v,"TYPE","terminate"),Qo(h,v),p=new Ui(h,h.j,p),p.L=2,p.v=Wl(ci(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=p.v,v=!0),v||(p.g=C_(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Hl(p)}S_(h)}function Kl(h){h.g&&(vd(h),h.g.cancel(),h.g=null)}function v_(h){Kl(h),h.u&&(a.clearTimeout(h.u),h.u=null),Yl(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function Ql(h){if(!Zm(h.h)&&!h.s){h.s=!0;var p=h.Ga;re||Tt(),de||(re(),de=!0),Fe.add(p,h),h.B=0}}function _x(h,p){return e_(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=p.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Uo(f(h.Ga,h,p),T_(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const V=new Ui(this,this.j,h);let U=this.o;if(this.S&&(U?(U=b(U),C(U,this.S)):U=this.S),this.m!==null||this.O||(V.H=U,U=null),this.P)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(p+=A,4096<p){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=b_(this,V,p),v=ci(this.I),Ze(v,"RID",h),Ze(v,"CVER",22),this.D&&Ze(v,"X-HTTP-Session-Id",this.D),Qo(this,v),U&&(this.O?p="headers="+encodeURIComponent(String(h_(U)))+"&"+p:this.m&&pd(v,this.m,U)),gd(this.h,V),this.Ua&&Ze(v,"TYPE","init"),this.P?(Ze(v,"$req",p),Ze(v,"SID","null"),V.T=!0,ud(V,v,null)):ud(V,v,p),this.G=2}}else this.G==3&&(h?y_(this,h):this.i.length==0||Zm(this.h)||y_(this))};function y_(h,p){var v;p?v=p.l:v=h.U++;const A=ci(h.I);Ze(A,"SID",h.K),Ze(A,"RID",v),Ze(A,"AID",h.T),Qo(h,A),h.m&&h.o&&pd(A,h.m,h.o),v=new Ui(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),p&&(h.i=p.D.concat(h.i)),p=b_(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),gd(h.h,v),ud(v,A,p)}function Qo(h,p){h.H&&N(h.H,function(v,A){Ze(p,A,v)}),h.l&&i_({},function(v,A){Ze(p,A,v)})}function b_(h,p,v){v=Math.min(h.i.length,v);var A=h.l?f(h.l.Na,h.l,h):null;e:{var V=h.i;let U=-1;for(;;){const X=["count="+v];U==-1?0<v?(U=V[0].g,X.push("ofs="+U)):U=0:X.push("ofs="+U);let Ke=!0;for(let kt=0;kt<v;kt++){let Ne=V[kt].g;const Ht=V[kt].map;if(Ne-=U,0>Ne)U=Math.max(0,V[kt].g-100),Ke=!1;else try{fx(Ht,X,"req"+Ne+"_")}catch{A&&A(Ht)}}if(Ke){A=X.join("&");break e}}}return h=h.i.splice(0,v),p.D=h,A}function E_(h){if(!h.g&&!h.u){h.Y=1;var p=h.Fa;re||Tt(),de||(re(),de=!0),Fe.add(p,h),h.v=0}}function _d(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Uo(f(h.Fa,h),T_(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,w_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Uo(f(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,sn(10),Kl(this),w_(this))};function vd(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function w_(h){h.g=new Ui(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var p=ci(h.qa);Ze(p,"RID","rpc"),Ze(p,"SID",h.K),Ze(p,"AID",h.T),Ze(p,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ze(p,"TO",h.ja),Ze(p,"TYPE","xmlhttp"),Qo(h,p),h.m&&h.o&&pd(p,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=Wl(ci(p)),v.m=null,v.P=!0,Qm(v,h)}n.Za=function(){this.C!=null&&(this.C=null,Kl(this),_d(this),sn(19))};function Yl(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function A_(h,p){var v=null;if(h.g==p){Yl(h),vd(h),h.g=null;var A=2}else if(fd(h.h,p))v=p.D,t_(h.h,p),A=1;else return;if(h.G!=0){if(p.o)if(A==1){v=p.m?p.m.length:0,p=Date.now()-p.F;var V=h.B;A=Fl(),Ae(A,new $m(A,v)),Ql(h)}else E_(h);else if(V=p.s,V==3||V==0&&0<p.X||!(A==1&&_x(h,p)||A==2&&_d(h)))switch(v&&0<v.length&&(p=h.h,p.i=p.i.concat(v)),V){case 1:Os(h,5);break;case 4:Os(h,10);break;case 3:Os(h,6);break;default:Os(h,2)}}}function T_(h,p){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*p}function Os(h,p){if(h.j.info("Error code "+p),p==2){var v=f(h.fb,h),A=h.Xa;const V=!A;A=new Ms(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||jl(A,"https"),Wl(A),V?ux(A.toString(),v):hx(A.toString(),v)}else sn(2);h.G=0,h.l&&h.l.sa(p),S_(h),v_(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function S_(h){if(h.G=0,h.ka=[],h.l){const p=n_(h.h);(p.length!=0||h.i.length!=0)&&(y(h.ka,p),y(h.ka,h.i),h.h.i.length=0,_(h.i),h.i.length=0),h.l.ra()}}function I_(h,p,v){var A=v instanceof Ms?ci(v):new Ms(v);if(A.g!="")p&&(A.g=p+"."+A.g),zl(A,A.s);else{var V=a.location;A=V.protocol,p=p?p+"."+V.hostname:V.hostname,V=+V.port;var U=new Ms(null);A&&jl(U,A),p&&(U.g=p),V&&zl(U,V),v&&(U.l=v),A=U}return v=h.D,p=h.ya,v&&p&&Ze(A,v,p),Ze(A,"VER",h.la),Qo(h,A),A}function C_(h,p,v){if(p&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=h.Ca&&!h.pa?new dt(new $l({eb:v})):new dt(h.pa),p.Ha(h.J),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function x_(){}n=x_.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Xl(){}Xl.prototype.g=function(h,p){return new pn(h,p)};function pn(h,p){he.call(this),this.g=new __(p),this.l=h,this.h=p&&p.messageUrlParams||null,h=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(h?h["X-WebChannel-Content-Type"]=p.messageContentType:h={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(h?h["X-WebChannel-Client-Profile"]=p.va:h={"X-WebChannel-Client-Profile":p.va}),this.g.S=h,(h=p&&p.Sb)&&!I(h)&&(this.g.m=h),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!I(p)&&(this.g.D=p,h=this.h,h!==null&&p in h&&(h=this.h,p in h&&delete h[p])),this.j=new Pr(this)}m(pn,he),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){md(this.g)},pn.prototype.o=function(h){var p=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=Dt(h),h=v);p.i.push(new ex(p.Ya++,h)),p.G==3&&Ql(p)},pn.prototype.N=function(){this.g.l=null,delete this.j,md(this.g),delete this.g,pn.aa.N.call(this)};function R_(h){od.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var p=h.__sm__;if(p){e:{for(const v in p){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,p=p!==null&&h in p?p[h]:void 0),this.data=p}else this.data=h}m(R_,od);function D_(){ad.call(this),this.status=1}m(D_,ad);function Pr(h){this.g=h}m(Pr,x_),Pr.prototype.ua=function(){Ae(this.g,"a")},Pr.prototype.ta=function(h){Ae(this.g,new R_(h))},Pr.prototype.sa=function(h){Ae(this.g,new D_)},Pr.prototype.ra=function(){Ae(this.g,"b")},Xl.prototype.createWebChannel=Xl.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,rA=function(){return new Xl},sA=function(){return Fl()},iA=ks,jf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bl.NO_ERROR=0,Bl.TIMEOUT=8,Bl.HTTP_ERROR=6,jc=Bl,qm.COMPLETE="complete",nA=qm,Hm.EventType=Fo,Fo.OPEN="a",Fo.CLOSE="b",Fo.ERROR="c",Fo.MESSAGE="d",he.prototype.listen=he.prototype.K,oa=Hm,dt.prototype.listenOnce=dt.prototype.L,dt.prototype.getLastError=dt.prototype.Ka,dt.prototype.getLastErrorCode=dt.prototype.Ba,dt.prototype.getStatus=dt.prototype.Z,dt.prototype.getResponseJson=dt.prototype.Oa,dt.prototype.getResponseText=dt.prototype.oa,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Ha,tA=dt}).apply(typeof ic<"u"?ic:typeof self<"u"?self:typeof window<"u"?window:{});const Bv="@firebase/firestore",Uv="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xo="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr=new tp("@firebase/firestore");function Br(){return dr.logLevel}function ie(n,...e){if(dr.logLevel<=Re.DEBUG){const t=e.map(sp);dr.debug(`Firestore (${xo}): ${n}`,...t)}}function Di(n,...e){if(dr.logLevel<=Re.ERROR){const t=e.map(sp);dr.error(`Firestore (${xo}): ${n}`,...t)}}function uo(n,...e){if(dr.logLevel<=Re.WARN){const t=e.map(sp);dr.warn(`Firestore (${xo}): ${n}`,...t)}}function sp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(n="Unexpected state"){const e=`FIRESTORE (${xo}) INTERNAL ASSERTION FAILED: `+n;throw Di(e),new Error(e)}function We(n,e){n||ge()}function be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends Li{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($t.UNAUTHENTICATED))}shutdown(){}}class NM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class LM{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0);let i=this.i;const s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let r=new xi;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new xi,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=r;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new xi)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(We(typeof i.accessToken=="string"),new oA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string"),new $t(e)}}class VM{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class FM{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new VM(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Hv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BM{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,In(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){We(this.o===void 0);const i=r=>{r.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.R;return this.R=r.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.A.getImmediate({optional:!0});r?s(r):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Hv(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(We(typeof t.token=="string"),this.R=t.token,new Hv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=UM(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<t&&(i+=e.charAt(s[r]%62))}return i}}function ke(n,e){return n<e?-1:n>e?1:0}function ho(n,e,t){return n.length===e.length&&n.every((i,s)=>t(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=-62135596800,zv=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*zv);return new wt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<jv)throw new ae(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zv}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-jv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new wt(0,0))}static max(){return new ye(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="__name__";class qn{constructor(e,t,i){t===void 0?t=0:t>e.length&&ge(),i===void 0?i=e.length-t:i>e.length-t&&ge(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return qn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qn?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const r=qn.compareSegments(e.get(s),t.get(s));if(r!==0)return r}return Math.sign(e.length-t.length)}static compareSegments(e,t){const i=qn.isNumericId(e),s=qn.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?qn.extractNumericId(e).compare(qn.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cs.fromString(e.substring(4,e.length-2))}}class rt extends qn{construct(e,t,i){return new rt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ae(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new rt(t)}static emptyPath(){return new rt([])}}const HM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ot extends qn{construct(e,t,i){return new Ot(e,t,i)}static isValidIdentifier(e){return HM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Wv}static keyField(){return new Ot([Wv])}static fromServerFormat(e){const t=[];let i="",s=0;const r=()=>{if(i.length===0)throw new ae(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ae(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ae(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new ae(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ot(t)}static emptyPath(){return new Ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(rt.fromString(e))}static fromName(e){return new ce(rt.fromString(e).popFirst(5))}static empty(){return new ce(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new rt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=-1;function jM(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=ye.fromTimestamp(i===1e9?new wt(t+1,0):new wt(t,i));return new gs(s,ce.empty(),e)}function zM(n){return new gs(n.readTime,n.key,Ja)}class gs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new gs(ye.min(),ce.empty(),Ja)}static max(){return new gs(ye.max(),ce.empty(),Ja)}}function WM(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ce.comparator(n.documentKey,e.documentKey),t!==0?t:ke(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ro(n){if(n.code!==G.FAILED_PRECONDITION||n.message!==$M)throw n;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(t,r).next(i,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):$.reject(t)}static resolve(e){return new $((t,i)=>{t(e)})}static reject(e){return new $((t,i)=>{i(e)})}static waitFor(e){return new $((t,i)=>{let s=0,r=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++r,o&&r===s&&t()},l=>i(l))}),o=!0,r===s&&t()})}static or(e){let t=$.resolve(!1);for(const i of e)t=t.next(s=>s?$.resolve(s):i());return t}static forEach(e,t){const i=[];return e.forEach((s,r)=>{i.push(t.call(this,s,r))}),this.waitFor(i)}static mapArray(e,t){return new $((i,s)=>{const r=e.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===r&&i(o)},u=>s(u))}})}static doWhile(e,t){return new $((i,s)=>{const r=()=>{e()===!0?t().next(()=>{r()},s):i()};r()})}}function GM(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Do(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.oe(i),this._e=i=>t.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Ch.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp=-1;function xh(n){return n==null}function Au(n){return n===0&&1/n==-1/0}function KM(n){return typeof n=="number"&&Number.isInteger(n)&&!Au(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="";function QM(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$v(e)),e=YM(n.get(t),e);return $v(e)}function YM(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const r=n.charAt(s);switch(r){case"\0":t+="";break;case lA:t+="";break;default:t+=r}}return t}function $v(n){return n+lA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function br(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,t){this.comparator=e,this.root=t||Pt.EMPTY}insert(e,t){return new ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sc(this.root,e,this.comparator,!1)}getReverseIterator(){return new sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sc(this.root,e,this.comparator,!0)}}class sc{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?i(e.key,t):1,t&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,t,i,s,r){this.key=e,this.value=t,this.color=i??Pt.RED,this.left=s??Pt.EMPTY,this.right=r??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,r){return new Pt(e??this.key,t??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,t,i),null):r===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Pt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();const e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,t,i,s,r){return this}insert(e,t,i){return new Pt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gv(this.data.getIterator())}getIteratorFrom(e){return new Gv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new At(this.comparator);return t.data=e,t}}class Gv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new On([])}unionWith(e){let t=new At(Ot.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new On(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ho(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new uA("Invalid base64 string: "+r):r}}(e);return new Nt(t)}static fromUint8Array(e){const t=function(s){let r="";for(let o=0;o<s.length;++o)r+=String.fromCharCode(s[o]);return r}(e);return new Nt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const XM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ps(n){if(We(!!n),typeof n=="string"){let e=0;const t=XM.exec(n);if(We(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:gt(n.seconds),nanos:gt(n.nanos)}}function gt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ms(n){return typeof n=="string"?Nt.fromBase64String(n):Nt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="server_timestamp",dA="__type__",fA="__previous_value__",gA="__local_write_time__";function op(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[dA])===null||t===void 0?void 0:t.stringValue)===hA}function Rh(n){const e=n.mapValue.fields[fA];return op(e)?Rh(e):e}function Za(n){const e=ps(n.mapValue.fields[gA].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,t,i,s,r,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}const Tu="(default)";class el{constructor(e,t){this.projectId=e,this.database=t||Tu}static empty(){return new el("","")}get isDefaultDatabase(){return this.database===Tu}isEqual(e){return e instanceof el&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="__type__",ZM="__max__",rc={mapValue:{}},mA="__vector__",Su="value";function _s(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?op(n)?4:tO(n)?9007199254740991:eO(n)?10:11:ge()}function si(n,e){if(n===e)return!0;const t=_s(n);if(t!==_s(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Za(n).isEqual(Za(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const o=ps(s.timestampValue),a=ps(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,r){return ms(s.bytesValue).isEqual(ms(r.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,r){return gt(s.geoPointValue.latitude)===gt(r.geoPointValue.latitude)&&gt(s.geoPointValue.longitude)===gt(r.geoPointValue.longitude)}(n,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return gt(s.integerValue)===gt(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const o=gt(s.doubleValue),a=gt(r.doubleValue);return o===a?Au(o)===Au(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return ho(n.arrayValue.values||[],e.arrayValue.values||[],si);case 10:case 11:return function(s,r){const o=s.mapValue.fields||{},a=r.mapValue.fields||{};if(qv(o)!==qv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!si(o[l],a[l])))return!1;return!0}(n,e);default:return ge()}}function tl(n,e){return(n.values||[]).find(t=>si(t,e))!==void 0}function fo(n,e){if(n===e)return 0;const t=_s(n),i=_s(e);if(t!==i)return ke(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ke(n.booleanValue,e.booleanValue);case 2:return function(r,o){const a=gt(r.integerValue||r.doubleValue),l=gt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return Kv(n.timestampValue,e.timestampValue);case 4:return Kv(Za(n),Za(e));case 5:return ke(n.stringValue,e.stringValue);case 6:return function(r,o){const a=ms(r),l=ms(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(r,o){const a=r.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=ke(a[c],l[c]);if(u!==0)return u}return ke(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,o){const a=ke(gt(r.latitude),gt(o.latitude));return a!==0?a:ke(gt(r.longitude),gt(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Qv(n.arrayValue,e.arrayValue);case 10:return function(r,o){var a,l,c,u;const d=r.fields||{},f=o.fields||{},g=(a=d[Su])===null||a===void 0?void 0:a.arrayValue,m=(l=f[Su])===null||l===void 0?void 0:l.arrayValue,_=ke(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0);return _!==0?_:Qv(g,m)}(n.mapValue,e.mapValue);case 11:return function(r,o){if(r===rc.mapValue&&o===rc.mapValue)return 0;if(r===rc.mapValue)return 1;if(o===rc.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=ke(l[d],u[d]);if(f!==0)return f;const g=fo(a[l[d]],c[u[d]]);if(g!==0)return g}return ke(l.length,u.length)}(n.mapValue,e.mapValue);default:throw ge()}}function Kv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ke(n,e);const t=ps(n),i=ps(e),s=ke(t.seconds,i.seconds);return s!==0?s:ke(t.nanos,i.nanos)}function Qv(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const r=fo(t[s],i[s]);if(r)return r}return ke(t.length,i.length)}function go(n){return zf(n)}function zf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=ps(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ms(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ce.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",s=!0;for(const r of t.values||[])s?s=!1:i+=",",i+=zf(r);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let s="{",r=!0;for(const o of i)r?r=!1:s+=",",s+=`${o}:${zf(t.fields[o])}`;return s+"}"}(n.mapValue):ge()}function zc(n){switch(_s(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rh(n);return e?16+zc(e):16;case 5:return 2*n.stringValue.length;case 6:return ms(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+zc(r),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return br(i.fields,(r,o)=>{s+=r.length+zc(o)}),s}(n.mapValue);default:throw ge()}}function Wf(n){return!!n&&"integerValue"in n}function ap(n){return!!n&&"arrayValue"in n}function Yv(n){return!!n&&"nullValue"in n}function Xv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Wc(n){return!!n&&"mapValue"in n}function eO(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[pA])===null||t===void 0?void 0:t.stringValue)===mA}function Ta(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return br(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ta(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ta(n.arrayValue.values[t]);return e}return Object.assign({},n)}function tO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ZM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Wc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ta(t)}setAll(e){let t=Ot.emptyPath(),i={},s=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,s),i={},s=[],t=a.popLast()}o?i[a.lastSegment()]=Ta(o):s.push(a.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,i,s)}delete(e){const t=this.field(e.popLast());Wc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return si(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];Wc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){br(t,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new Cn(Ta(this.value))}}function _A(n){const e=[];return br(n.fields,(t,i)=>{const s=new Ot([t]);if(Wc(i)){const r=_A(i.mapValue).fields;if(r.length===0)e.push(s);else for(const o of r)e.push(s.child(o))}else e.push(s)}),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,t,i,s,r,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Kt(e,0,ye.min(),ye.min(),ye.min(),Cn.empty(),0)}static newFoundDocument(e,t,i,s){return new Kt(e,1,t,ye.min(),i,s,0)}static newNoDocument(e,t){return new Kt(e,2,t,ye.min(),ye.min(),Cn.empty(),0)}static newUnknownDocument(e,t){return new Kt(e,3,t,ye.min(),ye.min(),Cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,t){this.position=e,this.inclusive=t}}function Jv(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const r=e[s],o=n.position[s];if(r.field.isKeyField()?i=ce.comparator(ce.fromName(o.referenceValue),t.key):i=fo(o,t.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function Zv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!si(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,t="asc"){this.field=e,this.dir=t}}function nO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{}class Et extends vA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new sO(e,t,i):t==="array-contains"?new aO(e,i):t==="in"?new lO(e,i):t==="not-in"?new cO(e,i):t==="array-contains-any"?new uO(e,i):new Et(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new rO(e,i):new oO(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(fo(t,this.value)):t!==null&&_s(this.value)===_s(t)&&this.matchesComparison(fo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ri extends vA{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new ri(e,t)}matches(e){return yA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function yA(n){return n.op==="and"}function bA(n){return iO(n)&&yA(n)}function iO(n){for(const e of n.filters)if(e instanceof ri)return!1;return!0}function $f(n){if(n instanceof Et)return n.field.canonicalString()+n.op.toString()+go(n.value);if(bA(n))return n.filters.map(e=>$f(e)).join(",");{const e=n.filters.map(t=>$f(t)).join(",");return`${n.op}(${e})`}}function EA(n,e){return n instanceof Et?function(i,s){return s instanceof Et&&i.op===s.op&&i.field.isEqual(s.field)&&si(i.value,s.value)}(n,e):n instanceof ri?function(i,s){return s instanceof ri&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,o,a)=>r&&EA(o,s.filters[a]),!0):!1}(n,e):void ge()}function wA(n){return n instanceof Et?function(t){return`${t.field.canonicalString()} ${t.op} ${go(t.value)}`}(n):n instanceof ri?function(t){return t.op.toString()+" {"+t.getFilters().map(wA).join(" ,")+"}"}(n):"Filter"}class sO extends Et{constructor(e,t,i){super(e,t,i),this.key=ce.fromName(i.referenceValue)}matches(e){const t=ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class rO extends Et{constructor(e,t){super(e,"in",t),this.keys=AA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class oO extends Et{constructor(e,t){super(e,"not-in",t),this.keys=AA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function AA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>ce.fromName(i.referenceValue))}class aO extends Et{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ap(t)&&tl(t.arrayValue,this.value)}}class lO extends Et{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&tl(this.value.arrayValue,t)}}class cO extends Et{constructor(e,t){super(e,"not-in",t)}matches(e){if(tl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!tl(this.value.arrayValue,t)}}class uO extends Et{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ap(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>tl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,t=null,i=[],s=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.le=null}}function ey(n,e=null,t=[],i=[],s=null,r=null,o=null){return new hO(n,e,t,i,s,r,o)}function lp(n){const e=be(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>$f(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),xh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>go(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>go(i)).join(",")),e.le=t}return e.le}function cp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!nO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!EA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Zv(n.startAt,e.startAt)&&Zv(n.endAt,e.endAt)}function qf(n){return ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,t=null,i=[],s=[],r=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function dO(n,e,t,i,s,r,o,a){return new Dh(n,e,t,i,s,r,o,a)}function kh(n){return new Dh(n)}function ty(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function fO(n){return n.collectionGroup!==null}function Sa(n){const e=be(n);if(e.he===null){e.he=[];const t=new Set;for(const r of e.explicitOrderBy)e.he.push(r),t.add(r.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new At(Ot.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(r=>{t.has(r.canonicalString())||r.isKeyField()||e.he.push(new Cu(r,i))}),t.has(Ot.keyField().canonicalString())||e.he.push(new Cu(Ot.keyField(),i))}return e.he}function Jn(n){const e=be(n);return e.Pe||(e.Pe=gO(e,Sa(n))),e.Pe}function gO(n,e){if(n.limitType==="F")return ey(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new Cu(s.field,r)});const t=n.endAt?new Iu(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Iu(n.startAt.position,n.startAt.inclusive):null;return ey(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Gf(n,e,t){return new Dh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ph(n,e){return cp(Jn(n),Jn(e))&&n.limitType===e.limitType}function TA(n){return`${lp(Jn(n))}|lt:${n.limitType}`}function Ur(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(s=>wA(s)).join(", ")}]`),xh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(s=>go(s)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(s=>go(s)).join(",")),`Target(${i})`}(Jn(n))}; limitType=${n.limitType})`}function Mh(n,e){return e.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):ce.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(n,e)&&function(i,s){for(const r of Sa(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(n,e)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(n,e)&&function(i,s){return!(i.startAt&&!function(o,a,l){const c=Jv(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,Sa(i),s)||i.endAt&&!function(o,a,l){const c=Jv(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,Sa(i),s))}(n,e)}function pO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function SA(n){return(e,t)=>{let i=!1;for(const s of Sa(n)){const r=mO(s,e,t);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function mO(n,e,t){const i=n.field.isKeyField()?ce.comparator(e.key,t.key):function(r,o,a){const l=o.data.field(r),c=a.data.field(r);return l!==null&&c!==null?fo(l,c):ge()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ge()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){br(this.inner,(t,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return cA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=new ct(ce.comparator);function ki(){return _O}const IA=new ct(ce.comparator);function aa(...n){let e=IA;for(const t of n)e=e.insert(t.key,t);return e}function CA(n){let e=IA;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Xs(){return Ia()}function xA(){return Ia()}function Ia(){return new Er(n=>n.toString(),(n,e)=>n.isEqual(e))}const vO=new ct(ce.comparator),yO=new At(ce.comparator);function De(...n){let e=yO;for(const t of n)e=e.add(t);return e}const bO=new At(ke);function EO(){return bO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Au(e)?"-0":e}}function RA(n){return{integerValue:""+n}}function wO(n,e){return KM(e)?RA(e):up(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(){this._=void 0}}function AO(n,e,t){return n instanceof xu?function(s,r){const o={fields:{[dA]:{stringValue:hA},[gA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&op(r)&&(r=Rh(r)),r&&(o.fields[fA]=r),{mapValue:o}}(t,e):n instanceof nl?kA(n,e):n instanceof il?PA(n,e):function(s,r){const o=DA(s,r),a=ny(o)+ny(s.Ie);return Wf(o)&&Wf(s.Ie)?RA(a):up(s.serializer,a)}(n,e)}function TO(n,e,t){return n instanceof nl?kA(n,e):n instanceof il?PA(n,e):t}function DA(n,e){return n instanceof Ru?function(i){return Wf(i)||function(r){return!!r&&"doubleValue"in r}(i)}(e)?e:{integerValue:0}:null}class xu extends Oh{}class nl extends Oh{constructor(e){super(),this.elements=e}}function kA(n,e){const t=MA(e);for(const i of n.elements)t.some(s=>si(s,i))||t.push(i);return{arrayValue:{values:t}}}class il extends Oh{constructor(e){super(),this.elements=e}}function PA(n,e){let t=MA(e);for(const i of n.elements)t=t.filter(s=>!si(s,i));return{arrayValue:{values:t}}}class Ru extends Oh{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function ny(n){return gt(n.integerValue||n.doubleValue)}function MA(n){return ap(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function SO(n,e){return n.field.isEqual(e.field)&&function(i,s){return i instanceof nl&&s instanceof nl||i instanceof il&&s instanceof il?ho(i.elements,s.elements,si):i instanceof Ru&&s instanceof Ru?si(i.Ie,s.Ie):i instanceof xu&&s instanceof xu}(n.transform,e.transform)}class IO{constructor(e,t){this.version=e,this.transformResults=t}}class Vn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $c(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Nh{}function OA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new hp(n.key,Vn.none()):new wl(n.key,n.data,Vn.none());{const t=n.data,i=Cn.empty();let s=new At(Ot.comparator);for(let r of e.fields)if(!s.has(r)){let o=t.field(r);o===null&&r.length>1&&(r=r.popLast(),o=t.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new wr(n.key,i,new On(s.toArray()),Vn.none())}}function CO(n,e,t){n instanceof wl?function(s,r,o){const a=s.value.clone(),l=sy(s.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof wr?function(s,r,o){if(!$c(s.precondition,r))return void r.convertToUnknownDocument(o.version);const a=sy(s.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(NA(s)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(s,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Ca(n,e,t,i){return n instanceof wl?function(r,o,a,l){if(!$c(r.precondition,o))return a;const c=r.value.clone(),u=ry(r.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,i):n instanceof wr?function(r,o,a,l){if(!$c(r.precondition,o))return a;const c=ry(r.fieldTransforms,l,o),u=o.data;return u.setAll(NA(r)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(d=>d.field))}(n,e,t,i):function(r,o,a){return $c(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function xO(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),r=DA(i.transform,s||null);r!=null&&(t===null&&(t=Cn.empty()),t.set(i.field,r))}return t||null}function iy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&ho(i,s,(r,o)=>SO(r,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class wl extends Nh{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class wr extends Nh{constructor(e,t,i,s,r=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function NA(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function sy(n,e,t){const i=new Map;We(n.length===t.length);for(let s=0;s<t.length;s++){const r=n[s],o=r.transform,a=e.data.field(r.field);i.set(r.field,TO(o,a,t[s]))}return i}function ry(n,e,t){const i=new Map;for(const s of n){const r=s.transform,o=t.data.field(s.field);i.set(s.field,AO(r,o,e))}return i}class hp extends Nh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RO extends Nh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&CO(r,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ca(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ca(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=xA();return this.mutations.forEach(s=>{const r=e.get(s.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=t.has(s.key)?null:a;const l=OA(o,a);l!==null&&i.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ye.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),De())}isEqual(e){return this.batchId===e.batchId&&ho(this.mutations,e.mutations,(t,i)=>iy(t,i))&&ho(this.baseMutations,e.baseMutations,(t,i)=>iy(t,i))}}class dp{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){We(e.mutations.length===i.length);let s=function(){return vO}();const r=e.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new dp(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,Me;function MO(n){switch(n){case G.OK:return ge();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return ge()}}function LA(n){if(n===void 0)return Di("GRPC error has no .code"),G.UNKNOWN;switch(n){case vt.OK:return G.OK;case vt.CANCELLED:return G.CANCELLED;case vt.UNKNOWN:return G.UNKNOWN;case vt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case vt.INTERNAL:return G.INTERNAL;case vt.UNAVAILABLE:return G.UNAVAILABLE;case vt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case vt.NOT_FOUND:return G.NOT_FOUND;case vt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case vt.ABORTED:return G.ABORTED;case vt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case vt.DATA_LOSS:return G.DATA_LOSS;default:return ge()}}(Me=vt||(vt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=new cs([4294967295,4294967295],0);function oy(n){const e=OO().encode(n),t=new eA;return t.update(e),new Uint8Array(t.digest())}function ay(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new cs([t,i],0),new cs([s,r],0)]}class fp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new la(`Invalid padding: ${t}`);if(i<0)throw new la(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new la(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new la(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=cs.fromNumber(this.Ee)}Ae(e,t,i){let s=e.add(t.multiply(cs.fromNumber(i)));return s.compare(NO)===1&&(s=new cs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=oy(e),[i,s]=ay(t);for(let r=0;r<this.hashCount;r++){const o=this.Ae(i,s,r);if(!this.Re(o))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new fp(r,s,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ee===0)return;const t=oy(e),[i,s]=ay(t);for(let r=0;r<this.hashCount;r++){const o=this.Ae(i,s,r);this.Ve(o)}}Ve(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class la extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,t,i,s,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,Al.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Lh(ye.min(),s,new ct(ke),ki(),De())}}class Al{constructor(e,t,i,s,r){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Al(i,t,De(),De(),De())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t,i,s){this.me=e,this.removedTargetIds=t,this.key=i,this.fe=s}}class VA{constructor(e,t){this.targetId=e,this.ge=t}}class FA{constructor(e,t,i=Nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class ly{constructor(){this.pe=0,this.ye=cy(),this.we=Nt.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=De(),t=De(),i=De();return this.ye.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:ge()}}),new Al(this.we,this.be,e,t,i)}Me(){this.Se=!1,this.ye=cy()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,We(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class LO{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ki(),this.$e=oc(),this.Ke=oc(),this.Ue=new ct(ke)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const i=this.He(t);switch(e.state){case 0:this.Je(t)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(t);break;case 3:this.Je(t)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),i.Ce(e.resumeToken));break;default:ge()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((i,s)=>{this.Je(s)&&t(s)})}Ze(e){const t=e.targetId,i=e.ge.count,s=this.Xe(t);if(s){const r=s.target;if(qf(r))if(i===0){const o=new ce(r.path);this.ze(t,o,Kt.newNoDocument(o,ye.min()))}else We(i===1);else{const o=this.et(t);if(o!==i){const a=this.tt(e),l=a?this.nt(a,e,o):1;if(l!==0){this.Ye(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,c)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=t;let o,a;try{o=ms(i).toUint8Array()}catch(l){if(l instanceof uA)return uo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new fp(o,s,r)}catch(l){return uo(l instanceof la?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(e,t,i){return t.ge.count===i-this.st(e,t.targetId)?0:2}st(e,t){const i=this.ke.getRemoteKeysForTarget(t);let s=0;return i.forEach(r=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,r,null),s++)}),s}ot(e){const t=new Map;this.qe.forEach((r,o)=>{const a=this.Xe(o);if(a){if(r.current&&qf(a.target)){const l=new ce(a.target.path);this._t(l).has(o)||this.ut(o,l)||this.ze(o,l,Kt.newNoDocument(l,e))}r.ve&&(t.set(o,r.Fe()),r.Me())}});let i=De();this.Ke.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xe(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(r))}),this.Qe.forEach((r,o)=>o.setReadTime(e));const s=new Lh(e,t,this.Ue,this.Qe,i);return this.Qe=ki(),this.$e=oc(),this.Ke=oc(),this.Ue=new ct(ke),s}Ge(e,t){if(!this.Je(e))return;const i=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,i),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,i){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),i&&(this.Qe=this.Qe.insert(t,i))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new ly,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new At(ke),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new At(ke),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new ly),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function oc(){return new ct(ce.comparator)}function cy(){return new ct(ce.comparator)}const VO={asc:"ASCENDING",desc:"DESCENDING"},FO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BO={and:"AND",or:"OR"};class UO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Kf(n,e){return n.useProto3Json||xh(e)?e:{value:e}}function Du(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function HO(n,e){return Du(n,e.toTimestamp())}function Zn(n){return We(!!n),ye.fromTimestamp(function(t){const i=ps(t);return new wt(i.seconds,i.nanos)}(n))}function gp(n,e){return Qf(n,e).canonicalString()}function Qf(n,e){const t=function(s){return new rt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function UA(n){const e=rt.fromString(n);return We($A(e)),e}function Yf(n,e){return gp(n.databaseId,e.path)}function Vd(n,e){const t=UA(e);if(t.get(1)!==n.databaseId.projectId)throw new ae(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ae(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ce(jA(t))}function HA(n,e){return gp(n.databaseId,e)}function jO(n){const e=UA(n);return e.length===4?rt.emptyPath():jA(e)}function Xf(n){return new rt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jA(n){return We(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function uy(n,e,t){return{name:Yf(n,e),fields:t.value.mapValue.fields}}function zO(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ge()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(c,u){return c.useProto3Json?(We(u===void 0||typeof u=="string"),Nt.fromBase64String(u||"")):(We(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Nt.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?G.UNKNOWN:LA(c.code);return new ae(u,c.message||"")}(o);t=new FA(i,s,r,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Vd(n,i.document.name),r=Zn(i.document.updateTime),o=i.document.createTime?Zn(i.document.createTime):ye.min(),a=new Cn({mapValue:{fields:i.document.fields}}),l=Kt.newFoundDocument(s,r,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];t=new qc(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Vd(n,i.document),r=i.readTime?Zn(i.readTime):ye.min(),o=Kt.newNoDocument(s,r),a=i.removedTargetIds||[];t=new qc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Vd(n,i.document),r=i.removedTargetIds||[];t=new qc([],r,s,null)}else{if(!("filter"in e))return ge();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,o=new PO(s,r),a=i.targetId;t=new VA(a,o)}}return t}function WO(n,e){let t;if(e instanceof wl)t={update:uy(n,e.key,e.value)};else if(e instanceof hp)t={delete:Yf(n,e.key)};else if(e instanceof wr)t={update:uy(n,e.key,e.data),updateMask:ZO(e.fieldMask)};else{if(!(e instanceof RO))return ge();t={verify:Yf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,o){const a=o.transform;if(a instanceof xu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof nl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof il)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ru)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw ge()}(0,i))),e.precondition.isNone||(t.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:HO(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:ge()}(n,e.precondition)),t}function $O(n,e){return n&&n.length>0?(We(e!==void 0),n.map(t=>function(s,r){let o=s.updateTime?Zn(s.updateTime):Zn(r);return o.isEqual(ye.min())&&(o=Zn(r)),new IO(o,s.transformResults||[])}(t,e))):[]}function qO(n,e){return{documents:[HA(n,e.path)]}}function GO(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=HA(n,s);const r=function(c){if(c.length!==0)return WA(ri.create(c,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:Hr(f.field),direction:YO(f.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=Kf(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ht:t,parent:s}}function KO(n){let e=jO(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){We(i===1);const u=t.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let r=[];t.where&&(r=function(d){const f=zA(d);return f instanceof ri&&bA(f)?f.getFilters():[f]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(f=>function(m){return new Cu(jr(m.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(t.orderBy));let a=null;t.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,xh(f)?null:f}(t.limit));let l=null;t.startAt&&(l=function(d){const f=!!d.before,g=d.values||[];return new Iu(g,f)}(t.startAt));let c=null;return t.endAt&&(c=function(d){const f=!d.before,g=d.values||[];return new Iu(g,f)}(t.endAt)),dO(e,s,o,r,a,"F",l,c)}function QO(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function zA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=jr(t.unaryFilter.field);return Et.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=jr(t.unaryFilter.field);return Et.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=jr(t.unaryFilter.field);return Et.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=jr(t.unaryFilter.field);return Et.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(n):n.fieldFilter!==void 0?function(t){return Et.create(jr(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ri.create(t.compositeFilter.filters.map(i=>zA(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ge()}}(t.compositeFilter.op))}(n):ge()}function YO(n){return VO[n]}function XO(n){return FO[n]}function JO(n){return BO[n]}function Hr(n){return{fieldPath:n.canonicalString()}}function jr(n){return Ot.fromServerFormat(n.fieldPath)}function WA(n){return n instanceof Et?function(t){if(t.op==="=="){if(Xv(t.value))return{unaryFilter:{field:Hr(t.field),op:"IS_NAN"}};if(Yv(t.value))return{unaryFilter:{field:Hr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Xv(t.value))return{unaryFilter:{field:Hr(t.field),op:"IS_NOT_NAN"}};if(Yv(t.value))return{unaryFilter:{field:Hr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hr(t.field),op:XO(t.op),value:t.value}}}(n):n instanceof ri?function(t){const i=t.getFilters().map(s=>WA(s));return i.length===1?i[0]:{compositeFilter:{op:JO(t.op),filters:i}}}(n):ge()}function ZO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $A(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,t,i,s,r=ye.min(),o=ye.min(),a=Nt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e){this.Tt=e}}function t1(n){const e=KO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Gf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(){this.Tn=new i1}addToCollectionParentIndex(e,t){return this.Tn.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(gs.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(gs.min())}updateCollectionGroup(e,t,i){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class i1{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new At(rt.comparator),r=!s.has(i);return this.index[t]=s.add(i),r}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new At(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qA=41943040;class un{static withCacheSize(e){return new un(e,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(qA,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new po(0)}static Un(){return new po(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="LruGarbageCollector",s1=1048576;function fy([n,e],[t,i]){const s=ke(n,t);return s===0?ke(e,i):s}class r1{constructor(e){this.Hn=e,this.buffer=new At(fy),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();fy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class o1{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ie(dy,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Do(t)?ie(dy,"Ignoring IndexedDB error during garbage collection: ",t):await Ro(t)}await this.er(3e5)})}}class a1{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return $.resolve(Ch.ae);const i=new r1(t);return this.tr.forEachTarget(e,s=>i.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>i.Zn(s))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.tr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(hy)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hy):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let i,s,r,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(e,s))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,t))).next(d=>(r=d,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(c=Date.now(),Br()<=Re.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${r} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:d})))}}function l1(n,e){return new a1(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(){this.changes=new Er(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?$.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(i!==null&&Ca(i.mutation,s,On.empty(),wt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,De()).next(()=>i))}getLocalViewOfDocuments(e,t,i=De()){const s=Xs();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,i).next(r=>{let o=aa();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=Xs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,De()))}populateOverlays(e,t,i){const s=[];return i.forEach(r=>{t.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,s){let r=ki();const o=Ia(),a=function(){return Ia()}();return t.forEach((l,c)=>{const u=i.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof wr)?r=r.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Ca(u.mutation,c,u.mutation.getFieldMask(),wt.now())):o.set(c.key,On.empty())}),this.recalculateAndSaveOverlays(e,r).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var d;return a.set(c,new u1(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){const i=Ia();let s=new ct((o,a)=>o-a),r=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=i.get(l)||On.empty();u=a.applyToLocalView(c,u),i.set(l,u);const d=(s.get(a.batchId)||De()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=xA();u.forEach(f=>{if(!r.has(f)){const g=OA(t.get(f),i.get(f));g!==null&&d.set(f,g),r=r.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return $.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,s){return function(o){return ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next(r=>{const o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-r.size):$.resolve(Xs());let a=Ja,l=r;return o.next(c=>$.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),r.get(u)?$.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,r)).next(()=>this.computeViews(e,l,c,De())).next(u=>({batchId:a,changes:CA(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ce(t)).next(i=>{let s=aa();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const r=t.collectionGroup;let o=aa();return this.indexManager.getCollectionParents(e,r).next(a=>$.forEach(a,l=>{const c=function(d,f){return new Dh(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(r));return this.getDocumentsMatchingCollectionQuery(e,c,i,s).next(u=>{u.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,r,s))).next(o=>{r.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Kt.newInvalidDocument(u)))});let a=aa();return o.forEach((l,c)=>{const u=r.get(l);u!==void 0&&Ca(u.mutation,c,On.empty(),wt.now()),Mh(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return $.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Zn(s.createTime)}}(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(s){return{name:s.name,query:t1(s.bundledQuery),readTime:Zn(s.readTime)}}(t)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(){this.overlays=new ct(ce.comparator),this.Rr=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Xs();return $.forEach(t,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((s,r)=>{this.Et(e,t,r)}),$.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.Rr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.Rr.delete(i)),$.resolve()}getOverlaysForCollection(e,t,i){const s=Xs(),r=t.length+1,o=new ce(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return $.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let r=new ct((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let u=r.get(c.largestBatchId);u===null&&(u=Xs(),r=r.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Xs(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return $.resolve(a)}Et(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.Rr.get(s.largestBatchId).delete(i.key);this.Rr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new kO(t,i));let r=this.Rr.get(t);r===void 0&&(r=De(),this.Rr.set(t,r)),this.Rr.set(t,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(){this.Vr=new At(St.mr),this.gr=new At(St.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const i=new St(e,t);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.wr(new St(e,t))}br(e,t){e.forEach(i=>this.removeReference(i,t))}Sr(e){const t=new ce(new rt([])),i=new St(t,e),s=new St(t,e+1),r=[];return this.gr.forEachInRange([i,s],o=>{this.wr(o),r.push(o.key)}),r}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ce(new rt([])),i=new St(t,e),s=new St(t,e+1);let r=De();return this.gr.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(e){const t=new St(e,0),i=this.Vr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class St{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ce.comparator(e.key,t.key)||ke(e.Cr,t.Cr)}static pr(e,t){return ke(e.Cr,t.Cr)||ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new At(St.mr)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const r=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new DO(r,t,i,s);this.mutationQueue.push(o);for(const a of s)this.Mr=this.Mr.add(new St(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,t){return $.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.Nr(i),r=s<0?0:s;return $.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?rp:this.Fr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new St(t,0),s=new St(t,Number.POSITIVE_INFINITY),r=[];return this.Mr.forEachInRange([i,s],o=>{const a=this.Or(o.Cr);r.push(a)}),$.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new At(ke);return t.forEach(s=>{const r=new St(s,0),o=new St(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([r,o],a=>{i=i.add(a.Cr)})}),$.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let r=i;ce.isDocumentKey(r)||(r=r.child(""));const o=new St(new ce(r),0);let a=new At(ke);return this.Mr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Cr)),!0)},o),$.resolve(this.Br(a))}Br(e){const t=[];return e.forEach(i=>{const s=this.Or(i);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){We(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return $.forEach(t.mutations,s=>{const r=new St(s.key,t.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,t){const i=new St(t,0),s=this.Mr.firstAfterOrEqual(i);return $.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e){this.kr=e,this.docs=function(){return new ct(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),r=s?s.size:0,o=this.kr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return $.resolve(i?i.document.mutableCopy():Kt.newInvalidDocument(t))}getEntries(e,t){let i=ki();return t.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():Kt.newInvalidDocument(s))}),$.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let r=ki();const o=t.path,a=new ce(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||WM(zM(u),i)<=0||(s.has(u.key)||Mh(t,u))&&(r=r.insert(u.key,u.mutableCopy()))}return $.resolve(r)}getAllFromCollectionGroup(e,t,i,s){ge()}qr(e,t){return $.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new _1(this)}getSize(e){return $.resolve(this.size)}}class _1 extends c1{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(i)}),$.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.persistence=e,this.Qr=new Er(t=>lp(t),cp),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.$r=0,this.Kr=new pp,this.targetCount=0,this.Ur=po.Kn()}forEachTarget(e,t){return this.Qr.forEach((i,s)=>t(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.$r&&(this.$r=t),$.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new po(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.zn(t),$.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,i){let s=0;const r=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.Qr.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),$.waitFor(r).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const i=this.Qr.get(t)||null;return $.resolve(i)}addMatchingKeys(e,t,i){return this.Kr.yr(t,i),$.resolve()}removeMatchingKeys(e,t,i){this.Kr.br(t,i);const s=this.persistence.referenceDelegate,r=[];return s&&t.forEach(o=>{r.push(s.markPotentiallyOrphaned(e,o))}),$.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Kr.vr(t);return $.resolve(i)}containsKey(e,t){return $.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Ch(0),this.zr=!1,this.zr=!0,this.jr=new g1,this.referenceDelegate=e(this),this.Hr=new v1(this),this.indexManager=new n1,this.remoteDocumentCache=function(s){return new m1(s)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new e1(t),this.Yr=new d1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new f1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Wr[e.toKey()];return i||(i=new p1(t,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,i){ie("MemoryPersistence","Starting transaction:",e);const s=new y1(this.Gr.next());return this.referenceDelegate.Zr(),i(s).next(r=>this.referenceDelegate.Xr(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}ei(e,t){return $.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,t)))}}class y1 extends qM{constructor(e){super(),this.currentSequenceNumber=e}}class mp{constructor(e){this.persistence=e,this.ti=new pp,this.ni=null}static ri(e){return new mp(e)}get ii(){if(this.ni)return this.ni;throw ge()}addReference(e,t,i){return this.ti.addReference(i,t),this.ii.delete(i.toString()),$.resolve()}removeReference(e,t,i){return this.ti.removeReference(i,t),this.ii.add(i.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),$.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(s=>this.ii.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(r=>this.ii.add(r.toString()))}).next(()=>i.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.ii,i=>{const s=ce.fromPath(i);return this.si(e,s).next(r=>{r||t.removeEntry(s,ye.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(i=>{i?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return $.or([()=>$.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class ku{constructor(e,t){this.persistence=e,this.oi=new Er(i=>QM(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=l1(this,t)}static ri(e,t){return new ku(e,t)}Zr(){}Xr(e){return $.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(s=>i+s))}sr(e){let t=0;return this.rr(e,i=>{t++}).next(()=>t)}rr(e,t){return $.forEach(this.oi,(i,s)=>this.ar(e,i,s).next(r=>r?$.resolve():t(s)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.qr(e,o=>this.ar(e,o,t).next(a=>{a||(i++,r.removeEntry(o,ye.min()))})).next(()=>r.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),$.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),$.resolve()}removeReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),$.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=zc(e.data.value)),t}ar(e,t,i){return $.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return $.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Hi=i,this.Ji=s}static Yi(e,t){let i=De(),s=De();for(const r of t.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new _p(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return gP()?8:GM(nn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,i,s){const r={result:null};return this.rs(e,t).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.ss(e,t,s,i).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new b1;return this._s(e,t,o).next(a=>{if(r.result=a,this.Xi)return this.us(e,t,o,a.size)})}).next(()=>r.result)}us(e,t,i,s){return i.documentReadCount<this.es?(Br()<=Re.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Ur(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),$.resolve()):(Br()<=Re.DEBUG&&ie("QueryEngine","Query:",Ur(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ts*s?(Br()<=Re.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Ur(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(t))):$.resolve())}rs(e,t){if(ty(t))return $.resolve(null);let i=Jn(t);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Gf(t,null,"F"),i=Jn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const o=De(...r);return this.ns.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.cs(t,a);return this.ls(t,c,o,l.readTime)?this.rs(e,Gf(t,null,"F")):this.hs(e,c,t,l)}))})))}ss(e,t,i,s){return ty(t)||s.isEqual(ye.min())?$.resolve(null):this.ns.getDocuments(e,i).next(r=>{const o=this.cs(t,r);return this.ls(t,o,i,s)?$.resolve(null):(Br()<=Re.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ur(t)),this.hs(e,o,t,jM(s,Ja)).next(a=>a))})}cs(e,t){let i=new At(SA(e));return t.forEach((s,r)=>{Mh(e,r)&&(i=i.add(r))}),i}ls(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const r=e.limitType==="F"?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}_s(e,t,i){return Br()<=Re.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Ur(t)),this.ns.getDocumentsMatchingQuery(e,t,gs.min(),i)}hs(e,t,i,s){return this.ns.getDocumentsMatchingQuery(e,i,s).next(r=>(t.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp="LocalStore",w1=3e8;class A1{constructor(e,t,i,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new ct(ke),this.Is=new Er(r=>lp(r),cp),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new h1(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function T1(n,e,t,i){return new A1(n,e,t,i)}async function KA(n,e){const t=be(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,t.As(e),t.mutationQueue.getAllMutationBatches(i))).next(r=>{const o=[],a=[];let l=De();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of r){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(i,l).next(c=>({Rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function S1(n,e){const t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=t.ds.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,f=d.keys();let g=$.resolve();return f.forEach(m=>{g=g.next(()=>u.getEntry(l,m)).next(_=>{const y=c.docVersions.get(m);We(y!==null),_.version.compareTo(y)<0&&(d.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),u.addEntry(_)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(t,i,e,r).next(()=>r.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=De();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,s))})}function QA(n){const e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function I1(n,e){const t=be(n),i=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const a=[];e.targetChanges.forEach((u,d)=>{const f=s.get(d);if(!f)return;a.push(t.Hr.removeMatchingKeys(r,u.removedDocuments,d).next(()=>t.Hr.addMatchingKeys(r,u.addedDocuments,d)));let g=f.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(Nt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,i)),s=s.insert(d,g),function(_,y,E){return _.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=w1?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,g,u)&&a.push(t.Hr.updateTargetData(r,g))});let l=ki(),c=De();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(r,u))}),a.push(C1(r,o,e.documentUpdates).next(u=>{l=u.Vs,c=u.fs})),!i.isEqual(ye.min())){const u=t.Hr.getLastRemoteSnapshotVersion(r).next(d=>t.Hr.setTargetsMetadata(r,r.currentSequenceNumber,i));a.push(u)}return $.waitFor(a).next(()=>o.apply(r)).next(()=>t.localDocuments.getLocalViewOfDocuments(r,l,c)).next(()=>l)}).then(r=>(t.Ts=s,r))}function C1(n,e,t){let i=De(),s=De();return t.forEach(r=>i=i.add(r)),e.getEntries(n,i).next(r=>{let o=ki();return t.forEach((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ye.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ie(vp,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Vs:o,fs:s}})}function x1(n,e){const t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=rp),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function R1(n,e){const t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return t.Hr.getTargetData(i,e).next(r=>r?(s=r,$.resolve(s)):t.Hr.allocateTargetId(i).next(o=>(s=new Xi(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Hr.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=t.Ts.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(i.targetId,i),t.Is.set(e,i.targetId)),i})}async function Jf(n,e,t){const i=be(n),s=i.Ts.get(e),r=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Do(o))throw o;ie(vp,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ts=i.Ts.remove(e),i.Is.delete(s.target)}function gy(n,e,t){const i=be(n);let s=ye.min(),r=De();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=be(l),f=d.Is.get(u);return f!==void 0?$.resolve(d.Ts.get(f)):d.Hr.getTargetData(c,u)}(i,o,Jn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>i.Ps.getDocumentsMatchingQuery(o,e,t?s:ye.min(),t?r:De())).next(a=>(D1(i,pO(e),a),{documents:a,gs:r})))}function D1(n,e,t){let i=n.Es.get(e)||ye.min();t.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),n.Es.set(e,i)}class py{constructor(){this.activeTargetIds=EO()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class k1{constructor(){this.ho=new py,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,i){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new py,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my="ConnectivityMonitor";class _y{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ie(my,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ie(my,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ac=null;function Zf(){return ac===null?ac=function(){return 268435456+Math.round(2147483648*Math.random())}():ac++,"0x"+ac.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="RestConnection",M1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class O1{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database===Tu?`project_id=${i}`:`project_id=${i}&database_id=${s}`}bo(e,t,i,s,r){const o=Zf(),a=this.So(e,t.toUriEncodedString());ie(Fd,`Sending RPC '${e}' ${o}:`,a,i);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,s,r),this.vo(e,a,l,i).then(c=>(ie(Fd,`Received RPC '${e}' ${o}: `,c),c),c=>{throw uo(Fd,`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",i),c})}Co(e,t,i,s,r,o){return this.bo(e,t,i,s,r)}Do(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,r)=>e[r]=s),i&&i.headers.forEach((s,r)=>e[r]=s)}So(e,t){const i=M1[e];return`${this.po}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection";class L1 extends O1{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,i,s){const r=Zf();return new Promise((o,a)=>{const l=new tA;l.setWithCredentials(!0),l.listenOnce(nA.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case jc.NO_ERROR:const u=l.getResponseJson();ie(zt,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(u)),o(u);break;case jc.TIMEOUT:ie(zt,`RPC '${e}' ${r} timed out`),a(new ae(G.DEADLINE_EXCEEDED,"Request time out"));break;case jc.HTTP_ERROR:const d=l.getStatus();if(ie(zt,`RPC '${e}' ${r} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const m=function(y){const E=y.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(E)>=0?E:G.UNKNOWN}(g.status);a(new ae(m,g.message))}else a(new ae(G.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ae(G.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{ie(zt,`RPC '${e}' ${r} completed.`)}});const c=JSON.stringify(s);ie(zt,`RPC '${e}' ${r} sending request:`,s),l.send(t,"POST",c,i,15)})}Wo(e,t,i){const s=Zf(),r=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=rA(),a=sA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const u=r.join("");ie(zt,`Creating RPC '${e}' stream ${s}: ${u}`,l);const d=o.createWebChannel(u,l);let f=!1,g=!1;const m=new N1({Fo:y=>{g?ie(zt,`Not sending because RPC '${e}' stream ${s} is closed:`,y):(f||(ie(zt,`Opening RPC '${e}' stream ${s} transport.`),d.open(),f=!0),ie(zt,`RPC '${e}' stream ${s} sending:`,y),d.send(y))},Mo:()=>d.close()}),_=(y,E,I)=>{y.listen(E,R=>{try{I(R)}catch(S){setTimeout(()=>{throw S},0)}})};return _(d,oa.EventType.OPEN,()=>{g||(ie(zt,`RPC '${e}' stream ${s} transport opened.`),m.Qo())}),_(d,oa.EventType.CLOSE,()=>{g||(g=!0,ie(zt,`RPC '${e}' stream ${s} transport closed`),m.Ko())}),_(d,oa.EventType.ERROR,y=>{g||(g=!0,uo(zt,`RPC '${e}' stream ${s} transport errored:`,y),m.Ko(new ae(G.UNAVAILABLE,"The operation could not be completed")))}),_(d,oa.EventType.MESSAGE,y=>{var E;if(!g){const I=y.data[0];We(!!I);const R=I,S=(R==null?void 0:R.error)||((E=R[0])===null||E===void 0?void 0:E.error);if(S){ie(zt,`RPC '${e}' stream ${s} received error:`,S);const D=S.status;let N=function(w){const C=vt[w];if(C!==void 0)return LA(C)}(D),T=S.message;N===void 0&&(N=G.INTERNAL,T="Unknown error status: "+D+" with message "+S.message),g=!0,m.Ko(new ae(N,T)),d.close()}else ie(zt,`RPC '${e}' stream ${s} received:`,I),m.Uo(I)}}),_(a,iA.STAT_EVENT,y=>{y.stat===jf.PROXY?ie(zt,`RPC '${e}' stream ${s} detected buffering proxy`):y.stat===jf.NOPROXY&&ie(zt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{m.$o()},0),m}}function Bd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(n){return new UO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,t,i=1e3,s=1.5,r=6e4){this.Ti=e,this.timerId=t,this.Go=i,this.zo=s,this.jo=r,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-i);s>0&&ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="PersistentStream";class XA{constructor(e,t,i,s,r,o,a,l){this.Ti=e,this.n_=i,this.r_=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new YA(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(Di(t.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.i_===t&&this.V_(i,s)},i=>{e(()=>{const s=new ae(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(s)})})}V_(e,t){const i=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{i(()=>this.m_(s))}),this.stream.onMessage(s=>{i(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ie(vy,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(ie(vy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class V1 extends XA{constructor(e,t,i,s,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,o),this.serializer=r}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=zO(this.serializer,e),i=function(r){if(!("targetChange"in r))return ye.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?ye.min():o.readTime?Zn(o.readTime):ye.min()}(e);return this.listener.p_(t,i)}y_(e){const t={};t.database=Xf(this.serializer),t.addTarget=function(r,o){let a;const l=o.target;if(a=qf(l)?{documents:qO(r,l)}:{query:GO(r,l).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=BA(r,o.resumeToken);const c=Kf(r,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ye.min())>0){a.readTime=Du(r,o.snapshotVersion.toTimestamp());const c=Kf(r,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=QO(this.serializer,e);i&&(t.labels=i),this.I_(t)}w_(e){const t={};t.database=Xf(this.serializer),t.removeTarget=e,this.I_(t)}}class F1 extends XA{constructor(e,t,i,s,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,o),this.serializer=r}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return We(!!e.streamToken),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){We(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=$O(e.writeResults,e.commitTime),i=Zn(e.commitTime);return this.listener.v_(i,t)}C_(){const e={};e.database=Xf(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>WO(this.serializer,i))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{}class U1 extends B1{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new ae(G.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.bo(e,Qf(t,i),s,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ae(G.UNKNOWN,r.toString())})}Co(e,t,i,s,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,Qf(t,i),s,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ae(G.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class H1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Di(t),this.N_=!1):ie("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="RemoteStore";class j1{constructor(e,t,i,s,r){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=r,this.z_.To(o=>{i.enqueueAndForget(async()=>{Ar(this)&&(ie(fr,"Restarting streams for network reachability change."),await async function(l){const c=be(l);c.W_.add(4),await Tl(c),c.j_.set("Unknown"),c.W_.delete(4),await Fh(c)}(this))})}),this.j_=new H1(i,s)}}async function Fh(n){if(Ar(n))for(const e of n.G_)await e(!0)}async function Tl(n){for(const e of n.G_)await e(!1)}function JA(n,e){const t=be(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),wp(t)?Ep(t):ko(t).c_()&&bp(t,e))}function yp(n,e){const t=be(n),i=ko(t);t.U_.delete(e),i.c_()&&ZA(t,e),t.U_.size===0&&(i.c_()?i.P_():Ar(t)&&t.j_.set("Unknown"))}function bp(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ko(n).y_(e)}function ZA(n,e){n.H_.Ne(e),ko(n).w_(e)}function Ep(n){n.H_=new LO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),ko(n).start(),n.j_.B_()}function wp(n){return Ar(n)&&!ko(n).u_()&&n.U_.size>0}function Ar(n){return be(n).W_.size===0}function eT(n){n.H_=void 0}async function z1(n){n.j_.set("Online")}async function W1(n){n.U_.forEach((e,t)=>{bp(n,e)})}async function $1(n,e){eT(n),wp(n)?(n.j_.q_(e),Ep(n)):n.j_.set("Unknown")}async function q1(n,e,t){if(n.j_.set("Online"),e instanceof FA&&e.state===2&&e.cause)try{await async function(s,r){const o=r.cause;for(const a of r.targetIds)s.U_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.U_.delete(a),s.H_.removeTarget(a))}(n,e)}catch(i){ie(fr,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Pu(n,i)}else if(e instanceof qc?n.H_.We(e):e instanceof VA?n.H_.Ze(e):n.H_.je(e),!t.isEqual(ye.min()))try{const i=await QA(n.localStore);t.compareTo(i)>=0&&await function(r,o){const a=r.H_.ot(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=r.U_.get(c);u&&r.U_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=r.U_.get(l);if(!u)return;r.U_.set(l,u.withResumeToken(Nt.EMPTY_BYTE_STRING,u.snapshotVersion)),ZA(r,l);const d=new Xi(u.target,l,c,u.sequenceNumber);bp(r,d)}),r.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(i){ie(fr,"Failed to raise snapshot:",i),await Pu(n,i)}}async function Pu(n,e,t){if(!Do(e))throw e;n.W_.add(1),await Tl(n),n.j_.set("Offline"),t||(t=()=>QA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ie(fr,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Fh(n)})}function tT(n,e){return e().catch(t=>Pu(n,t,e))}async function Bh(n){const e=be(n),t=vs(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:rp;for(;G1(e);)try{const s=await x1(e.localStore,i);if(s===null){e.K_.length===0&&t.P_();break}i=s.batchId,K1(e,s)}catch(s){await Pu(e,s)}nT(e)&&iT(e)}function G1(n){return Ar(n)&&n.K_.length<10}function K1(n,e){n.K_.push(e);const t=vs(n);t.c_()&&t.b_&&t.S_(e.mutations)}function nT(n){return Ar(n)&&!vs(n).u_()&&n.K_.length>0}function iT(n){vs(n).start()}async function Q1(n){vs(n).C_()}async function Y1(n){const e=vs(n);for(const t of n.K_)e.S_(t.mutations)}async function X1(n,e,t){const i=n.K_.shift(),s=dp.from(i,e,t);await tT(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Bh(n)}async function J1(n,e){e&&vs(n).b_&&await async function(i,s){if(function(o){return MO(o)&&o!==G.ABORTED}(s.code)){const r=i.K_.shift();vs(i).h_(),await tT(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await Bh(i)}}(n,e),nT(n)&&iT(n)}async function yy(n,e){const t=be(n);t.asyncQueue.verifyOperationInProgress(),ie(fr,"RemoteStore received new credentials");const i=Ar(t);t.W_.add(3),await Tl(t),i&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Fh(t)}async function Z1(n,e){const t=be(n);e?(t.W_.delete(2),await Fh(t)):e||(t.W_.add(2),await Tl(t),t.j_.set("Unknown"))}function ko(n){return n.J_||(n.J_=function(t,i,s){const r=be(t);return r.M_(),new V1(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(n.datastore,n.asyncQueue,{xo:z1.bind(null,n),No:W1.bind(null,n),Lo:$1.bind(null,n),p_:q1.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),wp(n)?Ep(n):n.j_.set("Unknown")):(await n.J_.stop(),eT(n))})),n.J_}function vs(n){return n.Y_||(n.Y_=function(t,i,s){const r=be(t);return r.M_(),new F1(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:Q1.bind(null,n),Lo:J1.bind(null,n),D_:Y1.bind(null,n),v_:X1.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await Bh(n)):(await n.Y_.stop(),n.K_.length>0&&(ie(fr,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,t,i,s,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,r){const o=Date.now()+i,a=new Ap(e,t,o,s,r);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tp(n,e){if(Di("AsyncQueue",`${e}: ${n}`),Do(n))return new ae(G.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{static emptySet(e){return new Zr(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ce.comparator(t.key,i.key):(t,i)=>ce.comparator(t.key,i.key),this.keyedMap=aa(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zr)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Zr;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(){this.Z_=new ct(ce.comparator)}track(e){const t=e.doc.key,i=this.Z_.get(t);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(t):e.type===1&&i.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):ge():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class mo{constructor(e,t,i,s,r,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,s,r){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new mo(e,t,Zr.emptySet(t),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ph(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class tN{constructor(){this.queries=Ey(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,i){const s=be(t),r=s.queries;s.queries=Ey(),r.forEach((o,a)=>{for(const l of a.ta)l.onError(i)})})(this,new ae(G.ABORTED,"Firestore shutting down"))}}function Ey(){return new Er(n=>TA(n),Ph)}async function Sp(n,e){const t=be(n);let i=3;const s=e.query;let r=t.queries.get(s);r?!r.na()&&e.ra()&&(i=2):(r=new eN,i=e.ra()?0:1);try{switch(i){case 0:r.ea=await t.onListen(s,!0);break;case 1:r.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const a=Tp(o,`Initialization of query '${Ur(e.query)}' failed`);return void e.onError(a)}t.queries.set(s,r),r.ta.push(e),e.sa(t.onlineState),r.ea&&e.oa(r.ea)&&Cp(t)}async function Ip(n,e){const t=be(n),i=e.query;let s=3;const r=t.queries.get(i);if(r){const o=r.ta.indexOf(e);o>=0&&(r.ta.splice(o,1),r.ta.length===0?s=e.ra()?0:1:!r.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function nN(n,e){const t=be(n);let i=!1;for(const s of e){const r=s.query,o=t.queries.get(r);if(o){for(const a of o.ta)a.oa(s)&&(i=!0);o.ea=s}}i&&Cp(t)}function iN(n,e,t){const i=be(n),s=i.queries.get(e);if(s)for(const r of s.ta)r.onError(t);i.queries.delete(e)}function Cp(n){n.ia.forEach(e=>{e.next()})}var eg,wy;(wy=eg||(eg={}))._a="default",wy.Cache="cache";class xp{constructor(e,t,i){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new mo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const i=t!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==eg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e){this.key=e}}class rT{constructor(e){this.key=e}}class sN{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=De(),this.mutatedKeys=De(),this.ya=SA(e),this.wa=new Zr(this.ya)}get ba(){return this.fa}Sa(e,t){const i=t?t.Da:new by,s=t?t.wa:this.wa;let r=t?t.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,d)=>{const f=s.get(u),g=Mh(this.query,d)?d:null,m=!!f&&this.mutatedKeys.has(f.key),_=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let y=!1;f&&g?f.data.isEqual(g.data)?m!==_&&(i.track({type:3,doc:g}),y=!0):this.va(f,g)||(i.track({type:2,doc:g}),y=!0,(l&&this.ya(g,l)>0||c&&this.ya(g,c)<0)&&(a=!0)):!f&&g?(i.track({type:0,doc:g}),y=!0):f&&!g&&(i.track({type:1,doc:f}),y=!0,(l||c)&&(a=!0)),y&&(g?(o=o.add(g),r=_?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),i.track({type:1,doc:u})}return{wa:o,Da:i,ls:a,mutatedKeys:r}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const r=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((u,d)=>function(g,m){const _=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return _(g)-_(m)}(u.type,d.type)||this.ya(u.doc,d.doc)),this.Ca(i),s=s!=null&&s;const a=t&&!s?this.Fa():[],l=this.pa.size===0&&this.current&&!s?1:0,c=l!==this.ga;return this.ga=l,o.length!==0||c?{snapshot:new mo(this.query,e.wa,r,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new by,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=De(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const t=[];return e.forEach(i=>{this.pa.has(i)||t.push(new rT(i))}),this.pa.forEach(i=>{e.has(i)||t.push(new sT(i))}),t}Oa(e){this.fa=e.gs,this.pa=De();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return mo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Rp="SyncEngine";class rN{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class oN{constructor(e){this.key=e,this.Ba=!1}}class aN{constructor(e,t,i,s,r,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new Er(a=>TA(a),Ph),this.qa=new Map,this.Qa=new Set,this.$a=new ct(ce.comparator),this.Ka=new Map,this.Ua=new pp,this.Wa={},this.Ga=new Map,this.za=po.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function lN(n,e,t=!0){const i=hT(n);let s;const r=i.ka.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.Na()):s=await oT(i,e,t,!0),s}async function cN(n,e){const t=hT(n);await oT(t,e,!0,!1)}async function oT(n,e,t,i){const s=await R1(n.localStore,Jn(e)),r=s.targetId,o=n.sharedClientState.addLocalQueryTarget(r,t);let a;return i&&(a=await uN(n,e,r,o==="current",s.resumeToken)),n.isPrimaryClient&&t&&JA(n.remoteStore,s),a}async function uN(n,e,t,i,s){n.Ha=(d,f,g)=>async function(_,y,E,I){let R=y.view.Sa(E);R.ls&&(R=await gy(_.localStore,y.query,!1).then(({documents:T})=>y.view.Sa(T,R)));const S=I&&I.targetChanges.get(y.targetId),D=I&&I.targetMismatches.get(y.targetId)!=null,N=y.view.applyChanges(R,_.isPrimaryClient,S,D);return Ty(_,y.targetId,N.Ma),N.snapshot}(n,d,f,g);const r=await gy(n.localStore,e,!0),o=new sN(e,r.gs),a=o.Sa(r.documents),l=Al.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),c=o.applyChanges(a,n.isPrimaryClient,l);Ty(n,t,c.Ma);const u=new rN(e,t,o);return n.ka.set(e,u),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),c.snapshot}async function hN(n,e,t){const i=be(n),s=i.ka.get(e),r=i.qa.get(s.targetId);if(r.length>1)return i.qa.set(s.targetId,r.filter(o=>!Ph(o,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Jf(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),t&&yp(i.remoteStore,s.targetId),tg(i,s.targetId)}).catch(Ro)):(tg(i,s.targetId),await Jf(i.localStore,s.targetId,!0))}async function dN(n,e){const t=be(n),i=t.ka.get(e),s=t.qa.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),yp(t.remoteStore,i.targetId))}async function fN(n,e,t){const i=bN(n);try{const s=await function(o,a){const l=be(o),c=wt.now(),u=a.reduce((g,m)=>g.add(m.key),De());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let m=ki(),_=De();return l.ds.getEntries(g,u).next(y=>{m=y,m.forEach((E,I)=>{I.isValidDocument()||(_=_.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,m)).next(y=>{d=y;const E=[];for(const I of a){const R=xO(I,d.get(I.key).overlayedDocument);R!=null&&E.push(new wr(I.key,R,_A(R.value.mapValue),Vn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,E,a)}).next(y=>{f=y;const E=y.applyToLocalDocumentSet(d,_);return l.documentOverlayCache.saveOverlays(g,y.batchId,E)})}).then(()=>({batchId:f.batchId,changes:CA(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Wa[o.currentUser.toKey()];c||(c=new ct(ke)),c=c.insert(a,l),o.Wa[o.currentUser.toKey()]=c}(i,s.batchId,t),await Sl(i,s.changes),await Bh(i.remoteStore)}catch(s){const r=Tp(s,"Failed to persist write");t.reject(r)}}async function aT(n,e){const t=be(n);try{const i=await I1(t.localStore,e);e.targetChanges.forEach((s,r)=>{const o=t.Ka.get(r);o&&(We(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ba=!0:s.modifiedDocuments.size>0?We(o.Ba):s.removedDocuments.size>0&&(We(o.Ba),o.Ba=!1))}),await Sl(t,i,e)}catch(i){await Ro(i)}}function Ay(n,e,t){const i=be(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.ka.forEach((r,o)=>{const a=o.view.sa(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=be(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.ta)f.sa(a)&&(c=!0)}),c&&Cp(l)}(i.eventManager,e),s.length&&i.La.p_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function gN(n,e,t){const i=be(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Ka.get(e),r=s&&s.key;if(r){let o=new ct(ce.comparator);o=o.insert(r,Kt.newNoDocument(r,ye.min()));const a=De().add(r),l=new Lh(ye.min(),new Map,new ct(ke),o,a);await aT(i,l),i.$a=i.$a.remove(r),i.Ka.delete(e),Dp(i)}else await Jf(i.localStore,e,!1).then(()=>tg(i,e,t)).catch(Ro)}async function pN(n,e){const t=be(n),i=e.batch.batchId;try{const s=await S1(t.localStore,e);cT(t,i,null),lT(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Sl(t,s)}catch(s){await Ro(s)}}async function mN(n,e,t){const i=be(n);try{const s=await function(o,a){const l=be(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(We(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(i.localStore,e);cT(i,e,t),lT(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Sl(i,s)}catch(s){await Ro(s)}}function lT(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function cT(n,e,t){const i=be(n);let s=i.Wa[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(t?r.reject(t):r.resolve(),s=s.remove(e)),i.Wa[i.currentUser.toKey()]=s}}function tg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.qa.get(e))n.ka.delete(i),t&&n.La.Ja(i,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(i=>{n.Ua.containsKey(i)||uT(n,i)})}function uT(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(yp(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),Dp(n))}function Ty(n,e,t){for(const i of t)i instanceof sT?(n.Ua.addReference(i.key,e),_N(n,i)):i instanceof rT?(ie(Rp,"Document no longer in limbo: "+i.key),n.Ua.removeReference(i.key,e),n.Ua.containsKey(i.key)||uT(n,i.key)):ge()}function _N(n,e){const t=e.key,i=t.path.canonicalString();n.$a.get(t)||n.Qa.has(i)||(ie(Rp,"New document in limbo: "+t),n.Qa.add(i),Dp(n))}function Dp(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new ce(rt.fromString(e)),i=n.za.next();n.Ka.set(i,new oN(t)),n.$a=n.$a.insert(t,i),JA(n.remoteStore,new Xi(Jn(kh(t.path)),i,"TargetPurposeLimboResolution",Ch.ae))}}async function Sl(n,e,t){const i=be(n),s=[],r=[],o=[];i.ka.isEmpty()||(i.ka.forEach((a,l)=>{o.push(i.Ha(l,e,t).then(c=>{var u;if((c||t)&&i.isPrimaryClient){const d=c?!c.fromCache:(u=t==null?void 0:t.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=_p.Yi(l.targetId,c);r.push(d)}}))}),await Promise.all(o),i.La.p_(s),await async function(l,c){const u=be(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>$.forEach(c,f=>$.forEach(f.Hi,g=>u.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>$.forEach(f.Ji,g=>u.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!Do(d))throw d;ie(vp,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const g=u.Ts.get(f),m=g.snapshotVersion,_=g.withLastLimboFreeSnapshotVersion(m);u.Ts=u.Ts.insert(f,_)}}}(i.localStore,r))}async function vN(n,e){const t=be(n);if(!t.currentUser.isEqual(e)){ie(Rp,"User change. New user:",e.toKey());const i=await KA(t.localStore,e);t.currentUser=e,function(r,o){r.Ga.forEach(a=>{a.forEach(l=>{l.reject(new ae(G.CANCELLED,o))})}),r.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Sl(t,i.Rs)}}function yN(n,e){const t=be(n),i=t.Ka.get(e);if(i&&i.Ba)return De().add(i.key);{let s=De();const r=t.qa.get(e);if(!r)return s;for(const o of r){const a=t.ka.get(o);s=s.unionWith(a.view.ba)}return s}}function hT(n){const e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=aT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gN.bind(null,e),e.La.p_=nN.bind(null,e.eventManager),e.La.Ja=iN.bind(null,e.eventManager),e}function bN(n){const e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mN.bind(null,e),e}class Mu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vh(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return T1(this.persistence,new E1,e.initialUser,this.serializer)}Xa(e){return new GA(mp.ri,this.serializer)}Za(e){return new k1}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mu.provider={build:()=>new Mu};class EN extends Mu{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){We(this.persistence.referenceDelegate instanceof ku);const i=this.persistence.referenceDelegate.garbageCollector;return new o1(i,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new GA(i=>ku.ri(i,t),this.serializer)}}class ng{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Ay(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=vN.bind(null,this.syncEngine),await Z1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new tN}()}createDatastore(e){const t=Vh(e.databaseInfo.databaseId),i=function(r){return new L1(r)}(e.databaseInfo);return function(r,o,a,l){return new U1(r,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,s,r,o,a){return new j1(i,s,r,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>Ay(this.syncEngine,t,0),function(){return _y.D()?new _y:new P1}())}createSyncEngine(e,t){return function(s,r,o,a,l,c,u){const d=new aN(s,r,o,a,l,c);return u&&(d.ja=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const r=be(s);ie(fr,"RemoteStore shutting down."),r.W_.add(5),await Tl(r),r.z_.shutdown(),r.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}ng.provider={build:()=>new ng};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Di("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="FirestoreClient";class wN{constructor(e,t,i,s,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=$t.UNAUTHENTICATED,this.clientId=aA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async o=>{ie(ys,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(ie(ys,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Tp(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Ud(n,e){n.asyncQueue.verifyOperationInProgress(),ie(ys,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await KA(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Sy(n,e){n.asyncQueue.verifyOperationInProgress();const t=await AN(n);ie(ys,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>yy(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>yy(e.remoteStore,s)),n._onlineComponents=e}async function AN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ie(ys,"Using user provided OfflineComponentProvider");try{await Ud(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===G.FAILED_PRECONDITION||s.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;uo("Error using user provided cache. Falling back to memory cache: "+t),await Ud(n,new Mu)}}else ie(ys,"Using default OfflineComponentProvider"),await Ud(n,new EN(void 0));return n._offlineComponents}async function dT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ie(ys,"Using user provided OnlineComponentProvider"),await Sy(n,n._uninitializedComponentsProvider._online)):(ie(ys,"Using default OnlineComponentProvider"),await Sy(n,new ng))),n._onlineComponents}function TN(n){return dT(n).then(e=>e.syncEngine)}async function Ou(n){const e=await dT(n),t=e.eventManager;return t.onListen=lN.bind(null,e.syncEngine),t.onUnlisten=hN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=cN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=dN.bind(null,e.syncEngine),t}function SN(n,e,t={}){const i=new xi;return n.asyncQueue.enqueueAndForget(async()=>function(r,o,a,l,c){const u=new kp({next:f=>{u.su(),o.enqueueAndForget(()=>Ip(r,d));const g=f.docs.has(a);!g&&f.fromCache?c.reject(new ae(G.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?c.reject(new ae(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new xp(kh(a.path),u,{includeMetadataChanges:!0,Ta:!0});return Sp(r,d)}(await Ou(n),n.asyncQueue,e,t,i)),i.promise}function IN(n,e,t={}){const i=new xi;return n.asyncQueue.enqueueAndForget(async()=>function(r,o,a,l,c){const u=new kp({next:f=>{u.su(),o.enqueueAndForget(()=>Ip(r,d)),f.fromCache&&l.source==="server"?c.reject(new ae(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new xp(a,u,{includeMetadataChanges:!0,Ta:!0});return Sp(r,d)}(await Ou(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(n,e,t){if(!t)throw new ae(G.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function CN(n,e,t,i){if(e===!0&&i===!0)throw new ae(G.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Cy(n){if(!ce.isDocumentKey(n))throw new ae(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xy(n){if(ce.isDocumentKey(n))throw new ae(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Pp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ge()}function Rn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ae(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Pp(n);throw new ae(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="firestore.googleapis.com",Ry=!0;class Dy{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pT,this.ssl=Ry}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Ry;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<s1)throw new ae(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fT((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ae(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ae(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ae(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uh{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new OM;switch(i.type){case"firstParty":return new FM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ae(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=Iy.get(t);i&&(ie("ComponentProvider","Removing Datastore"),Iy.delete(t),i.terminate())}(this),Promise.resolve()}}function xN(n,e,t,i={}){var s;const r=(n=Rn(n,Uh))._getSettings(),o=Object.assign(Object.assign({},r),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;r.host!==pT&&r.host!==a&&uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},r),{host:a,ssl:!1,emulatorOptions:i});if(!ur(l,o)&&(n._setSettings(l),i.mockUserToken)){let c,u;if(typeof i.mockUserToken=="string")c=i.mockUserToken,u=$t.MOCK_USER;else{c=aP(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const d=i.mockUserToken.sub||i.mockUserToken.user_id;if(!d)throw new ae(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new $t(d)}n._authCredentials=new NM(new oA(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Il(this.firestore,e,this._query)}}class fn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fn(this.firestore,e,this._key)}}class us extends Il{constructor(e,t,i){super(e,t,kh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fn(this.firestore,null,new ce(e))}withConverter(e){return new us(this.firestore,e,this._path)}}function _o(n,e,...t){if(n=gn(n),gT("collection","path",e),n instanceof Uh){const i=rt.fromString(e,...t);return xy(i),new us(n,null,i)}{if(!(n instanceof fn||n instanceof us))throw new ae(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(rt.fromString(e,...t));return xy(i),new us(n.firestore,null,i)}}function Ks(n,e,...t){if(n=gn(n),arguments.length===1&&(e=aA.newId()),gT("doc","path",e),n instanceof Uh){const i=rt.fromString(e,...t);return Cy(i),new fn(n,null,new ce(i))}{if(!(n instanceof fn||n instanceof us))throw new ae(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(rt.fromString(e,...t));return Cy(i),new fn(n.firestore,n instanceof us?n.converter:null,new ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="AsyncQueue";class Py{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new YA(this,"async_queue_retry"),this.bu=()=>{const i=Bd();i&&ie(ky,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.Su=e;const t=Bd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Bd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new xi;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Do(e))throw e;ie(ky,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Di("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.pu=!1,i))));return this.Su=t,t}enqueueAfterDelay(e,t,i){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=Ap.createAndSchedule(this,e,t,i,r=>this.Fu(r));return this.fu.push(s),s}Du(){this.gu&&ge()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function My(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const s=t;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(n,["next","error","complete"])}class bs extends Uh{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new Py,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Py(e),this._firestoreClient=void 0,await e}}}function Mp(n,e){const t=typeof n=="object"?n:X0(),i=typeof n=="string"?n:Tu,s=ip(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=rP("firestore");r&&xN(s,...r)}return s}function Hh(n){if(n._terminated)throw new ae(G.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||RN(n),n._firestoreClient}function RN(n){var e,t,i;const s=n._freezeSettings(),r=function(a,l,c,u){return new JM(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,fT(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new wN(n._authCredentials,n._appCheckCredentials,n._queue,r,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vo(Nt.fromBase64String(e))}catch(t){throw new ae(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vo(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=/^__.*__$/;class kN{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new wr(e,this.data,this.fieldMask,t,this.fieldTransforms):new wl(e,this.data,t,this.fieldTransforms)}}function _T(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}class Vp{constructor(e,t,i,s,r,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Bu(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Vp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:i,Qu:!1});return s.$u(e),s}Ku(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:i,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Nu(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(_T(this.Lu)&&DN.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class PN{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Vh(e)}ju(e,t,i,s=!1){return new Vp({Lu:e,methodName:t,zu:i,path:Ot.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vT(n){const e=n._freezeSettings(),t=Vh(n._databaseId);return new PN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function yT(n,e,t,i,s,r={}){const o=n.ju(r.merge||r.mergeFields?2:0,e,t,s);AT("Data must be an object, but it was:",o,i);const a=ET(i,o);let l,c;if(r.merge)l=new On(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const u=[];for(const d of r.mergeFields){const f=MN(e,d,t);if(!o.contains(f))throw new ae(G.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);NN(u,f)||u.push(f)}l=new On(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new kN(new Cn(a),l,c)}function bT(n,e){if(wT(n=gn(n)))return AT("Unsupported field value:",e,n),ET(n,e);if(n instanceof mT)return function(i,s){if(!_T(s.Lu))throw s.Wu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,s){const r=[];let o=0;for(const a of i){let l=bT(a,s.Uu(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}}(n,e)}return function(i,s){if((i=gn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return wO(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=wt.fromDate(i);return{timestampValue:Du(s.serializer,r)}}if(i instanceof wt){const r=new wt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Du(s.serializer,r)}}if(i instanceof Np)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof vo)return{bytesValue:BA(s.serializer,i._byteString)};if(i instanceof fn){const r=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(r))throw s.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:gp(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Lp)return function(o,a){return{mapValue:{fields:{[pA]:{stringValue:mA},[Su]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Wu("VectorValues must only contain numeric values.");return up(a.serializer,c)})}}}}}}(i,s);throw s.Wu(`Unsupported field value: ${Pp(i)}`)}(n,e)}function ET(n,e){const t={};return cA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):br(n,(i,s)=>{const r=bT(s,e.qu(i));r!=null&&(t[i]=r)}),{mapValue:{fields:t}}}function wT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof wt||n instanceof Np||n instanceof vo||n instanceof fn||n instanceof mT||n instanceof Lp)}function AT(n,e,t){if(!wT(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const i=Pp(t);throw i==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+i)}}function MN(n,e,t){if((e=gn(e))instanceof Op)return e._internalPath;if(typeof e=="string")return TT(n,e);throw Nu("Field path arguments must be of type string or ",n,!1,void 0,t)}const ON=new RegExp("[~\\*/\\[\\]]");function TT(n,e,t){if(e.search(ON)>=0)throw Nu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Op(...e.split("."))._internalPath}catch{throw Nu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Nu(n,e,t,i,s){const r=i&&!i.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${i}`),o&&(l+=` in document ${s}`),l+=")"),new ae(G.INVALID_ARGUMENT,a+n+l)}function NN(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,t,i,s,r){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(IT("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class LN extends ST{data(){return super.data()}}function IT(n,e){return typeof e=="string"?TT(n,e):e instanceof Op?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ae(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VN{convertValue(e,t="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return br(e,(s,r)=>{i[s]=this.convertValue(r,t)}),i}convertVectorValue(e){var t,i,s;const r=(s=(i=(t=e.fields)===null||t===void 0?void 0:t[Su].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(o=>gt(o.doubleValue));return new Lp(r)}convertGeoPoint(e){return new Np(gt(e.latitude),gt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Rh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Za(e));default:return null}}convertTimestamp(e){const t=ps(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=rt.fromString(e);We($A(i));const s=new el(i.get(1),i.get(3)),r=new ce(i.popFirst(5));return s.isEqual(t)||Di(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class RT extends ST{constructor(e,t,i,s,r,o){super(e,t,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Gc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(IT("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Gc extends RT{data(e={}){return super.data(e)}}class DT{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new ca(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Gc(this._firestore,this._userDataWriter,i.key,i,new ca(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Gc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ca(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const l=new Gc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ca(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:FN(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function FN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(n){n=Rn(n,fn);const e=Rn(n.firestore,bs);return SN(Hh(e),n._key).then(t=>kT(e,n,t))}class Fp extends VN{constructor(e){super(),this.firestore=e}convertBytes(e){return new vo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fn(this.firestore,null,t)}}function sl(n){n=Rn(n,Il);const e=Rn(n.firestore,bs),t=Hh(e),i=new Fp(e);return CT(n._query),IN(t,n._query).then(s=>new DT(e,i,n,s))}function Kc(n,e,t){n=Rn(n,fn);const i=Rn(n.firestore,bs),s=xT(n.converter,e);return Bp(i,[yT(vT(i),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Vn.none())])}function BN(n){return Bp(Rn(n.firestore,bs),[new hp(n._key,Vn.none())])}function UN(n,e){const t=Rn(n.firestore,bs),i=Ks(n),s=xT(n.converter,e);return Bp(t,[yT(vT(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,Vn.exists(!1))]).then(()=>i)}function HN(n,...e){var t,i,s;n=gn(n);let r={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||My(e[o])||(r=e[o],o++);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(My(e[o])){const d=e[o];e[o]=(t=d.next)===null||t===void 0?void 0:t.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let l,c,u;if(n instanceof fn)c=Rn(n.firestore,bs),u=kh(n._key.path),l={next:d=>{e[o]&&e[o](kT(c,n,d))},error:e[o+1],complete:e[o+2]};else{const d=Rn(n,Il);c=Rn(d.firestore,bs),u=d._query;const f=new Fp(c);l={next:g=>{e[o]&&e[o](new DT(c,f,d,g))},error:e[o+1],complete:e[o+2]},CT(n._query)}return function(f,g,m,_){const y=new kp(_),E=new xp(g,y,m);return f.asyncQueue.enqueueAndForget(async()=>Sp(await Ou(f),E)),()=>{y.su(),f.asyncQueue.enqueueAndForget(async()=>Ip(await Ou(f),E))}}(Hh(c),u,a,l)}function Bp(n,e){return function(i,s){const r=new xi;return i.asyncQueue.enqueueAndForget(async()=>fN(await TN(i),s,r)),r.promise}(Hh(n),e)}function kT(n,e,t){const i=t.docs.get(e._key),s=new Fp(n);return new RT(n,s,e._key,i,new ca(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){xo=s})(Co),co(new hr("firestore",(i,{instanceIdentifier:s,options:r})=>{const o=i.getProvider("app").getImmediate(),a=new bs(new LM(i.getProvider("auth-internal")),new BM(o,i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ae(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new el(c.options.projectId,u)}(o,s),o);return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),ls(Bv,Uv,e),ls(Bv,Uv,"esm2017")})();function Up(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}function PT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jN=PT,MT=new bl("auth","Firebase",PT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu=new tp("@firebase/auth");function zN(n,...e){Lu.logLevel<=Re.WARN&&Lu.warn(`Auth (${Co}): ${n}`,...e)}function Qc(n,...e){Lu.logLevel<=Re.ERROR&&Lu.error(`Auth (${Co}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(n,...e){throw jp(n,...e)}function Fn(n,...e){return jp(n,...e)}function Hp(n,e,t){const i=Object.assign(Object.assign({},jN()),{[e]:t});return new bl("auth","Firebase",i).create(e,{appName:n.name})}function hs(n){return Hp(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function WN(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&oi(n,"argument-error"),Hp(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return MT.create(n,...e)}function me(n,e,...t){if(!n)throw jp(e,...t)}function Ei(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Qc(e),new Error(e)}function Pi(n,e){n||Ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function $N(){return Oy()==="http:"||Oy()==="https:"}function Oy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($N()||hP()||"connection"in navigator)?navigator.onLine:!0}function GN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Pi(t>e,"Short delay should be less than long delay!"),this.isMobile=lP()||dP()}get(){return qN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(n,e){Pi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=new Cl(3e4,6e4);function jh(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Po(n,e,t,i,s={}){return NT(n,s,async()=>{let r={},o={};i&&(e==="GET"?o=i:r={body:JSON.stringify(i)});const a=El(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},r);return uP()||(c.referrerPolicy="no-referrer"),OT.fetch()(VT(n,n.config.apiHost,t,a),c)})}async function NT(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},KN),e);try{const s=new YN(n),r=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw lc(n,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw lc(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw lc(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw lc(n,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Hp(n,u,c);oi(n,u)}}catch(s){if(s instanceof Li)throw s;oi(n,"network-request-failed",{message:String(s)})}}async function LT(n,e,t,i,s={}){const r=await Po(n,e,t,i,s);return"mfaPendingCredential"in r&&oi(n,"multi-factor-auth-required",{_serverResponse:r}),r}function VT(n,e,t,i){const s=`${e}${t}?${i}`;return n.config.emulator?zp(n.config,s):`${n.config.apiScheme}://${s}`}class YN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Fn(this.auth,"network-request-failed")),QN.get())})}}function lc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=Fn(n,e,i);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(n,e){return Po(n,"POST","/v1/accounts:delete",e)}async function FT(n,e){return Po(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JN(n,e=!1){const t=gn(n),i=await t.getIdToken(e),s=Wp(i);me(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:xa(jd(s.auth_time)),issuedAtTime:xa(jd(s.iat)),expirationTime:xa(jd(s.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function jd(n){return Number(n)*1e3}function Wp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Qc("JWT malformed, contained fewer than 3 sections"),null;try{const s=W0(t);return s?JSON.parse(s):(Qc("Failed to decode base64 JWT payload"),null)}catch(s){return Qc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Ny(n){const e=Wp(n);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Li&&ZN(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function ZN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=xa(this.lastLoginAt),this.creationTime=xa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vu(n){var e;const t=n.auth,i=await n.getIdToken(),s=await rl(n,FT(t,{idToken:i}));me(s==null?void 0:s.users.length,t,"internal-error");const r=s.users[0];n._notifyReloadListener(r);const o=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?BT(r.providerUserInfo):[],a=nL(n.providerData,o),l=n.isAnonymous,c=!(n.email&&r.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new sg(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(n,d)}async function tL(n){const e=gn(n);await Vu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nL(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function BT(n){return n.map(e=>{var{providerId:t}=e,i=Up(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iL(n,e){const t=await NT(n,{},async()=>{const i=El({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=n.config,o=VT(n,s,"/v1/token",`key=${r}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",OT.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function sL(n,e){return Po(n,"POST","/v2/accounts:revokeToken",jh(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ny(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){me(e.length!==0,"internal-error");const t=Ny(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:r}=await iL(e,t);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:r}=t,o=new eo;return i&&(me(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(me(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),r&&(me(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new eo,this.toJSON())}_performRefresh(){return Ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(n,e){me(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class wi{constructor(e){var{uid:t,auth:i,stsTokenManager:s}=e,r=Up(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new sg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await rl(this,this.stsTokenManager.getToken(this.auth,e));return me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return JN(this,e)}reload(){return tL(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new wi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Vu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(In(this.auth.app))return Promise.reject(hs(this.auth));const e=await this.getIdToken();return await rl(this,XN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,s,r,o,a,l,c,u;const d=(i=t.displayName)!==null&&i!==void 0?i:void 0,f=(s=t.email)!==null&&s!==void 0?s:void 0,g=(r=t.phoneNumber)!==null&&r!==void 0?r:void 0,m=(o=t.photoURL)!==null&&o!==void 0?o:void 0,_=(a=t.tenantId)!==null&&a!==void 0?a:void 0,y=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,E=(c=t.createdAt)!==null&&c!==void 0?c:void 0,I=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:R,emailVerified:S,isAnonymous:D,providerData:N,stsTokenManager:T}=t;me(R&&T,e,"internal-error");const b=eo.fromJSON(this.name,T);me(typeof R=="string",e,"internal-error"),Wi(d,e.name),Wi(f,e.name),me(typeof S=="boolean",e,"internal-error"),me(typeof D=="boolean",e,"internal-error"),Wi(g,e.name),Wi(m,e.name),Wi(_,e.name),Wi(y,e.name),Wi(E,e.name),Wi(I,e.name);const w=new wi({uid:R,auth:e,email:f,emailVerified:S,displayName:d,isAnonymous:D,photoURL:m,phoneNumber:g,tenantId:_,stsTokenManager:b,createdAt:E,lastLoginAt:I});return N&&Array.isArray(N)&&(w.providerData=N.map(C=>Object.assign({},C))),y&&(w._redirectEventId=y),w}static async _fromIdTokenResponse(e,t,i=!1){const s=new eo;s.updateFromServerResponse(t);const r=new wi({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Vu(r),r}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];me(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?BT(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),a=new eo;a.updateFromIdToken(i);const l=new wi({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new sg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=new Map;function Ai(n){Pi(n instanceof Function,"Expected a class definition");let e=Ly.get(n);return e?(Pi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ly.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}UT.type="NONE";const Vy=UT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(n,e,t){return`firebase:${n}:${e}:${t}`}class to{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=Yc(this.userKey,s.apiKey,r),this.fullPersistenceKey=Yc("persistence",s.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?wi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new to(Ai(Vy),e,i);const s=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=s[0]||Ai(Vy);const o=Yc(i,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=await c._get(o);if(u){const d=wi._fromJSON(e,u);c!==r&&(a=d),r=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new to(r,e,i):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new to(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qT(e))return"Blackberry";if(GT(e))return"Webos";if(jT(e))return"Safari";if((e.includes("chrome/")||zT(e))&&!e.includes("edge/"))return"Chrome";if($T(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function HT(n=nn()){return/firefox\//i.test(n)}function jT(n=nn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zT(n=nn()){return/crios\//i.test(n)}function WT(n=nn()){return/iemobile/i.test(n)}function $T(n=nn()){return/android/i.test(n)}function qT(n=nn()){return/blackberry/i.test(n)}function GT(n=nn()){return/webos/i.test(n)}function $p(n=nn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function rL(n=nn()){var e;return $p(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oL(){return fP()&&document.documentMode===10}function KT(n=nn()){return $p(n)||$T(n)||GT(n)||qT(n)||/windows phone/i.test(n)||WT(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(n,e=[]){let t;switch(n){case"Browser":t=Fy(nn());break;case"Worker":t=`${Fy(nn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Co}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=r=>new Promise((o,a)=>{try{const l=e(r);o(l)}catch(l){a(l)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lL(n,e={}){return Po(n,"GET","/v2/passwordPolicy",jh(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=6;class uL{constructor(e){var t,i,s,r;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:cL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,s,r,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(r=l.containsUppercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new By(this),this.idTokenSubscription=new By(this),this.beforeStateQueue=new aL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=MT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ai(t)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await to.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await FT(this,{idToken:e}),i=await wi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(In(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Vu(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(In(this.app))return Promise.reject(hs(this));const t=e?gn(e):null;return t&&me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return In(this.app)?Promise.reject(hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return In(this.app)?Promise.reject(hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lL(this),t=new uL(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await sL(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ai(e)||this._popupRedirectResolver;me(t,this,"argument-error"),this.redirectPersistenceManager=await to.create(this,[Ai(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const r=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,i,s);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(In(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&zN(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function xl(n){return gn(n)}class By{constructor(e){this.auth=e,this.observer=null,this.addObserver=EP(t=>this.observer=t)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dL(n){qp=n}function fL(n){return qp.loadJS(n)}function gL(){return qp.gapiScript}function pL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(n,e){const t=ip(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),r=t.getOptions();if(ur(r,e??{}))return s;oi(s,"already-initialized")}return t.initialize({options:e})}function _L(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Ai);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function vL(n,e,t){const i=xl(n);me(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,r=YT(e),{host:o,port:a}=yL(e),l=a===null?"":`:${a}`,c={url:`${r}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){me(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),me(ur(c,i.config.emulator)&&ur(u,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=u,i.settings.appVerificationDisabledForTesting=!0,bL()}function YT(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function yL(n){const e=YT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:Uy(i.substr(r.length+1))}}else{const[r,o]=i.split(":");return{host:r,port:Uy(o)}}}function Uy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function bL(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ei("not implemented")}_getIdTokenResponse(e){return Ei("not implemented")}_linkToIdToken(e,t){return Ei("not implemented")}_getReauthenticationResolver(e){return Ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(n,e){return LT(n,"POST","/v1/accounts:signInWithIdp",jh(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL="http://localhost";class gr extends XT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new gr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):oi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=t,r=Up(t,["providerId","signInMethod"]);if(!i||!s)return null;const o=new gr(i,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return no(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,no(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,no(e,t)}buildRequest(){const e={requestUri:EL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=El(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl extends Gp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends Rl{constructor(){super("facebook.com")}static credential(e){return gr._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ki.credential(e.oauthAccessToken)}catch{return null}}}Ki.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ki.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends Rl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return gr._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return bi.credential(t,i)}catch{return null}}}bi.GOOGLE_SIGN_IN_METHOD="google.com";bi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends Rl{constructor(){super("github.com")}static credential(e){return gr._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qi.credential(e.oauthAccessToken)}catch{return null}}}Qi.GITHUB_SIGN_IN_METHOD="github.com";Qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends Rl{constructor(){super("twitter.com")}static credential(e,t){return gr._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Yi.credential(t,i)}catch{return null}}}Yi.TWITTER_SIGN_IN_METHOD="twitter.com";Yi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wL(n,e){return LT(n,"POST","/v1/accounts:signUp",jh(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const r=await wi._fromIdTokenResponse(e,i,s),o=Hy(i);return new Es({user:r,providerId:o,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=Hy(i);return new Es({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function Hy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AL(n){var e;if(In(n.app))return Promise.reject(hs(n));const t=xl(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Es({user:t.currentUser,providerId:null,operationType:"signIn"});const i=await wL(t,{returnSecureToken:!0}),s=await Es._fromIdTokenResponse(t,"signIn",i,!0);return await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu extends Li{constructor(e,t,i,s){var r;super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Fu.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new Fu(e,t,i,s)}}function JT(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Fu._fromErrorAndOperation(n,r,e,i):r})}async function TL(n,e,t=!1){const i=await rl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Es._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SL(n,e,t=!1){const{auth:i}=n;if(In(i.app))return Promise.reject(hs(i));const s="reauthenticate";try{const r=await rl(n,JT(i,s,e,n),t);me(r.idToken,i,"internal-error");const o=Wp(r.idToken);me(o,i,"internal-error");const{sub:a}=o;return me(n.uid===a,i,"user-mismatch"),Es._forOperation(n,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&oi(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IL(n,e,t=!1){if(In(n.app))return Promise.reject(hs(n));const i="signIn",s=await JT(n,i,e),r=await Es._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(r.user),r}function CL(n,e,t,i){return gn(n).onIdTokenChanged(e,t,i)}function xL(n,e,t){return gn(n).beforeAuthStateChanged(e,t)}function yo(n,e,t,i){return gn(n).onAuthStateChanged(e,t,i)}function RL(n){return gn(n).signOut()}const Bu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bu,"1"),this.storage.removeItem(Bu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=1e3,kL=10;class eS extends ZT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(i);!t&&this.localCache[i]===o||this.notifyListeners(i,o)},r=this.storage.getItem(i);oL()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,kL):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},DL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}eS.type="LOCAL";const PL=eS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS extends ZT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}tS.type="SESSION";const nS=tS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new zh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:r}=t.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const a=Array.from(o).map(async c=>c(t.origin,r)),l=await ML(a);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=Kp("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(f.data.response);break;default:clearTimeout(u),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(){return window}function NL(n){ei().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(){return typeof ei().WorkerGlobalScope<"u"&&typeof ei().importScripts=="function"}async function LL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VL(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function FL(){return iS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="firebaseLocalStorageDb",BL=1,Uu="firebaseLocalStorage",rS="fbase_key";class Dl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Wh(n,e){return n.transaction([Uu],e?"readwrite":"readonly").objectStore(Uu)}function UL(){const n=indexedDB.deleteDatabase(sS);return new Dl(n).toPromise()}function rg(){const n=indexedDB.open(sS,BL);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Uu,{keyPath:rS})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Uu)?e(i):(i.close(),await UL(),e(await rg()))})})}async function jy(n,e,t){const i=Wh(n,!0).put({[rS]:e,value:t});return new Dl(i).toPromise()}async function HL(n,e){const t=Wh(n,!1).get(e),i=await new Dl(t).toPromise();return i===void 0?null:i.value}function zy(n,e){const t=Wh(n,!0).delete(e);return new Dl(t).toPromise()}const jL=800,zL=3;class oS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>zL)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zh._getInstance(FL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await LL(),!this.activeServiceWorker)return;this.sender=new OL(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rg();return await jy(e,Bu,"1"),await zy(e,Bu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>jy(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>HL(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>zy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=Wh(s,!1).getAll();return new Dl(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oS.type="LOCAL";const WL=oS;new Cl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(n,e){return e?Ai(e):(me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp extends XT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return no(e,this._buildIdpRequest())}_linkToIdToken(e,t){return no(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return no(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $L(n){return IL(n.auth,new Qp(n),n.bypassAuthState)}function qL(n){const{auth:e,user:t}=n;return me(t,e,"internal-error"),SL(t,new Qp(n),n.bypassAuthState)}async function GL(n){const{auth:e,user:t}=n;return me(t,e,"internal-error"),TL(t,new Qp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,t,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $L;case"linkViaPopup":case"linkViaRedirect":return GL;case"reauthViaPopup":case"reauthViaRedirect":return qL;default:oi(this.auth,"internal-error")}}resolve(e){Pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=new Cl(2e3,1e4);async function QL(n,e,t){if(In(n.app))return Promise.reject(Fn(n,"operation-not-supported-in-this-environment"));const i=xl(n);WN(n,e,Gp);const s=aS(i,t);return new Js(i,"signInViaPopup",e,s).executeNotNull()}class Js extends lS{constructor(e,t,i,s,r){super(e,t,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Js.currentPopupAction&&Js.currentPopupAction.cancel(),Js.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){Pi(this.filter.length===1,"Popup operations only handle one event");const e=Kp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Js.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KL.get())};e()}}Js.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL="pendingRedirect",Xc=new Map;class XL extends lS{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Xc.get(this.auth._key());if(!e){try{const i=await JL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Xc.set(this.auth._key(),e)}return this.bypassAuthState||Xc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JL(n,e){const t=tV(e),i=eV(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function ZL(n,e){Xc.set(n._key(),e)}function eV(n){return Ai(n._redirectPersistence)}function tV(n){return Yc(YL,n.config.apiKey,n.name)}async function nV(n,e,t=!1){if(In(n.app))return Promise.reject(hs(n));const i=xl(n),s=aS(i,e),o=await new XL(i,s,t).execute();return o&&!t&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=10*60*1e3;class sV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!cS(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Fn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iV&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wy(e))}saveEventToCache(e){this.cachedEventUids.add(Wy(e)),this.lastProcessedEventTime=Date.now()}}function Wy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function cS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oV(n,e={}){return Po(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lV=/^https?/;async function cV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await oV(n);for(const t of e)try{if(uV(t))return}catch{}oi(n,"unauthorized-domain")}function uV(n){const e=ig(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!lV.test(t))return!1;if(aV.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=new Cl(3e4,6e4);function $y(){const n=ei().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function dV(n){return new Promise((e,t)=>{var i,s,r;function o(){$y(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$y(),t(Fn(n,"network-request-failed"))},timeout:hV.get()})}if(!((s=(i=ei().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((r=ei().gapi)===null||r===void 0)&&r.load)o();else{const a=pL("iframefcb");return ei()[a]=()=>{gapi.load?o():t(Fn(n,"network-request-failed"))},fL(`${gL()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Jc=null,e})}let Jc=null;function fV(n){return Jc=Jc||dV(n),Jc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=new Cl(5e3,15e3),pV="__/auth/iframe",mV="emulator/auth/iframe",_V={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yV(n){const e=n.config;me(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?zp(e,mV):`https://${n.config.authDomain}/${pV}`,i={apiKey:e.apiKey,appName:n.name,v:Co},s=vV.get(n.config.apiHost);s&&(i.eid=s);const r=n._getFrameworks();return r.length&&(i.fw=r.join(",")),`${t}?${El(i).slice(1)}`}async function bV(n){const e=await fV(n),t=ei().gapi;return me(t,n,"internal-error"),e.open({where:document.body,url:yV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_V,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const o=Fn(n,"network-request-failed"),a=ei().setTimeout(()=>{r(o)},gV.get());function l(){ei().clearTimeout(a),s(i)}i.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wV=500,AV=600,TV="_blank",SV="http://localhost";class qy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IV(n,e,t,i=wV,s=AV){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},EV),{width:i.toString(),height:s.toString(),top:r,left:o}),c=nn().toLowerCase();t&&(a=zT(c)?TV:t),HT(c)&&(e=e||SV,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[g,m])=>`${f}${g}=${m},`,"");if(rL(c)&&a!=="_self")return CV(e||"",a),new qy(null);const d=window.open(e||"",a,u);me(d,n,"popup-blocked");try{d.focus()}catch{}return new qy(d)}function CV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV="__/auth/handler",RV="emulator/auth/handler",DV=encodeURIComponent("fac");async function Gy(n,e,t,i,s,r){me(n.config.authDomain,n,"auth-domain-config-required"),me(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Co,eventId:s};if(e instanceof Gp){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",bP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(e instanceof Rl){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await n._getAppCheckToken(),c=l?`#${DV}=${encodeURIComponent(l)}`:"";return`${kV(n)}?${El(a).slice(1)}${c}`}function kV({config:n}){return n.emulator?zp(n,RV):`https://${n.authDomain}/${xV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="webStorageSupport";class PV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nS,this._completeRedirectFn=nV,this._overrideRedirectResult=ZL}async _openPopup(e,t,i,s){var r;Pi((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await Gy(e,t,i,ig(),s);return IV(e,o,Kp())}async _openRedirect(e,t,i,s){await this._originValidation(e);const r=await Gy(e,t,i,ig(),s);return NL(r),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:r}=this.eventManagers[t];return s?Promise.resolve(s):(Pi(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await bV(e),i=new sV(e);return t.register("authEvent",s=>(me(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(zd,{type:zd},s=>{var r;const o=(r=s==null?void 0:s[0])===null||r===void 0?void 0:r[zd];o!==void 0&&t(!!o),oi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=cV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return KT()||jT()||$p()}}const MV=PV;var Ky="@firebase/auth",Qy="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LV(n){co(new hr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QT(n)},c=new hL(i,s,r,l);return _L(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),co(new hr("auth-internal",e=>{const t=xl(e.getProvider("auth").getImmediate());return(i=>new OV(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ls(Ky,Qy,NV(n)),ls(Ky,Qy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV=5*60,FV=G0("authIdTokenMaxAge")||VV;let Yy=null;const BV=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>FV)return;const s=t==null?void 0:t.token;Yy!==s&&(Yy=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Mo(n=X0()){const e=ip(n,"auth");if(e.isInitialized())return e.getImmediate();const t=mL(n,{popupRedirectResolver:MV,persistence:[WL,PL,nS]}),i=G0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const o=BV(r.toString());xL(t,o,()=>o(t.currentUser)),CL(t,a=>o(a))}}const s=$0("auth");return s&&vL(t,`http://${s}`),t}function UV(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}dL({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const r=Fn("internal-error");r.customData=s,t(r)},i.type="text/javascript",i.charset="UTF-8",UV().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LV("Browser");const HV={apiKey:"AIzaSyBVEZa6ROzILT6YfOJXdfSVs8M35dflPpo",authDomain:"booeekk-x0.firebaseapp.com",projectId:"booeekk-x0",storageBucket:"booeekk-x0.firebasestorage.app",messagingSenderId:"443205335095",appId:"1:443205335095:web:670959c501d891e72ea7b2",measurementId:"G-F3YQL2KHXX"},uS=Y0(HV),Zc=Mp(uS),Xy=Mo(uS),jV=new bi,Oo=(n,e)=>{const t=n.__vccOpts||n;for(const[i,s]of e)t[i]=s;return t},zV={id:"login-container"},WV={methods:{googleLogin(){alert("Google ")},guestLogin(){alert("")}}},$V=Object.assign(WV,{__name:"LoginPage",setup(n){const e=ep(),t=async()=>{try{const r=(await QL(Xy,jV)).user;localStorage.setItem("isLoggedIn","true"),localStorage.setItem("userId",r.uid),localStorage.setItem("userName",r.displayName),console.log(" Google :",r),e.push("/dashboard")}catch(s){console.error(" Google :",s)}},i=async()=>{console.log(" ...");try{const r=(await AL(Xy)).user;console.log(" UID:",r.uid),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("userRole","guest"),localStorage.setItem("userId",r.uid),await e.push("/dashboard")}catch(s){console.error(" :",s)}};return(s,r)=>(ve(),Ie("div",zV,[H("div",{id:"login-box"},[r[0]||(r[0]=H("img",{src:"https://cdn-icons-png.flaticon.com/512/5264/5264565.png",alt:"logo",id:"logo"},null,-1)),r[1]||(r[1]=H("div",{class:"marquee-wrapper"},[H("div",{class:"marquee-content"},[H("h2",null,"     ")])],-1)),H("button",{id:"google-login",onClick:t}," Google "),H("button",{id:"guest-mode",onClick:i},"")])]))}}),qV=Oo($V,[["__scopeId","data-v-24e69708"]]),GV={class:"main-container"},KV={class:"left-section"},QV={class:"box"},YV={class:"total-amount"},XV={class:"form-group"},JV={class:"form-group"},ZV={class:"form-group"},eF=["value"],tF={key:0,class:"form-group"},nF={class:"form-group"},iF={class:"form-group"},sF={class:"box"},rF={class:"record-list"},oF=["onClick"],aF={__name:"AddAccounting",setup(n){const e=Mp(),t=Mo();ep();const i=["","","",""],s=["","","","","","",""],r=Ce(""),o=Ce("income"),a=Ce(""),l=Ce(""),c=Ce(!1),u=Ce(""),d=Ce(""),f=Ce([]),g=Ce(null),m=Ce([]),_=Ce([]),y=Ce([]);yo(t,async w=>{w?(g.value=w.uid,console.log(" :",w.uid),await E(w.uid),I(),await R()):console.log(" ")}),Xn(o,async()=>{g.value&&await I()});async function E(w){const C=Ks(e,"users",w,"categories","income"),x=Ks(e,"users",w,"categories","expense"),O=await Hd(C),k=await Hd(x);O.exists()||(await Kc(C,{list:i}),console.log(" ")),k.exists()||(await Kc(x,{list:s}),console.log(" "))}const I=async()=>{if(!g.value)return;const w=Ks(e,"users",g.value,"categories",o.value);HN(w,C=>{if(C.exists()){const x=C.data().list||[];o.value==="income"?m.value=x:_.value=x,y.value=[...x],console.log(" :",x)}else console.log(" ..."),E(g.value)})},R=async()=>{if(!g.value)return;const w=await sl(_o(e,"users",g.value,"records"));f.value=w.docs.map(C=>({id:C.id,...C.data()}))},S=lt(()=>f.value.reduce((w,C)=>C.category==="income"?w+C.amount:w-C.amount,0)),D=()=>{c.value=a.value==="new"},N=async()=>{if(!l.value.trim())return;const w=Ks(e,"users",g.value,"categories",o.value),C=await Hd(w);let x=C.exists()?[...C.data().list,l.value.trim()]:[l.value.trim()];await Kc(w,{list:x}),o.value==="income"?m.value=x:_.value=x,a.value=l.value.trim(),l.value="",c.value=!1},T=async()=>{if(!r.value||!u.value||!a.value){alert("");return}const w={amount:parseFloat(r.value),category:o.value,subCategory:a.value,date:u.value,note:d.value},C=await UN(_o(e,"users",g.value,"records"),w);f.value.push({id:C.id,...w}),alert(" "),r.value="",a.value="",u.value="",d.value=""},b=async w=>{await BN(Ks(e,"users",g.value,"records",w)),f.value=f.value.filter(C=>C.id!==w)};return(w,C)=>(ve(),Ie("div",GV,[H("div",KV,[H("div",QV,[C[15]||(C[15]=H("h2",null,"",-1)),H("div",YV,""+Xe(S.value)+" ",1),H("form",{onSubmit:UD(T,["prevent"]),class:"form"},[H("div",XV,[H("label",null,[C[6]||(C[6]=Pn(" ")),Sn(H("input",{type:"number","onUpdate:modelValue":C[0]||(C[0]=x=>r.value=x),required:"",class:"input-field"},null,512),[[Ys,r.value]])])]),H("div",JV,[H("label",null,[C[8]||(C[8]=Pn(" ")),Sn(H("select",{"onUpdate:modelValue":C[1]||(C[1]=x=>o.value=x),class:"input-field",onChange:I},C[7]||(C[7]=[H("option",{value:"income"},"",-1),H("option",{value:"expense"},"",-1)]),544),[[Ka,o.value]])])]),H("div",ZV,[H("label",null,[C[10]||(C[10]=Pn(" ")),Sn(H("select",{"onUpdate:modelValue":C[2]||(C[2]=x=>a.value=x),class:"input-field",onChange:D},[(ve(!0),Ie(Mt,null,lr(y.value,x=>(ve(),Ie("option",{key:x,value:x},Xe(x),9,eF))),128)),C[9]||(C[9]=H("option",{value:"new"},"+ ",-1))],544),[[Ka,a.value]])])]),c.value?(ve(),Ie("div",tF,[H("label",null,[C[11]||(C[11]=Pn(" ")),Sn(H("input",{type:"text","onUpdate:modelValue":C[3]||(C[3]=x=>l.value=x),class:"input-field",placeholder:"..."},null,512),[[Ys,l.value]]),H("button",{type:"button",class:"add-category-btn",onClick:N},"")])])):yt("",!0),H("div",nF,[H("label",null,[C[12]||(C[12]=Pn(" ")),Sn(H("input",{type:"date","onUpdate:modelValue":C[4]||(C[4]=x=>u.value=x),required:"",class:"input-field"},null,512),[[Ys,u.value]])])]),H("div",iF,[H("label",null,[C[13]||(C[13]=Pn(" ")),Sn(H("input",{type:"text","onUpdate:modelValue":C[5]||(C[5]=x=>d.value=x),placeholder:"()",class:"input-field"},null,512),[[Ys,d.value]])])]),C[14]||(C[14]=H("button",{type:"submit",class:"submit-btn"},"",-1))],32)]),H("div",sF,[C[16]||(C[16]=H("h3",null,"",-1)),H("ul",rF,[(ve(!0),Ie(Mt,null,lr(f.value,x=>(ve(),Ie("li",{key:x.id,class:"record-item"},[H("div",null,Xe(x.date)+" - "+Xe(x.subCategory)+": "+Xe(x.amount)+" ",1),H("div",null,Xe(x.note),1),H("button",{class:"delete-btn",onClick:O=>b(x.id)},"",8,oF)]))),128))])])])]))}},hS=Oo(aF,[["__scopeId","data-v-555e3ea3"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function kl(n){return n+.5|0}const Ji=(n,e,t)=>Math.max(Math.min(n,t),e);function ua(n){return Ji(kl(n*2.55),0,255)}function ds(n){return Ji(kl(n*255),0,255)}function _i(n){return Ji(kl(n/2.55)/100,0,1)}function Jy(n){return Ji(kl(n*100),0,100)}const Tn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},og=[..."0123456789ABCDEF"],lF=n=>og[n&15],cF=n=>og[(n&240)>>4]+og[n&15],cc=n=>(n&240)>>4===(n&15),uF=n=>cc(n.r)&&cc(n.g)&&cc(n.b)&&cc(n.a);function hF(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Tn[n[1]]*17,g:255&Tn[n[2]]*17,b:255&Tn[n[3]]*17,a:e===5?Tn[n[4]]*17:255}:(e===7||e===9)&&(t={r:Tn[n[1]]<<4|Tn[n[2]],g:Tn[n[3]]<<4|Tn[n[4]],b:Tn[n[5]]<<4|Tn[n[6]],a:e===9?Tn[n[7]]<<4|Tn[n[8]]:255})),t}const dF=(n,e)=>n<255?e(n):"";function fF(n){var e=uF(n)?lF:cF;return n?"#"+e(n.r)+e(n.g)+e(n.b)+dF(n.a,e):void 0}const gF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function dS(n,e,t){const i=e*Math.min(t,1-t),s=(r,o=(r+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function pF(n,e,t){const i=(s,r=(s+n/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function mF(n,e,t){const i=dS(n,1,.5);let s;for(e+t>1&&(s=1/(e+t),e*=s,t*=s),s=0;s<3;s++)i[s]*=1-e-t,i[s]+=e;return i}function _F(n,e,t,i,s){return n===s?(e-t)/i+(e<t?6:0):e===s?(t-n)/i+2:(n-e)/i+4}function Yp(n){const t=n.r/255,i=n.g/255,s=n.b/255,r=Math.max(t,i,s),o=Math.min(t,i,s),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=_F(t,i,s,u,r),l=l*60+.5),[l|0,c||0,a]}function Xp(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(ds)}function Jp(n,e,t){return Xp(dS,n,e,t)}function vF(n,e,t){return Xp(mF,n,e,t)}function yF(n,e,t){return Xp(pF,n,e,t)}function fS(n){return(n%360+360)%360}function bF(n){const e=gF.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?ua(+e[5]):ds(+e[5]));const s=fS(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=vF(s,r,o):e[1]==="hsv"?i=yF(s,r,o):i=Jp(s,r,o),{r:i[0],g:i[1],b:i[2],a:t}}function EF(n,e){var t=Yp(n);t[0]=fS(t[0]+e),t=Jp(t),n.r=t[0],n.g=t[1],n.b=t[2]}function wF(n){if(!n)return;const e=Yp(n),t=e[0],i=Jy(e[1]),s=Jy(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${s}%, ${_i(n.a)})`:`hsl(${t}, ${i}%, ${s}%)`}const Zy={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},eb={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function AF(){const n={},e=Object.keys(eb),t=Object.keys(Zy);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<t.length;s++)r=t[s],a=a.replace(r,Zy[r]);r=parseInt(eb[o],16),n[a]=[r>>16&255,r>>8&255,r&255]}return n}let uc;function TF(n){uc||(uc=AF(),uc.transparent=[0,0,0,0]);const e=uc[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const SF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function IF(n){const e=SF.exec(n);let t=255,i,s,r;if(e){if(e[7]!==i){const o=+e[7];t=e[8]?ua(o):Ji(o*255,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?ua(i):Ji(i,0,255)),s=255&(e[4]?ua(s):Ji(s,0,255)),r=255&(e[6]?ua(r):Ji(r,0,255)),{r:i,g:s,b:r,a:t}}}function CF(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${_i(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Wd=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Nr=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function xF(n,e,t){const i=Nr(_i(n.r)),s=Nr(_i(n.g)),r=Nr(_i(n.b));return{r:ds(Wd(i+t*(Nr(_i(e.r))-i))),g:ds(Wd(s+t*(Nr(_i(e.g))-s))),b:ds(Wd(r+t*(Nr(_i(e.b))-r))),a:n.a+t*(e.a-n.a)}}function hc(n,e,t){if(n){let i=Yp(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=Jp(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function gS(n,e){return n&&Object.assign(e||{},n)}function tb(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=ds(n[3]))):(e=gS(n,{r:0,g:0,b:0,a:1}),e.a=ds(e.a)),e}function RF(n){return n.charAt(0)==="r"?IF(n):bF(n)}class ol{constructor(e){if(e instanceof ol)return e;const t=typeof e;let i;t==="object"?i=tb(e):t==="string"&&(i=hF(e)||TF(e)||RF(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=gS(this._rgb);return e&&(e.a=_i(e.a)),e}set rgb(e){this._rgb=tb(e)}rgbString(){return this._valid?CF(this._rgb):void 0}hexString(){return this._valid?fF(this._rgb):void 0}hslString(){return this._valid?wF(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,s=e.rgb;let r;const o=t===r?.5:t,a=2*o-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=xF(this._rgb,e._rgb,t)),this}clone(){return new ol(this.rgb)}alpha(e){return this._rgb.a=ds(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=kl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return hc(this._rgb,2,e),this}darken(e){return hc(this._rgb,2,-e),this}saturate(e){return hc(this._rgb,1,e),this}desaturate(e){return hc(this._rgb,1,-e),this}rotate(e){return EF(this._rgb,e),this}}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function fi(){}const DF=(()=>{let n=0;return()=>n++})();function Te(n){return n==null}function tt(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function xe(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function ft(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function mn(n,e){return ft(n)?n:e}function Ee(n,e){return typeof n>"u"?e:n}const kF=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,pS=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Ge(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function ze(n,e,t,i){let s,r,o;if(tt(n))for(r=n.length,s=0;s<r;s++)e.call(t,n[s],s);else if(xe(n))for(o=Object.keys(n),r=o.length,s=0;s<r;s++)e.call(t,n[o[s]],o[s])}function Hu(n,e){let t,i,s,r;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(s=n[t],r=e[t],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function ju(n){if(tt(n))return n.map(ju);if(xe(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let s=0;for(;s<i;++s)e[t[s]]=ju(n[t[s]]);return e}return n}function mS(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function PF(n,e,t,i){if(!mS(n))return;const s=e[n],r=t[n];xe(s)&&xe(r)?ai(s,r,i):e[n]=ju(r)}function ai(n,e,t){const i=tt(e)?e:[e],s=i.length;if(!xe(n))return n;t=t||{};const r=t.merger||PF;let o;for(let a=0;a<s;++a){if(o=i[a],!xe(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],n,o,t)}return n}function Ra(n,e){return ai(n,e,{merger:MF})}function MF(n,e,t){if(!mS(n))return;const i=e[n],s=t[n];xe(i)&&xe(s)?Ra(i,s):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=ju(s))}const nb={"":n=>n,x:n=>n.x,y:n=>n.y};function OF(n){const e=n.split("."),t=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function NF(n){const e=OF(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function ws(n,e){return(nb[e]||(nb[e]=NF(e)))(n)}function Zp(n){return n.charAt(0).toUpperCase()+n.slice(1)}const al=n=>typeof n<"u",As=n=>typeof n=="function",ib=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function LF(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const st=Math.PI,nt=2*st,VF=nt+st,zu=Number.POSITIVE_INFINITY,FF=st/180,mt=st/2,Vs=st/4,sb=st*2/3,Zi=Math.log10,ti=Math.sign;function Da(n,e,t){return Math.abs(n-e)<t}function rb(n){const e=Math.round(n);n=Da(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(Zi(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function BF(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((s,r)=>s-r).pop(),e}function UF(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function bo(n){return!UF(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function HF(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function _S(n,e,t){let i,s,r;for(i=0,s=n.length;i<s;i++)r=n[i][t],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function Nn(n){return n*(st/180)}function em(n){return n*(180/st)}function ob(n){if(!ft(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function vS(n,e){const t=e.x-n.x,i=e.y-n.y,s=Math.sqrt(t*t+i*i);let r=Math.atan2(i,t);return r<-.5*st&&(r+=nt),{angle:r,distance:s}}function ag(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function jF(n,e){return(n-e+VF)%nt-st}function vn(n){return(n%nt+nt)%nt}function ll(n,e,t,i){const s=vn(n),r=vn(e),o=vn(t),a=vn(r-s),l=vn(o-s),c=vn(s-r),u=vn(s-o);return s===r||s===o||i&&r===o||a>l&&c<u}function Ct(n,e,t){return Math.max(e,Math.min(t,n))}function zF(n){return Ct(n,-32768,32767)}function Ti(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function tm(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,t(r)?s=r:i=r;return{lo:s,hi:i}}const Si=(n,e,t,i)=>tm(n,t,i?s=>{const r=n[s][e];return r<t||r===t&&n[s+1][e]===t}:s=>n[s][e]<t),WF=(n,e,t)=>tm(n,t,i=>n[i][e]>=t);function $F(n,e,t){let i=0,s=n.length;for(;i<s&&n[i]<e;)i++;for(;s>i&&n[s-1]>t;)s--;return i>0||s<n.length?n.slice(i,s):n}const yS=["push","pop","shift","splice","unshift"];function qF(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),yS.forEach(t=>{const i="_onData"+Zp(t),s=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function ab(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(yS.forEach(r=>{delete n[r]}),delete n._chartjs)}function bS(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const ES=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function wS(n,e){let t=[],i=!1;return function(...s){t=s,i||(i=!0,ES.call(window,()=>{i=!1,n.apply(e,t)}))}}function GF(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const nm=n=>n==="start"?"left":n==="end"?"right":"center",Wt=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,KF=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function AS(n,e,t){const i=e.length;let s=0,r=i;if(n._sorted){const{iScale:o,vScale:a,_parsed:l}=n,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=o.axis,{min:d,max:f,minDefined:g,maxDefined:m}=o.getUserBounds();if(g){if(s=Math.min(Si(l,u,d).lo,t?i:Si(e,u,o.getPixelForValue(d)).lo),c){const _=l.slice(0,s+1).reverse().findIndex(y=>!Te(y[a.axis]));s-=Math.max(0,_)}s=Ct(s,0,i-1)}if(m){let _=Math.max(Si(l,o.axis,f,!0).hi+1,t?0:Si(e,u,o.getPixelForValue(f),!0).hi+1);if(c){const y=l.slice(_-1).findIndex(E=>!Te(E[a.axis]));_+=Math.max(0,y)}r=Ct(_,s,i)-s}else r=i-s}return{start:s,count:r}}function TS(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,s={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,s),r}const dc=n=>n===0||n===1,lb=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*nt/t)),cb=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*nt/t)+1,ka={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*mt)+1,easeOutSine:n=>Math.sin(n*mt),easeInOutSine:n=>-.5*(Math.cos(st*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>dc(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>dc(n)?n:lb(n,.075,.3),easeOutElastic:n=>dc(n)?n:cb(n,.075,.3),easeInOutElastic(n){return dc(n)?n:n<.5?.5*lb(n*2,.1125,.45):.5+.5*cb(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-ka.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?ka.easeInBounce(n*2)*.5:ka.easeOutBounce(n*2-1)*.5+.5};function im(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function ub(n){return im(n)?n:new ol(n)}function $d(n){return im(n)?n:new ol(n).saturate(.5).darken(.1).hexString()}const QF=["x","y","borderWidth","radius","tension"],YF=["color","borderColor","backgroundColor"];function XF(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:YF},numbers:{type:"number",properties:QF}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function JF(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const hb=new Map;function ZF(n,e){e=e||{};const t=n+JSON.stringify(e);let i=hb.get(t);return i||(i=new Intl.NumberFormat(n,e),hb.set(t,i)),i}function Pl(n,e,t){return ZF(e,t).format(n)}const SS={values(n){return tt(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let s,r=n;if(t.length>1){const c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=e2(n,t)}const o=Zi(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Pl(n,i,l)},logarithmic(n,e,t){if(n===0)return"0";const i=t[e].significand||n/Math.pow(10,Math.floor(Zi(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?SS.numeric.call(this,n,e,t):""}};function e2(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var $h={formatters:SS};function t2(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:$h.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const pr=Object.create(null),lg=Object.create(null);function Pa(n,e){if(!e)return n;const t=e.split(".");for(let i=0,s=t.length;i<s;++i){const r=t[i];n=n[r]||(n[r]=Object.create(null))}return n}function qd(n,e,t){return typeof e=="string"?ai(Pa(n,e),t):ai(Pa(n,""),e)}class n2{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>$d(s.backgroundColor),this.hoverBorderColor=(i,s)=>$d(s.borderColor),this.hoverColor=(i,s)=>$d(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return qd(this,e,t)}get(e){return Pa(this,e)}describe(e,t){return qd(lg,e,t)}override(e,t){return qd(pr,e,t)}route(e,t,i,s){const r=Pa(this,e),o=Pa(this,i),a="_"+t;Object.defineProperties(r,{[a]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],c=o[s];return xe(l)?Object.assign({},c,l):Ee(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var it=new n2({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[XF,JF,t2]);function i2(n){return!n||Te(n.size)||Te(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Wu(n,e,t,i,s){let r=e[s];return r||(r=e[s]=n.measureText(s).width,t.push(s)),r>i&&(i=r),i}function s2(n,e,t,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let o=0;const a=t.length;let l,c,u,d,f;for(l=0;l<a;l++)if(d=t[l],d!=null&&!tt(d))o=Wu(n,s,r,o,d);else if(tt(d))for(c=0,u=d.length;c<u;c++)f=d[c],f!=null&&!tt(f)&&(o=Wu(n,s,r,o,f));n.restore();const g=r.length/2;if(g>t.length){for(l=0;l<g;l++)delete s[r[l]];r.splice(0,g)}return o}function Fs(n,e,t){const i=n.currentDevicePixelRatio,s=t!==0?Math.max(t/2,.5):0;return Math.round((e-s)*i)/i+s}function db(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function cg(n,e,t,i){IS(n,e,t,i,null)}function IS(n,e,t,i,s){let r,o,a,l,c,u,d,f;const g=e.pointStyle,m=e.rotation,_=e.radius;let y=(m||0)*FF;if(g&&typeof g=="object"&&(r=g.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(y),n.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),n.restore();return}if(!(isNaN(_)||_<=0)){switch(n.beginPath(),g){default:s?n.ellipse(t,i,s/2,_,0,0,nt):n.arc(t,i,_,0,nt),n.closePath();break;case"triangle":u=s?s/2:_,n.moveTo(t+Math.sin(y)*u,i-Math.cos(y)*_),y+=sb,n.lineTo(t+Math.sin(y)*u,i-Math.cos(y)*_),y+=sb,n.lineTo(t+Math.sin(y)*u,i-Math.cos(y)*_),n.closePath();break;case"rectRounded":c=_*.516,l=_-c,o=Math.cos(y+Vs)*l,d=Math.cos(y+Vs)*(s?s/2-c:l),a=Math.sin(y+Vs)*l,f=Math.sin(y+Vs)*(s?s/2-c:l),n.arc(t-d,i-a,c,y-st,y-mt),n.arc(t+f,i-o,c,y-mt,y),n.arc(t+d,i+a,c,y,y+mt),n.arc(t-f,i+o,c,y+mt,y+st),n.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*_,u=s?s/2:l,n.rect(t-u,i-l,2*u,2*l);break}y+=Vs;case"rectRot":d=Math.cos(y)*(s?s/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,f=Math.sin(y)*(s?s/2:_),n.moveTo(t-d,i-a),n.lineTo(t+f,i-o),n.lineTo(t+d,i+a),n.lineTo(t-f,i+o),n.closePath();break;case"crossRot":y+=Vs;case"cross":d=Math.cos(y)*(s?s/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,f=Math.sin(y)*(s?s/2:_),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+f,i-o),n.lineTo(t-f,i+o);break;case"star":d=Math.cos(y)*(s?s/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,f=Math.sin(y)*(s?s/2:_),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+f,i-o),n.lineTo(t-f,i+o),y+=Vs,d=Math.cos(y)*(s?s/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,f=Math.sin(y)*(s?s/2:_),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+f,i-o),n.lineTo(t-f,i+o);break;case"line":o=s?s/2:Math.cos(y)*_,a=Math.sin(y)*_,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(y)*(s?s/2:_),i+Math.sin(y)*_);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Ii(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function qh(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Gh(n){n.restore()}function r2(n,e,t,i,s){if(!e)return n.lineTo(t.x,t.y);if(s==="middle"){const r=(e.x+t.x)/2;n.lineTo(r,e.y),n.lineTo(r,t.y)}else s==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function o2(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function a2(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Te(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function l2(n,e,t,i,s){if(s.strikethrough||s.underline){const r=n.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=t-r.actualBoundingBoxAscent,c=t+r.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function c2(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function mr(n,e,t,i,s,r={}){const o=tt(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(n.save(),n.font=s.string,a2(n,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&c2(n,r.backdrop),a&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),Te(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(c,t,i,r.maxWidth)),n.fillText(c,t,i,r.maxWidth),l2(n,t,i,c,r),i+=Number(s.lineHeight);n.restore()}function cl(n,e){const{x:t,y:i,w:s,h:r,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*st,st,!0),n.lineTo(t,i+r-o.bottomLeft),n.arc(t+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,st,mt,!0),n.lineTo(t+s-o.bottomRight,i+r),n.arc(t+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,mt,0,!0),n.lineTo(t+s,i+o.topRight),n.arc(t+s-o.topRight,i+o.topRight,o.topRight,0,-mt,!0),n.lineTo(t+o.topLeft,i)}const u2=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,h2=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function d2(n,e){const t=(""+n).match(u2);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const f2=n=>+n||0;function sm(n,e){const t={},i=xe(e),s=i?Object.keys(e):e,r=xe(n)?i?o=>Ee(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of s)t[o]=f2(r(o));return t}function CS(n){return sm(n,{top:"y",right:"x",bottom:"y",left:"x"})}function sr(n){return sm(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Lt(n){const e=CS(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function bt(n,e){n=n||{},e=e||it.font;let t=Ee(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=Ee(n.style,e.style);i&&!(""+i).match(h2)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Ee(n.family,e.family),lineHeight:d2(Ee(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:Ee(n.weight,e.weight),string:""};return s.string=i2(s),s}function et(n,e,t,i){let s,r,o;for(s=0,r=n.length;s<r;++s)if(o=n[s],o!==void 0&&(e!==void 0&&typeof o=="function"&&(o=o(e)),t!==void 0&&tt(o)&&(o=o[t%o.length]),o!==void 0))return o}function g2(n,e,t){const{min:i,max:s}=n,r=pS(e,(s-i)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function xs(n,e){return Object.assign(Object.create(n),e)}function rm(n,e=[""],t,i,s=()=>n[0]){const r=t||n;typeof i>"u"&&(i=kS("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>rm([a,...n],e,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return RS(a,l,()=>w2(l,e,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return gb(a).includes(l)},ownKeys(a){return gb(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function Eo(n,e,t,i){const s={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:xS(n,i),setContext:r=>Eo(n,r,t,i),override:r=>Eo(n.override(r),e,t,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,a){return RS(r,o,()=>m2(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,a){return n[o]=a,delete r[o],!0}})}function xS(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=n;return{allKeys:s,scriptable:t,indexable:i,isScriptable:As(t)?t:()=>t,isIndexable:As(i)?i:()=>i}}const p2=(n,e)=>n?n+Zp(e):e,om=(n,e)=>xe(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function RS(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function m2(n,e,t){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=n;let a=i[e];return As(a)&&o.isScriptable(e)&&(a=_2(e,a,n,t)),tt(a)&&a.length&&(a=v2(e,a,n,o.isIndexable)),om(e,a)&&(a=Eo(a,s,r&&r[e],o)),a}function _2(n,e,t,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=e(r,o||i);return a.delete(n),om(n,l)&&(l=am(s._scopes,s,n,l)),l}function v2(n,e,t,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=t;if(typeof r.index<"u"&&i(n))return e[r.index%e.length];if(xe(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=am(c,s,n,u);e.push(Eo(d,r,o&&o[n],a))}}return e}function DS(n,e,t){return As(n)?n(e,t):n}const y2=(n,e)=>n===!0?e:typeof n=="string"?ws(e,n):void 0;function b2(n,e,t,i,s){for(const r of e){const o=y2(t,r);if(o){n.add(o);const a=DS(o._fallback,t,s);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function am(n,e,t,i){const s=e._rootScopes,r=DS(e._fallback,t,i),o=[...n,...s],a=new Set;a.add(i);let l=fb(a,o,t,r||t,i);return l===null||typeof r<"u"&&r!==t&&(l=fb(a,o,r,l,i),l===null)?!1:rm(Array.from(a),[""],s,r,()=>E2(e,t,i))}function fb(n,e,t,i,s){for(;t;)t=b2(n,e,t,i,s);return t}function E2(n,e,t){const i=n._getTarget();e in i||(i[e]={});const s=i[e];return tt(s)&&xe(t)?t:s||{}}function w2(n,e,t,i){let s;for(const r of e)if(s=kS(p2(r,n),t),typeof s<"u")return om(n,s)?am(t,i,n,s):s}function kS(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function gb(n){let e=n._keys;return e||(e=n._keys=A2(n._scopes)),e}function A2(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}function PS(n,e,t,i){const{iScale:s}=n,{key:r="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+t,u=e[c],o[a]={r:s.parse(ws(u,r),c)};return o}const T2=Number.EPSILON||1e-14,wo=(n,e)=>e<n.length&&!n[e].skip&&n[e],MS=n=>n==="x"?"y":"x";function S2(n,e,t,i){const s=n.skip?e:n,r=e,o=t.skip?e:t,a=ag(r,s),l=ag(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=i*c,f=i*u;return{previous:{x:r.x-d*(o.x-s.x),y:r.y-d*(o.y-s.y)},next:{x:r.x+f*(o.x-s.x),y:r.y+f*(o.y-s.y)}}}function I2(n,e,t){const i=n.length;let s,r,o,a,l,c=wo(n,0);for(let u=0;u<i-1;++u)if(l=c,c=wo(n,u+1),!(!l||!c)){if(Da(e[u],0,T2)){t[u]=t[u+1]=0;continue}s=t[u]/e[u],r=t[u+1]/e[u],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=s*o*e[u],t[u+1]=r*o*e[u])}}function C2(n,e,t="x"){const i=MS(t),s=n.length;let r,o,a,l=wo(n,0);for(let c=0;c<s;++c){if(o=a,a=l,l=wo(n,c+1),!a)continue;const u=a[t],d=a[i];o&&(r=(u-o[t])/3,a[`cp1${t}`]=u-r,a[`cp1${i}`]=d-r*e[c]),l&&(r=(l[t]-u)/3,a[`cp2${t}`]=u+r,a[`cp2${i}`]=d+r*e[c])}}function x2(n,e="x"){const t=MS(e),i=n.length,s=Array(i).fill(0),r=Array(i);let o,a,l,c=wo(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=wo(n,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[t]-l[t])/u:0}r[o]=a?c?ti(s[o-1])!==ti(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}I2(n,s,r),C2(n,r,e)}function fc(n,e,t){return Math.max(Math.min(n,t),e)}function R2(n,e){let t,i,s,r,o,a=Ii(n[0],e);for(t=0,i=n.length;t<i;++t)o=r,r=a,a=t<i-1&&Ii(n[t+1],e),r&&(s=n[t],o&&(s.cp1x=fc(s.cp1x,e.left,e.right),s.cp1y=fc(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=fc(s.cp2x,e.left,e.right),s.cp2y=fc(s.cp2y,e.top,e.bottom)))}function D2(n,e,t,i,s){let r,o,a,l;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")x2(n,s);else{let c=i?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)a=n[r],l=S2(c,a,n[Math.min(r+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&R2(n,t)}function lm(){return typeof window<"u"&&typeof document<"u"}function cm(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function $u(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const Kh=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function k2(n,e){return Kh(n).getPropertyValue(e)}const P2=["top","right","bottom","left"];function rr(n,e,t){const i={};t=t?"-"+t:"";for(let s=0;s<4;s++){const r=P2[s];i[r]=parseFloat(n[e+"-"+r+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const M2=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function O2(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(M2(s,r,n.target))a=s,l=r;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function zs(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,s=Kh(t),r=s.boxSizing==="border-box",o=rr(s,"padding"),a=rr(s,"border","width"),{x:l,y:c,box:u}=O2(n,t),d=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:g,height:m}=e;return r&&(g-=o.width+a.width,m-=o.height+a.height),{x:Math.round((l-d)/g*t.width/i),y:Math.round((c-f)/m*t.height/i)}}function N2(n,e,t){let i,s;if(e===void 0||t===void 0){const r=n&&cm(n);if(!r)e=n.clientWidth,t=n.clientHeight;else{const o=r.getBoundingClientRect(),a=Kh(r),l=rr(a,"border","width"),c=rr(a,"padding");e=o.width-c.width-l.width,t=o.height-c.height-l.height,i=$u(a.maxWidth,r,"clientWidth"),s=$u(a.maxHeight,r,"clientHeight")}}return{width:e,height:t,maxWidth:i||zu,maxHeight:s||zu}}const gc=n=>Math.round(n*10)/10;function L2(n,e,t,i){const s=Kh(n),r=rr(s,"margin"),o=$u(s.maxWidth,n,"clientWidth")||zu,a=$u(s.maxHeight,n,"clientHeight")||zu,l=N2(n,e,t);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const f=rr(s,"border","width"),g=rr(s,"padding");c-=g.width+f.width,u-=g.height+f.height}return c=Math.max(0,c-r.width),u=Math.max(0,i?c/i:u-r.height),c=gc(Math.min(c,o,l.maxWidth)),u=gc(Math.min(u,a,l.maxHeight)),c&&!u&&(u=gc(c/2)),(e!==void 0||t!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=gc(Math.floor(u*i))),{width:c,height:u}}function pb(n,e,t){const i=e||1,s=Math.floor(n.height*i),r=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(n.currentDevicePixelRatio=i,o.height=s,o.width=r,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const V2=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};lm()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function mb(n,e){const t=k2(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Ws(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function F2(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function B2(n,e,t,i){const s={x:n.cp2x,y:n.cp2y},r={x:e.cp1x,y:e.cp1y},o=Ws(n,s,t),a=Ws(s,r,t),l=Ws(r,e,t),c=Ws(o,a,t),u=Ws(a,l,t);return Ws(c,u,t)}const U2=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},H2=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function io(n,e,t){return n?U2(e,t):H2()}function OS(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function NS(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function LS(n){return n==="angle"?{between:ll,compare:jF,normalize:vn}:{between:Ti,compare:(e,t)=>e-t,normalize:e=>e}}function _b({start:n,end:e,count:t,loop:i,style:s}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:s}}function j2(n,e,t){const{property:i,start:s,end:r}=t,{between:o,normalize:a}=LS(i),l=e.length;let{start:c,end:u,loop:d}=n,f,g;if(d){for(c+=l,u+=l,f=0,g=l;f<g&&o(a(e[c%l][i]),s,r);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:n.style}}function VS(n,e,t){if(!t)return[n];const{property:i,start:s,end:r}=t,o=e.length,{compare:a,between:l,normalize:c}=LS(i),{start:u,end:d,loop:f,style:g}=j2(n,e,t),m=[];let _=!1,y=null,E,I,R;const S=()=>l(s,R,E)&&a(s,R)!==0,D=()=>a(r,E)===0||l(r,R,E),N=()=>_||S(),T=()=>!_||D();for(let b=u,w=u;b<=d;++b)I=e[b%o],!I.skip&&(E=c(I[i]),E!==R&&(_=l(E,s,r),y===null&&N()&&(y=a(E,s)===0?b:w),y!==null&&T()&&(m.push(_b({start:y,end:b,loop:f,count:o,style:g})),y=null),w=b,R=E));return y!==null&&m.push(_b({start:y,end:d,loop:f,count:o,style:g})),m}function FS(n,e){const t=[],i=n.segments;for(let s=0;s<i.length;s++){const r=VS(i[s],n.points,e);r.length&&t.push(...r)}return t}function z2(n,e,t,i){let s=0,r=e-1;if(t&&!i)for(;s<e&&!n[s].skip;)s++;for(;s<e&&n[s].skip;)s++;for(s%=e,t&&(r+=s);r>s&&n[r%e].skip;)r--;return r%=e,{start:s,end:r}}function W2(n,e,t,i){const s=n.length,r=[];let o=e,a=n[e],l;for(l=e+1;l<=t;++l){const c=n[l%s];c.skip||c.stop?a.skip||(i=!1,r.push({start:e%s,end:(l-1)%s,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&r.push({start:e%s,end:o%s,loop:i}),r}function $2(n,e){const t=n.points,i=n.options.spanGaps,s=t.length;if(!s)return[];const r=!!n._loop,{start:o,end:a}=z2(t,s,r,i);if(i===!0)return vb(n,[{start:o,end:a,loop:r}],t,e);const l=a<o?a+s:a,c=!!n._fullLoop&&o===0&&a===s-1;return vb(n,W2(t,o,l,c),t,e)}function vb(n,e,t,i){return!i||!i.setContext||!t?e:q2(n,e,t,i)}function q2(n,e,t,i){const s=n._chart.getContext(),r=yb(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=t.length,c=[];let u=r,d=e[0].start,f=d;function g(m,_,y,E){const I=a?-1:1;if(m!==_){for(m+=l;t[m%l].skip;)m-=I;for(;t[_%l].skip;)_+=I;m%l!==_%l&&(c.push({start:m%l,end:_%l,loop:y,style:E}),u=E,d=_%l)}}for(const m of e){d=a?d:m.start;let _=t[d%l],y;for(f=d+1;f<=m.end;f++){const E=t[f%l];y=yb(i.setContext(xs(s,{type:"segment",p0:_,p1:E,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),G2(y,u)&&g(d,f-1,m.loop,u),_=E,u=y}d<f-1&&g(d,f-1,m.loop,u)}return c}function yb(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function G2(n,e){if(!e)return!1;const t=[],i=function(s,r){return im(r)?(t.includes(r)||t.push(r),t.indexOf(r)):r};return JSON.stringify(n,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class K2{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,s){const r=t.listeners[s],o=t.duration;r.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ES.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),t+=r.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var gi=new K2;const bb="transparent",Q2={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=ub(n||bb),s=i.valid&&ub(e||bb);return s&&s.valid?s.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class Y2{constructor(e,t,i,s){const r=t[i];s=et([e.to,s,r,e.from]);const o=et([e.from,r,s]);this._active=!0,this._fn=e.fn||Q2[e.type||typeof o],this._easing=ka[e.easing]||ka.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=et([e.to,t,s,e.from]),this._from=et([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||t<i),!this._active){this._target[s]=a,this._notify(!0);return}if(t<0){this._target[s]=r;return}l=t/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][t]()}}class BS{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!xe(e))return;const t=Object.keys(it.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!xe(r))return;const o={};for(const a of t)o[a]=r[a];(tt(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,t){const i=t.options,s=J2(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&X2(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,t){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,t));continue}const u=t[c];let d=r[c];const f=i.get(c);if(d)if(f&&d.active()){d.update(f,u,a);continue}else d.cancel();if(!f||!f.duration){e[c]=u;continue}r[c]=d=new Y2(f,e,c,u),s.push(d)}return s}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return gi.add(this._chart,i),!0}}function X2(n,e){const t=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=n[i[s]];r&&r.active()&&t.push(r.wait())}return Promise.all(t)}function J2(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function Eb(n,e){const t=n&&n.options||{},i=t.reverse,s=t.min===void 0?e:0,r=t.max===void 0?e:0;return{start:i?r:s,end:i?s:r}}function Z2(n,e,t){if(t===!1)return!1;const i=Eb(n,t),s=Eb(e,t);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function eB(n){let e,t,i,s;return xe(n)?(e=n.top,t=n.right,i=n.bottom,s=n.left):e=t=i=s=n,{top:e,right:t,bottom:i,left:s,disabled:n===!1}}function US(n,e){const t=[],i=n._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)t.push(i[s].index);return t}function wb(n,e,t,i={}){const s=n.keys,r=i.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===t){if(u=!0,i.all)continue;break}c=n.values[l],ft(c)&&(r||e===0||ti(e)===ti(c))&&(e+=c)}return!u&&!i.all?0:e}function tB(n,e){const{iScale:t,vScale:i}=e,s=t.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[r]:n[u]};return a}function Gd(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function nB(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function iB(n){const{min:e,max:t,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?t:Number.POSITIVE_INFINITY}}function sB(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function Ab(n,e,t,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=n[s.index];if(t&&r>0||!t&&r<0)return s.index}return null}function Tb(n,e){const{chart:t,_cachedMeta:i}=n,s=t._stacks||(t._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,u=nB(r,o,i),d=e.length;let f;for(let g=0;g<d;++g){const m=e[g],{[l]:_,[c]:y}=m,E=m._stacks||(m._stacks={});f=E[c]=sB(s,u,_),f[a]=y,f._top=Ab(f,o,!0,i.type),f._bottom=Ab(f,o,!1,i.type);const I=f._visualValues||(f._visualValues={});I[a]=y}}function Kd(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function rB(n,e){return xs(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function oB(n,e,t){return xs(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Zo(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const s of e){const r=s._stacks;if(!r||r[i]===void 0||r[i][t]===void 0)return;delete r[i][t],r[i]._visualValues!==void 0&&r[i]._visualValues[t]!==void 0&&delete r[i]._visualValues[t]}}}const Qd=n=>n==="reset"||n==="none",Sb=(n,e)=>e?n:Object.assign({},n),aB=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:US(t,!0),values:null};class Bn{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Gd(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Zo(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),s=(d,f,g,m)=>d==="x"?f:d==="r"?m:g,r=t.xAxisID=Ee(i.xAxisID,Kd(e,"x")),o=t.yAxisID=Ee(i.yAxisID,Kd(e,"y")),a=t.rAxisID=Ee(i.rAxisID,Kd(e,"r")),l=t.indexAxis,c=t.iAxisID=s(l,r,o,a),u=t.vAxisID=s(l,o,r,a);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&ab(this._data,this),e._stacked&&Zo(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(xe(t)){const s=this._cachedMeta;this._data=tB(t,s)}else if(i!==t){if(i){ab(i,this);const s=this._cachedMeta;Zo(s),s._parsed=[]}t&&Object.isExtensible(t)&&qF(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=t._stacked;t._stacked=Gd(t.vScale,t),t.stack!==i.stack&&(s=!0,Zo(t),t.stack=i.stack),this._resyncElements(e),(s||r!==t._stacked)&&(Tb(this,t._parsed),t._stacked=Gd(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=e===0&&t===s.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,d,f;if(this._parsing===!1)i._parsed=s,i._sorted=!0,f=s;else{tt(s[e])?f=this.parseArrayData(i,s,e,t):xe(s[e])?f=this.parseObjectData(i,s,e,t):f=this.parsePrimitiveData(i,s,e,t);const g=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<t;++u)i._parsed[u+e]=d=f[u],l&&(g()&&(l=!1),c=d);i._sorted=l}o&&Tb(this,f)}parsePrimitiveData(e,t,i,s){const{iScale:r,vScale:o}=e,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,d=new Array(s);let f,g,m;for(f=0,g=s;f<g;++f)m=f+i,d[f]={[a]:u||r.parse(c[m],m),[l]:o.parse(t[m],m)};return d}parseArrayData(e,t,i,s){const{xScale:r,yScale:o}=e,a=new Array(s);let l,c,u,d;for(l=0,c=s;l<c;++l)u=l+i,d=t[u],a[l]={x:r.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,t,i,s){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,d,f,g;for(u=0,d=s;u<d;++u)f=u+i,g=t[f],c[u]={x:r.parse(ws(g,a),f),y:o.parse(ws(g,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const s=this.chart,r=this._cachedMeta,o=t[e.axis],a={keys:US(s,!0),values:t._stacks[e.axis]._visualValues};return wb(a,o,r.index,{mode:i})}updateRangeFromParsed(e,t,i,s){const r=i[t.axis];let o=r===null?NaN:r;const a=s&&i._stacks[t.axis];s&&a&&(s.values=a,o=wb(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&e===i.iScale,o=s.length,a=this._getOtherScale(e),l=aB(t,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=iB(a);let f,g;function m(){g=s[f];const _=g[a.axis];return!ft(g[e.axis])||u>_||d<_}for(f=0;f<o&&!(!m()&&(this.updateRangeFromParsed(c,e,g,l),r));++f);if(r){for(f=o-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(c,e,g,l);break}}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=t.length;s<r;++s)o=t[s][e.axis],ft(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,s=t.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=eB(Ee(this.options.clip,Z2(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,s=i.data||[],r=t.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,r,a,l),u=a;u<a+l;++u){const d=s[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=oB(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=rB(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const s=t==="active",r=this._cachedDataOpts,o=e+"-"+t,a=r[o],l=this.enableOptionSharing&&al(i);if(a)return Sb(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=s?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),g=Object.keys(it.elements[e]),m=()=>this.getContext(i,s,t),_=c.resolveNamedOptions(f,g,m,d);return _.$shared&&(_.$shared=l,r[o]=Object.freeze(Sb(_,l))),_}_resolveAnimations(e,t,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${t}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,t),f=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(f,this.getContext(e,i,t))}const c=new BS(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Qd(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(t,r)||r!==s;return this.updateSharedOptions(r,t,i),{sharedOptions:r,includeOptions:o}}updateElement(e,t,i,s){Qd(s)?Object.assign(e,i):this._resolveAnimations(t,s).update(e,i)}updateSharedOptions(e,t,i){e&&!Qd(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,s){e.active=s;const r=this.getStyle(t,s);this._resolveAnimations(t,i,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,r=t.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,t,i=!0){const s=this._cachedMeta,r=s.data,o=e+t;let a;const l=c=>{for(c.length+=t,a=c.length-1;a>=o;a--)c[a]=c[a-t]};for(l(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,t),i&&this.updateElements(r,e,t,"reset")}updateElements(e,t,i,s){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,t);i._stacked&&Zo(i,s)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,s]=e;this[t](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}J(Bn,"defaults",{}),J(Bn,"datasetElementType",null),J(Bn,"dataElementType",null);function lB(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let s=0,r=t.length;s<r;s++)i=i.concat(t[s].controller.getAllParsedValues(n));n._cache.$bar=bS(i.sort((s,r)=>s-r))}return n._cache.$bar}function cB(n){const e=n.iScale,t=lB(e,n.type);let i=e._length,s,r,o,a;const l=()=>{o===32767||o===-32768||(al(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=t.length;s<r;++s)o=e.getPixelForValue(t[s]),l();for(a=void 0,s=0,r=e.ticks.length;s<r;++s)o=e.getPixelForTick(s),l();return i}function uB(n,e,t,i){const s=t.barThickness;let r,o;return Te(s)?(r=e.min*t.categoryPercentage,o=t.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:e.pixels[n]-r/2}}function hB(n,e,t,i){const s=e.pixels,r=s[n];let o=n>0?s[n-1]:null,a=n<s.length-1?s[n+1]:null;const l=t.categoryPercentage;o===null&&(o=r-(a===null?e.end-e.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:t.barPercentage,start:c}}function dB(n,e,t,i){const s=t.parse(n[0],i),r=t.parse(n[1],i),o=Math.min(s,r),a=Math.max(s,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[t.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}function HS(n,e,t,i){return tt(n)?dB(n,e,t,i):e[t.axis]=t.parse(n,i),e}function Ib(n,e,t,i){const s=n.iScale,r=n.vScale,o=s.getLabels(),a=s===r,l=[];let c,u,d,f;for(c=t,u=t+i;c<u;++c)f=e[c],d={},d[s.axis]=a||s.parse(o[c],c),l.push(HS(f,d,r,c));return l}function Yd(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function fB(n,e,t){return n!==0?ti(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function gB(n){let e,t,i,s,r;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(s="end",r="start"):(s="start",r="end"),{start:t,end:i,reverse:e,top:s,bottom:r}}function pB(n,e,t,i){let s=e.borderSkipped;const r={};if(!s){n.borderSkipped=r;return}if(s===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=gB(n);s==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?s=c:(t._bottom||0)===i?s=u:(r[Cb(u,o,a,l)]=!0,s=c)),r[Cb(s,o,a,l)]=!0,n.borderSkipped=r}function Cb(n,e,t,i){return i?(n=mB(n,e,t),n=xb(n,t,e)):n=xb(n,e,t),n}function mB(n,e,t){return n===e?t:n===t?e:n}function xb(n,e,t){return n==="start"?e:n==="end"?t:n}function _B(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class eu extends Bn{parsePrimitiveData(e,t,i,s){return Ib(e,t,i,s)}parseArrayData(e,t,i,s){return Ib(e,t,i,s)}parseObjectData(e,t,i,s){const{iScale:r,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[];let f,g,m,_;for(f=i,g=i+s;f<g;++f)_=t[f],m={},m[r.axis]=r.parse(ws(_,c),f),d.push(HS(ws(_,u),m,o,f));return d}updateRangeFromParsed(e,t,i,s){super.updateRangeFromParsed(e,t,i,s);const r=i._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:s}=t,r=this.getParsed(e),o=r._custom,a=Yd(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(t,s);for(let g=t;g<t+i;g++){const m=this.getParsed(g),_=r||Te(m[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),y=this._calculateBarIndexPixels(g,u),E=(m._stacks||{})[a.axis],I={horizontal:c,base:_.base,enableBorderRadius:!E||Yd(m._custom)||o===E._top||o===E._bottom,x:c?_.head:y.center,y:c?y.center:_.head,height:c?y.size:Math.abs(_.size),width:c?Math.abs(_.size):y.size};f&&(I.options=d||this.resolveDataElementOptions(g,e[g].active?"active":s));const R=I.options||e[g].options;pB(I,R,E,o),_B(I,R,u.ratio),this.updateElement(e[g],g,I,s)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(t),l=a&&a[i.axis],c=u=>{const d=u._parsed.find(g=>g[i.axis]===l),f=d&&d[u.vScale.axis];if(Te(f)||isNaN(f))return!0};for(const u of s)if(!(t!==void 0&&c(u))&&((r===!1||o.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,i){const s=this._getStacks(e,i),r=t!==void 0?s.indexOf(t):-1;return r===-1?s.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,s=[];let r,o;for(r=0,o=t.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=e.barThickness;return{min:a||cB(t),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(e),c=l._custom,u=Yd(c);let d=l[t.axis],f=0,g=i?this.applyStack(t,l,i):d,m,_;g!==d&&(f=g-d,g=d),u&&(d=c.barStart,g=c.barEnd-c.barStart,d!==0&&ti(d)!==ti(c.barEnd)&&(f=0),f+=d);const y=!Te(r)&&!u?r:f;let E=t.getPixelForValue(y);if(this.chart.getDataVisibility(e)?m=t.getPixelForValue(f+g):m=E,_=m-E,Math.abs(_)<o){_=fB(_,t,a)*o,d===a&&(E-=_/2);const I=t.getPixelForDecimal(0),R=t.getPixelForDecimal(1),S=Math.min(I,R),D=Math.max(I,R);E=Math.max(Math.min(E,D),S),m=E+_,i&&!u&&(l._stacks[t.axis]._visualValues[s]=t.getValueForPixel(m)-t.getValueForPixel(E))}if(E===t.getPixelForValue(a)){const I=ti(_)*t.getLineWidthForValue(a)/2;E+=I,_-=I}return{size:_,base:E,head:m,center:m+_/2}}_calculateBarIndexPixels(e,t){const i=t.scale,s=this.options,r=s.skipNull,o=Ee(s.maxBarThickness,1/0);let a,l;if(t.grouped){const c=r?this._getStackCount(e):t.stackCount,u=s.barThickness==="flex"?hB(e,t,s,c):uB(e,t,s,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);a=u.start+u.chunk*d+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,t.min*t.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[t.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}J(eu,"id","bar"),J(eu,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),J(eu,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class tu extends Bn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,s){const r=super.parsePrimitiveData(e,t,i,s);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+i).radius;return r}parseArrayData(e,t,i,s){const r=super.parseArrayData(e,t,i,s);for(let o=0;o<r.length;o++){const a=t[i+o];r[o]._custom=Ee(a[2],this.resolveDataElementOptions(o+i).radius)}return r}parseObjectData(e,t,i,s){const r=super.parseObjectData(e,t,i,s);for(let o=0;o<r.length;o++){const a=t[i+o];r[o]._custom=Ee(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=t,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:i[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,s){const r=s==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(t,s),u=o.axis,d=a.axis;for(let f=t;f<t+i;f++){const g=e[f],m=!r&&this.getParsed(f),_={},y=_[u]=r?o.getPixelForDecimal(.5):o.getPixelForValue(m[u]),E=_[d]=r?a.getBasePixel():a.getPixelForValue(m[d]);_.skip=isNaN(y)||isNaN(E),c&&(_.options=l||this.resolveDataElementOptions(f,g.active?"active":s),r&&(_.options.radius=0)),this.updateElement(g,f,_,s)}}resolveDataElementOptions(e,t){const i=this.getParsed(e);let s=super.resolveDataElementOptions(e,t);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const r=s.radius;return t!=="active"&&(s.radius=0),s.radius+=Ee(i&&i._custom,r),s}}J(tu,"id","bubble"),J(tu,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),J(tu,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function vB(n,e,t){let i=1,s=1,r=0,o=0;if(e<nt){const a=n,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),f=Math.sin(l),g=(R,S,D)=>ll(R,a,l,!0)?1:Math.max(S,S*t,D,D*t),m=(R,S,D)=>ll(R,a,l,!0)?-1:Math.min(S,S*t,D,D*t),_=g(0,c,d),y=g(mt,u,f),E=m(st,c,d),I=m(st+mt,u,f);i=(_-E)/2,s=(y-I)/2,r=-(_+E)/2,o=-(y+I)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}class Zs extends Bn{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=l=>+i[l];if(xe(i[e])){const{key:l="value"}=this._parsing;r=c=>+ws(i[c],l)}let o,a;for(o=e,a=e+t;o<a;++o)s._parsed[o]=r(o)}}_getRotation(){return Nn(this.options.rotation-90)}_getCircumference(){return Nn(this.options.circumference)}_getRotationExtents(){let e=nt,t=-nt;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),o=s._getCircumference();e=Math.min(e,r),t=Math.max(t,r+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(kF(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:g,offsetX:m,offsetY:_}=vB(d,u,l),y=(i.width-o)/f,E=(i.height-o)/g,I=Math.max(Math.min(y,E)/2,0),R=pS(this.options.radius,I),S=Math.max(R*l,0),D=(R-S)/this._getVisibleDatasetWeightTotal();this.offsetX=m*R,this.offsetY=_*R,s.total=this.calculateTotal(),this.outerRadius=R-D*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-D*c,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*r/nt)}updateElements(e,t,i,s){const r=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=r&&c.animateScale,g=f?0:this.innerRadius,m=f?0:this.outerRadius,{sharedOptions:_,includeOptions:y}=this._getSharedOptions(t,s);let E=this._getRotation(),I;for(I=0;I<t;++I)E+=this._circumference(I,r);for(I=t;I<t+i;++I){const R=this._circumference(I,r),S=e[I],D={x:u+this.offsetX,y:d+this.offsetY,startAngle:E,endAngle:E+R,circumference:R,outerRadius:m,innerRadius:g};y&&(D.options=_||this.resolveDataElementOptions(I,S.active?"active":s)),E+=R,this.updateElement(S,I,D,s)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,s;for(s=0;s<t.length;s++){const r=e._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!t[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?nt*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Pl(t._parsed[e],i.options.locale);return{label:s[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const i=this.chart;let s,r,o,a,l;if(!e){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,r=e.length;s<r;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,s=e.length;i<s;++i){const r=this.resolveDataElementOptions(i);t=Math.max(t,r.offset||0,r.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(Ee(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}J(Zs,"id","doughnut"),J(Zs,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),J(Zs,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),J(Zs,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return t.labels.map((r,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}});class nu extends Bn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=t,o=this.chart._animationsDisabled;let{start:a,count:l}=AS(t,s,o);this._drawStart=a,this._drawCount=l,TS(t)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,t,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,s),f=o.axis,g=a.axis,{spanGaps:m,segment:_}=this.options,y=bo(m)?m:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||r||s==="none",I=t+i,R=e.length;let S=t>0&&this.getParsed(t-1);for(let D=0;D<R;++D){const N=e[D],T=E?N:{};if(D<t||D>=I){T.skip=!0;continue}const b=this.getParsed(D),w=Te(b[g]),C=T[f]=o.getPixelForValue(b[f],D),x=T[g]=r||w?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,b,l):b[g],D);T.skip=isNaN(C)||isNaN(x)||w,T.stop=D>0&&Math.abs(b[f]-S[f])>y,_&&(T.parsed=b,T.raw=c.data[D]),d&&(T.options=u||this.resolveDataElementOptions(D,N.active?"active":s)),E||this.updateElement(N,D,T,s),S=b}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}J(nu,"id","line"),J(nu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),J(nu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Ma extends Bn{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Pl(t._parsed[e].r,i.options.locale);return{label:s[e]||"",value:r}}parseObjectData(e,t,i,s){return PS.bind(this)(e,t,i,s)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,s)=>{const r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,i=e.options,s=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(s/2,0),o=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),a=(r-o)/e.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,i,s){const r=s==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,d=c.yCenter,f=c.getIndexAngle(0)-.5*st;let g=f,m;const _=360/this.countVisibleElements();for(m=0;m<t;++m)g+=this._computeAngle(m,s,_);for(m=t;m<t+i;m++){const y=e[m];let E=g,I=g+this._computeAngle(m,s,_),R=o.getDataVisibility(m)?c.getDistanceFromCenterForValue(this.getParsed(m).r):0;g=I,r&&(l.animateScale&&(R=0),l.animateRotate&&(E=I=f));const S={x:u,y:d,innerRadius:0,outerRadius:R,startAngle:E,endAngle:I,options:this.resolveDataElementOptions(m,y.active?"active":s)};this.updateElement(y,m,S,s)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&t++}),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?Nn(this.resolveDataElementOptions(e,t).angle||i):0}}J(Ma,"id","polarArea"),J(Ma,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),J(Ma,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return t.labels.map((r,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class ug extends Zs{}J(ug,"id","pie"),J(ug,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class iu extends Bn{getLabelAndValue(e){const t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,s){return PS.bind(this)(e,t,i,s)}update(e){const t=this._cachedMeta,i=t.dataset,s=t.data||[],r=t.iScale.getLabels();if(i.points=s,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===s.length,options:o};this.updateElement(i,void 0,a,e)}this.updateElements(s,0,s.length,e)}updateElements(e,t,i,s){const r=this._cachedMeta.rScale,o=s==="reset";for(let a=t;a<t+i;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":s),u=r.getPointPositionForValue(a,this.getParsed(a).r),d=o?r.xCenter:u.x,f=o?r.yCenter:u.y,g={x:d,y:f,angle:u.angle,skip:isNaN(d)||isNaN(f),options:c};this.updateElement(l,a,g,s)}}}J(iu,"id","radar"),J(iu,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),J(iu,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class su extends Bn{getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=t,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:i[e]||"",value:"("+a+", "+l+")"}}update(e){const t=this._cachedMeta,{data:i=[]}=t,s=this.chart._animationsDisabled;let{start:r,count:o}=AS(t,i,s);if(this._drawStart=r,this._drawCount=o,TS(t)&&(r=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:c},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,r,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(t,s),d=this.getSharedOptions(u),f=this.includeOptions(s,d),g=o.axis,m=a.axis,{spanGaps:_,segment:y}=this.options,E=bo(_)?_:Number.POSITIVE_INFINITY,I=this.chart._animationsDisabled||r||s==="none";let R=t>0&&this.getParsed(t-1);for(let S=t;S<t+i;++S){const D=e[S],N=this.getParsed(S),T=I?D:{},b=Te(N[m]),w=T[g]=o.getPixelForValue(N[g],S),C=T[m]=r||b?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,N,l):N[m],S);T.skip=isNaN(w)||isNaN(C)||b,T.stop=S>0&&Math.abs(N[g]-R[g])>E,y&&(T.parsed=N,T.raw=c.data[S]),f&&(T.options=d||this.resolveDataElementOptions(S,D.active?"active":s)),I||this.updateElement(D,S,T,s),R=N}this.updateSharedOptions(d,s,u)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let a=0;for(let l=t.length-1;l>=0;--l)a=Math.max(a,t[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=e.dataset,s=i.options&&i.options.borderWidth||0;if(!t.length)return s;const r=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(s,r,o)/2}}J(su,"id","scatter"),J(su,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),J(su,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var yB=Object.freeze({__proto__:null,BarController:eu,BubbleController:tu,DoughnutController:Zs,LineController:nu,PieController:ug,PolarAreaController:Ma,RadarController:iu,ScatterController:su});function Bs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class um{constructor(e){J(this,"options");this.options=e||{}}static override(e){Object.assign(um.prototype,e)}init(){}formats(){return Bs()}parse(){return Bs()}format(){return Bs()}add(){return Bs()}diff(){return Bs()}startOf(){return Bs()}endOf(){return Bs()}}var bB={_date:um};function EB(n,e,t,i){const{controller:s,data:r,_sorted:o}=n,a=s._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const c=a._reversePixels?WF:Si;if(i){if(s._sharedOptions){const u=r[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const f=c(r,e,t-d),g=c(r,e,t+d);return{lo:f.lo,hi:g.hi}}}}else{const u=c(r,e,t);if(l){const{vScale:d}=s._cachedMeta,{_parsed:f}=n,g=f.slice(0,u.lo+1).reverse().findIndex(_=>!Te(_[d.axis]));u.lo-=Math.max(0,g);const m=f.slice(u.hi).findIndex(_=>!Te(_[d.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:r.length-1}}function Qh(n,e,t,i,s){const r=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:d,hi:f}=EB(r[a],e,o,s);for(let g=d;g<=f;++g){const m=u[g];m.skip||i(m,c,g)}}}function wB(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,s){const r=e?Math.abs(i.x-s.x):0,o=t?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Xd(n,e,t,i,s){const r=[];return!s&&!n.isPointInArea(e)||Qh(n,t,e,function(a,l,c){!s&&!Ii(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function AB(n,e,t,i){let s=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:d}=vS(o,{x:e.x,y:e.y});ll(d,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return Qh(n,t,e,r),s}function TB(n,e,t,i,s,r){let o=[];const a=wB(t);let l=Number.POSITIVE_INFINITY;function c(u,d,f){const g=u.inRange(e.x,e.y,s);if(i&&!g)return;const m=u.getCenterPoint(s);if(!(!!r||n.isPointInArea(m))&&!g)return;const y=a(e,m);y<l?(o=[{element:u,datasetIndex:d,index:f}],l=y):y===l&&o.push({element:u,datasetIndex:d,index:f})}return Qh(n,t,e,c),o}function Jd(n,e,t,i,s,r){return!r&&!n.isPointInArea(e)?[]:t==="r"&&!i?AB(n,e,t,s):TB(n,e,t,i,s,r)}function Rb(n,e,t,i,s){const r=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return Qh(n,t,e,(l,c,u)=>{l[o]&&l[o](e[t],s)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),i&&!a?[]:r}var SB={modes:{index(n,e,t,i){const s=zs(e,n),r=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?Xd(n,s,r,i,o):Jd(n,s,r,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(n,e,t,i){const s=zs(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?Xd(n,s,r,i,o):Jd(n,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,e,t,i){const s=zs(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;return Xd(n,s,r,i,o)},nearest(n,e,t,i){const s=zs(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;return Jd(n,s,r,t.intersect,i,o)},x(n,e,t,i){const s=zs(e,n);return Rb(n,s,"x",t.intersect,i)},y(n,e,t,i){const s=zs(e,n);return Rb(n,s,"y",t.intersect,i)}}};const jS=["left","top","right","bottom"];function ea(n,e){return n.filter(t=>t.pos===e)}function Db(n,e){return n.filter(t=>jS.indexOf(t.pos)===-1&&t.box.axis===e)}function ta(n,e){return n.sort((t,i)=>{const s=e?i:t,r=e?t:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function IB(n){const e=[];let t,i,s,r,o,a;for(t=0,i=(n||[]).length;t<i;++t)s=n[t],{position:r,options:{stack:o,stackWeight:a=1}}=s,e.push({index:t,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}function CB(n){const e={};for(const t of n){const{stack:i,pos:s,stackWeight:r}=t;if(!i||!jS.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function xB(n,e){const t=CB(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=n.length;r<o;++r){a=n[r];const{fullSize:l}=a.box,c=t[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=s):(a.width=i,a.height=u?u*s:l&&e.availableHeight)}return t}function RB(n){const e=IB(n),t=ta(e.filter(c=>c.box.fullSize),!0),i=ta(ea(e,"left"),!0),s=ta(ea(e,"right")),r=ta(ea(e,"top"),!0),o=ta(ea(e,"bottom")),a=Db(e,"x"),l=Db(e,"y");return{fullSize:t,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:ea(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function kb(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function zS(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function DB(n,e,t,i){const{pos:s,box:r}=t,o=n.maxPadding;if(!xe(s)){t.size&&(n[s]-=t.size);const d=i[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?r.height:r.width),t.size=d.size/d.count,n[s]+=t.size}r.getPadding&&zS(o,r.getPadding());const a=Math.max(0,e.outerWidth-kb(o,n,"left","right")),l=Math.max(0,e.outerHeight-kb(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:c,other:u}:{same:u,other:c}}function kB(n){const e=n.maxPadding;function t(i){const s=Math.max(e[i]-n[i],0);return n[i]+=s,s}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function PB(n,e){const t=e.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],t[o])}),r}return i(n?["left","right"]:["top","bottom"])}function ha(n,e,t,i){const s=[];let r,o,a,l,c,u;for(r=0,o=n.length,c=0;r<o;++r){a=n[r],l=a.box,l.update(a.width||e.w,a.height||e.h,PB(a.horizontal,e));const{same:d,other:f}=DB(e,t,a,i);c|=d&&s.length,u=u||f,l.fullSize||s.push(a)}return c&&ha(s,e,t,i)||u}function pc(n,e,t,i,s){n.top=t,n.left=e,n.right=e+i,n.bottom=t+s,n.width=i,n.height=s}function Pb(n,e,t,i){const s=t.padding;let{x:r,y:o}=e;for(const a of n){const l=a.box,c=i[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,f=c.size||l.height;al(c.start)&&(o=c.start),l.fullSize?pc(l,s.left,o,t.outerWidth-s.right-s.left,f):pc(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,f=c.size||l.width;al(c.start)&&(r=c.start),l.fullSize?pc(l,r,s.top,f,t.outerHeight-s.bottom-s.top):pc(l,r,e.top+c.placed,f,d),c.start=r,c.placed+=d,r=l.right}}e.x=r,e.y=o}var Jt={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const s=Lt(n.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(t-s.height,0),a=RB(n.boxes),l=a.vertical,c=a.horizontal;ze(n.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const u=l.reduce((_,y)=>y.box.options&&y.box.options.display===!1?_:_+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:t,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},s);zS(f,Lt(i));const g=Object.assign({maxPadding:f,w:r,h:o,x:s.left,y:s.top},s),m=xB(l.concat(c),d);ha(a.fullSize,g,d,m),ha(l,g,d,m),ha(c,g,d,m)&&ha(l,g,d,m),kB(g),Pb(a.leftAndTop,g,d,m),g.x+=g.w,g.y+=g.h,Pb(a.rightAndBottom,g,d,m),n.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},ze(a.chartArea,_=>{const y=_.box;Object.assign(y,n.chartArea),y.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class WS{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,s){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):i)}}isAttached(e){return!0}updateConfig(e){}}class MB extends WS{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ru="$chartjs",OB={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Mb=n=>n===null||n==="";function NB(n,e){const t=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[ru]={initial:{height:i,width:s,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Mb(s)){const r=mb(n,"width");r!==void 0&&(n.width=r)}if(Mb(i))if(n.style.height==="")n.height=n.width/(e||2);else{const r=mb(n,"height");r!==void 0&&(n.height=r)}return n}const $S=V2?{passive:!0}:!1;function LB(n,e,t){n&&n.addEventListener(e,t,$S)}function VB(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,$S)}function FB(n,e){const t=OB[n.type]||n.type,{x:i,y:s}=zs(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function qu(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function BB(n,e,t){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||qu(a.addedNodes,i),o=o&&!qu(a.removedNodes,i);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}function UB(n,e,t){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||qu(a.removedNodes,i),o=o&&!qu(a.addedNodes,i);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}const ul=new Map;let Ob=0;function qS(){const n=window.devicePixelRatio;n!==Ob&&(Ob=n,ul.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function HB(n,e){ul.size||window.addEventListener("resize",qS),ul.set(n,e)}function jB(n){ul.delete(n),ul.size||window.removeEventListener("resize",qS)}function zB(n,e,t){const i=n.canvas,s=i&&cm(i);if(!s)return;const r=wS((a,l)=>{const c=s.clientWidth;t(a,l),c<s.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(s),HB(n,r),o}function Zd(n,e,t){t&&t.disconnect(),e==="resize"&&jB(n)}function WB(n,e,t){const i=n.canvas,s=wS(r=>{n.ctx!==null&&t(FB(r,n))},n);return LB(i,e,s),s}class $B extends WS{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(NB(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[ru])return!1;const i=t[ru].initial;["height","width"].forEach(r=>{const o=i[r];Te(o)?t.removeAttribute(r):t.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{t.style[r]=s[r]}),t.width=t.width,delete t[ru],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const s=e.$proxies||(e.$proxies={}),o={attach:BB,detach:UB,resize:zB}[t]||WB;s[t]=o(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),s=i[t];if(!s)return;({attach:Zd,detach:Zd,resize:Zd}[t]||VB)(e,t,s),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,s){return L2(e,t,i,s)}isAttached(e){const t=e&&cm(e);return!!(t&&t.isConnected)}}function qB(n){return!lm()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?MB:$B}var Nc;let Vi=(Nc=class{constructor(){J(this,"x");J(this,"y");J(this,"active",!1);J(this,"options");J(this,"$animations")}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return bo(this.x)&&bo(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}},J(Nc,"defaults",{}),J(Nc,"defaultRoutes"),Nc);function GB(n,e){const t=n.options.ticks,i=KB(n),s=Math.min(t.maxTicksLimit||i,i),r=t.major.enabled?YB(e):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return XB(e,c,r,o/s),c;const u=QB(r,e,s);if(o>0){let d,f;const g=o>1?Math.round((l-a)/(o-1)):null;for(mc(e,c,u,Te(g)?0:a-g,a),d=0,f=o-1;d<f;d++)mc(e,c,u,r[d],r[d+1]);return mc(e,c,u,l,Te(g)?e.length:l+g),c}return mc(e,c,u),c}function KB(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),s=n._maxLength/t;return Math.floor(Math.min(i,s))}function QB(n,e,t){const i=JB(n),s=e.length/t;if(!i)return Math.max(s,1);const r=BF(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function YB(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function XB(n,e,t,i){let s=0,r=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===r&&(e.push(n[o]),s++,r=t[s*i])}function mc(n,e,t,i,s){const r=Ee(i,0),o=Math.min(Ee(s,n.length),n.length);let a=0,l,c,u;for(t=Math.ceil(t),s&&(l=s-i,t=l/Math.floor(l/t)),u=r;u<0;)a++,u=Math.round(r+a*t);for(c=Math.max(r,0);c<o;c++)c===u&&(e.push(n[c]),a++,u=Math.round(r+a*t))}function JB(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const ZB=n=>n==="left"?"right":n==="right"?"left":n,Nb=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,Lb=(n,e)=>Math.min(e||n,n);function Vb(n,e){const t=[],i=n.length/e,s=n.length;let r=0;for(;r<s;r+=i)t.push(n[Math.floor(r)]);return t}function eU(n,e,t){const i=n.ticks.length,s=Math.min(e,i-1),r=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(s),c;if(!(t&&(i===1?c=Math.max(l-r,o-l):e===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-a||l>o+a)))return l}function tU(n,e){ze(n,t=>{const i=t.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete t.data[i[r]];i.splice(0,s)}})}function na(n){return n.drawTicks?n.tickLength:0}function Fb(n,e){if(!n.display)return 0;const t=bt(n.font,e),i=Lt(n.padding);return(tt(n.text)?n.text.length:1)*t.lineHeight+i.height}function nU(n,e){return xs(n,{scale:e,type:"scale"})}function iU(n,e,t){return xs(n,{tick:t,index:e,type:"tick"})}function sU(n,e,t){let i=nm(n);return(t&&e!=="right"||!t&&e==="right")&&(i=ZB(i)),i}function rU(n,e,t,i){const{top:s,left:r,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l;let d=0,f,g,m;const _=o-s,y=a-r;if(n.isHorizontal()){if(g=Wt(i,r,a),xe(t)){const E=Object.keys(t)[0],I=t[E];m=u[E].getPixelForValue(I)+_-e}else t==="center"?m=(c.bottom+c.top)/2+_-e:m=Nb(n,t,e);f=a-r}else{if(xe(t)){const E=Object.keys(t)[0],I=t[E];g=u[E].getPixelForValue(I)-y+e}else t==="center"?g=(c.left+c.right)/2-y+e:g=Nb(n,t,e);m=Wt(i,o,s),d=t==="left"?-mt:mt}return{titleX:g,titleY:m,maxWidth:f,rotation:d}}class Tr extends Vi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:s}=this;return e=mn(e,Number.POSITIVE_INFINITY),t=mn(t,Number.NEGATIVE_INFINITY),i=mn(i,Number.POSITIVE_INFINITY),s=mn(s,Number.NEGATIVE_INFINITY),{min:mn(e,i),max:mn(t,s),minDefined:ft(e),maxDefined:ft(t)}}getMinMax(e){let{min:t,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:t,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(t=Math.min(t,o.min)),r||(i=Math.max(i,o.max));return t=r&&t>i?i:t,i=s&&t>i?t:i,{min:mn(t,mn(i,t)),max:mn(i,mn(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ge(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=g2(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Vb(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=GB(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ge(this.options.afterUpdate,[this])}beforeSetDimensions(){Ge(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ge(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ge(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ge(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=Ge(t.callback,[r.value,i,e],this)}afterTickToLabelConversion(){Ge(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ge(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=Lb(this.ticks.length,e.ticks.maxTicksLimit),s=t.minRotation||0,r=t.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!t.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),d=u.widest.width,f=u.highest.height,g=Ct(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:g/(i-1),d+6>a&&(a=g/(i-(e.offset?.5:1)),l=this.maxHeight-na(e.grid)-t.padding-Fb(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=em(Math.min(Math.asin(Ct((u.highest.height+6)/a,-1,1)),Math.asin(Ct(l/c,-1,1))-Math.asin(Ct(f/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ge(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ge(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Fb(s,t.options.font);if(a?(e.width=this.maxWidth,e.height=na(r)+l):(e.height=this.maxHeight,e.width=na(r)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:f}=this._getLabelSizes(),g=i.padding*2,m=Nn(this.labelRotation),_=Math.cos(m),y=Math.sin(m);if(a){const E=i.mirror?0:y*d.width+_*f.height;e.height=Math.min(this.maxHeight,e.height+E+g)}else{const E=i.mirror?0:_*d.width+y*f.height;e.width=Math.min(this.maxWidth,e.width+E+g)}this._calculatePadding(c,u,y,_)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,g=0;l?c?(f=s*e.width,g=i*t.height):(f=i*e.height,g=s*t.width):r==="start"?g=t.width:r==="end"?f=e.width:r!=="inner"&&(f=e.width/2,g=t.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((g-d+o)*this.width/(this.width-d),0)}else{let u=t.height/2,d=e.height/2;r==="start"?(u=0,d=e.height):r==="end"&&(u=t.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ge(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)Te(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=Vb(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(t/Lb(t,i));let c=0,u=0,d,f,g,m,_,y,E,I,R,S,D;for(d=0;d<t;d+=l){if(m=e[d].label,_=this._resolveTickFontOptions(d),s.font=y=_.string,E=r[y]=r[y]||{data:{},gc:[]},I=_.lineHeight,R=S=0,!Te(m)&&!tt(m))R=Wu(s,E.data,E.gc,R,m),S=I;else if(tt(m))for(f=0,g=m.length;f<g;++f)D=m[f],!Te(D)&&!tt(D)&&(R=Wu(s,E.data,E.gc,R,D),S+=I);o.push(R),a.push(S),c=Math.max(R,c),u=Math.max(S,u)}tU(r,t);const N=o.indexOf(c),T=a.indexOf(u),b=w=>({width:o[w]||0,height:a[w]||0});return{first:b(0),last:b(t-1),widest:b(N),highest:b(T),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return zF(this._alignToPixels?Fs(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=iU(this.getContext(),e,i))}return this.$context||(this.$context=nU(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Nn(this.labelRotation),i=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=na(r),g=[],m=a.setContext(this.getContext()),_=m.display?m.width:0,y=_/2,E=function(_e){return Fs(i,_e,_)};let I,R,S,D,N,T,b,w,C,x,O,k;if(o==="top")I=E(this.bottom),T=this.bottom-f,w=I-y,x=E(e.top)+y,k=e.bottom;else if(o==="bottom")I=E(this.top),x=e.top,k=E(e.bottom)-y,T=I+y,w=this.top+f;else if(o==="left")I=E(this.right),N=this.right-f,b=I-y,C=E(e.left)+y,O=e.right;else if(o==="right")I=E(this.left),C=e.left,O=E(e.right)-y,N=I+y,b=this.left+f;else if(t==="x"){if(o==="center")I=E((e.top+e.bottom)/2+.5);else if(xe(o)){const _e=Object.keys(o)[0],re=o[_e];I=E(this.chart.scales[_e].getPixelForValue(re))}x=e.top,k=e.bottom,T=I+y,w=T+f}else if(t==="y"){if(o==="center")I=E((e.left+e.right)/2);else if(xe(o)){const _e=Object.keys(o)[0],re=o[_e];I=E(this.chart.scales[_e].getPixelForValue(re))}N=I-y,b=N-f,C=e.left,O=e.right}const $e=Ee(s.ticks.maxTicksLimit,d),Se=Math.max(1,Math.ceil(d/$e));for(R=0;R<d;R+=Se){const _e=this.getContext(R),re=r.setContext(_e),de=a.setContext(_e),Fe=re.lineWidth,Tt=re.color,xt=de.dash||[],Be=de.dashOffset,qe=re.tickWidth,Vt=re.tickColor,Ft=re.tickBorderDash||[],ht=re.tickBorderDashOffset;S=eU(this,R,l),S!==void 0&&(D=Fs(i,S,Fe),c?N=b=C=O=D:T=w=x=k=D,g.push({tx1:N,ty1:T,tx2:b,ty2:w,x1:C,y1:x,x2:O,y2:k,width:Fe,color:Tt,borderDash:xt,borderDashOffset:Be,tickWidth:qe,tickColor:Vt,tickBorderDash:Ft,tickBorderDashOffset:ht}))}return this._ticksLength=d,this._borderValue=I,g}_computeLabelItems(e){const t=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=r,f=na(i.grid),g=f+u,m=d?-u:g,_=-Nn(this.labelRotation),y=[];let E,I,R,S,D,N,T,b,w,C,x,O,k="middle";if(s==="top")N=this.bottom-m,T=this._getXAxisLabelAlignment();else if(s==="bottom")N=this.top+m,T=this._getXAxisLabelAlignment();else if(s==="left"){const Se=this._getYAxisLabelAlignment(f);T=Se.textAlign,D=Se.x}else if(s==="right"){const Se=this._getYAxisLabelAlignment(f);T=Se.textAlign,D=Se.x}else if(t==="x"){if(s==="center")N=(e.top+e.bottom)/2+g;else if(xe(s)){const Se=Object.keys(s)[0],_e=s[Se];N=this.chart.scales[Se].getPixelForValue(_e)+g}T=this._getXAxisLabelAlignment()}else if(t==="y"){if(s==="center")D=(e.left+e.right)/2-g;else if(xe(s)){const Se=Object.keys(s)[0],_e=s[Se];D=this.chart.scales[Se].getPixelForValue(_e)}T=this._getYAxisLabelAlignment(f).textAlign}t==="y"&&(l==="start"?k="top":l==="end"&&(k="bottom"));const $e=this._getLabelSizes();for(E=0,I=a.length;E<I;++E){R=a[E],S=R.label;const Se=r.setContext(this.getContext(E));b=this.getPixelForTick(E)+r.labelOffset,w=this._resolveTickFontOptions(E),C=w.lineHeight,x=tt(S)?S.length:1;const _e=x/2,re=Se.color,de=Se.textStrokeColor,Fe=Se.textStrokeWidth;let Tt=T;o?(D=b,T==="inner"&&(E===I-1?Tt=this.options.reverse?"left":"right":E===0?Tt=this.options.reverse?"right":"left":Tt="center"),s==="top"?c==="near"||_!==0?O=-x*C+C/2:c==="center"?O=-$e.highest.height/2-_e*C+C:O=-$e.highest.height+C/2:c==="near"||_!==0?O=C/2:c==="center"?O=$e.highest.height/2-_e*C:O=$e.highest.height-x*C,d&&(O*=-1),_!==0&&!Se.showLabelBackdrop&&(D+=C/2*Math.sin(_))):(N=b,O=(1-x)*C/2);let xt;if(Se.showLabelBackdrop){const Be=Lt(Se.backdropPadding),qe=$e.heights[E],Vt=$e.widths[E];let Ft=O-Be.top,ht=0-Be.left;switch(k){case"middle":Ft-=qe/2;break;case"bottom":Ft-=qe;break}switch(T){case"center":ht-=Vt/2;break;case"right":ht-=Vt;break;case"inner":E===I-1?ht-=Vt:E>0&&(ht-=Vt/2);break}xt={left:ht,top:Ft,width:Vt+Be.width,height:qe+Be.height,color:Se.backdropColor}}y.push({label:S,font:w,textOffset:O,options:{rotation:_,color:re,strokeColor:de,strokeWidth:Fe,textAlign:Tt,textBaseline:k,translation:[D,N],backdrop:xt}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Nn(this.labelRotation))return e==="top"?"left":"right";let s="center";return t.align==="start"?s="left":t.align==="end"?s="right":t.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,l=o.widest.width;let c,u;return t==="left"?s?(u=this.right+r,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):t==="right"?s?(u=this.left+r,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:s,width:r,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,s,r,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?t.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(t.display)for(r=0,o=s.length;r<o;++r){const l=s[r];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,f;this.isHorizontal()?(c=Fs(e,this.left,o)-o/2,u=Fs(e,this.right,a)+a/2,d=f=l):(d=Fs(e,this.top,o)-o/2,f=Fs(e,this.bottom,a)+a/2,c=u=l),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(c,d),t.lineTo(u,f),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&qh(i,s);const r=this.getLabelItems(e);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;mr(i,c,0,u,l,a)}s&&Gh(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:s}}=this;if(!i.display)return;const r=bt(i.font),o=Lt(i.padding),a=i.align;let l=r.lineHeight/2;t==="bottom"||t==="center"||xe(t)?(l+=o.bottom,tt(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:f}=rU(this,l,t,a);mr(e,i.text,0,0,r,{color:i.color,maxWidth:d,rotation:f,textAlign:sU(a,t,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=Ee(e.grid&&e.grid.z,-1),s=Ee(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Tr.prototype.draw?[{z:t,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=t.length;r<o;++r){const a=t[r];a[i]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return bt(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class _c{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;lU(t)&&(i=this.register(t));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,oU(e,o,i),this.override&&it.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,s=this.scope;i in t&&delete t[i],s&&i in it[s]&&(delete it[s][i],this.override&&delete pr[i])}}function oU(n,e,t){const i=ai(Object.create(null),[t?it.get(t):{},it.get(e),n.defaults]);it.set(e,i),n.defaultRoutes&&aU(e,n.defaultRoutes),n.descriptors&&it.describe(e,n.descriptors)}function aU(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),s=i.pop(),r=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");it.route(r,s,l,a)})}function lU(n){return"id"in n&&"defaults"in n}class cU{constructor(){this.controllers=new _c(Bn,"datasets",!0),this.elements=new _c(Vi,"elements"),this.plugins=new _c(Object,"plugins"),this.scales=new _c(Tr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):ze(s,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){const s=Zp(e);Ge(i["before"+s],[],i),t[e](i),Ge(i["after"+s],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const s=t.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var $n=new cU;class uU{constructor(){this._init=[]}notify(e,t,i,s){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,t,i);return t==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,s){s=s||{};for(const r of e){const o=r.plugin,a=o[i],l=[t,s,r.options];if(Ge(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Te(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,s=Ee(i.options&&i.options.plugins,{}),r=hU(i);return s===!1&&!t?[]:fU(e,r,s,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(t,i),e,"stop"),this._notify(s(i,t),e,"start")}}function hU(n){const e={},t=[],i=Object.keys($n.plugins.items);for(let r=0;r<i.length;r++)t.push($n.getPlugin(i[r]));const s=n.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function dU(n,e){return!e&&n===!1?null:n===!0?{}:n}function fU(n,{plugins:e,localIds:t},i,s){const r=[],o=n.getContext();for(const a of e){const l=a.id,c=dU(i[l],s);c!==null&&r.push({plugin:a,options:gU(n.config,{plugin:a,local:t[l]},c,o)})}return r}function gU(n,{plugin:e,local:t},i,s){const r=n.pluginScopeKeys(e),o=n.getOptionScopes(i,r);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function hg(n,e){const t=it.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function pU(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function mU(n,e){return n===e?"_index_":"_value_"}function Bb(n){if(n==="x"||n==="y"||n==="r")return n}function _U(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function dg(n,...e){if(Bb(n))return n;for(const t of e){const i=t.axis||_U(t.position)||n.length>1&&Bb(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Ub(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function vU(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return Ub(n,"x",t[0])||Ub(n,"y",t[0])}return{}}function yU(n,e){const t=pr[n.type]||{scales:{}},i=e.scales||{},s=hg(n.type,e),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!xe(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=dg(o,a,vU(o,n),it.scales[a.type]),c=mU(l,s),u=t.scales||{};r[o]=Ra(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||hg(a,e),u=(pr[a]||{}).scales||{};Object.keys(u).forEach(d=>{const f=pU(d,l),g=o[f+"AxisID"]||f;r[g]=r[g]||Object.create(null),Ra(r[g],[{axis:f},i[g],u[d]])})}),Object.keys(r).forEach(o=>{const a=r[o];Ra(a,[it.scales[a.type],it.scale])}),r}function GS(n){const e=n.options||(n.options={});e.plugins=Ee(e.plugins,{}),e.scales=yU(n,e)}function KS(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function bU(n){return n=n||{},n.data=KS(n.data),GS(n),n}const Hb=new Map,QS=new Set;function vc(n,e){let t=Hb.get(n);return t||(t=e(),Hb.set(n,t),QS.add(t)),t}const ia=(n,e,t)=>{const i=ws(e,t);i!==void 0&&n.add(i)};class EU{constructor(e){this._config=bU(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=KS(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),GS(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return vc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return vc(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return vc(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return vc(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let s=i.get(e);return(!s||t)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,t,i){const{options:s,type:r}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;const l=new Set;t.forEach(u=>{e&&(l.add(e),u.forEach(d=>ia(l,e,d))),u.forEach(d=>ia(l,s,d)),u.forEach(d=>ia(l,pr[r]||{},d)),u.forEach(d=>ia(l,it,d)),u.forEach(d=>ia(l,lg,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),QS.has(t)&&o.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,pr[t]||{},it.datasets[t]||{},{type:t},it,lg]}resolveNamedOptions(e,t,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=jb(this._resolverCache,e,s);let l=o;if(AU(o,t)){r.$shared=!1,i=As(i)?i():i;const c=this.createResolver(e,i,a);l=Eo(o,i,c)}for(const c of t)r[c]=l[c];return r}createResolver(e,t,i=[""],s){const{resolver:r}=jb(this._resolverCache,e,i);return xe(t)?Eo(r,t,void 0,s):r}}function jb(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const s=t.join();let r=i.get(s);return r||(r={resolver:rm(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const wU=n=>xe(n)&&Object.getOwnPropertyNames(n).some(e=>As(n[e]));function AU(n,e){const{isScriptable:t,isIndexable:i}=xS(n);for(const s of e){const r=t(s),o=i(s),a=(o||r)&&n[s];if(r&&(As(a)||wU(a))||o&&tt(a))return!0}return!1}var TU="4.4.8";const SU=["top","bottom","left","right","chartArea"];function zb(n,e){return n==="top"||n==="bottom"||SU.indexOf(n)===-1&&e==="x"}function Wb(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function $b(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Ge(t&&t.onComplete,[n],e)}function IU(n){const e=n.chart,t=e.options.animation;Ge(t&&t.onProgress,[n],e)}function YS(n){return lm()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const ou={},qb=n=>{const e=YS(n);return Object.values(ou).filter(t=>t.canvas===e).pop()};function CU(n,e,t){const i=Object.keys(n);for(const s of i){const r=+s;if(r>=e){const o=n[s];delete n[s],(t>0||r>e)&&(n[r+t]=o)}}}function xU(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}function yc(n,e,t){return n.options.clip?n[t]:e[t]}function RU(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:yc(t,e,"left"),right:yc(t,e,"right"),top:yc(i,e,"top"),bottom:yc(i,e,"bottom")}:e}class Mn{static register(...e){$n.add(...e),Gb()}static unregister(...e){$n.remove(...e),Gb()}constructor(e,t){const i=this.config=new EU(t),s=YS(e),r=qb(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||qB(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=DF(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new uU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=GF(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],ou[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}gi.listen(this,"complete",$b),gi.listen(this,"progress",IU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:s,_aspectRatio:r}=this;return Te(e)?t&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return $n}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():pb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return db(this.canvas,this.ctx),this}stop(){return gi.stop(this),this}resize(e,t){gi.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,t,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,pb(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ge(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};ze(t,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];t&&(r=r.concat(Object.keys(t).map(o=>{const a=t[o],l=dg(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),ze(r,o=>{const a=o.options,l=a.id,c=dg(l,a),u=Ee(a.type,o.dtype);(a.position===void 0||zb(a.position,c)!==zb(o.dposition))&&(a.position=o.dposition),s[l]=!0;let d=null;if(l in i&&i[l].type===u)d=i[l];else{const f=$n.getScale(u);d=new f({id:l,type:u,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),ze(s,(o,a)=>{o||delete i[a]}),ze(i,o=>{Jt.configure(this,o,o.options),Jt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>t){for(let s=t;s<i;++s)this._destroyDatasetMeta(s);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(Wb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,s)=>{t.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=t.length;i<s;i++){const r=t[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||hg(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=$n.getController(a),{datasetElementType:c,dataElementType:u}=it.datasets[a];Object.assign(l,{dataElementType:$n.getElement(u),datasetElementType:c&&$n.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ze(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),f=!s&&r.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||ze(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Wb("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ze(this.scales,e=>{Jt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!ib(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of t){const o=i==="_removeElements"?-r:r;CU(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<t;r++)if(!ib(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Jt.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],ze(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,As(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(gi.has(this)?this.attached&&!gi.running(this)&&gi.start(this):(this.draw(),$b({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let s,r;for(s=0,r=t.length;s<r;++s){const o=t[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i=e._clip,s=!i.disabled,r=RU(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&qh(t,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),e.controller.draw(),s&&Gh(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Ii(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,s){const r=SB.modes[t];return typeof r=="function"?r(this,e,i,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=xs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);al(t)?(r.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),gi.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),db(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete ou[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(r,o)=>{t.addEventListener(this,r,o),e[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};ze(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(l,c)=>{t.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(t.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){ze(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},ze(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const s=i?"set":"remove";let r,o,a,l;for(t==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Hu(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const s=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=r(t,e),a=i?e:r(e,t);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:s=[],options:r}=this,o=t,a=this._getActiveElements(e,s,i,o),l=LF(e),c=xU(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Ge(r.onHover,[e,a,this],this),l&&Ge(r.onClick,[e,a,this],this));const u=!Hu(a,s);return(u||t)&&(this._active=a,this._updateHoverStyles(a,s,t)),this._lastEvent=c,u}_getActiveElements(e,t,i,s){if(e.type==="mouseout")return[];if(!i)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}}J(Mn,"defaults",it),J(Mn,"instances",ou),J(Mn,"overrides",pr),J(Mn,"registry",$n),J(Mn,"version",TU),J(Mn,"getChart",qb);function Gb(){return ze(Mn.instances,n=>n._plugins.invalidate())}function DU(n,e,t){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:l}=e;let c=s/a;n.beginPath(),n.arc(r,o,a,i-c,t+c),l>s?(c=s/l,n.arc(r,o,l,t+c,i-c,!0)):n.arc(r,o,s,t+mt,i-mt),n.closePath(),n.clip()}function kU(n){return sm(n,["outerStart","outerEnd","innerStart","innerEnd"])}function PU(n,e,t,i){const s=kU(n.options.borderRadius),r=(t-e)/2,o=Math.min(r,i*e/2),a=l=>{const c=(t-Math.min(r,l))*i/2;return Ct(l,0,Math.min(r,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Ct(s.innerStart,0,o),innerEnd:Ct(s.innerEnd,0,o)}}function Lr(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function Gu(n,e,t,i,s,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+i+t-c,0),f=u>0?u+i+t+c:0;let g=0;const m=s-l;if(i){const Se=u>0?u-i:0,_e=d>0?d-i:0,re=(Se+_e)/2,de=re!==0?m*re/(re+i):m;g=(m-de)/2}const _=Math.max(.001,m*d-t/st)/d,y=(m-_)/2,E=l+y+g,I=s-y-g,{outerStart:R,outerEnd:S,innerStart:D,innerEnd:N}=PU(e,f,d,I-E),T=d-R,b=d-S,w=E+R/T,C=I-S/b,x=f+D,O=f+N,k=E+D/x,$e=I-N/O;if(n.beginPath(),r){const Se=(w+C)/2;if(n.arc(o,a,d,w,Se),n.arc(o,a,d,Se,C),S>0){const Fe=Lr(b,C,o,a);n.arc(Fe.x,Fe.y,S,C,I+mt)}const _e=Lr(O,I,o,a);if(n.lineTo(_e.x,_e.y),N>0){const Fe=Lr(O,$e,o,a);n.arc(Fe.x,Fe.y,N,I+mt,$e+Math.PI)}const re=(I-N/f+(E+D/f))/2;if(n.arc(o,a,f,I-N/f,re,!0),n.arc(o,a,f,re,E+D/f,!0),D>0){const Fe=Lr(x,k,o,a);n.arc(Fe.x,Fe.y,D,k+Math.PI,E-mt)}const de=Lr(T,E,o,a);if(n.lineTo(de.x,de.y),R>0){const Fe=Lr(T,w,o,a);n.arc(Fe.x,Fe.y,R,E-mt,w)}}else{n.moveTo(o,a);const Se=Math.cos(w)*d+o,_e=Math.sin(w)*d+a;n.lineTo(Se,_e);const re=Math.cos(C)*d+o,de=Math.sin(C)*d+a;n.lineTo(re,de)}n.closePath()}function MU(n,e,t,i,s){const{fullCircles:r,startAngle:o,circumference:a}=e;let l=e.endAngle;if(r){Gu(n,e,t,i,l,s);for(let c=0;c<r;++c)n.fill();isNaN(a)||(l=o+(a%nt||nt))}return Gu(n,e,t,i,l,s),n.fill(),l}function OU(n,e,t,i,s){const{fullCircles:r,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:f}=l,g=l.borderAlign==="inner";if(!c)return;n.setLineDash(d||[]),n.lineDashOffset=f,g?(n.lineWidth=c*2,n.lineJoin=u||"round"):(n.lineWidth=c,n.lineJoin=u||"bevel");let m=e.endAngle;if(r){Gu(n,e,t,i,m,s);for(let _=0;_<r;++_)n.stroke();isNaN(a)||(m=o+(a%nt||nt))}g&&DU(n,e,m),r||(Gu(n,e,t,i,m,s),n.stroke())}class Wr extends Vi{constructor(t){super();J(this,"circumference");J(this,"endAngle");J(this,"fullCircles");J(this,"innerRadius");J(this,"outerRadius");J(this,"pixelMargin");J(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,i,s){const r=this.getProps(["x","y"],s),{angle:o,distance:a}=vS(r,{x:t,y:i}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:d,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),g=(this.options.spacing+this.options.borderWidth)/2,m=Ee(f,c-l),_=ll(o,l,c)&&l!==c,y=m>=nt||_,E=Ti(a,u+g,d+g);return y&&E}getCenterPoint(t){const{x:i,y:s,startAngle:r,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:u}=this.options,d=(r+o)/2,f=(a+l+u+c)/2;return{x:i+Math.cos(d)*f,y:s+Math.sin(d)*f}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:i,circumference:s}=this,r=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>nt?Math.floor(s/nt):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min(st,s||0)),u=r*c;t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,MU(t,this,u,o,a),OU(t,this,u,o,a),t.restore()}}J(Wr,"id","arc"),J(Wr,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),J(Wr,"defaultRoutes",{backgroundColor:"backgroundColor"}),J(Wr,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function XS(n,e,t=e){n.lineCap=Ee(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Ee(t.borderDash,e.borderDash)),n.lineDashOffset=Ee(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Ee(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Ee(t.borderWidth,e.borderWidth),n.strokeStyle=Ee(t.borderColor,e.borderColor)}function NU(n,e,t){n.lineTo(t.x,t.y)}function LU(n){return n.stepped?r2:n.tension||n.cubicInterpolationMode==="monotone"?o2:NU}function JS(n,e,t={}){const i=n.length,{start:s=0,end:r=i-1}=t,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(r,a),u=s<o&&r<o||s>a&&r>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function VU(n,e,t,i){const{points:s,options:r}=e,{count:o,start:a,loop:l,ilen:c}=JS(s,t,i),u=LU(r);let{move:d=!0,reverse:f}=i||{},g,m,_;for(g=0;g<=c;++g)m=s[(a+(f?c-g:g))%o],!m.skip&&(d?(n.moveTo(m.x,m.y),d=!1):u(n,_,m,f,r.stepped),_=m);return l&&(m=s[(a+(f?c:0))%o],u(n,_,m,f,r.stepped)),!!l}function FU(n,e,t,i){const s=e.points,{count:r,start:o,ilen:a}=JS(s,t,i),{move:l=!0,reverse:c}=i||{};let u=0,d=0,f,g,m,_,y,E;const I=S=>(o+(c?a-S:S))%r,R=()=>{_!==y&&(n.lineTo(u,y),n.lineTo(u,_),n.lineTo(u,E))};for(l&&(g=s[I(0)],n.moveTo(g.x,g.y)),f=0;f<=a;++f){if(g=s[I(f)],g.skip)continue;const S=g.x,D=g.y,N=S|0;N===m?(D<_?_=D:D>y&&(y=D),u=(d*u+S)/++d):(R(),n.lineTo(S,D),m=N,d=0,_=y=D),E=D}R()}function fg(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?FU:VU}function BU(n){return n.stepped?F2:n.tension||n.cubicInterpolationMode==="monotone"?B2:Ws}function UU(n,e,t,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,t,i)&&s.closePath()),XS(n,e.options),n.stroke(s)}function HU(n,e,t,i){const{segments:s,options:r}=e,o=fg(e);for(const a of s)XS(n,r,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const jU=typeof Path2D=="function";function zU(n,e,t,i){jU&&!e.options.segment?UU(n,e,t,i):HU(n,e,t,i)}class es extends Vi{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;D2(this._points,i,e,s,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=$2(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,s=e[t],r=this.points,o=FS(this,{property:t,start:s,end:s});if(!o.length)return;const a=[],l=BU(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:f}=o[c],g=r[d],m=r[f];if(g===m){a.push(g);continue}const _=Math.abs((s-g[t])/(m[t]-g[t])),y=l(g,m,_,i.stepped);y[t]=e[t],a.push(y)}return a.length===1?a[0]:a}pathSegment(e,t,i){return fg(this)(e,this,t,i)}path(e,t,i){const s=this.segments,r=fg(this);let o=this._loop;t=t||0,i=i||this.points.length-t;for(const a of s)o&=r(e,this,a,{start:t,end:t+i-1});return!!o}draw(e,t,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),zU(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}J(es,"id","line"),J(es,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),J(es,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),J(es,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Kb(n,e,t,i){const s=n.options,{[t]:r}=n.getProps([t],i);return Math.abs(e-r)<s.radius+s.hitRadius}class Oa extends Vi{constructor(t){super();J(this,"parsed");J(this,"skip");J(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,s){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(t-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,i){return Kb(this,t,"x",i)}inYRange(t,i){return Kb(this,t,"y",i)}getCenterPoint(t){const{x:i,y:s}=this.getProps(["x","y"],t);return{x:i,y:s}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);const s=i&&t.borderWidth||0;return(i+s)*2}draw(t,i){const s=this.options;this.skip||s.radius<.1||!Ii(this,i,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,cg(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}J(Oa,"id","point"),J(Oa,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),J(Oa,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function ZS(n,e){const{x:t,y:i,base:s,width:r,height:o}=n.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return n.horizontal?(d=o/2,a=Math.min(t,s),l=Math.max(t,s),c=i-d,u=i+d):(d=r/2,a=t-d,l=t+d,c=Math.min(i,s),u=Math.max(i,s)),{left:a,top:c,right:l,bottom:u}}function ts(n,e,t,i){return n?0:Ct(e,t,i)}function WU(n,e,t){const i=n.options.borderWidth,s=n.borderSkipped,r=CS(i);return{t:ts(s.top,r.top,0,t),r:ts(s.right,r.right,0,e),b:ts(s.bottom,r.bottom,0,t),l:ts(s.left,r.left,0,e)}}function $U(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,r=sr(s),o=Math.min(e,t),a=n.borderSkipped,l=i||xe(s);return{topLeft:ts(!l||a.top||a.left,r.topLeft,0,o),topRight:ts(!l||a.top||a.right,r.topRight,0,o),bottomLeft:ts(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:ts(!l||a.bottom||a.right,r.bottomRight,0,o)}}function qU(n){const e=ZS(n),t=e.right-e.left,i=e.bottom-e.top,s=WU(n,t/2,i/2),r=$U(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:t-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function ef(n,e,t,i){const s=e===null,r=t===null,a=n&&!(s&&r)&&ZS(n,i);return a&&(s||Ti(e,a.left,a.right))&&(r||Ti(t,a.top,a.bottom))}function GU(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function KU(n,e){n.rect(e.x,e.y,e.w,e.h)}function tf(n,e,t={}){const i=n.x!==t.x?-e:0,s=n.y!==t.y?-e:0,r=(n.x+n.w!==t.x+t.w?e:0)-i,o=(n.y+n.h!==t.y+t.h?e:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+r,h:n.h+o,radius:n.radius}}class Na extends Vi{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=qU(this),a=GU(o.radius)?cl:KU;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),a(e,tf(o,t,r)),e.clip(),a(e,tf(r,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,tf(r,t)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,t,i){return ef(this,e,t,i)}inXRange(e,t){return ef(this,e,null,t)}inYRange(e,t){return ef(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+s)/2:t,y:r?i:(i+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}J(Na,"id","bar"),J(Na,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),J(Na,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var QU=Object.freeze({__proto__:null,ArcElement:Wr,BarElement:Na,LineElement:es,PointElement:Oa});const gg=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Qb=gg.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function eI(n){return gg[n%gg.length]}function tI(n){return Qb[n%Qb.length]}function YU(n,e){return n.borderColor=eI(e),n.backgroundColor=tI(e),++e}function XU(n,e){return n.backgroundColor=n.data.map(()=>eI(e++)),e}function JU(n,e){return n.backgroundColor=n.data.map(()=>tI(e++)),e}function ZU(n){let e=0;return(t,i)=>{const s=n.getDatasetMeta(i).controller;s instanceof Zs?e=XU(t,e):s instanceof Ma?e=JU(t,e):s&&(e=YU(t,e))}}function Yb(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function eH(n){return n&&(n.borderColor||n.backgroundColor)}function tH(){return it.borderColor!=="rgba(0,0,0,0.1)"||it.backgroundColor!=="rgba(0,0,0,0.1)"}var nH={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:i},options:s}=n.config,{elements:r}=s,o=Yb(i)||eH(s)||r&&Yb(r)||tH();if(!t.forceOverride&&o)return;const a=ZU(n);i.forEach(a)}};function iH(n,e,t,i,s){const r=s.samples||i;if(r>=t)return n.slice(e,e+t);const o=[],a=(t-2)/(r-2);let l=0;const c=e+t-1;let u=e,d,f,g,m,_;for(o[l++]=n[u],d=0;d<r-2;d++){let y=0,E=0,I;const R=Math.floor((d+1)*a)+1+e,S=Math.min(Math.floor((d+2)*a)+1,t)+e,D=S-R;for(I=R;I<S;I++)y+=n[I].x,E+=n[I].y;y/=D,E/=D;const N=Math.floor(d*a)+1+e,T=Math.min(Math.floor((d+1)*a)+1,t)+e,{x:b,y:w}=n[u];for(g=m=-1,I=N;I<T;I++)m=.5*Math.abs((b-y)*(n[I].y-w)-(b-n[I].x)*(E-w)),m>g&&(g=m,f=n[I],_=I);o[l++]=f,u=_}return o[l++]=n[c],o}function sH(n,e,t,i){let s=0,r=0,o,a,l,c,u,d,f,g,m,_;const y=[],E=e+t-1,I=n[e].x,S=n[E].x-I;for(o=e;o<e+t;++o){a=n[o],l=(a.x-I)/S*i,c=a.y;const D=l|0;if(D===u)c<m?(m=c,d=o):c>_&&(_=c,f=o),s=(r*s+a.x)/++r;else{const N=o-1;if(!Te(d)&&!Te(f)){const T=Math.min(d,f),b=Math.max(d,f);T!==g&&T!==N&&y.push({...n[T],x:s}),b!==g&&b!==N&&y.push({...n[b],x:s})}o>0&&N!==g&&y.push(n[N]),y.push(a),u=D,r=0,m=_=c,d=f=g=o}}return y}function nI(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Xb(n){n.data.datasets.forEach(e=>{nI(e)})}function rH(n,e){const t=e.length;let i=0,s;const{iScale:r}=n,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(i=Ct(Si(e,r.axis,o).lo,0,t-1)),c?s=Ct(Si(e,r.axis,a).hi+1,i,t)-i:s=t-i,{start:i,count:s}}var oH={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){Xb(n);return}const i=n.width;n.data.datasets.forEach((s,r)=>{const{_data:o,indexAxis:a}=s,l=n.getDatasetMeta(r),c=o||s.data;if(et([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=n.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:d,count:f}=rH(l,c);const g=t.threshold||4*i;if(f<=g){nI(s);return}Te(o)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(_){this._data=_}}));let m;switch(t.algorithm){case"lttb":m=iH(c,d,f,i,t);break;case"min-max":m=sH(c,d,f,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}s._decimated=m})},destroy(n){Xb(n)}};function aH(n,e,t){const i=n.segments,s=n.points,r=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=hm(l,c,s);const u=pg(t,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}const d=FS(e,u);for(const f of d){const g=pg(t,r[f.start],r[f.end],f.loop),m=VS(a,s,g);for(const _ of m)o.push({source:_,target:f,start:{[t]:Jb(u,g,"start",Math.max)},end:{[t]:Jb(u,g,"end",Math.min)}})}}return o}function pg(n,e,t,i){if(i)return;let s=e[n],r=t[n];return n==="angle"&&(s=vn(s),r=vn(r)),{property:n,start:s,end:r}}function lH(n,e){const{x:t=null,y:i=null}=n||{},s=e.points,r=[];return e.segments.forEach(({start:o,end:a})=>{a=hm(o,a,s);const l=s[o],c=s[a];i!==null?(r.push({x:l.x,y:i}),r.push({x:c.x,y:i})):t!==null&&(r.push({x:t,y:l.y}),r.push({x:t,y:c.y}))}),r}function hm(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function Jb(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function iI(n,e){let t=[],i=!1;return tt(n)?(i=!0,t=n):t=lH(n,e),t.length?new es({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function Zb(n){return n&&n.fill!==!1}function cH(n,e,t){let s=n[e].fill;const r=[e];let o;if(!t)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!ft(s))return s;if(o=n[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function uH(n,e,t){const i=gH(n);if(xe(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return ft(s)&&Math.floor(s)===s?hH(i[0],e,s,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function hH(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function dH(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:xe(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function fH(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:xe(n)?i=n.value:i=e.getBaseValue(),i}function gH(n){const e=n.options,t=e.fill;let i=Ee(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function pH(n){const{scale:e,index:t,line:i}=n,s=[],r=i.segments,o=i.points,a=mH(e,t);a.push(iI({x:null,y:e.bottom},i));for(let l=0;l<r.length;l++){const c=r[l];for(let u=c.start;u<=c.end;u++)_H(s,o[u],a)}return new es({points:s,options:{}})}function mH(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const r=i[s];if(r.index===e)break;r.hidden||t.unshift(r.dataset)}return t}function _H(n,e,t){const i=[];for(let s=0;s<t.length;s++){const r=t[s],{first:o,last:a,point:l}=vH(r,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(n.push(l),!a)break}}n.push(...i)}function vH(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const s=i[t],r=n.segments,o=n.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const u=r[c],d=o[u.start][t],f=o[u.end][t];if(Ti(s,d,f)){a=s===d,l=s===f;break}}return{first:a,last:l,point:i}}class sI{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:s,y:r,radius:o}=this;return t=t||{start:0,end:nt},e.arc(s,r,o,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:s}=this,r=e.angle;return{x:t+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}}function yH(n){const{chart:e,fill:t,line:i}=n;if(ft(t))return bH(e,t);if(t==="stack")return pH(n);if(t==="shape")return!0;const s=EH(n);return s instanceof sI?s:iI(s,i)}function bH(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function EH(n){return(n.scale||{}).getPointPositionForValue?AH(n):wH(n)}function wH(n){const{scale:e={},fill:t}=n,i=dH(t,e);if(ft(i)){const s=e.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function AH(n){const{scale:e,fill:t}=n,i=e.options,s=e.getLabels().length,r=i.reverse?e.max:e.min,o=fH(t,e,r),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,r);return new sI({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function nf(n,e,t){const i=yH(e),{line:s,scale:r,axis:o}=e,a=s.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:d=c}=l||{};i&&s.points.length&&(qh(n,t),TH(n,{line:s,target:i,above:u,below:d,area:t,scale:r,axis:o}),Gh(n))}function TH(n,e){const{line:t,target:i,above:s,below:r,area:o,scale:a}=e,l=t._loop?"angle":e.axis;n.save(),l==="x"&&r!==s&&(eE(n,i,o.top),tE(n,{line:t,target:i,color:s,scale:a,property:l}),n.restore(),n.save(),eE(n,i,o.bottom)),tE(n,{line:t,target:i,color:r,scale:a,property:l}),n.restore()}function eE(n,e,t){const{segments:i,points:s}=e;let r=!0,o=!1;n.beginPath();for(const a of i){const{start:l,end:c}=a,u=s[l],d=s[hm(l,c,s)];r?(n.moveTo(u.x,u.y),r=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function tE(n,e){const{line:t,target:i,property:s,color:r,scale:o}=e,a=aH(t,i,s);for(const{source:l,target:c,start:u,end:d}of a){const{style:{backgroundColor:f=r}={}}=l,g=i!==!0;n.save(),n.fillStyle=f,SH(n,o,g&&pg(s,u,d)),n.beginPath();const m=!!t.pathSegment(n,l);let _;if(g){m?n.closePath():nE(n,i,d,s);const y=!!i.pathSegment(n,c,{move:m,reverse:!0});_=m&&y,_||nE(n,i,u,s)}n.closePath(),n.fill(_?"evenodd":"nonzero"),n.restore()}}function SH(n,e,t){const{top:i,bottom:s}=e.chart.chartArea,{property:r,start:o,end:a}=t||{};r==="x"&&(n.beginPath(),n.rect(o,i,a-o,s-i),n.clip())}function nE(n,e,t,i){const s=e.interpolate(t,i);s&&n.lineTo(s.x,s.y)}var IH={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,s=[];let r,o,a,l;for(o=0;o<i;++o)r=n.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof es&&(l={visible:n.isDatasetVisible(o),index:o,fill:uH(a,o,i),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,s.push(l);for(o=0;o<i;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=cH(s,o,t.propagate))},beforeDraw(n,e,t){const i=t.drawTime==="beforeDraw",s=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),i&&a.fill&&nf(n.ctx,a,r))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const r=i[s].$filler;Zb(r)&&nf(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!Zb(i)||t.drawTime!=="beforeDatasetDraw"||nf(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const iE=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},CH=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class sE extends Vi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Ge(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=bt(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=iE(i,r);let c,u;t.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let d=e;r.textAlign="left",r.textBaseline="middle";let f=-1,g=-u;return this.legendItems.forEach((m,_)=>{const y=i+t/2+r.measureText(m.text).width;(_===0||c[c.length-1]+y+2*a>o)&&(d+=u,c[c.length-(_>0?0:1)]=0,g+=u,f++),l[_]={left:0,top:g,row:f,width:y,height:s},c[c.length-1]+=y+a}),d}_fitCols(e,t,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,f=0,g=0,m=0,_=0;return this.legendItems.forEach((y,E)=>{const{itemWidth:I,itemHeight:R}=xH(i,t,r,y,s);E>0&&g+R+2*a>u&&(d+=f+a,c.push({width:f,height:g}),m+=f+a,_++,f=g=0),l[E]={left:m,top:g,col:_,width:I,height:R},f=Math.max(f,I),g+=R+a}),d+=f,c.push({width:f,height:g}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:s},rtl:r}}=this,o=io(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Wt(i,this.left+s,this.right-this.lineWidths[a]);for(const c of t)a!==c.row&&(a=c.row,l=Wt(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Wt(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of t)c.col!==a&&(a=c.col,l=Wt(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;qh(e,this),this._draw(),Gh(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:s}=this,{align:r,labels:o}=e,a=it.color,l=io(e.rtl,this.left,this.width),c=bt(o.font),{padding:u}=o,d=c.size,f=d/2;let g;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:m,boxHeight:_,itemHeight:y}=iE(o,d),E=function(N,T,b){if(isNaN(m)||m<=0||isNaN(_)||_<0)return;s.save();const w=Ee(b.lineWidth,1);if(s.fillStyle=Ee(b.fillStyle,a),s.lineCap=Ee(b.lineCap,"butt"),s.lineDashOffset=Ee(b.lineDashOffset,0),s.lineJoin=Ee(b.lineJoin,"miter"),s.lineWidth=w,s.strokeStyle=Ee(b.strokeStyle,a),s.setLineDash(Ee(b.lineDash,[])),o.usePointStyle){const C={radius:_*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:w},x=l.xPlus(N,m/2),O=T+f;IS(s,C,x,O,o.pointStyleWidth&&m)}else{const C=T+Math.max((d-_)/2,0),x=l.leftForLtr(N,m),O=sr(b.borderRadius);s.beginPath(),Object.values(O).some(k=>k!==0)?cl(s,{x,y:C,w:m,h:_,radius:O}):s.rect(x,C,m,_),s.fill(),w!==0&&s.stroke()}s.restore()},I=function(N,T,b){mr(s,b.text,N,T+y/2,c,{strikethrough:b.hidden,textAlign:l.textAlign(b.textAlign)})},R=this.isHorizontal(),S=this._computeTitleHeight();R?g={x:Wt(r,this.left+u,this.right-i[0]),y:this.top+u+S,line:0}:g={x:this.left+u,y:Wt(r,this.top+S+u,this.bottom-t[0].height),line:0},OS(this.ctx,e.textDirection);const D=y+u;this.legendItems.forEach((N,T)=>{s.strokeStyle=N.fontColor,s.fillStyle=N.fontColor;const b=s.measureText(N.text).width,w=l.textAlign(N.textAlign||(N.textAlign=o.textAlign)),C=m+f+b;let x=g.x,O=g.y;l.setWidth(this.width),R?T>0&&x+C+u>this.right&&(O=g.y+=D,g.line++,x=g.x=Wt(r,this.left+u,this.right-i[g.line])):T>0&&O+D>this.bottom&&(x=g.x=x+t[g.line].width+u,g.line++,O=g.y=Wt(r,this.top+S+u,this.bottom-t[g.line].height));const k=l.x(x);if(E(k,O,N),x=KF(w,x+m+f,R?x+C:this.right,e.rtl),I(l.x(x),O,N),R)g.x+=C+u;else if(typeof N.text!="string"){const $e=c.lineHeight;g.y+=rI(N,$e)+u}else g.y+=D}),NS(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=bt(t.font),s=Lt(t.padding);if(!t.display)return;const r=io(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=i.size/2,c=s.top+l;let u,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,d=Wt(e.align,d,this.right-f);else{const m=this.columnSizes.reduce((_,y)=>Math.max(_,y.height),0);u=c+Wt(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const g=Wt(a,d,d+f);o.textAlign=r.textAlign(nm(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,mr(o,t.text,g,u,i)}_computeTitleHeight(){const e=this.options.title,t=bt(e.font),i=Lt(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,s,r;if(Ti(e,this.left,this.right)&&Ti(t,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],Ti(e,s.left,s.left+s.width)&&Ti(t,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!kH(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,r=CH(s,i);s&&!r&&Ge(t.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!r&&Ge(t.onHover,[e,i,this],this)}else i&&Ge(t.onClick,[e,i,this],this)}}function xH(n,e,t,i,s){const r=RH(i,n,e,t),o=DH(s,i,e.lineHeight);return{itemWidth:r,itemHeight:o}}function RH(n,e,t,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),e+t.size/2+i.measureText(s).width}function DH(n,e,t){let i=n;return typeof e.text!="string"&&(i=rI(e,t)),i}function rI(n,e){const t=n.text?n.text.length:0;return e*t}function kH(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var PH={id:"legend",_element:sE,start(n,e,t){const i=n.legend=new sE({ctx:n.ctx,options:t,chart:n});Jt.configure(n,i,t),Jt.addBox(n,i)},stop(n){Jt.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;Jt.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,s=t.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(t?0:void 0),u=Lt(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class dm extends Vi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const s=tt(i.text)?i.text.length:1;this._padding=Lt(i.padding);const r=s*bt(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:s,right:r,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Wt(a,i,r),d=t+e,c=r-i):(o.position==="left"?(u=i+e,d=Wt(a,s,t),l=st*-.5):(u=r-e,d=Wt(a,t,s),l=st*.5),c=s-t),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=bt(t.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);mr(e,t.text,0,0,i,{color:t.color,maxWidth:l,rotation:c,textAlign:nm(t.align),textBaseline:"middle",translation:[o,a]})}}function MH(n,e){const t=new dm({ctx:n.ctx,options:e,chart:n});Jt.configure(n,t,e),Jt.addBox(n,t),n.titleBlock=t}var OH={id:"title",_element:dm,start(n,e,t){MH(n,t)},stop(n){const e=n.titleBlock;Jt.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;Jt.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const bc=new WeakMap;var NH={id:"subtitle",start(n,e,t){const i=new dm({ctx:n.ctx,options:t,chart:n});Jt.configure(n,i,t),Jt.addBox(n,i),bc.set(n,i)},stop(n){Jt.removeBox(n,bc.get(n)),bc.delete(n)},beforeUpdate(n,e,t){const i=bc.get(n);Jt.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const da={average(n){if(!n.length)return!1;let e,t,i=new Set,s=0,r=0;for(e=0,t=n.length;e<t;++e){const a=n[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),s+=l.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:s/r}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=n.length;r<o;++r){const l=n[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=ag(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,i=l.y}return{x:t,y:i}}};function zn(n,e){return e&&(tt(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function pi(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function LH(n,e){const{element:t,datasetIndex:i,index:s}=e,r=n.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:n,label:o,parsed:r.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:t}}function rE(n,e){const t=n.chart.ctx,{body:i,footer:s,title:r}=n,{boxWidth:o,boxHeight:a}=e,l=bt(e.bodyFont),c=bt(e.titleFont),u=bt(e.footerFont),d=r.length,f=s.length,g=i.length,m=Lt(e.padding);let _=m.height,y=0,E=i.reduce((S,D)=>S+D.before.length+D.lines.length+D.after.length,0);if(E+=n.beforeBody.length+n.afterBody.length,d&&(_+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),E){const S=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;_+=g*S+(E-g)*l.lineHeight+(E-1)*e.bodySpacing}f&&(_+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let I=0;const R=function(S){y=Math.max(y,t.measureText(S).width+I)};return t.save(),t.font=c.string,ze(n.title,R),t.font=l.string,ze(n.beforeBody.concat(n.afterBody),R),I=e.displayColors?o+2+e.boxPadding:0,ze(i,S=>{ze(S.before,R),ze(S.lines,R),ze(S.after,R)}),I=0,t.font=u.string,ze(n.footer,R),t.restore(),y+=m.width,{width:y,height:_}}function VH(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function FH(n,e,t,i){const{x:s,width:r}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&s+r+o>e.width||n==="right"&&s-r-o<0)return!0}function BH(n,e,t,i){const{x:s,width:r}=t,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),FH(c,n,e,t)&&(c="center"),c}function oE(n,e,t){const i=t.yAlign||e.yAlign||VH(n,t);return{xAlign:t.xAlign||e.xAlign||BH(n,e,t,i),yAlign:i}}function UH(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function HH(n,e,t){let{y:i,height:s}=n;return e==="top"?i+=t:e==="bottom"?i-=s+t:i-=s/2,i}function aE(n,e,t,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=n,{xAlign:a,yAlign:l}=t,c=s+r,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:g}=sr(o);let m=UH(e,a);const _=HH(e,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,f)+s:a==="right"&&(m+=Math.max(d,g)+s),{x:Ct(m,0,i.width-e.width),y:Ct(_,0,i.height-e.height)}}function Ec(n,e,t){const i=Lt(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function lE(n){return zn([],pi(n))}function jH(n,e,t){return xs(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function cE(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const oI={beforeTitle:fi,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:fi,beforeBody:fi,beforeLabel:fi,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return Te(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:fi,afterBody:fi,beforeFooter:fi,footer:fi,afterFooter:fi};function ln(n,e,t,i){const s=n[e].call(t,i);return typeof s>"u"?oI[e].call(t,i):s}class mg extends Vi{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&t.options.animation&&i.animations,r=new BS(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=jH(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,s=ln(i,"beforeTitle",this,e),r=ln(i,"title",this,e),o=ln(i,"afterTitle",this,e);let a=[];return a=zn(a,pi(s)),a=zn(a,pi(r)),a=zn(a,pi(o)),a}getBeforeBody(e,t){return lE(ln(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,s=[];return ze(e,r=>{const o={before:[],lines:[],after:[]},a=cE(i,r);zn(o.before,pi(ln(a,"beforeLabel",this,r))),zn(o.lines,ln(a,"label",this,r)),zn(o.after,pi(ln(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(e,t){return lE(ln(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,s=ln(i,"beforeFooter",this,e),r=ln(i,"footer",this,e),o=ln(i,"afterFooter",this,e);let a=[];return a=zn(a,pi(s)),a=zn(a,pi(r)),a=zn(a,pi(o)),a}_createItems(e){const t=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=t.length;l<c;++l)a.push(LH(this.chart,t[l]));return e.filter&&(a=a.filter((u,d,f)=>e.filter(u,d,f,i))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,i))),ze(a,u=>{const d=cE(e.callbacks,u);s.push(ln(d,"labelColor",this,u)),r.push(ln(d,"labelPointStyle",this,u)),o.push(ln(d,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,t){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=da[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=rE(this,i),c=Object.assign({},a,l),u=oE(this.chart,i,c),d=aE(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,s){const r=this.getCaretPosition(e,i,s);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=sr(a),{x:f,y:g}=e,{width:m,height:_}=t;let y,E,I,R,S,D;return r==="center"?(S=g+_/2,s==="left"?(y=f,E=y-o,R=S+o,D=S-o):(y=f+m,E=y+o,R=S-o,D=S+o),I=y):(s==="left"?E=f+Math.max(l,u)+o:s==="right"?E=f+m-Math.max(c,d)-o:E=this.caretX,r==="top"?(R=g,S=R-o,y=E-o,I=E+o):(R=g+_,S=R+o,y=E+o,I=E-o),D=R),{x1:y,x2:E,x3:I,y1:R,y2:S,y3:D}}drawTitle(e,t,i){const s=this.title,r=s.length;let o,a,l;if(r){const c=io(i.rtl,this.x,this.width);for(e.x=Ec(this,i.titleAlign,i),t.textAlign=c.textAlign(i.titleAlign),t.textBaseline="middle",o=bt(i.titleFont),a=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,l=0;l<r;++l)t.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===r&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,t,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,u=bt(r.bodyFont),d=Ec(this,"left",r),f=s.x(d),g=l<u.lineHeight?(u.lineHeight-l)/2:0,m=t.y+g;if(r.usePointStyle){const _={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},y=s.leftForLtr(f,c)+c/2,E=m+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,cg(e,_,y,E),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,cg(e,_,y,E)}else{e.lineWidth=xe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const _=s.leftForLtr(f,c),y=s.leftForLtr(s.xPlus(f,1),c-2),E=sr(o.borderRadius);Object.values(E).some(I=>I!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,cl(e,{x:_,y:m,w:c,h:l,radius:E}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),cl(e,{x:y,y:m+1,w:c-2,h:l-2,radius:E}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(_,m,c,l),e.strokeRect(_,m,c,l),e.fillStyle=o.backgroundColor,e.fillRect(y,m+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,d=bt(i.bodyFont);let f=d.lineHeight,g=0;const m=io(i.rtl,this.x,this.width),_=function(b){t.fillText(b,m.x(e.x+g),e.y+f/2),e.y+=f+r},y=m.textAlign(o);let E,I,R,S,D,N,T;for(t.textAlign=o,t.textBaseline="middle",t.font=d.string,e.x=Ec(this,y,i),t.fillStyle=i.bodyColor,ze(this.beforeBody,_),g=a&&y!=="right"?o==="center"?c/2+u:c+2+u:0,S=0,N=s.length;S<N;++S){for(E=s[S],I=this.labelTextColors[S],t.fillStyle=I,ze(E.before,_),R=E.lines,a&&R.length&&(this._drawColorBox(t,e,S,m,i),f=Math.max(d.lineHeight,l)),D=0,T=R.length;D<T;++D)_(R[D]),f=d.lineHeight;ze(E.after,_)}g=0,f=d.lineHeight,ze(this.afterBody,_),e.y-=r}drawFooter(e,t,i){const s=this.footer,r=s.length;let o,a;if(r){const l=io(i.rtl,this.x,this.width);for(e.x=Ec(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=l.textAlign(i.footerAlign),t.textBaseline="middle",o=bt(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,a=0;a<r;++a)t.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:d,topRight:f,bottomLeft:g,bottomRight:m}=sr(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(a+d,l),o==="top"&&this.drawCaret(e,t,i,s),t.lineTo(a+c-f,l),t.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&r==="right"&&this.drawCaret(e,t,i,s),t.lineTo(a+c,l+u-m),t.quadraticCurveTo(a+c,l+u,a+c-m,l+u),o==="bottom"&&this.drawCaret(e,t,i,s),t.lineTo(a+g,l+u),t.quadraticCurveTo(a,l+u,a,l+u-g),o==="center"&&r==="left"&&this.drawCaret(e,t,i,s),t.lineTo(a,l+d),t.quadraticCurveTo(a,l,a+d,l),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=da[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=rE(this,e),l=Object.assign({},o,this._size),c=oE(t,e,l),u=aE(e,l,c,t);(s._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Lt(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,s,t),OS(e,t.textDirection),r.y+=o.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),NS(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Hu(i,s),o=this._positionChanged(s,t);(r||o)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(e,r,t,i),a=this._positionChanged(o,e),l=t||!Hu(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,i,s){const r=this.options;if(e.type==="mouseout")return[];if(!s)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:i,caretY:s,options:r}=this,o=da[r.position].call(this,e,t);return o!==!1&&(i!==o.x||s!==o.y)}}J(mg,"positioners",da);var zH={id:"tooltip",_element:mg,positioners:da,afterInit(n,e,t){t&&(n.tooltip=new mg({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:oI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},WH=Object.freeze({__proto__:null,Colors:nH,Decimation:oH,Filler:IH,Legend:PH,SubTitle:NH,Title:OH,Tooltip:zH});const $H=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function qH(n,e,t,i){const s=n.indexOf(e);if(s===-1)return $H(n,e,t,i);const r=n.lastIndexOf(e);return s!==r?t:s}const GH=(n,e)=>n===null?null:Ct(Math.round(n),0,e);function uE(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class _g extends Tr{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:s,label:r}of t)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Te(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:qH(i,e,Ee(t,e),this._addedLabels),GH(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=e===0&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=t;o++)s.push({value:o});return s}getLabelForValue(e){return uE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}J(_g,"id","category"),J(_g,"defaults",{ticks:{callback:uE}});function KH(n,e){const t=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:f}=n,g=r||1,m=u-1,{min:_,max:y}=e,E=!Te(o),I=!Te(a),R=!Te(c),S=(y-_)/(d+1);let D=rb((y-_)/m/g)*g,N,T,b,w;if(D<1e-14&&!E&&!I)return[{value:_},{value:y}];w=Math.ceil(y/D)-Math.floor(_/D),w>m&&(D=rb(w*D/m/g)*g),Te(l)||(N=Math.pow(10,l),D=Math.ceil(D*N)/N),s==="ticks"?(T=Math.floor(_/D)*D,b=Math.ceil(y/D)*D):(T=_,b=y),E&&I&&r&&HF((a-o)/r,D/1e3)?(w=Math.round(Math.min((a-o)/D,u)),D=(a-o)/w,T=o,b=a):R?(T=E?o:T,b=I?a:b,w=c-1,D=(b-T)/w):(w=(b-T)/D,Da(w,Math.round(w),D/1e3)?w=Math.round(w):w=Math.ceil(w));const C=Math.max(ob(D),ob(T));N=Math.pow(10,Te(l)?C:l),T=Math.round(T*N)/N,b=Math.round(b*N)/N;let x=0;for(E&&(f&&T!==o?(t.push({value:o}),T<o&&x++,Da(Math.round((T+x*D)*N)/N,o,hE(o,S,n))&&x++):T<o&&x++);x<w;++x){const O=Math.round((T+x*D)*N)/N;if(I&&O>a)break;t.push({value:O})}return I&&f&&b!==a?t.length&&Da(t[t.length-1].value,a,hE(a,S,n))?t[t.length-1].value=a:t.push({value:a}):(!I||b===a)&&t.push({value:b}),t}function hE(n,e,{horizontal:t,minRotation:i}){const s=Nn(i),r=(t?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+n).length;return Math.min(e/r,o)}class Ku extends Tr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Te(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=t?s:l,a=l=>r=i?r:l;if(e){const l=ti(s),c=ti(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),e||o(s-l)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),t=t||11),t&&(s=Math.min(t,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},r=this._range||this,o=KH(s,r);return e.bounds==="ticks"&&_S(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-t)/Math.max(e.length-1,1)/2;t-=s,i+=s}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return Pl(e,this.chart.options.locale,this.options.ticks.format)}}class vg extends Ku{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ft(e)?e:0,this.max=ft(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=Nn(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}J(vg,"id","linear"),J(vg,"defaults",{ticks:{callback:$h.formatters.numeric}});const hl=n=>Math.floor(Zi(n)),Us=(n,e)=>Math.pow(10,hl(n)+e);function dE(n){return n/Math.pow(10,hl(n))===1}function fE(n,e,t){const i=Math.pow(10,t),s=Math.floor(n/i);return Math.ceil(e/i)-s}function QH(n,e){const t=e-n;let i=hl(t);for(;fE(n,e,i)>10;)i++;for(;fE(n,e,i)<10;)i--;return Math.min(i,hl(n))}function YH(n,{min:e,max:t}){e=mn(n.min,e);const i=[],s=hl(e);let r=QH(e,t),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=s>r?Math.pow(10,s):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((c-u)/Math.pow(10,r)),f=mn(n.min,Math.round((l+u+d*Math.pow(10,r))*o)/o);for(;f<t;)i.push({value:f,major:dE(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(r++,d=2,o=r>=0?1:o),f=Math.round((l+u+d*Math.pow(10,r))*o)/o;const g=mn(n.max,f);return i.push({value:g,major:dE(g),significand:d}),i}class yg extends Tr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=Ku.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return ft(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ft(e)?Math.max(0,e):null,this.max=ft(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ft(this._userMin)&&(this.min=e===Us(this.min,0)?Us(this.min,-1):Us(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,s=this.max;const r=a=>i=e?i:a,o=a=>s=t?s:a;i===s&&(i<=0?(r(1),o(10)):(r(Us(i,-1)),o(Us(s,1)))),i<=0&&r(Us(s,-1)),s<=0&&o(Us(i,1)),this.min=i,this.max=s}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},i=YH(t,this);return e.bounds==="ticks"&&_S(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":Pl(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Zi(e),this._valueRange=Zi(this.max)-Zi(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Zi(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}J(yg,"id","logarithmic"),J(yg,"defaults",{ticks:{callback:$h.formatters.logarithmic,major:{enabled:!0}}});function bg(n){const e=n.ticks;if(e.display&&n.display){const t=Lt(e.backdropPadding);return Ee(e.font&&e.font.size,it.font.size)+t.height}return 0}function XH(n,e,t){return t=tt(t)?t:[t],{w:s2(n,e.string,t),h:t.length*e.lineHeight}}function gE(n,e,t,i,s){return n===i||n===s?{start:e-t/2,end:e+t/2}:n<i||n>s?{start:e-t,end:e}:{start:e,end:e+t}}function JH(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],s=[],r=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?st/r:0;for(let l=0;l<r;l++){const c=o.setContext(n.getPointLabelContext(l));s[l]=c.padding;const u=n.getPointPosition(l,n.drawingArea+s[l],a),d=bt(c.font),f=XH(n.ctx,d,n._pointLabels[l]);i[l]=f;const g=vn(n.getIndexAngle(l)+a),m=Math.round(em(g)),_=gE(m,u.x,f.w,0,180),y=gE(m,u.y,f.h,90,270);ZH(t,e,g,_,y)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=nj(n,i,s)}function ZH(n,e,t,i,s){const r=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/r,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/r,n.r=Math.max(n.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/o,n.t=Math.min(n.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,n.b=Math.max(n.b,e.b+l))}function ej(n,e,t){const i=n.drawingArea,{extra:s,additionalAngle:r,padding:o,size:a}=t,l=n.getPointPosition(e,i+s+o,r),c=Math.round(em(vn(l.angle+mt))),u=rj(l.y,a.h,c),d=ij(c),f=sj(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:f,top:u,right:f+a.w,bottom:u+a.h}}function tj(n,e){if(!e)return!0;const{left:t,top:i,right:s,bottom:r}=n;return!(Ii({x:t,y:i},e)||Ii({x:t,y:r},e)||Ii({x:s,y:i},e)||Ii({x:s,y:r},e))}function nj(n,e,t){const i=[],s=n._pointLabels.length,r=n.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:bg(r)/2,additionalAngle:o?st/s:0};let c;for(let u=0;u<s;u++){l.padding=t[u],l.size=e[u];const d=ej(n,u,l);i.push(d),a==="auto"&&(d.visible=tj(d,c),d.visible&&(c=d))}return i}function ij(n){return n===0||n===180?"center":n<180?"left":"right"}function sj(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function rj(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function oj(n,e,t){const{left:i,top:s,right:r,bottom:o}=t,{backdropColor:a}=e;if(!Te(a)){const l=sr(e.borderRadius),c=Lt(e.backdropPadding);n.fillStyle=a;const u=i-c.left,d=s-c.top,f=r-i+c.width,g=o-s+c.height;Object.values(l).some(m=>m!==0)?(n.beginPath(),cl(n,{x:u,y:d,w:f,h:g,radius:l}),n.fill()):n.fillRect(u,d,f,g)}}function aj(n,e){const{ctx:t,options:{pointLabels:i}}=n;for(let s=e-1;s>=0;s--){const r=n._pointLabelItems[s];if(!r.visible)continue;const o=i.setContext(n.getPointLabelContext(s));oj(t,o,r);const a=bt(o.font),{x:l,y:c,textAlign:u}=r;mr(t,n._pointLabels[s],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function aI(n,e,t,i){const{ctx:s}=n;if(t)s.arc(n.xCenter,n.yCenter,e,0,nt);else{let r=n.getPointPosition(0,e);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=n.getPointPosition(o,e),s.lineTo(r.x,r.y)}}function lj(n,e,t,i,s){const r=n.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||t<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(s.dash||[]),r.lineDashOffset=s.dashOffset,r.beginPath(),aI(n,t,o,i),r.closePath(),r.stroke(),r.restore())}function cj(n,e,t){return xs(n,{label:t,index:e,type:"pointLabel"})}class fa extends Ku{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Lt(bg(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=ft(e)&&!isNaN(e)?e:0,this.max=ft(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/bg(this.options))}generateTickLabels(e){Ku.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{const s=Ge(this.options.pointLabels.callback,[t,i],this);return s||s===0?s:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?JH(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,s){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,s))}getIndexAngle(e){const t=nt/(this._pointLabels.length||1),i=this.options.startAngle||0;return vn(e*t+Nn(i))}getDistanceFromCenterForValue(e){if(Te(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Te(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return cj(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const s=this.getIndexAngle(e)-mt+i;return{x:Math.cos(s)*t+this.xCenter,y:Math.sin(s)*t+this.yCenter,angle:s}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:s,bottom:r}=this._pointLabelItems[e];return{left:t,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),aI(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:s,border:r}=t,o=this._pointLabels.length;let a,l,c;if(t.pointLabels.display&&aj(this,o),s.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(d),g=s.setContext(f),m=r.setContext(f);lj(this,g,l,o,m)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:f}=u;!f||!d||(e.lineWidth=f,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;const c=i.setContext(this.getContext(l)),u=bt(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const d=Lt(c.backdropPadding);e.fillRect(-o/2-d.left,-r-u.size/2-d.top,o+d.width,u.size+d.height)}mr(e,a.label,0,-r,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}J(fa,"id","radialLinear"),J(fa,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:$h.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),J(fa,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),J(fa,"descriptors",{angleLines:{_fallback:"grid"}});const Yh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},hn=Object.keys(Yh);function pE(n,e){return n-e}function mE(n,e){if(Te(e))return null;const t=n._adapter,{parser:i,round:s,isoWeekday:r}=n._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),ft(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(s&&(o=s==="week"&&(bo(r)||r===!0)?t.startOf(o,"isoWeek",r):t.startOf(o,s)),+o)}function _E(n,e,t,i){const s=hn.length;for(let r=hn.indexOf(n);r<s-1;++r){const o=Yh[hn[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return hn[r]}return hn[s-1]}function uj(n,e,t,i,s){for(let r=hn.length-1;r>=hn.indexOf(t);r--){const o=hn[r];if(Yh[o].common&&n._adapter.diff(s,i,o)>=e-1)return o}return hn[t?hn.indexOf(t):0]}function hj(n){for(let e=hn.indexOf(n)+1,t=hn.length;e<t;++e)if(Yh[hn[e]].common)return hn[e]}function vE(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:s}=tm(t,e),r=t[i]>=e?t[i]:t[s];n[r]=!0}}function dj(n,e,t,i){const s=n._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=t[a],l>=0&&(e[l].major=!0);return e}function yE(n,e,t){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return r===0||!t?i:dj(n,i,s,t)}class dl extends Tr{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),s=this._adapter=new bB._date(e.adapters.date);s.init(t),Ra(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:mE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=ft(s)&&!isNaN(s)?s:+t.startOf(Date.now(),i),r=ft(r)&&!isNaN(r)?r:+t.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=$F(s,r,o);return this._unit=t.unit||(i.autoSkip?_E(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):uj(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:hj(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),yE(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,s,r;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?t=1-s:t=(this.getDecimalForValue(e[1])-s)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=Ct(t,0,o),i=Ct(i,0,o),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||_E(r.minUnit,t,i,this._getLabelCapacity(t)),a=Ee(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=bo(l)||l===!0,u={};let d=t,f,g;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(i,t,o)>1e5*a)throw new Error(t+" and "+i+" are too far apart with stepSize of "+a+" "+o);const m=s.ticks.source==="data"&&this.getDataTimestamps();for(f=d,g=0;f<i;f=+e.add(f,a,o),g++)vE(u,f,m);return(f===i||s.bounds==="ticks"||g===1)&&vE(u,f,m),Object.keys(u).sort(pE).map(_=>+_)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,r=this._unit,o=t||s[r];return this._adapter.format(e,o)}_tickFormatFunction(e,t,i,s){const r=this.options,o=r.ticks.callback;if(o)return Ge(o,[e,t,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],f=i[t],g=c&&d&&f&&f.major;return this._adapter.format(e,s||(g?d:u))}generateTickLabels(e){let t,i,s;for(t=0,i=e.length;t<i;++t)s=e[t],s.label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,s=Nn(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,s=i[t.unit]||i.millisecond,r=this._tickFormatFunction(e,0,yE(this,[e],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,i=s.length;t<i;++t)e=e.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const s=this.getLabels();for(t=0,i=s.length;t<i;++t)e.push(mE(this,s[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return bS(e.sort(pE))}}J(dl,"id","time"),J(dl,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function wc(n,e,t){let i=0,s=n.length-1,r,o,a,l;t?(e>=n[i].pos&&e<=n[s].pos&&({lo:i,hi:s}=Si(n,"pos",e)),{pos:r,time:a}=n[i],{pos:o,time:l}=n[s]):(e>=n[i].time&&e<=n[s].time&&({lo:i,hi:s}=Si(n,"time",e)),{time:r,pos:a}=n[i],{time:o,pos:l}=n[s]);const c=o-r;return c?a+(l-a)*(e-r)/c:a}class Eg extends dl{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=wc(t,this.min),this._tableRange=wc(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,s=[],r=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=t&&c<=i&&s.push(c);if(s.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(wc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return wc(this._table,i*this._tableRange+this._minPos,!0)}}J(Eg,"id","timeseries"),J(Eg,"defaults",dl.defaults);var fj=Object.freeze({__proto__:null,CategoryScale:_g,LinearScale:vg,LogarithmicScale:yg,RadialLinearScale:fa,TimeScale:dl,TimeSeriesScale:Eg});const gj=[yB,QU,WH,fj];Mn.register(...gj);/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var bE=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var n=window.screen;if(n)return(n.deviceXDPI||1)/(n.logicalXDPI||1)}return 1}(),La={toTextLines:function(n){var e=[],t;for(n=[].concat(n);n.length;)t=n.pop(),typeof t=="string"?e.unshift.apply(e,t.split(`
`)):Array.isArray(t)?n.push.apply(n,t):Te(n)||e.unshift(""+t);return e},textSize:function(n,e,t){var i=[].concat(e),s=i.length,r=n.font,o=0,a;for(n.font=t.string,a=0;a<s;++a)o=Math.max(n.measureText(i[a]).width,o);return n.font=r,{height:s*t.lineHeight,width:o}},bound:function(n,e,t){return Math.max(n,Math.min(e,t))},arrayDiff:function(n,e){var t=n.slice(),i=[],s,r,o,a;for(s=0,o=e.length;s<o;++s)a=e[s],r=t.indexOf(a),r===-1?i.push([a,1]):t.splice(r,1);for(s=0,o=t.length;s<o;++s)i.push([t[s],-1]);return i},rasterize:function(n){return Math.round(n*bE)/bE}};function sf(n,e){var t=e.x,i=e.y;if(t===null)return{x:0,y:-1};if(i===null)return{x:1,y:0};var s=n.x-t,r=n.y-i,o=Math.sqrt(s*s+r*r);return{x:o?s/o:0,y:o?r/o:-1}}function pj(n,e,t,i,s){switch(s){case"center":t=i=0;break;case"bottom":t=0,i=1;break;case"right":t=1,i=0;break;case"left":t=-1,i=0;break;case"top":t=0,i=-1;break;case"start":t=-t,i=-i;break;case"end":break;default:s*=Math.PI/180,t=Math.cos(s),i=Math.sin(s);break}return{x:n,y:e,vx:t,vy:i}}var mj=0,lI=1,cI=2,uI=4,hI=8;function Ac(n,e,t){var i=mj;return n<t.left?i|=lI:n>t.right&&(i|=cI),e<t.top?i|=hI:e>t.bottom&&(i|=uI),i}function _j(n,e){for(var t=n.x0,i=n.y0,s=n.x1,r=n.y1,o=Ac(t,i,e),a=Ac(s,r,e),l,c,u;!(!(o|a)||o&a);)l=o||a,l&hI?(c=t+(s-t)*(e.top-i)/(r-i),u=e.top):l&uI?(c=t+(s-t)*(e.bottom-i)/(r-i),u=e.bottom):l&cI?(u=i+(r-i)*(e.right-t)/(s-t),c=e.right):l&lI&&(u=i+(r-i)*(e.left-t)/(s-t),c=e.left),l===o?(t=c,i=u,o=Ac(t,i,e)):(s=c,r=u,a=Ac(s,r,e));return{x0:t,x1:s,y0:i,y1:r}}function Tc(n,e){var t=e.anchor,i=n,s,r;return e.clamp&&(i=_j(i,e.area)),t==="start"?(s=i.x0,r=i.y0):t==="end"?(s=i.x1,r=i.y1):(s=(i.x0+i.x1)/2,r=(i.y0+i.y1)/2),pj(s,r,n.vx,n.vy,e.align)}var Sc={arc:function(n,e){var t=(n.startAngle+n.endAngle)/2,i=Math.cos(t),s=Math.sin(t),r=n.innerRadius,o=n.outerRadius;return Tc({x0:n.x+i*r,y0:n.y+s*r,x1:n.x+i*o,y1:n.y+s*o,vx:i,vy:s},e)},point:function(n,e){var t=sf(n,e.origin),i=t.x*n.options.radius,s=t.y*n.options.radius;return Tc({x0:n.x-i,y0:n.y-s,x1:n.x+i,y1:n.y+s,vx:t.x,vy:t.y},e)},bar:function(n,e){var t=sf(n,e.origin),i=n.x,s=n.y,r=0,o=0;return n.horizontal?(i=Math.min(n.x,n.base),r=Math.abs(n.base-n.x)):(s=Math.min(n.y,n.base),o=Math.abs(n.base-n.y)),Tc({x0:i,y0:s+o,x1:i+r,y1:s,vx:t.x,vy:t.y},e)},fallback:function(n,e){var t=sf(n,e.origin);return Tc({x0:n.x,y0:n.y,x1:n.x+(n.width||0),y1:n.y+(n.height||0),vx:t.x,vy:t.y},e)}},Ci=La.rasterize;function vj(n){var e=n.borderWidth||0,t=n.padding,i=n.size.height,s=n.size.width,r=-s/2,o=-i/2;return{frame:{x:r-t.left-e,y:o-t.top-e,w:s+t.width+e*2,h:i+t.height+e*2},text:{x:r,y:o,w:s,h:i}}}function yj(n,e){var t=e.chart.getDatasetMeta(e.datasetIndex).vScale;if(!t)return null;if(t.xCenter!==void 0&&t.yCenter!==void 0)return{x:t.xCenter,y:t.yCenter};var i=t.getBasePixel();return n.horizontal?{x:i,y:null}:{x:null,y:i}}function bj(n){return n instanceof Wr?Sc.arc:n instanceof Oa?Sc.point:n instanceof Na?Sc.bar:Sc.fallback}function Ej(n,e,t,i,s,r){var o=Math.PI/2;if(r){var a=Math.min(r,s/2,i/2),l=e+a,c=t+a,u=e+i-a,d=t+s-a;n.moveTo(e,c),l<u&&c<d?(n.arc(l,c,a,-Math.PI,-o),n.arc(u,c,a,-o,0),n.arc(u,d,a,0,o),n.arc(l,d,a,o,Math.PI)):l<u?(n.moveTo(l,t),n.arc(u,c,a,-o,o),n.arc(l,c,a,o,Math.PI+o)):c<d?(n.arc(l,c,a,-Math.PI,0),n.arc(l,d,a,0,Math.PI)):n.arc(l,c,a,-Math.PI,Math.PI),n.closePath(),n.moveTo(e,t)}else n.rect(e,t,i,s)}function wj(n,e,t){var i=t.backgroundColor,s=t.borderColor,r=t.borderWidth;!i&&(!s||!r)||(n.beginPath(),Ej(n,Ci(e.x)+r/2,Ci(e.y)+r/2,Ci(e.w)-r,Ci(e.h)-r,t.borderRadius),n.closePath(),i&&(n.fillStyle=i,n.fill()),s&&r&&(n.strokeStyle=s,n.lineWidth=r,n.lineJoin="miter",n.stroke()))}function Aj(n,e,t){var i=t.lineHeight,s=n.w,r=n.x,o=n.y+i/2;return e==="center"?r+=s/2:(e==="end"||e==="right")&&(r+=s),{h:i,w:s,x:r,y:o}}function Tj(n,e,t){var i=n.shadowBlur,s=t.stroked,r=Ci(t.x),o=Ci(t.y),a=Ci(t.w);s&&n.strokeText(e,r,o,a),t.filled&&(i&&s&&(n.shadowBlur=0),n.fillText(e,r,o,a),i&&s&&(n.shadowBlur=i))}function Sj(n,e,t,i){var s=i.textAlign,r=i.color,o=!!r,a=i.font,l=e.length,c=i.textStrokeColor,u=i.textStrokeWidth,d=c&&u,f;if(!(!l||!o&&!d))for(t=Aj(t,s,a),n.font=a.string,n.textAlign=s,n.textBaseline="middle",n.shadowBlur=i.textShadowBlur,n.shadowColor=i.textShadowColor,o&&(n.fillStyle=r),d&&(n.lineJoin="round",n.lineWidth=u,n.strokeStyle=c),f=0,l=e.length;f<l;++f)Tj(n,e[f],{stroked:d,filled:o,w:t.w,x:t.x,y:t.y+t.h*f})}var dI=function(n,e,t,i){var s=this;s._config=n,s._index=i,s._model=null,s._rects=null,s._ctx=e,s._el=t};ai(dI.prototype,{_modelize:function(n,e,t,i){var s=this,r=s._index,o=bt(et([t.font,{}],i,r)),a=et([t.color,it.color],i,r);return{align:et([t.align,"center"],i,r),anchor:et([t.anchor,"center"],i,r),area:i.chart.chartArea,backgroundColor:et([t.backgroundColor,null],i,r),borderColor:et([t.borderColor,null],i,r),borderRadius:et([t.borderRadius,0],i,r),borderWidth:et([t.borderWidth,0],i,r),clamp:et([t.clamp,!1],i,r),clip:et([t.clip,!1],i,r),color:a,display:n,font:o,lines:e,offset:et([t.offset,4],i,r),opacity:et([t.opacity,1],i,r),origin:yj(s._el,i),padding:Lt(et([t.padding,4],i,r)),positioner:bj(s._el),rotation:et([t.rotation,0],i,r)*(Math.PI/180),size:La.textSize(s._ctx,e,o),textAlign:et([t.textAlign,"start"],i,r),textShadowBlur:et([t.textShadowBlur,0],i,r),textShadowColor:et([t.textShadowColor,a],i,r),textStrokeColor:et([t.textStrokeColor,a],i,r),textStrokeWidth:et([t.textStrokeWidth,0],i,r)}},update:function(n){var e=this,t=null,i=null,s=e._index,r=e._config,o,a,l,c=et([r.display,!0],n,s);c&&(o=n.dataset.data[s],a=Ee(Ge(r.formatter,[o,n]),o),l=Te(a)?[]:La.toTextLines(a),l.length&&(t=e._modelize(c,l,r,n),i=vj(t))),e._model=t,e._rects=i},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(n,e){var t=this,i=n.ctx,s=t._model,r=t._rects,o;this.visible()&&(i.save(),s.clip&&(o=s.area,i.beginPath(),i.rect(o.left,o.top,o.right-o.left,o.bottom-o.top),i.clip()),i.globalAlpha=La.bound(0,s.opacity,1),i.translate(Ci(e.x),Ci(e.y)),i.rotate(s.rotation),wj(i,r.frame,s),Sj(i,s.lines,r.text,s),i.restore())}});var Ij=Number.MIN_SAFE_INTEGER||-9007199254740991,Cj=Number.MAX_SAFE_INTEGER||9007199254740991;function sa(n,e,t){var i=Math.cos(t),s=Math.sin(t),r=e.x,o=e.y;return{x:r+i*(n.x-r)-s*(n.y-o),y:o+s*(n.x-r)+i*(n.y-o)}}function EE(n,e){var t=Cj,i=Ij,s=e.origin,r,o,a,l,c;for(r=0;r<n.length;++r)o=n[r],a=o.x-s.x,l=o.y-s.y,c=e.vx*a+e.vy*l,t=Math.min(t,c),i=Math.max(i,c);return{min:t,max:i}}function Ic(n,e){var t=e.x-n.x,i=e.y-n.y,s=Math.sqrt(t*t+i*i);return{vx:(e.x-n.x)/s,vy:(e.y-n.y)/s,origin:n,ln:s}}var fI=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};ai(fI.prototype,{center:function(){var n=this._rect;return{x:n.x+n.w/2,y:n.y+n.h/2}},update:function(n,e,t){this._rotation=t,this._rect={x:e.x+n.x,y:e.y+n.y,w:e.w,h:e.h}},contains:function(n){var e=this,t=1,i=e._rect;return n=sa(n,e.center(),-e._rotation),!(n.x<i.x-t||n.y<i.y-t||n.x>i.x+i.w+t*2||n.y>i.y+i.h+t*2)},intersects:function(n){var e=this._points(),t=n._points(),i=[Ic(e[0],e[1]),Ic(e[0],e[3])],s,r,o;for(this._rotation!==n._rotation&&i.push(Ic(t[0],t[1]),Ic(t[0],t[3])),s=0;s<i.length;++s)if(r=EE(e,i[s]),o=EE(t,i[s]),r.max<o.min||o.max<r.min)return!1;return!0},_points:function(){var n=this,e=n._rect,t=n._rotation,i=n.center();return[sa({x:e.x,y:e.y},i,t),sa({x:e.x+e.w,y:e.y},i,t),sa({x:e.x+e.w,y:e.y+e.h},i,t),sa({x:e.x,y:e.y+e.h},i,t)]}});function gI(n,e,t){var i=e.positioner(n,e),s=i.vx,r=i.vy;if(!s&&!r)return{x:i.x,y:i.y};var o=t.w,a=t.h,l=e.rotation,c=Math.abs(o/2*Math.cos(l))+Math.abs(a/2*Math.sin(l)),u=Math.abs(o/2*Math.sin(l))+Math.abs(a/2*Math.cos(l)),d=1/Math.max(Math.abs(s),Math.abs(r));return c*=s*d,u*=r*d,c+=e.offset*s,u+=e.offset*r,{x:i.x+c,y:i.y+u}}function xj(n,e){var t,i,s,r;for(t=n.length-1;t>=0;--t)for(s=n[t].$layout,i=t-1;i>=0&&s._visible;--i)r=n[i].$layout,r._visible&&s._box.intersects(r._box)&&e(s,r);return n}function Rj(n){var e,t,i,s,r,o,a;for(e=0,t=n.length;e<t;++e)i=n[e],s=i.$layout,s._visible&&(a=new Proxy(i._el,{get:(l,c)=>l.getProps([c],!0)[c]}),r=i.geometry(),o=gI(a,i.model(),r),s._box.update(o,r,i.rotation()));return xj(n,function(l,c){var u=l._hidable,d=c._hidable;u&&d||d?c._visible=!1:u&&(l._visible=!1)})}var Va={prepare:function(n){var e=[],t,i,s,r,o;for(t=0,s=n.length;t<s;++t)for(i=0,r=n[t].length;i<r;++i)o=n[t][i],e.push(o),o.$layout={_box:new fI,_hidable:!1,_visible:!0,_set:t,_idx:o._index};return e.sort(function(a,l){var c=a.$layout,u=l.$layout;return c._idx===u._idx?u._set-c._set:u._idx-c._idx}),this.update(e),e},update:function(n){var e=!1,t,i,s,r,o;for(t=0,i=n.length;t<i;++t)s=n[t],r=s.model(),o=s.$layout,o._hidable=r&&r.display==="auto",o._visible=s.visible(),e|=o._hidable;e&&Rj(n)},lookup:function(n,e){var t,i;for(t=n.length-1;t>=0;--t)if(i=n[t].$layout,i&&i._visible&&i._box.contains(e))return n[t];return null},draw:function(n,e){var t,i,s,r,o,a;for(t=0,i=e.length;t<i;++t)s=e[t],r=s.$layout,r._visible&&(o=s.geometry(),a=gI(s._el,s.model(),o),r._box.update(a,o,s.rotation()),s.draw(n,a))}},Dj=function(n){if(Te(n))return null;var e=n,t,i,s;if(xe(n))if(!Te(n.label))e=n.label;else if(!Te(n.r))e=n.r;else for(e="",t=Object.keys(n),s=0,i=t.length;s<i;++s)e+=(s!==0?", ":"")+t[s]+": "+n[t[s]];return""+e},kj={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:Dj,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},cn="$datalabels",pI="$default";function Pj(n,e){var t=n.datalabels,i={},s=[],r,o;return t===!1?null:(t===!0&&(t={}),e=ai({},[e,t]),r=e.labels||{},o=Object.keys(r),delete e.labels,o.length?o.forEach(function(a){r[a]&&s.push(ai({},[e,r[a],{_key:a}]))}):s.push(e),i=s.reduce(function(a,l){return ze(l.listeners||{},function(c,u){a[u]=a[u]||{},a[u][l._key||pI]=c}),delete l.listeners,a},{}),{labels:s,listeners:i})}function wg(n,e,t,i){if(e){var s=t.$context,r=t.$groups,o;e[r._set]&&(o=e[r._set][r._key],o&&Ge(o,[s,i])===!0&&(n[cn]._dirty=!0,t.update(s)))}}function Mj(n,e,t,i,s){var r,o;!t&&!i||(t?i?t!==i&&(o=r=!0):o=!0:r=!0,o&&wg(n,e.leave,t,s),r&&wg(n,e.enter,i,s))}function Oj(n,e){var t=n[cn],i=t._listeners,s,r;if(!(!i.enter&&!i.leave)){if(e.type==="mousemove")r=Va.lookup(t._labels,e);else if(e.type!=="mouseout")return;s=t._hovered,t._hovered=r,Mj(n,i,s,r,e)}}function Nj(n,e){var t=n[cn],i=t._listeners.click,s=i&&Va.lookup(t._labels,e);s&&wg(n,i,s,e)}var rf={id:"datalabels",defaults:kj,beforeInit:function(n){n[cn]={_actives:[]}},beforeUpdate:function(n){var e=n[cn];e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(n,e,t){var i=e.index,s=n[cn],r=s._datasets[i]=[],o=n.isDatasetVisible(i),a=n.data.datasets[i],l=Pj(a,t),c=e.meta.data||[],u=n.ctx,d,f,g,m,_,y,E,I;for(u.save(),d=0,g=c.length;d<g;++d)if(E=c[d],E[cn]=[],o&&E&&n.getDataVisibility(d)&&!E.skip)for(f=0,m=l.labels.length;f<m;++f)_=l.labels[f],y=_._key,I=new dI(_,u,E,d),I.$groups={_set:i,_key:y||pI},I.$context={active:!1,chart:n,dataIndex:d,dataset:a,datasetIndex:i},I.update(I.$context),E[cn].push(I),r.push(I);u.restore(),ai(s._listeners,l.listeners,{merger:function(R,S,D){S[R]=S[R]||{},S[R][e.index]=D[R],s._listened=!0}})},afterUpdate:function(n){n[cn]._labels=Va.prepare(n[cn]._datasets)},afterDatasetsDraw:function(n){Va.draw(n,n[cn]._labels)},beforeEvent:function(n,e){if(n[cn]._listened){var t=e.event;switch(t.type){case"mousemove":case"mouseout":Oj(n,t);break;case"click":Nj(n,t);break}}},afterEvent:function(n){var e=n[cn],t=e._actives,i=e._actives=n.getActiveElements(),s=La.arrayDiff(t,i),r,o,a,l,c,u,d;for(r=0,o=s.length;r<o;++r)if(c=s[r],c[1])for(d=c[0].element[cn]||[],a=0,l=d.length;a<l;++a)u=d[a],u.$context.active=c[1]===1,u.update(u.$context);(e._dirty||s.length)&&(Va.update(e._labels),n.render()),delete e._dirty}};const Lj={class:"report-container"},Vj={class:"filter-box"},Fj={class:"filter-box"},Bj={class:"filter-box"},Uj={class:"charts"},Hj={key:0,class:"chart-box"},jj={key:0},zj={key:1},Wj={class:"chart-box"},$j={key:0},qj={class:"chart-box"},Gj={key:0},Kj={__name:"ReportPage",setup(n){const e=Ce(null),t=Ce(null),i=Ce(null),s=Ce([]),r=Ce(new Date().toISOString().slice(0,7)),o=Ce("combined"),a=Ce("pie");let l=null,c=null,u=null;const d=Ce(null),f=async R=>{if(!R){console.error(" : userId ");return}try{const S=await sl(_o(Zc,"users",R,"records"));s.value=S.docs.map(D=>({id:D.id,...D.data()})),console.log(" Firestore :",s.value),I()}catch(S){console.error("  Firestore :",S)}},g=lt(()=>s.value.filter(R=>R.date.startsWith(r.value))),m=lt(()=>{const R={};return g.value.forEach(S=>{S.category==="expense"&&(R[S.subCategory]=(R[S.subCategory]||0)+S.amount)}),R}),_=lt(()=>{const R={};return g.value.forEach(S=>{S.category==="income"&&(R[S.subCategory]=(R[S.subCategory]||0)+S.amount)}),R}),y=lt(()=>{const R={};return g.value.forEach(S=>{const D=`${S.category==="income"?"":""} - ${S.subCategory}`;R[D]=(R[D]||0)+S.amount}),R}),E=R=>Object.keys(R).length===0,I=async()=>{await vh(),l&&l.destroy(),c&&c.destroy(),u&&u.destroy();const R={plugins:{datalabels:{color:"black",font:{weight:"bold",size:14},formatter:(S,D)=>{const N=D.dataset.data.reduce((T,b)=>T+b,0);return(S/N*100).toFixed(1)+"%"}}}};(o.value==="combined"||o.value==="all")&&e.value&&(l=new Mn(e.value,{type:a.value,data:{labels:Object.keys(y.value),datasets:[{data:Object.values(y.value),backgroundColor:["#4BC0C0","#FF6384","#36A2EB","#FF9F40","#FFCD56"]}]},options:R,plugins:[rf]})),(o.value==="separate"||o.value==="all")&&t.value&&(c=new Mn(t.value,{type:a.value,data:{labels:Object.keys(m.value),datasets:[{data:Object.values(m.value),backgroundColor:["#FF6384","#FF9F40","#FFCD56","#4BC0C0","#36A2EB"]}]},options:R,plugins:[rf]})),(o.value==="separate"||o.value==="all")&&i.value&&(u=new Mn(i.value,{type:a.value,data:{labels:Object.keys(_.value),datasets:[{data:Object.values(_.value),backgroundColor:["#42A5F5","#66BB6A","#FFEB3B","#9E9E9E"]}]},options:R,plugins:[rf]}))};return Io(()=>{const R=Mo();yo(R,S=>{S?(d.value=S.uid,f(S.uid)):console.warn("  Firestore ")})}),Xn(r,async()=>{d.value&&await f(d.value)}),Xn(o,I),Xn(a,I),(R,S)=>(ve(),Ie("div",Lj,[S[11]||(S[11]=H("h2",null," ",-1)),H("div",Vj,[S[3]||(S[3]=H("label",null," ",-1)),Sn(H("input",{type:"month","onUpdate:modelValue":S[0]||(S[0]=D=>r.value=D),onChange:I,class:"input-field"},null,544),[[Ys,r.value]])]),H("div",Fj,[S[5]||(S[5]=H("label",null," ",-1)),Sn(H("select",{"onUpdate:modelValue":S[1]||(S[1]=D=>o.value=D),onChange:I,class:"input-field"},S[4]||(S[4]=[H("option",{value:"combined"},"",-1),H("option",{value:"separate"},"",-1),H("option",{value:"all"},"",-1)]),544),[[Ka,o.value]])]),H("div",Bj,[S[7]||(S[7]=H("label",null," ",-1)),Sn(H("select",{"onUpdate:modelValue":S[2]||(S[2]=D=>a.value=D),onChange:I,class:"input-field"},S[6]||(S[6]=[H("option",{value:"pie"},"",-1),H("option",{value:"bar"},"",-1)]),544),[[Ka,a.value]])]),H("div",Uj,[o.value==="combined"||o.value==="all"?(ve(),Ie("div",Hj,[S[8]||(S[8]=H("h3",null," ",-1)),H("canvas",{ref_key:"combinedChartRef",ref:e},null,512),E(y.value)?(ve(),Ie("p",jj," ")):yt("",!0)])):yt("",!0),o.value==="separate"||o.value==="all"?(ve(),Ie("div",zj,[H("div",Wj,[S[9]||(S[9]=H("h3",null," ",-1)),H("canvas",{ref_key:"expenseChartRef",ref:t},null,512),E(m.value)?(ve(),Ie("p",$j," ")):yt("",!0)]),H("div",qj,[S[10]||(S[10]=H("h3",null," ",-1)),H("canvas",{ref_key:"incomeChartRef",ref:i},null,512),E(_.value)?(ve(),Ie("p",Gj," ")):yt("",!0)])])):yt("",!0)])]))}},Qj=Oo(Kj,[["__scopeId","data-v-68c5f345"]]),Yj={class:"summary-container"},Xj={class:"top-section"},Jj={class:"filter-box"},Zj={class:"budget-box"},ez={key:0,class:"alert-box"},tz={key:0,class:"warning"},nz={key:1,class:"warning"},iz={key:2,class:"critical-warning"},sz={class:"summary-box"},rz={key:0,class:"warning"},oz={key:1,class:"suggest-box"},az={class:"history-box"},lz={key:0},cz={key:1},uz={__name:"DashboardSummary",setup(n){const e=Ce([]),t=Ce(new Date().toISOString().slice(0,7)),i=Ce("70"),s=Ce(0),r=Ce(0),o=Ce([]),a=Ce({}),l=Ce(null),c=async S=>{if(!S){console.error(" : userId ");return}try{const D=await sl(_o(Zc,"users",S,"records"));e.value=D.docs.map(N=>({id:N.id,...N.data()})),console.log(" Firestore :",e.value)}catch(D){console.error("  Firestore :",D)}},u=async S=>{if(!S){console.error(" : userId ");return}try{const D=await sl(_o(Zc,"users",S,"budgetHistory"));o.value=D.docs.map(N=>({id:N.id,...N.data()}))||[],console.log(" Firestore :",o.value)}catch(D){console.error("  Firestore :",D),o.value=[]}},d=lt(()=>e.value.filter(S=>S.category==="income"&&S.date.startsWith(t.value)).reduce((S,D)=>S+D.amount,0)),f=lt(()=>e.value.filter(S=>S.category==="expense"&&S.date.startsWith(t.value)).reduce((S,D)=>S+D.amount,0)),g=lt(()=>d.value-f.value),m=lt(()=>r.value>0?(f.value/r.value*100).toFixed(0):0),_=lt(()=>f.value>r.value),y=lt(()=>_.value?Object.entries(a.value).sort((S,D)=>D[1]-S[1]).map(([S])=>S).slice(0,2):[]),E=lt(()=>o.value?o.value.filter(S=>S.month===t.value):[]),I=()=>{i.value==="custom"?r.value=s.value:r.value=(d.value*(parseInt(i.value)/100)).toFixed(0),R(l.value)},R=async S=>{if(!S)return;const D={month:t.value,income:d.value,expense:f.value,budget:r.value,overBudget:f.value>r.value};try{await Kc(Ks(Zc,"users",S,"budgetHistory",t.value),D),console.log(" Firestore :",D)}catch(N){console.error(" Firestore :",N)}};return Io(()=>{const S=Mo();yo(S,D=>{D?(l.value=D.uid,c(D.uid),u(D.uid)):console.warn("  Firestore ")})}),Xn(t,async()=>{l.value&&(await c(l.value),await u(l.value))}),(S,D)=>(ve(),Ie("div",Yj,[D[18]||(D[18]=H("h2",null,"  & ",-1)),H("div",Xj,[H("div",Jj,[D[5]||(D[5]=H("label",null," ",-1)),Sn(H("input",{type:"month","onUpdate:modelValue":D[0]||(D[0]=N=>t.value=N),onChange:D[1]||(D[1]=(...N)=>S.updateSummary&&S.updateSummary(...N))},null,544),[[Ys,t.value]])]),H("div",Zj,[D[8]||(D[8]=H("h3",null," ",-1)),D[9]||(D[9]=H("label",null,"",-1)),Sn(H("select",{"onUpdate:modelValue":D[2]||(D[2]=N=>i.value=N),onChange:I},D[6]||(D[6]=[oD('<option value="50" data-v-ea72edcf>50%</option><option value="60" data-v-ea72edcf>60%</option><option value="70" data-v-ea72edcf>70%</option><option value="80" data-v-ea72edcf>80%</option><option value="90" data-v-ea72edcf>90%</option><option value="custom" data-v-ea72edcf></option>',6)]),544),[[Ka,i.value]]),i.value==="custom"?Sn((ve(),Ie("input",{key:0,type:"number","onUpdate:modelValue":D[3]||(D[3]=N=>s.value=N),placeholder:"",onInput:D[4]||(D[4]=(...N)=>S.saveCustomBudget&&S.saveCustomBudget(...N))},null,544)),[[Ys,s.value]]):yt("",!0),H("p",null,[D[7]||(D[7]=H("strong",null,"",-1)),Pn(" "+Xe(r.value)+" ",1)])])]),m.value>=80?(ve(),Ie("div",ez,[m.value>=80&&m.value<90?(ve(),Ie("p",tz,"  80% ")):yt("",!0),m.value>=90&&m.value<100?(ve(),Ie("p",nz,"  90% ")):yt("",!0),m.value>=100?(ve(),Ie("p",iz," ")):yt("",!0)])):yt("",!0),H("div",sz,[D[13]||(D[13]=H("h3",null," ",-1)),H("p",null,[D[10]||(D[10]=H("strong",null,"",-1)),Pn(" "+Xe(d.value)+" ",1)]),H("p",null,[D[11]||(D[11]=H("strong",null,"",-1)),Pn(" "+Xe(f.value)+" ",1)]),H("p",{class:tr(g.value<0?"negative":"positive")},[D[12]||(D[12]=H("strong",null,"",-1)),Pn(" "+Xe(g.value)+"  ",1)],2),g.value<0?(ve(),Ie("p",rz," ")):yt("",!0)]),_.value?(ve(),Ie("div",oz,[D[14]||(D[14]=H("h3",null," ",-1)),D[15]||(D[15]=H("p",null,"",-1)),H("ul",null,[(ve(!0),Ie(Mt,null,lr(y.value,(N,T)=>(ve(),Ie("li",{key:T},"  "+Xe(N)+""+Xe(a.value[N])+"  ",1))),128))])])):yt("",!0),H("div",az,[D[17]||(D[17]=H("h3",null," ",-1)),E.value.length===0?(ve(),Ie("p",lz,"")):(ve(),Ie("table",cz,[D[16]||(D[16]=H("thead",null,[H("tr",null,[H("th",null,""),H("th",null,""),H("th",null,""),H("th",null,""),H("th",null,"")])],-1)),H("tbody",null,[(ve(!0),Ie(Mt,null,lr(E.value,(N,T)=>(ve(),Ie("tr",{key:T},[H("td",null,Xe(N.month),1),H("td",null,Xe(N.income)+" ",1),H("td",null,Xe(N.expense)+" ",1),H("td",null,Xe(N.budget)+" ",1),H("td",null,Xe(N.overBudget?"":""),1)]))),128))])]))])]))}},hz=Oo(uz,[["__scopeId","data-v-ea72edcf"]]);var Xh,le,mI,_I,Ao,Qs,wE,vI,yI,Qu={},bI=[],dz=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function ns(n,e){for(var t in e)n[t]=e[t];return n}function EI(n){var e=n.parentNode;e&&e.removeChild(n)}function B(n,e,t){var i,s,r,o={};for(r in e)r=="key"?i=e[r]:r=="ref"?s=e[r]:o[r]=e[r];if(arguments.length>2&&(o.children=arguments.length>3?Xh.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(r in n.defaultProps)o[r]===void 0&&(o[r]=n.defaultProps[r]);return au(n,o,i,s,null)}function au(n,e,t,i,s){var r={type:n,props:e,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:s??++mI};return s==null&&le.vnode!=null&&le.vnode(r),r}function Mi(){return{current:null}}function pt(n){return n.children}function fz(n,e,t,i,s){var r;for(r in t)r==="children"||r==="key"||r in e||Yu(n,r,null,t[r],i);for(r in e)s&&typeof e[r]!="function"||r==="children"||r==="key"||r==="value"||r==="checked"||t[r]===e[r]||Yu(n,r,e[r],t[r],i)}function AE(n,e,t){e[0]==="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||dz.test(e)?t:t+"px"}function Yu(n,e,t,i,s){var r;e:if(e==="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)t&&e in t||AE(n.style,e,"");if(t)for(e in t)i&&t[e]===i[e]||AE(n.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")r=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in n?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+r]=t,t?i||n.addEventListener(e,r?SE:TE,r):n.removeEventListener(e,r?SE:TE,r);else if(e!=="dangerouslySetInnerHTML"){if(s)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e.indexOf("-")==-1?n.removeAttribute(e):n.setAttribute(e,t))}}function TE(n){Ao=!0;try{return this.l[n.type+!1](le.event?le.event(n):n)}finally{Ao=!1}}function SE(n){Ao=!0;try{return this.l[n.type+!0](le.event?le.event(n):n)}finally{Ao=!1}}function En(n,e){this.props=n,this.context=e}function fl(n,e){if(e==null)return n.__?fl(n.__,n.__.__k.indexOf(n)+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?fl(n):null}function wI(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return wI(n)}}function gz(n){Ao?setTimeout(n):vI(n)}function Ag(n){(!n.__d&&(n.__d=!0)&&Qs.push(n)&&!Xu.__r++||wE!==le.debounceRendering)&&((wE=le.debounceRendering)||gz)(Xu)}function Xu(){var n,e,t,i,s,r,o,a;for(Qs.sort(function(l,c){return l.__v.__b-c.__v.__b});n=Qs.shift();)n.__d&&(e=Qs.length,i=void 0,s=void 0,o=(r=(t=n).__v).__e,(a=t.__P)&&(i=[],(s=ns({},r)).__v=r.__v+1,fm(a,r,s,t.__n,a.ownerSVGElement!==void 0,r.__h!=null?[o]:null,i,o??fl(r),r.__h),CI(i,r),r.__e!=o&&wI(r)),Qs.length>e&&Qs.sort(function(l,c){return l.__v.__b-c.__v.__b}));Xu.__r=0}function AI(n,e,t,i,s,r,o,a,l,c){var u,d,f,g,m,_,y,E=i&&i.__k||bI,I=E.length;for(t.__k=[],u=0;u<e.length;u++)if((g=t.__k[u]=(g=e[u])==null||typeof g=="boolean"?null:typeof g=="string"||typeof g=="number"||typeof g=="bigint"?au(null,g,null,null,g):Array.isArray(g)?au(pt,{children:g},null,null,null):g.__b>0?au(g.type,g.props,g.key,g.ref?g.ref:null,g.__v):g)!=null){if(g.__=t,g.__b=t.__b+1,(f=E[u])===null||f&&g.key==f.key&&g.type===f.type)E[u]=void 0;else for(d=0;d<I;d++){if((f=E[d])&&g.key==f.key&&g.type===f.type){E[d]=void 0;break}f=null}fm(n,g,f=f||Qu,s,r,o,a,l,c),m=g.__e,(d=g.ref)&&f.ref!=d&&(y||(y=[]),f.ref&&y.push(f.ref,null,g),y.push(d,g.__c||m,g)),m!=null?(_==null&&(_=m),typeof g.type=="function"&&g.__k===f.__k?g.__d=l=TI(g,l,n):l=SI(n,g,f,E,m,l),typeof t.type=="function"&&(t.__d=l)):l&&f.__e==l&&l.parentNode!=n&&(l=fl(f))}for(t.__e=_,u=I;u--;)E[u]!=null&&(typeof t.type=="function"&&E[u].__e!=null&&E[u].__e==t.__d&&(t.__d=II(i).nextSibling),RI(E[u],E[u]));if(y)for(u=0;u<y.length;u++)xI(y[u],y[++u],y[++u])}function TI(n,e,t){for(var i,s=n.__k,r=0;s&&r<s.length;r++)(i=s[r])&&(i.__=n,e=typeof i.type=="function"?TI(i,e,t):SI(t,i,i,s,i.__e,e));return e}function Ju(n,e){return e=e||[],n==null||typeof n=="boolean"||(Array.isArray(n)?n.some(function(t){Ju(t,e)}):e.push(n)),e}function SI(n,e,t,i,s,r){var o,a,l;if(e.__d!==void 0)o=e.__d,e.__d=void 0;else if(t==null||s!=r||s.parentNode==null)e:if(r==null||r.parentNode!==n)n.appendChild(s),o=null;else{for(a=r,l=0;(a=a.nextSibling)&&l<i.length;l+=1)if(a==s)break e;n.insertBefore(s,r),o=r}return o!==void 0?o:s.nextSibling}function II(n){var e,t,i;if(n.type==null||typeof n.type=="string")return n.__e;if(n.__k){for(e=n.__k.length-1;e>=0;e--)if((t=n.__k[e])&&(i=II(t)))return i}return null}function fm(n,e,t,i,s,r,o,a,l){var c,u,d,f,g,m,_,y,E,I,R,S,D,N,T,b=e.type;if(e.constructor!==void 0)return null;t.__h!=null&&(l=t.__h,a=e.__e=t.__e,e.__h=null,r=[a]),(c=le.__b)&&c(e);try{e:if(typeof b=="function"){if(y=e.props,E=(c=b.contextType)&&i[c.__c],I=c?E?E.props.value:c.__:i,t.__c?_=(u=e.__c=t.__c).__=u.__E:("prototype"in b&&b.prototype.render?e.__c=u=new b(y,I):(e.__c=u=new En(y,I),u.constructor=b,u.render=mz),E&&E.sub(u),u.props=y,u.state||(u.state={}),u.context=I,u.__n=i,d=u.__d=!0,u.__h=[],u._sb=[]),u.__s==null&&(u.__s=u.state),b.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=ns({},u.__s)),ns(u.__s,b.getDerivedStateFromProps(y,u.__s))),f=u.props,g=u.state,u.__v=e,d)b.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(b.getDerivedStateFromProps==null&&y!==f&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(y,I),!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(y,u.__s,I)===!1||e.__v===t.__v){for(e.__v!==t.__v&&(u.props=y,u.state=u.__s,u.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(w){w&&(w.__=e)}),R=0;R<u._sb.length;R++)u.__h.push(u._sb[R]);u._sb=[],u.__h.length&&o.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(y,u.__s,I),u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(f,g,m)})}if(u.context=I,u.props=y,u.__P=n,S=le.__r,D=0,"prototype"in b&&b.prototype.render){for(u.state=u.__s,u.__d=!1,S&&S(e),c=u.render(u.props,u.state,u.context),N=0;N<u._sb.length;N++)u.__h.push(u._sb[N]);u._sb=[]}else do u.__d=!1,S&&S(e),c=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++D<25);u.state=u.__s,u.getChildContext!=null&&(i=ns(ns({},i),u.getChildContext())),d||u.getSnapshotBeforeUpdate==null||(m=u.getSnapshotBeforeUpdate(f,g)),T=c!=null&&c.type===pt&&c.key==null?c.props.children:c,AI(n,Array.isArray(T)?T:[T],e,t,i,s,r,o,a,l),u.base=e.__e,e.__h=null,u.__h.length&&o.push(u),_&&(u.__E=u.__=null),u.__e=!1}else r==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=pz(t.__e,e,t,i,s,r,o,l);(c=le.diffed)&&c(e)}catch(w){e.__v=null,(l||r!=null)&&(e.__e=a,e.__h=!!l,r[r.indexOf(a)]=null),le.__e(w,e,t)}}function CI(n,e){le.__c&&le.__c(e,n),n.some(function(t){try{n=t.__h,t.__h=[],n.some(function(i){i.call(t)})}catch(i){le.__e(i,t.__v)}})}function pz(n,e,t,i,s,r,o,a){var l,c,u,d=t.props,f=e.props,g=e.type,m=0;if(g==="svg"&&(s=!0),r!=null){for(;m<r.length;m++)if((l=r[m])&&"setAttribute"in l==!!g&&(g?l.localName===g:l.nodeType===3)){n=l,r[m]=null;break}}if(n==null){if(g===null)return document.createTextNode(f);n=s?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,f.is&&f),r=null,a=!1}if(g===null)d===f||a&&n.data===f||(n.data=f);else{if(r=r&&Xh.call(n.childNodes),c=(d=t.props||Qu).dangerouslySetInnerHTML,u=f.dangerouslySetInnerHTML,!a){if(r!=null)for(d={},m=0;m<n.attributes.length;m++)d[n.attributes[m].name]=n.attributes[m].value;(u||c)&&(u&&(c&&u.__html==c.__html||u.__html===n.innerHTML)||(n.innerHTML=u&&u.__html||""))}if(fz(n,f,d,s,a),u)e.__k=[];else if(m=e.props.children,AI(n,Array.isArray(m)?m:[m],e,t,i,s&&g!=="foreignObject",r,o,r?r[0]:t.__k&&fl(t,0),a),r!=null)for(m=r.length;m--;)r[m]!=null&&EI(r[m]);a||("value"in f&&(m=f.value)!==void 0&&(m!==n.value||g==="progress"&&!m||g==="option"&&m!==d.value)&&Yu(n,"value",m,d.value,!1),"checked"in f&&(m=f.checked)!==void 0&&m!==n.checked&&Yu(n,"checked",m,d.checked,!1))}return n}function xI(n,e,t){try{typeof n=="function"?n(e):n.current=e}catch(i){le.__e(i,t)}}function RI(n,e,t){var i,s;if(le.unmount&&le.unmount(n),(i=n.ref)&&(i.current&&i.current!==n.__e||xI(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){le.__e(r,e)}i.base=i.__P=null,n.__c=void 0}if(i=n.__k)for(s=0;s<i.length;s++)i[s]&&RI(i[s],e,t||typeof n.type!="function");t||n.__e==null||EI(n.__e),n.__=n.__e=n.__d=void 0}function mz(n,e,t){return this.constructor(n,t)}function gl(n,e,t){var i,s,r;le.__&&le.__(n,e),s=(i=!1)?null:e.__k,r=[],fm(e,n=e.__k=B(pt,null,[n]),s||Qu,Qu,e.ownerSVGElement!==void 0,s?null:e.firstChild?Xh.call(e.childNodes):null,r,s?s.__e:e.firstChild,i),CI(r,n)}function _z(n,e){var t={__c:e="__cC"+yI++,__:n,Consumer:function(i,s){return i.children(s)},Provider:function(i){var s,r;return this.getChildContext||(s=[],(r={})[e]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&s.some(function(a){a.__e=!0,Ag(a)})},this.sub=function(o){s.push(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){s.splice(s.indexOf(o),1),a&&a.call(o)}}),i.children}};return t.Provider.__=t.Consumer.contextType=t}Xh=bI.slice,le={__e:function(n,e,t,i){for(var s,r,o;e=e.__;)if((s=e.__c)&&!s.__)try{if((r=s.constructor)&&r.getDerivedStateFromError!=null&&(s.setState(r.getDerivedStateFromError(n)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(n,i||{}),o=s.__d),o)return s.__E=s}catch(a){n=a}throw n}},mI=0,_I=function(n){return n!=null&&n.constructor===void 0},Ao=!1,En.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ns({},this.state),typeof n=="function"&&(n=n(ns({},t),this.props)),n&&ns(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),Ag(this))},En.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Ag(this))},En.prototype.render=pt,Qs=[],vI=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Xu.__r=0,yI=0;var Kn,of,IE,DI=[],af=[],CE=le.__b,xE=le.__r,RE=le.diffed,DE=le.__c,kE=le.unmount;function vz(){for(var n;n=DI.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(lu),n.__H.__h.forEach(Tg),n.__H.__h=[]}catch(e){n.__H.__h=[],le.__e(e,n.__v)}}le.__b=function(n){Kn=null,CE&&CE(n)},le.__r=function(n){xE&&xE(n);var e=(Kn=n.__c).__H;e&&(of===Kn?(e.__h=[],Kn.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=af,t.__N=t.i=void 0})):(e.__h.forEach(lu),e.__h.forEach(Tg),e.__h=[])),of=Kn},le.diffed=function(n){RE&&RE(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(DI.push(e)!==1&&IE===le.requestAnimationFrame||((IE=le.requestAnimationFrame)||yz)(vz)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==af&&(t.__=t.__V),t.i=void 0,t.__V=af})),of=Kn=null},le.__c=function(n,e){e.some(function(t){try{t.__h.forEach(lu),t.__h=t.__h.filter(function(i){return!i.__||Tg(i)})}catch(i){e.some(function(s){s.__h&&(s.__h=[])}),e=[],le.__e(i,t.__v)}}),DE&&DE(n,e)},le.unmount=function(n){kE&&kE(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(i){try{lu(i)}catch(s){e=s}}),t.__H=void 0,e&&le.__e(e,t.__v))};var PE=typeof requestAnimationFrame=="function";function yz(n){var e,t=function(){clearTimeout(i),PE&&cancelAnimationFrame(e),setTimeout(n)},i=setTimeout(t,100);PE&&(e=requestAnimationFrame(t))}function lu(n){var e=Kn,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),Kn=e}function Tg(n){var e=Kn;n.__c=n.__(),Kn=e}function bz(n,e){for(var t in e)n[t]=e[t];return n}function ME(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var i in e)if(i!=="__source"&&n[i]!==e[i])return!0;return!1}function OE(n){this.props=n}(OE.prototype=new En).isPureReactComponent=!0,OE.prototype.shouldComponentUpdate=function(n,e){return ME(this.props,n)||ME(this.state,e)};var NE=le.__b;le.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),NE&&NE(n)};var Ez=le.__e;le.__e=function(n,e,t,i){if(n.then){for(var s,r=e;r=r.__;)if((s=r.__c)&&s.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),s.__c(n,e)}Ez(n,e,t,i)};var LE=le.unmount;function kI(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),n.__c.__H=null),(n=bz({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c=null),n.__k=n.__k&&n.__k.map(function(i){return kI(i,e,t)})),n}function PI(n,e,t){return n&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(i){return PI(i,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.insertBefore(n.__e,n.__d),n.__c.__e=!0,n.__c.__P=t)),n}function lf(){this.__u=0,this.t=null,this.__b=null}function MI(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function Cc(){this.u=null,this.o=null}le.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&n.__h===!0&&(n.type=null),LE&&LE(n)},(lf.prototype=new En).__c=function(n,e){var t=e.__c,i=this;i.t==null&&(i.t=[]),i.t.push(t);var s=MI(i.__v),r=!1,o=function(){r||(r=!0,t.__R=null,s?s(a):a())};t.__R=o;var a=function(){if(!--i.__u){if(i.state.__a){var c=i.state.__a;i.__v.__k[0]=PI(c,c.__c.__P,c.__c.__O)}var u;for(i.setState({__a:i.__b=null});u=i.t.pop();)u.forceUpdate()}},l=e.__h===!0;i.__u++||l||i.setState({__a:i.__b=i.__v.__k[0]}),n.then(o,o)},lf.prototype.componentWillUnmount=function(){this.t=[]},lf.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=kI(this.__b,t,i.__O=i.__P)}this.__b=null}var s=e.__a&&B(pt,null,n.fallback);return s&&(s.__h=null),[B(pt,null,e.__a?null:n.children),s]};var VE=function(n,e,t){if(++t[1]===t[0]&&n.o.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.o.size))for(t=n.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.u=t=t[2]}};function wz(n){return this.getChildContext=function(){return n.context},n.children}function Az(n){var e=this,t=n.i;e.componentWillUnmount=function(){gl(null,e.l),e.l=null,e.i=null},e.i&&e.i!==t&&e.componentWillUnmount(),n.__v?(e.l||(e.i=t,e.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(i){this.childNodes.push(i),e.i.appendChild(i)},insertBefore:function(i,s){this.childNodes.push(i),e.i.appendChild(i)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),e.i.removeChild(i)}}),gl(B(wz,{context:e.context},n.__v),e.l)):e.l&&e.componentWillUnmount()}function Tz(n,e){var t=B(Az,{__v:n,i:e});return t.containerInfo=e,t}(Cc.prototype=new En).__a=function(n){var e=this,t=MI(e.__v),i=e.o.get(n);return i[0]++,function(s){var r=function(){e.props.revealOrder?(i.push(s),VE(e,n,i)):s()};t?t(r):r()}},Cc.prototype.render=function(n){this.u=null,this.o=new Map;var e=Ju(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.o.set(e[t],this.u=[1,0,this.u]);return n.children},Cc.prototype.componentDidUpdate=Cc.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(e,t){VE(n,t,e)})};var Sz=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Iz=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Cz=typeof document<"u",xz=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(n)};En.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(En.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var FE=le.event;function Rz(){}function Dz(){return this.cancelBubble}function kz(){return this.defaultPrevented}le.event=function(n){return FE&&(n=FE(n)),n.persist=Rz,n.isPropagationStopped=Dz,n.isDefaultPrevented=kz,n.nativeEvent=n};var BE={configurable:!0,get:function(){return this.class}},UE=le.vnode;le.vnode=function(n){var e=n.type,t=n.props,i=t;if(typeof e=="string"){var s=e.indexOf("-")===-1;for(var r in i={},t){var o=t[r];Cz&&r==="children"&&e==="noscript"||r==="value"&&"defaultValue"in t&&o==null||(r==="defaultValue"&&"value"in t&&t.value==null?r="value":r==="download"&&o===!0?o="":/ondoubleclick/i.test(r)?r="ondblclick":/^onchange(textarea|input)/i.test(r+e)&&!xz(t.type)?r="oninput":/^onfocus$/i.test(r)?r="onfocusin":/^onblur$/i.test(r)?r="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(r)?r=r.toLowerCase():s&&Iz.test(r)?r=r.replace(/[A-Z0-9]/g,"-$&").toLowerCase():o===null&&(o=void 0),/^oninput$/i.test(r)&&(r=r.toLowerCase(),i[r]&&(r="oninputCapture")),i[r]=o)}e=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=Ju(t.children).forEach(function(a){a.props.selected=i.value.indexOf(a.props.value)!=-1})),e=="select"&&i.defaultValue!=null&&(i.value=Ju(t.children).forEach(function(a){a.props.selected=i.multiple?i.defaultValue.indexOf(a.props.value)!=-1:i.defaultValue==a.props.value})),n.props=i,t.class!=t.className&&(BE.enumerable="className"in t,t.className!=null&&(i.class=t.className),Object.defineProperty(i,"className",BE))}n.$$typeof=Sz,UE&&UE(n)};var HE=le.__r;le.__r=function(n){HE&&HE(n),n.__c};const OI=[],Sg=new Map;function NI(n){OI.push(n),Sg.forEach(e=>{VI(e,n)})}function Pz(n){n.isConnected&&n.getRootNode&&LI(n.getRootNode())}function LI(n){let e=Sg.get(n);if(!e||!e.isConnected){if(e=n.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const t=Oz();t&&(e.nonce=t);const i=n===document?document.head:n,s=n===document?i.querySelector("script,link[rel=stylesheet],link[as=style],style"):i.firstChild;i.insertBefore(e,s)}Sg.set(n,e),Mz(e)}}function Mz(n){for(const e of OI)VI(n,e)}function VI(n,e){const{sheet:t}=n,i=t.cssRules.length;e.split("}").forEach((s,r)=>{s=s.trim(),s&&t.insertRule(s+"}",i+r)})}let cf;function Oz(){return cf===void 0&&(cf=Nz()),cf}function Nz(){const n=document.querySelector('meta[name="csp-nonce"]');if(n&&n.hasAttribute("content"))return n.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&LI(document);var Lz=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';NI(Lz);class gm{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:t}=this;t[e]=(t[e]||0)+1,this.clearTimeout()}resume(e="",t){let{pauseDepths:i}=this;e in i&&(t?delete i[e]:(i[e]-=1,i[e]<=0&&delete i[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function pm(n){n.parentNode&&n.parentNode.removeChild(n)}function Yt(n,e){if(n.closest)return n.closest(e);if(!document.documentElement.contains(n))return null;do{if(Vz(n,e))return n;n=n.parentElement||n.parentNode}while(n!==null&&n.nodeType===1);return null}function Vz(n,e){return(n.matches||n.matchesSelector||n.msMatchesSelector).call(n,e)}function Fz(n,e){let t=n instanceof HTMLElement?[n]:n,i=[];for(let s=0;s<t.length;s+=1){let r=t[s].querySelectorAll(e);for(let o=0;o<r.length;o+=1)i.push(r[o])}return i}const Bz=/(top|left|right|bottom|width|height)$/i;function Fa(n,e){for(let t in e)FI(n,t,e[t])}function FI(n,e,t){t==null?n.style[e]="":typeof t=="number"&&Bz.test(e)?n.style[e]=`${t}px`:n.style[e]=t}function BI(n){var e,t;return(t=(e=n.composedPath)===null||e===void 0?void 0:e.call(n)[0])!==null&&t!==void 0?t:n.target}let jE=0;function Jh(){return jE+=1,"fc-dom-"+jE}function Zh(n){n.preventDefault()}function Uz(n,e){return t=>{let i=Yt(t.target,n);i&&e.call(i,t,i)}}function UI(n,e,t,i){let s=Uz(t,i);return n.addEventListener(e,s),()=>{n.removeEventListener(e,s)}}function Hz(n,e,t,i){let s;return UI(n,"mouseover",e,(r,o)=>{if(o!==s){s=o,t(r,o);let a=l=>{s=null,i(l,o),o.removeEventListener("mouseleave",a)};o.addEventListener("mouseleave",a)}})}const zE=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function jz(n,e){let t=i=>{e(i),zE.forEach(s=>{n.removeEventListener(s,t)})};zE.forEach(i=>{n.addEventListener(i,t)})}function HI(n){return Object.assign({onClick:n},jI(n))}function jI(n){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(n(e),e.preventDefault())}}}let WE=0;function Sr(){return WE+=1,String(WE)}function mm(){document.body.classList.add("fc-not-allowed")}function _m(){document.body.classList.remove("fc-not-allowed")}function zz(n){n.style.userSelect="none",n.style.webkitUserSelect="none",n.addEventListener("selectstart",Zh)}function Wz(n){n.style.userSelect="",n.style.webkitUserSelect="",n.removeEventListener("selectstart",Zh)}function $z(n){n.addEventListener("contextmenu",Zh)}function qz(n){n.removeEventListener("contextmenu",Zh)}function Gz(n){let e=[],t=[],i,s;for(typeof n=="string"?t=n.split(/\s*,\s*/):typeof n=="function"?t=[n]:Array.isArray(n)&&(t=n),i=0;i<t.length;i+=1)s=t[i],typeof s=="string"?e.push(s.charAt(0)==="-"?{field:s.substring(1),order:-1}:{field:s,order:1}):typeof s=="function"&&e.push({func:s});return e}function Kz(n,e,t){let i,s;for(i=0;i<t.length;i+=1)if(s=Qz(n,e,t[i]),s)return s;return 0}function Qz(n,e,t){return t.func?t.func(n,e):Yz(n[t.field],e[t.field])*(t.order||1)}function Yz(n,e){return!n&&!e?0:e==null?-1:n==null?1:typeof n=="string"||typeof e=="string"?String(n).localeCompare(String(e)):n-e}function uf(n,e){let t=String(n);return"000".substr(0,e-t.length)+t}function Ba(n,e,t){return typeof n=="function"?n(...e):typeof n=="string"?e.reduce((i,s,r)=>i.replace("$"+r,s||""),n):t}function Xz(n,e){return n-e}function hf(n){return n%1===0}function Jz(n){let e=n.querySelector(".fc-scrollgrid-shrink-frame"),t=n.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!t)throw new Error("needs fc-scrollgrid-shrink-cushion className");return n.getBoundingClientRect().width-e.getBoundingClientRect().width+t.getBoundingClientRect().width}const Zz=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Le(n,e){return typeof n=="string"?eW(n):typeof n=="object"&&n?$E(n):typeof n=="number"?$E({[e||"milliseconds"]:n}):null}function eW(n){let e=Zz.exec(n);if(e){let t=e[1]?-1:1;return{years:0,months:0,days:t*(e[2]?parseInt(e[2],10):0),milliseconds:t*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function $E(n){let e={years:n.years||n.year||0,months:n.months||n.month||0,days:n.days||n.day||0,milliseconds:(n.hours||n.hour||0)*60*60*1e3+(n.minutes||n.minute||0)*60*1e3+(n.seconds||n.second||0)*1e3+(n.milliseconds||n.millisecond||n.ms||0)},t=n.weeks||n.week;return t&&(e.days+=t*7,e.specifiedWeeks=!0),e}function tW(n,e){return n.years===e.years&&n.months===e.months&&n.days===e.days&&n.milliseconds===e.milliseconds}function nW(n,e){return{years:n.years-e.years,months:n.months-e.months,days:n.days-e.days,milliseconds:n.milliseconds-e.milliseconds}}function iW(n){return so(n)/365}function sW(n){return so(n)/30}function so(n){return pl(n)/864e5}function pl(n){return n.years*(365*864e5)+n.months*(30*864e5)+n.days*864e5+n.milliseconds}function Ig(n){let e=n.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return n.days?n.specifiedWeeks&&n.days%7===0?{unit:"week",value:n.days/7}:{unit:"day",value:n.days}:n.months?{unit:"month",value:n.months}:n.years?{unit:"year",value:n.years}:{unit:"millisecond",value:0}}function Ts(n,e,t){if(n===e)return!0;let i=n.length,s;if(i!==e.length)return!1;for(s=0;s<i;s+=1)if(!(t?t(n[s],e[s]):n[s]===e[s]))return!1;return!0}const rW=["sun","mon","tue","wed","thu","fri","sat"];function qE(n,e){let t=is(n);return t[2]+=e*7,dn(t)}function en(n,e){let t=is(n);return t[2]+=e,dn(t)}function Ss(n,e){let t=is(n);return t[6]+=e,dn(t)}function oW(n,e){return No(n,e)/7}function No(n,e){return(e.valueOf()-n.valueOf())/(1e3*60*60*24)}function aW(n,e){return(e.valueOf()-n.valueOf())/(1e3*60*60)}function lW(n,e){return(e.valueOf()-n.valueOf())/(1e3*60)}function cW(n,e){return(e.valueOf()-n.valueOf())/1e3}function uW(n,e){let t=ot(n),i=ot(e);return{years:0,months:0,days:Math.round(No(t,i)),milliseconds:e.valueOf()-i.valueOf()-(n.valueOf()-t.valueOf())}}function hW(n,e){let t=Zu(n,e);return t!==null&&t%7===0?t/7:null}function Zu(n,e){return ss(n)===ss(e)?Math.round(No(n,e)):null}function ot(n){return dn([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()])}function dW(n){return dn([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours()])}function fW(n){return dn([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes()])}function gW(n){return dn([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds()])}function pW(n,e,t){let i=n.getUTCFullYear(),s=df(n,i,e,t);if(s<1)return df(n,i-1,e,t);let r=df(n,i+1,e,t);return r>=1?Math.min(s,r):s}function df(n,e,t,i){let s=dn([e,0,1+mW(e,t,i)]),r=ot(n),o=Math.round(No(s,r));return Math.floor(o/7)+1}function mW(n,e,t){let i=7+e-t;return-((7+dn([n,0,i]).getUTCDay()-e)%7)+i-1}function GE(n){return[n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()]}function KE(n){return new Date(n[0],n[1]||0,n[2]==null?1:n[2],n[3]||0,n[4]||0,n[5]||0)}function is(n){return[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()]}function dn(n){return n.length===1&&(n=n.concat([0])),new Date(Date.UTC(...n))}function zI(n){return!isNaN(n.valueOf())}function ss(n){return n.getUTCHours()*1e3*60*60+n.getUTCMinutes()*1e3*60+n.getUTCSeconds()*1e3+n.getUTCMilliseconds()}function _W(n,e,t=!1){let i=n.toISOString();return i=i.replace(".000",""),t&&(i=i.replace("T00:00:00Z","")),i.length>10&&(e==null?i=i.replace("Z",""):e!==0&&(i=i.replace("Z",ym(e,!0)))),i}function vm(n){return n.toISOString().replace(/T.*$/,"")}function vW(n){return n.toISOString().match(/^\d{4}-\d{2}/)[0]}function ym(n,e=!1){let t=n<0?"-":"+",i=Math.abs(n),s=Math.floor(i/60),r=Math.round(i%60);return e?`${t+uf(s,2)}:${uf(r,2)}`:`GMT${t}${s}${r?`:${uf(r,2)}`:""}`}function Ve(n,e,t){let i,s;return function(...r){if(!i)s=n.apply(this,r);else if(!Ts(i,r)){let o=n.apply(this,r);(!e||!e(o,s))&&(s=o)}return i=r,s}}function cu(n,e,t){let i,s;return r=>(i?li(i,r)||(s=n.call(this,r)):s=n.call(this,r),i=r,s)}const QE={week:3,separator:0,omitZeroMinute:0,meridiem:0,omitCommas:0},eh={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},xc=/\s*([ap])\.?m\.?/i,yW=/,/g,bW=/\s+/g,EW=/\u200e/g,wW=/UTC|GMT/;class AW{constructor(e){let t={},i={},s=0;for(let r in e)r in QE?(i[r]=e[r],s=Math.max(QE[r],s)):(t[r]=e[r],r in eh&&(s=Math.max(eh[r],s)));this.standardDateProps=t,this.extendedSettings=i,this.severity=s,this.buildFormattingFunc=Ve(YE)}format(e,t){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,t)(e)}formatRange(e,t,i,s){let{standardDateProps:r,extendedSettings:o}=this,a=RW(e.marker,t.marker,i.calendarSystem);if(!a)return this.format(e,i);let l=a;l>1&&(r.year==="numeric"||r.year==="2-digit")&&(r.month==="numeric"||r.month==="2-digit")&&(r.day==="numeric"||r.day==="2-digit")&&(l=1);let c=this.format(e,i),u=this.format(t,i);if(c===u)return c;let d=DW(r,l),f=YE(d,o,i),g=f(e),m=f(t),_=kW(c,g,u,m),y=o.separator||s||i.defaultSeparator||"";return _?_.before+g+y+m+_.after:c+y+u}getLargestUnit(){switch(this.severity){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function YE(n,e,t){let i=Object.keys(n).length;return i===1&&n.timeZoneName==="short"?s=>ym(s.timeZoneOffset):i===0&&e.week?s=>xW(t.computeWeekNumber(s.marker),t.weekText,t.weekTextLong,t.locale,e.week):TW(n,e,t)}function TW(n,e,t){n=Object.assign({},n),e=Object.assign({},e),SW(n,e),n.timeZone="UTC";let i=new Intl.DateTimeFormat(t.locale.codes,n),s;if(e.omitZeroMinute){let r=Object.assign({},n);delete r.minute,s=new Intl.DateTimeFormat(t.locale.codes,r)}return r=>{let{marker:o}=r,a;s&&!o.getUTCMinutes()?a=s:a=i;let l=a.format(o);return IW(l,r,n,e,t)}}function SW(n,e){n.timeZoneName&&(n.hour||(n.hour="2-digit"),n.minute||(n.minute="2-digit")),n.timeZoneName==="long"&&(n.timeZoneName="short"),e.omitZeroMinute&&(n.second||n.millisecond)&&delete e.omitZeroMinute}function IW(n,e,t,i,s){return n=n.replace(EW,""),t.timeZoneName==="short"&&(n=CW(n,s.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":ym(e.timeZoneOffset))),i.omitCommas&&(n=n.replace(yW,"").trim()),i.omitZeroMinute&&(n=n.replace(":00","")),i.meridiem===!1?n=n.replace(xc,"").trim():i.meridiem==="narrow"?n=n.replace(xc,(r,o)=>o.toLocaleLowerCase()):i.meridiem==="short"?n=n.replace(xc,(r,o)=>`${o.toLocaleLowerCase()}m`):i.meridiem==="lowercase"&&(n=n.replace(xc,r=>r.toLocaleLowerCase())),n=n.replace(bW," "),n=n.trim(),n}function CW(n,e){let t=!1;return n=n.replace(wW,()=>(t=!0,e)),t||(n+=` ${e}`),n}function xW(n,e,t,i,s){let r=[];return s==="long"?r.push(t):(s==="short"||s==="narrow")&&r.push(e),(s==="long"||s==="short")&&r.push(" "),r.push(i.simpleNumberFormat.format(n)),i.options.direction==="rtl"&&r.reverse(),r.join("")}function RW(n,e,t){return t.getMarkerYear(n)!==t.getMarkerYear(e)?5:t.getMarkerMonth(n)!==t.getMarkerMonth(e)?4:t.getMarkerDay(n)!==t.getMarkerDay(e)?2:ss(n)!==ss(e)?1:0}function DW(n,e){let t={};for(let i in n)(!(i in eh)||eh[i]<=e)&&(t[i]=n[i]);return t}function kW(n,e,t,i){let s=0;for(;s<n.length;){let r=n.indexOf(e,s);if(r===-1)break;let o=n.substr(0,r);s=r+e.length;let a=n.substr(s),l=0;for(;l<t.length;){let c=t.indexOf(i,l);if(c===-1)break;let u=t.substr(0,c);l=c+i.length;let d=t.substr(l);if(o===u&&a===d)return{before:o,after:a}}}return null}function XE(n,e){let t=e.markerToArray(n.marker);return{marker:n.marker,timeZoneOffset:n.timeZoneOffset,array:t,year:t[0],month:t[1],day:t[2],hour:t[3],minute:t[4],second:t[5],millisecond:t[6]}}function th(n,e,t,i){let s=XE(n,t.calendarSystem),r=e?XE(e,t.calendarSystem):null;return{date:s,start:s,end:r,timeZone:t.timeZone,localeCodes:t.locale.codes,defaultSeparator:i||t.defaultSeparator}}class PW{constructor(e){this.cmdStr=e}format(e,t,i){return t.cmdFormatter(this.cmdStr,th(e,null,t,i))}formatRange(e,t,i,s){return i.cmdFormatter(this.cmdStr,th(e,t,i,s))}}class MW{constructor(e){this.func=e}format(e,t,i){return this.func(th(e,null,t,i))}formatRange(e,t,i,s){return this.func(th(e,t,i,s))}}function It(n){return typeof n=="object"&&n?new AW(n):typeof n=="string"?new PW(n):typeof n=="function"?new MW(n):null}const JE={navLinkDayClick:F,navLinkWeekClick:F,duration:Le,bootstrapFontAwesome:F,buttonIcons:F,customButtons:F,defaultAllDayEventDuration:Le,defaultTimedEventDuration:Le,nextDayThreshold:Le,scrollTime:Le,scrollTimeReset:Boolean,slotMinTime:Le,slotMaxTime:Le,dayPopoverFormat:It,slotDuration:Le,snapDuration:Le,headerToolbar:F,footerToolbar:F,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:It,dayHeaderClassNames:F,dayHeaderContent:F,dayHeaderDidMount:F,dayHeaderWillUnmount:F,dayCellClassNames:F,dayCellContent:F,dayCellDidMount:F,dayCellWillUnmount:F,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:F,weekNumbers:Boolean,weekNumberClassNames:F,weekNumberContent:F,weekNumberDidMount:F,weekNumberWillUnmount:F,editable:Boolean,viewClassNames:F,viewDidMount:F,viewWillUnmount:F,nowIndicator:Boolean,nowIndicatorClassNames:F,nowIndicatorContent:F,nowIndicatorDidMount:F,nowIndicatorWillUnmount:F,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:F,locale:F,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:F,eventOrder:Gz,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:F,contentHeight:F,direction:String,weekNumberFormat:It,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:F,initialDate:F,now:F,eventDataTransform:F,stickyHeaderDates:F,stickyFooterScrollbar:F,viewHeight:F,defaultAllDay:Boolean,eventSourceFailure:F,eventSourceSuccess:F,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:F,eventConstraint:F,eventAllow:F,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:F,eventContent:F,eventDidMount:F,eventWillUnmount:F,selectConstraint:F,selectOverlap:F,selectAllow:F,droppable:Boolean,unselectCancel:String,slotLabelFormat:F,slotLaneClassNames:F,slotLaneContent:F,slotLaneDidMount:F,slotLaneWillUnmount:F,slotLabelClassNames:F,slotLabelContent:F,slotLabelDidMount:F,slotLabelWillUnmount:F,dayMaxEvents:F,dayMaxEventRows:F,dayMinWidth:Number,slotLabelInterval:Le,allDayText:String,allDayClassNames:F,allDayContent:F,allDayDidMount:F,allDayWillUnmount:F,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:It,rerenderDelay:Number,moreLinkText:F,moreLinkHint:F,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:F,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Le,hiddenDays:F,fixedWeekCount:Boolean,validRange:F,visibleRange:F,titleFormat:F,eventInteractive:Boolean,noEventsText:String,viewHint:F,navLinkHint:F,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:F,moreLinkClassNames:F,moreLinkContent:F,moreLinkDidMount:F,moreLinkWillUnmount:F,monthStartFormat:It,handleCustomRendering:F,customRenderingMetaMap:F,customRenderingReplaces:Boolean},Ua={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:"  ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"}},ZE={datesSet:F,eventsSet:F,eventAdd:F,eventChange:F,eventRemove:F,windowResize:F,eventClick:F,eventMouseEnter:F,eventMouseLeave:F,select:F,unselect:F,loading:F,_unmount:F,_beforeprint:F,_afterprint:F,_noEventDrop:F,_noEventResize:F,_resize:F,_scrollRequest:F},ew={buttonText:F,buttonHints:F,views:F,plugins:F,initialEvents:F,events:F,eventSources:F},$s={headerToolbar:qs,footerToolbar:qs,buttonText:qs,buttonHints:qs,buttonIcons:qs,dateIncrement:qs,plugins:Rc,events:Rc,eventSources:Rc,resources:Rc};function qs(n,e){return typeof n=="object"&&typeof e=="object"&&n&&e?li(n,e):n===e}function Rc(n,e){return Array.isArray(n)&&Array.isArray(e)?Ts(n,e):n===e}const OW={type:String,component:F,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:F,usesMinMaxTime:Boolean,classNames:F,content:F,didMount:F,willUnmount:F};function ff(n){return Em(n,$s)}function bm(n,e){let t={},i={};for(let s in e)s in n&&(t[s]=e[s](n[s]));for(let s in n)s in e||(i[s]=n[s]);return{refined:t,extra:i}}function F(n){return n}const{hasOwnProperty:nh}=Object.prototype;function Em(n,e){let t={};if(e){for(let i in e)if(e[i]===qs){let s=[];for(let r=n.length-1;r>=0;r-=1){let o=n[r][i];if(typeof o=="object"&&o)s.unshift(o);else if(o!==void 0){t[i]=o;break}}s.length&&(t[i]=Em(s))}}for(let i=n.length-1;i>=0;i-=1){let s=n[i];for(let r in s)r in t||(t[r]=s[r])}return t}function _r(n,e){let t={};for(let i in n)e(n[i],i)&&(t[i]=n[i]);return t}function Ir(n,e){let t={};for(let i in n)t[i]=e(n[i],i);return t}function WI(n){let e={};for(let t of n)e[t]=!0;return e}function wm(n){let e=[];for(let t in n)e.push(n[t]);return e}function li(n,e){if(n===e)return!0;for(let t in n)if(nh.call(n,t)&&!(t in e))return!1;for(let t in e)if(nh.call(e,t)&&n[t]!==e[t])return!1;return!0}const NW=/^on[A-Z]/;function LW(n,e){const t=Cg(n,e);for(let i of t)if(!NW.test(i))return!1;return!0}function Cg(n,e){let t=[];for(let i in n)nh.call(n,i)&&(i in e||t.push(i));for(let i in e)nh.call(e,i)&&n[i]!==e[i]&&t.push(i);return t}function gf(n,e,t={}){if(n===e)return!0;for(let i in e)if(!(i in n&&VW(n[i],e[i],t[i])))return!1;for(let i in n)if(!(i in e))return!1;return!0}function VW(n,e,t){return n===e||t===!0?!0:t?t(n,e):!1}function FW(n,e=0,t,i=1){let s=[];t==null&&(t=Object.keys(n).length);for(let r=e;r<t;r+=i){let o=n[r];o!==void 0&&s.push(o)}return s}let $I={};function BW(n,e){$I[n]=e}function UW(n){return new $I[n]}class HW{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return dn(e)}markerToArray(e){return is(e)}}BW("gregory",HW);const jW=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function zW(n){let e=jW.exec(n);if(e){let t=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(zI(t)){let i=null;return e[13]&&(i=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:t,isTimeUnspecified:!e[6],timeZoneOffset:i}}}return null}class WW{constructor(e){let t=this.timeZone=e.timeZone,i=t!=="local"&&t!=="UTC";e.namedTimeZoneImpl&&i&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(t)),this.canComputeOffset=!!(!i||this.namedTimeZoneImpl),this.calendarSystem=UW(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let t=this.createMarkerMeta(e);return t===null?null:t.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):dn(GE(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let t=null;return typeof e=="number"?t=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(t=this.timestampToMarker(e))):Array.isArray(e)&&(t=dn(e)),t===null||!zI(t)?null:{marker:t,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let t=zW(e);if(t===null)return null;let{marker:i}=t,s=null;return t.timeZoneOffset!==null&&(this.canComputeOffset?i=this.timestampToMarker(i.valueOf()-t.timeZoneOffset*60*1e3):s=t.timeZoneOffset),{marker:i,isTimeUnspecified:t.isTimeUnspecified,forcedTzo:s}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,t){let i=this.calendarSystem.markerToArray(e);return i[0]+=t.years,i[1]+=t.months,i[2]+=t.days,i[6]+=t.milliseconds,this.calendarSystem.arrayToMarker(i)}subtract(e,t){let i=this.calendarSystem.markerToArray(e);return i[0]-=t.years,i[1]-=t.months,i[2]-=t.days,i[6]-=t.milliseconds,this.calendarSystem.arrayToMarker(i)}addYears(e,t){let i=this.calendarSystem.markerToArray(e);return i[0]+=t,this.calendarSystem.arrayToMarker(i)}addMonths(e,t){let i=this.calendarSystem.markerToArray(e);return i[1]+=t,this.calendarSystem.arrayToMarker(i)}diffWholeYears(e,t){let{calendarSystem:i}=this;return ss(e)===ss(t)&&i.getMarkerDay(e)===i.getMarkerDay(t)&&i.getMarkerMonth(e)===i.getMarkerMonth(t)?i.getMarkerYear(t)-i.getMarkerYear(e):null}diffWholeMonths(e,t){let{calendarSystem:i}=this;return ss(e)===ss(t)&&i.getMarkerDay(e)===i.getMarkerDay(t)?i.getMarkerMonth(t)-i.getMarkerMonth(e)+(i.getMarkerYear(t)-i.getMarkerYear(e))*12:null}greatestWholeUnit(e,t){let i=this.diffWholeYears(e,t);return i!==null?{unit:"year",value:i}:(i=this.diffWholeMonths(e,t),i!==null?{unit:"month",value:i}:(i=hW(e,t),i!==null?{unit:"week",value:i}:(i=Zu(e,t),i!==null?{unit:"day",value:i}:(i=aW(e,t),hf(i)?{unit:"hour",value:i}:(i=lW(e,t),hf(i)?{unit:"minute",value:i}:(i=cW(e,t),hf(i)?{unit:"second",value:i}:{unit:"millisecond",value:t.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,t,i){let s;return i.years&&(s=this.diffWholeYears(e,t),s!==null)?s/iW(i):i.months&&(s=this.diffWholeMonths(e,t),s!==null)?s/sW(i):i.days&&(s=Zu(e,t),s!==null)?s/so(i):(t.valueOf()-e.valueOf())/pl(i)}startOf(e,t){return t==="year"?this.startOfYear(e):t==="month"?this.startOfMonth(e):t==="week"?this.startOfWeek(e):t==="day"?ot(e):t==="hour"?dW(e):t==="minute"?fW(e):t==="second"?gW(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):pW(e,this.weekDow,this.weekDoy)}format(e,t,i={}){return t.format({marker:e,timeZoneOffset:i.forcedTzo!=null?i.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,t,i,s={}){return s.isEndExclusive&&(t=Ss(t,-1)),i.formatRange({marker:e,timeZoneOffset:s.forcedStartTzo!=null?s.forcedStartTzo:this.offsetForMarker(e)},{marker:t,timeZoneOffset:s.forcedEndTzo!=null?s.forcedEndTzo:this.offsetForMarker(t)},this,s.defaultSeparator)}formatIso(e,t={}){let i=null;return t.omitTimeZoneOffset||(t.forcedTzo!=null?i=t.forcedTzo:i=this.offsetForMarker(e)),_W(e,i,t.omitTime)}timestampToMarker(e){return this.timeZone==="local"?dn(GE(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):dn(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-KE(is(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(is(e)):null}toDate(e,t){return this.timeZone==="local"?KE(is(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(is(e))*1e3*60):new Date(e.valueOf()-(t||0))}}class Ml{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let t,i;if(typeof e=="object"&&e){t=Object.assign({},this.iconClasses);for(i in e)t[i]=this.applyIconOverridePrefix(e[i]);this.iconClasses=t}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let t=this.iconOverridePrefix;return t&&e.indexOf(t)!==0&&(e=t+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,t){let i;return t&&this.rtlIconClasses?i=this.rtlIconClasses[e]||this.iconClasses[e]:i=this.iconClasses[e],i?`${this.baseIconClass} ${i}`:""}getCustomButtonIconClass(e){let t;return this.iconOverrideCustomButtonOption&&(t=e[this.iconOverrideCustomButtonOption],t)?`${this.baseIconClass} ${this.applyIconOverridePrefix(t)}`:""}}Ml.prototype.classes={};Ml.prototype.iconClasses={};Ml.prototype.baseIconClass="";Ml.prototype.iconOverridePrefix="";function ih(n){n();let e=le.debounceRendering,t=[];function i(s){t.push(s)}for(le.debounceRendering=i,gl(B($W,{}),document.createElement("div"));t.length;)t.shift()();le.debounceRendering=e}class $W extends En{render(){return B("div",{})}componentDidMount(){this.setState({})}}function qI(n){let e=_z(n),t=e.Provider;return e.Provider=function(){let i=!this.getChildContext,s=t.apply(this,arguments);if(i){let r=[];this.shouldComponentUpdate=o=>{this.props.value!==o.value&&r.forEach(a=>{a.context=o.value,a.forceUpdate()})},this.sub=o=>{r.push(o);let a=o.componentWillUnmount;o.componentWillUnmount=()=>{r.splice(r.indexOf(o),1),a&&a.call(o)}}}return s},e}class qW{constructor(e,t,i,s){this.execFunc=e,this.emitter=t,this.scrollTime=i,this.scrollTimeReset=s,this.handleScrollRequest=r=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},r),this.drain()},t.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const Cr=qI({});function GW(n,e,t,i,s,r,o,a,l,c,u,d,f){return{dateEnv:s,options:t,pluginHooks:o,emitter:c,dispatch:a,getCurrentData:l,calendarApi:u,viewSpec:n,viewApi:e,dateProfileGenerator:i,theme:r,isRtl:t.direction==="rtl",addResizeHandler(g){c.on("_resize",g)},removeResizeHandler(g){c.off("_resize",g)},createScrollResponder(g){return new qW(g,c,Le(t.scrollTime),t.scrollTimeReset)},registerInteractiveComponent:d,unregisterInteractiveComponent:f}}class xr extends En{shouldComponentUpdate(e,t){return this.debug&&console.log(Cg(e,this.props),Cg(t,this.state)),!gf(this.props,e,this.propEquality)||!gf(this.state,t,this.stateEquality)}safeSetState(e){gf(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}xr.addPropsEquality=KW;xr.addStateEquality=QW;xr.contextType=Cr;xr.prototype.propEquality={};xr.prototype.stateEquality={};class ut extends xr{}ut.contextType=Cr;function KW(n){let e=Object.create(this.prototype.propEquality);Object.assign(e,n),this.prototype.propEquality=e}function QW(n){let e=Object.create(this.prototype.stateEquality);Object.assign(e,n),this.prototype.stateEquality=e}function Oi(n,e){typeof n=="function"?n(e):n&&(n.current=e)}class Am extends ut{constructor(){super(...arguments),this.id=Sr(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:t}=this.context,{generatorName:i}=this.props;(!t.customRenderingReplaces||!xg(i,t))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&Oi(this.props.elRef,e)}}render(){const{props:e,context:t}=this,{options:i}=t,{customGenerator:s,defaultGenerator:r,renderProps:o}=e,a=GI(e,[],this.handleEl);let l=!1,c,u=[],d;if(s!=null){const f=typeof s=="function"?s(o,B):s;if(f===!0)l=!0;else{const g=f&&typeof f=="object";g&&"html"in f?a.dangerouslySetInnerHTML={__html:f.html}:g&&"domNodes"in f?u=Array.prototype.slice.call(f.domNodes):(g?_I(f):typeof f!="function")?c=f:d=f}}else l=!xg(e.generatorName,i);return l&&r&&(c=r(o)),this.queuedDomNodes=u,this.currentGeneratorMeta=d,B(e.elTag,a,c)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var t;const{props:i,context:s}=this,{handleCustomRendering:r,customRenderingMetaMap:o}=s.options;if(r){const a=(t=this.currentGeneratorMeta)!==null&&t!==void 0?t:o==null?void 0:o[i.generatorName];a&&r(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:a},i),{elClasses:(i.elClasses||[]).filter(YW)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:t}=this,i=this.base;if(!Ts(e,t)){t.forEach(pm);for(let s of e)i.appendChild(s);this.currentDomNodes=e}}}Am.addPropsEquality({elClasses:Ts,elStyle:li,elAttrs:LW,renderProps:li});function xg(n,e){var t;return!!(e.handleCustomRendering&&n&&(!((t=e.customRenderingMetaMap)===null||t===void 0)&&t[n]))}function GI(n,e,t){const i=Object.assign(Object.assign({},n.elAttrs),{ref:t});return(n.elClasses||e)&&(i.className=(n.elClasses||[]).concat(e||[]).concat(i.className||[]).filter(Boolean).join(" ")),n.elStyle&&(i.style=n.elStyle),i}function YW(n){return!!n}const KI=qI(0);class Fi extends En{constructor(){super(...arguments),this.InnerContent=XW.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(Oi(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,t=JW(e.classNameGenerator,e.renderProps);if(e.children){const i=GI(e,t,this.handleEl),s=e.children(this.InnerContent,e.renderProps,i);return e.elTag?B(e.elTag,i,s):s}else return B(Am,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(t),renderId:this.context}))}componentDidMount(){var e,t;this.el?(t=(e=this.props).didMount)===null||t===void 0||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,t;(t=(e=this.props).willUnmount)===null||t===void 0||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}Fi.contextType=KI;function XW(n,e){const t=n.props;return B(Am,Object.assign({renderProps:t.renderProps,generatorName:t.generatorName,customGenerator:t.customGenerator,defaultGenerator:t.defaultGenerator,renderId:n.context},e))}function JW(n,e){const t=typeof n=="function"?n(e):n||[];return typeof t=="string"?[t]:t}class tw extends ut{render(){let{props:e,context:t}=this,{options:i}=t,s={view:t.viewApi};return B(Fi,Object.assign({},e,{elTag:e.elTag||"div",elClasses:[...QI(e.viewSpec),...e.elClasses||[]],renderProps:s,classNameGenerator:i.viewClassNames,generatorName:void 0,didMount:i.viewDidMount,willUnmount:i.viewWillUnmount}),()=>e.children)}}function QI(n){return[`fc-${n.type}-view`,"fc-view"]}function ZW(n,e){let t=null,i=null;return n.start&&(t=e.createMarker(n.start)),n.end&&(i=e.createMarker(n.end)),!t&&!i||t&&i&&i<t?null:{start:t,end:i}}function nw(n,e){let t=[],{start:i}=e,s,r;for(n.sort(e4),s=0;s<n.length;s+=1)r=n[s],r.start>i&&t.push({start:i,end:r.start}),r.end>i&&(i=r.end);return i<e.end&&t.push({start:i,end:e.end}),t}function e4(n,e){return n.start.valueOf()-e.start.valueOf()}function To(n,e){let{start:t,end:i}=n,s=null;return e.start!==null&&(t===null?t=e.start:t=new Date(Math.max(t.valueOf(),e.start.valueOf()))),e.end!=null&&(i===null?i=e.end:i=new Date(Math.min(i.valueOf(),e.end.valueOf()))),(t===null||i===null||t<i)&&(s={start:t,end:i}),s}function t4(n,e){return(n.start===null?null:n.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(n.end===null?null:n.end.valueOf())===(e.end===null?null:e.end.valueOf())}function Tm(n,e){return(n.end===null||e.start===null||n.end>e.start)&&(n.start===null||e.end===null||n.start<e.end)}function ed(n,e){return(n.start===null||e.start!==null&&e.start>=n.start)&&(n.end===null||e.end!==null&&e.end<=n.end)}function fs(n,e){return(n.start===null||e>=n.start)&&(n.end===null||e<n.end)}function n4(n,e){return e.start!=null&&n<e.start?e.start:e.end!=null&&n>=e.end?new Date(e.end.valueOf()-1):n}function YI(n){let e=Math.floor(No(n.start,n.end))||1,t=ot(n.start),i=en(t,e);return{start:t,end:i}}function XI(n,e=Le(0)){let t=null,i=null;if(n.end){i=ot(n.end);let s=n.end.valueOf()-i.valueOf();s&&s>=pl(e)&&(i=en(i,1))}return n.start&&(t=ot(n.start),i&&i<=t&&(i=en(t,1))),{start:t,end:i}}function $r(n,e,t,i){return i==="year"?Le(t.diffWholeYears(n,e),"year"):i==="month"?Le(t.diffWholeMonths(n,e),"month"):uW(n,e)}function i4(n,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return n}}function s4(n,e){let t=n.initialDate;return t!=null?e.createMarker(t):Ol(n.now,e)}function Ol(n,e){return typeof n=="function"&&(n=n()),n==null?e.createNowMarker():e.createMarker(n)}class JI{constructor(e){this.props=e,this.nowDate=Ol(e.nowInput,e.dateEnv),this.initHiddenDays()}buildPrev(e,t,i){let{dateEnv:s}=this.props,r=s.subtract(s.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(r,-1,i)}buildNext(e,t,i){let{dateEnv:s}=this.props,r=s.add(s.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(r,1,i)}build(e,t,i=!0){let{props:s}=this,r,o,a,l,c,u;return r=this.buildValidRange(),r=this.trimHiddenDays(r),i&&(e=n4(e,r)),o=this.buildCurrentRangeInfo(e,t),a=/^(year|month|week|day)$/.test(o.unit),l=this.buildRenderRange(this.trimHiddenDays(o.range),o.unit,a),l=this.trimHiddenDays(l),c=l,s.showNonCurrentDates||(c=To(c,o.range)),c=this.adjustActiveRange(c),c=To(c,r),u=Tm(o.range,r),fs(l,e)||(e=l.start),{currentDate:e,validRange:r,currentRange:o.range,currentRangeUnit:o.unit,isRangeAllDay:a,activeRange:c,renderRange:l,slotMinTime:s.slotMinTime,slotMaxTime:s.slotMaxTime,isValid:u,dateIncrement:this.buildDateIncrement(o.duration)}}buildValidRange(){let e=this.props.validRangeInput,t=typeof e=="function"?e.call(this.props.calendarApi,this.nowDate):e;return this.refineRange(t)||{start:null,end:null}}buildCurrentRangeInfo(e,t){let{props:i}=this,s=null,r=null,o=null,a;return i.duration?(s=i.duration,r=i.durationUnit,o=this.buildRangeFromDuration(e,t,s,r)):(a=this.props.dayCount)?(r="day",o=this.buildRangeFromDayCount(e,t,a)):(o=this.buildCustomVisibleRange(e))?r=i.dateEnv.greatestWholeUnit(o.start,o.end).unit:(s=this.getFallbackDuration(),r=Ig(s).unit,o=this.buildRangeFromDuration(e,t,s,r)),{duration:s,unit:r,range:o}}getFallbackDuration(){return Le({day:1})}adjustActiveRange(e){let{dateEnv:t,usesMinMaxTime:i,slotMinTime:s,slotMaxTime:r}=this.props,{start:o,end:a}=e;return i&&(so(s)<0&&(o=ot(o),o=t.add(o,s)),so(r)>1&&(a=ot(a),a=en(a,-1),a=t.add(a,r))),{start:o,end:a}}buildRangeFromDuration(e,t,i,s){let{dateEnv:r,dateAlignment:o}=this.props,a,l,c;if(!o){let{dateIncrement:d}=this.props;d&&pl(d)<pl(i)?o=Ig(d).unit:o=s}so(i)<=1&&this.isHiddenDay(a)&&(a=this.skipHiddenDays(a,t),a=ot(a));function u(){a=r.startOf(e,o),l=r.add(a,i),c={start:a,end:l}}return u(),this.trimHiddenDays(c)||(e=this.skipHiddenDays(e,t),u()),c}buildRangeFromDayCount(e,t,i){let{dateEnv:s,dateAlignment:r}=this.props,o=0,a=e,l;r&&(a=s.startOf(a,r)),a=ot(a),a=this.skipHiddenDays(a,t),l=a;do l=en(l,1),this.isHiddenDay(l)||(o+=1);while(o<i);return{start:a,end:l}}buildCustomVisibleRange(e){let{props:t}=this,i=t.visibleRangeInput,s=typeof i=="function"?i.call(t.calendarApi,t.dateEnv.toDate(e)):i,r=this.refineRange(s);return r&&(r.start==null||r.end==null)?null:r}buildRenderRange(e,t,i){return e}buildDateIncrement(e){let{dateIncrement:t}=this.props,i;return t||((i=this.props.dateAlignment)?Le(1,i):e||Le({days:1}))}refineRange(e){if(e){let t=ZW(e,this.props.dateEnv);return t&&(t=XI(t)),t}return null}initHiddenDays(){let e=this.props.hiddenDays||[],t=[],i=0,s;for(this.props.weekends===!1&&e.push(0,6),s=0;s<7;s+=1)(t[s]=e.indexOf(s)!==-1)||(i+=1);if(!i)throw new Error("invalid hiddenDays");this.isHiddenDayHash=t}trimHiddenDays(e){let{start:t,end:i}=e;return t&&(t=this.skipHiddenDays(t)),i&&(i=this.skipHiddenDays(i,-1,!0)),t==null||i==null||t<i?{start:t,end:i}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,t=1,i=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(i?t:0)+7)%7];)e=en(e,t);return e}}function Sm(n,e,t,i){return{instanceId:Sr(),defId:n,range:e,forcedStartTzo:t??null,forcedEndTzo:i??null}}function r4(n,e,t,i){for(let s=0;s<i.length;s+=1){let r=i[s].parse(n,t);if(r){let{allDay:o}=n;return o==null&&(o=e,o==null&&(o=r.allDayGuess,o==null&&(o=!1))),{allDay:o,duration:r.duration,typeData:r.typeData,typeId:s}}}return null}function vr(n,e,t){let{dateEnv:i,pluginHooks:s,options:r}=t,{defs:o,instances:a}=n;a=_r(a,l=>!o[l.defId].recurringDef);for(let l in o){let c=o[l];if(c.recurringDef){let{duration:u}=c.recurringDef;u||(u=c.allDay?r.defaultAllDayEventDuration:r.defaultTimedEventDuration);let d=o4(c,u,e,i,s.recurringTypes);for(let f of d){let g=Sm(l,{start:f,end:i.add(f,u)});a[g.instanceId]=g}}}return{defs:o,instances:a}}function o4(n,e,t,i,s){let o=s[n.recurringDef.typeId].expand(n.recurringDef.typeData,{start:i.subtract(t.start,e),end:t.end},i);return n.allDay&&(o=o.map(ot)),o}const uu={id:String,groupId:String,title:String,url:String,interactive:Boolean},ZI={start:F,end:F,date:F,allDay:Boolean},a4=Object.assign(Object.assign(Object.assign({},uu),ZI),{extendedProps:F});function eC(n,e,t,i,s=Im(t),r,o){let{refined:a,extra:l}=tC(n,t,s),c=c4(e,t),u=r4(a,c,t.dateEnv,t.pluginHooks.recurringTypes);if(u){let f=Rg(a,l,e?e.sourceId:"",u.allDay,!!u.duration,t,r);return f.recurringDef={typeId:u.typeId,typeData:u.typeData,duration:u.duration},{def:f,instance:null}}let d=l4(a,c,t,i);if(d){let f=Rg(a,l,e?e.sourceId:"",d.allDay,d.hasEnd,t,r),g=Sm(f.defId,d.range,d.forcedStartTzo,d.forcedEndTzo);return o&&f.publicId&&o[f.publicId]&&(g.instanceId=o[f.publicId]),{def:f,instance:g}}return null}function tC(n,e,t=Im(e)){return bm(n,t)}function Im(n){return Object.assign(Object.assign(Object.assign({},sh),a4),n.pluginHooks.eventRefiners)}function Rg(n,e,t,i,s,r,o){let a={title:n.title||"",groupId:n.groupId||"",publicId:n.id||"",url:n.url||"",recurringDef:null,defId:(o&&n.id?o[n.id]:"")||Sr(),sourceId:t,allDay:i,hasEnd:s,interactive:n.interactive,ui:rh(n,r),extendedProps:Object.assign(Object.assign({},n.extendedProps||{}),e)};for(let l of r.pluginHooks.eventDefMemberAdders)Object.assign(a,l(n));return Object.freeze(a.ui.classNames),Object.freeze(a.extendedProps),a}function l4(n,e,t,i){let{allDay:s}=n,r,o=null,a=!1,l,c=null,u=n.start!=null?n.start:n.date;if(r=t.dateEnv.createMarkerMeta(u),r)o=r.marker;else if(!i)return null;return n.end!=null&&(l=t.dateEnv.createMarkerMeta(n.end)),s==null&&(e!=null?s=e:s=(!r||r.isTimeUnspecified)&&(!l||l.isTimeUnspecified)),s&&o&&(o=ot(o)),l&&(c=l.marker,s&&(c=ot(c)),o&&c<=o&&(c=null)),c?a=!0:i||(a=t.options.forceEventDuration||!1,c=t.dateEnv.add(o,s?t.options.defaultAllDayEventDuration:t.options.defaultTimedEventDuration)),{allDay:s,hasEnd:a,range:{start:o,end:c},forcedStartTzo:r?r.forcedTzo:null,forcedEndTzo:l?l.forcedTzo:null}}function c4(n,e){let t=null;return n&&(t=n.defaultAllDay),t==null&&(t=e.options.defaultAllDay),t}function ml(n,e,t,i,s,r){let o=Un(),a=Im(t);for(let l of n){let c=eC(l,e,t,i,a,s,r);c&&Dg(c,o)}return o}function Dg(n,e=Un()){return e.defs[n.def.defId]=n.def,n.instance&&(e.instances[n.instance.instanceId]=n.instance),e}function Cm(n,e){let t=n.instances[e];if(t){let i=n.defs[t.defId],s=td(n,r=>u4(i,r));return s.defs[i.defId]=i,s.instances[t.instanceId]=t,s}return Un()}function u4(n,e){return!!(n.groupId&&n.groupId===e.groupId)}function Un(){return{defs:{},instances:{}}}function xm(n,e){return{defs:Object.assign(Object.assign({},n.defs),e.defs),instances:Object.assign(Object.assign({},n.instances),e.instances)}}function td(n,e){let t=_r(n.defs,e),i=_r(n.instances,s=>t[s.defId]);return{defs:t,instances:i}}function h4(n,e){let{defs:t,instances:i}=n,s={},r={};for(let o in t)e.defs[o]||(s[o]=t[o]);for(let o in i)!e.instances[o]&&s[i[o].defId]&&(r[o]=i[o]);return{defs:s,instances:r}}function d4(n,e){return Array.isArray(n)?ml(n,null,e,!0):typeof n=="object"&&n?ml([n],null,e,!0):n!=null?String(n):null}function iw(n){return Array.isArray(n)?n:typeof n=="string"?n.split(/\s+/):[]}const sh={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:F,overlap:F,allow:F,className:iw,classNames:iw,color:String,backgroundColor:String,borderColor:String,textColor:String},f4={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function rh(n,e){let t=d4(n.constraint,e);return{display:n.display||null,startEditable:n.startEditable!=null?n.startEditable:n.editable,durationEditable:n.durationEditable!=null?n.durationEditable:n.editable,constraints:t!=null?[t]:[],overlap:n.overlap!=null?n.overlap:null,allows:n.allow!=null?[n.allow]:[],backgroundColor:n.backgroundColor||n.color||"",borderColor:n.borderColor||n.color||"",textColor:n.textColor||"",classNames:(n.className||[]).concat(n.classNames||[])}}function g4(n){return n.reduce(p4,f4)}function p4(n,e){return{display:e.display!=null?e.display:n.display,startEditable:e.startEditable!=null?e.startEditable:n.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:n.durationEditable,constraints:n.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:n.overlap,allows:n.allows.concat(e.allows),backgroundColor:e.backgroundColor||n.backgroundColor,borderColor:e.borderColor||n.borderColor,textColor:e.textColor||n.textColor,classNames:n.classNames.concat(e.classNames)}}const m4={id:String,defaultAllDay:Boolean,url:String,format:String,events:F,eventDataTransform:F,success:F,failure:F};function nC(n,e,t=iC(e)){let i;if(typeof n=="string"?i={url:n}:typeof n=="function"||Array.isArray(n)?i={events:n}:typeof n=="object"&&n&&(i=n),i){let{refined:s,extra:r}=bm(i,t),o=_4(s,e);if(o)return{_raw:n,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:s.defaultAllDay,eventDataTransform:s.eventDataTransform,success:s.success,failure:s.failure,publicId:s.id||"",sourceId:Sr(),sourceDefId:o.sourceDefId,meta:o.meta,ui:rh(s,e),extendedProps:r}}return null}function iC(n){return Object.assign(Object.assign(Object.assign({},sh),m4),n.pluginHooks.eventSourceRefiners)}function _4(n,e){let t=e.pluginHooks.eventSourceDefs;for(let i=t.length-1;i>=0;i-=1){let r=t[i].parseMeta(n);if(r)return{sourceDefId:i,meta:r}}return null}function v4(n,e,t,i,s){switch(e.type){case"RECEIVE_EVENTS":return y4(n,t[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,s);case"RESET_RAW_EVENTS":return b4(n,t[e.sourceId],e.rawEvents,i.activeRange,s);case"ADD_EVENTS":return E4(n,e.eventStore,i?i.activeRange:null,s);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return xm(n,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return i?vr(n,i.activeRange,s):n;case"REMOVE_EVENTS":return h4(n,e.eventStore);case"REMOVE_EVENT_SOURCE":return rC(n,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return td(n,r=>!r.sourceId);case"REMOVE_ALL_EVENTS":return Un();default:return n}}function y4(n,e,t,i,s,r){if(e&&t===e.latestFetchId){let o=ml(sC(s,e,r),e,r);return i&&(o=vr(o,i,r)),xm(rC(n,e.sourceId),o)}return n}function b4(n,e,t,i,s){const{defIdMap:r,instanceIdMap:o}=A4(n);let a=ml(sC(t,e,s),e,s,!1,r,o);return vr(a,i,s)}function sC(n,e,t){let i=t.options.eventDataTransform,s=e?e.eventDataTransform:null;return s&&(n=sw(n,s)),i&&(n=sw(n,i)),n}function sw(n,e){let t;if(!e)t=n;else{t=[];for(let i of n){let s=e(i);s?t.push(s):s==null&&t.push(i)}}return t}function E4(n,e,t,i){return t&&(e=vr(e,t,i)),xm(n,e)}function rw(n,e,t){let{defs:i}=n,s=Ir(n.instances,r=>i[r.defId].allDay?r:Object.assign(Object.assign({},r),{range:{start:t.createMarker(e.toDate(r.range.start,r.forcedStartTzo)),end:t.createMarker(e.toDate(r.range.end,r.forcedEndTzo))},forcedStartTzo:t.canComputeOffset?null:r.forcedStartTzo,forcedEndTzo:t.canComputeOffset?null:r.forcedEndTzo}));return{defs:i,instances:s}}function rC(n,e){return td(n,t=>t.sourceId!==e)}function w4(n,e){return{defs:n.defs,instances:_r(n.instances,t=>!e[t.instanceId])}}function A4(n){const{defs:e,instances:t}=n,i={},s={};for(let r in e){const o=e[r],{publicId:a}=o;a&&(i[a]=r)}for(let r in t){const o=t[r],a=e[o.defId],{publicId:l}=a;l&&(s[l]=r)}return{defIdMap:i,instanceIdMap:s}}class nd{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,t){T4(this.handlers,e,t)}off(e,t){S4(this.handlers,e,t)}trigger(e,...t){let i=this.handlers[e]||[],s=this.options&&this.options[e],r=[].concat(s||[],i);for(let o of r)o.apply(this.thisContext,t)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function T4(n,e,t){(n[e]||(n[e]=[])).push(t)}function S4(n,e,t){t?n[e]&&(n[e]=n[e].filter(i=>i!==t)):delete n[e]}const I4={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function C4(n,e){return ml(x4(n),null,e)}function x4(n){let e;return n===!0?e=[{}]:Array.isArray(n)?e=n.filter(t=>t.daysOfWeek):typeof n=="object"&&n?e=[n]:e=[],e=e.map(t=>Object.assign(Object.assign({},I4),t)),e}function oC(n,e,t){t.emitter.trigger("select",Object.assign(Object.assign({},Rm(n,t)),{jsEvent:e?e.origEvent:null,view:t.viewApi||t.calendarApi.view}))}function R4(n,e){e.emitter.trigger("unselect",{jsEvent:n?n.origEvent:null,view:e.viewApi||e.calendarApi.view})}function Rm(n,e){let t={};for(let i of e.pluginHooks.dateSpanTransforms)Object.assign(t,i(n,e));return Object.assign(t,W4(n,e.dateEnv)),t}function ow(n,e,t){let{dateEnv:i,options:s}=t,r=e;return n?(r=ot(r),r=i.add(r,s.defaultAllDayEventDuration)):r=i.add(r,s.defaultTimedEventDuration),r}function Dm(n,e,t,i){let s=oh(n.defs,e),r=Un();for(let o in n.defs){let a=n.defs[o];r.defs[o]=D4(a,s[o],t,i)}for(let o in n.instances){let a=n.instances[o],l=r.defs[a.defId];r.instances[o]=k4(a,l,s[a.defId],t,i)}return r}function D4(n,e,t,i){let s=t.standardProps||{};s.hasEnd==null&&e.durationEditable&&(t.startDelta||t.endDelta)&&(s.hasEnd=!0);let r=Object.assign(Object.assign(Object.assign({},n),s),{ui:Object.assign(Object.assign({},n.ui),s.ui)});t.extendedProps&&(r.extendedProps=Object.assign(Object.assign({},r.extendedProps),t.extendedProps));for(let o of i.pluginHooks.eventDefMutationAppliers)o(r,t,i);return!r.hasEnd&&i.options.forceEventDuration&&(r.hasEnd=!0),r}function k4(n,e,t,i,s){let{dateEnv:r}=s,o=i.standardProps&&i.standardProps.allDay===!0,a=i.standardProps&&i.standardProps.hasEnd===!1,l=Object.assign({},n);return o&&(l.range=YI(l.range)),i.datesDelta&&t.startEditable&&(l.range={start:r.add(l.range.start,i.datesDelta),end:r.add(l.range.end,i.datesDelta)}),i.startDelta&&t.durationEditable&&(l.range={start:r.add(l.range.start,i.startDelta),end:l.range.end}),i.endDelta&&t.durationEditable&&(l.range={start:l.range.start,end:r.add(l.range.end,i.endDelta)}),a&&(l.range={start:l.range.start,end:ow(e.allDay,l.range.start,s)}),e.allDay&&(l.range={start:ot(l.range.start),end:ot(l.range.end)}),l.range.end<l.range.start&&(l.range.end=ow(e.allDay,l.range.start,s)),l}class zr{constructor(e,t){this.context=e,this.internalEventSource=t}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class at{constructor(e,t,i){this._context=e,this._def=t,this._instance=i||null}setProp(e,t){if(e in ZI)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")t=uu[e](t),this.mutate({standardProps:{publicId:t}});else if(e in uu)t=uu[e](t),this.mutate({standardProps:{[e]:t}});else if(e in sh){let i=sh[e](t);e==="color"?i={backgroundColor:t,borderColor:t}:e==="editable"?i={startEditable:t,durationEditable:t}:i={[e]:t},this.mutate({standardProps:{ui:i}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,t){this.mutate({extendedProps:{[e]:t}})}setStart(e,t={}){let{dateEnv:i}=this._context,s=i.createMarker(e);if(s&&this._instance){let r=this._instance.range,o=$r(r.start,s,i,t.granularity);t.maintainDuration?this.mutate({datesDelta:o}):this.mutate({startDelta:o})}}setEnd(e,t={}){let{dateEnv:i}=this._context,s;if(!(e!=null&&(s=i.createMarker(e),!s))&&this._instance)if(s){let r=$r(this._instance.range.end,s,i,t.granularity);this.mutate({endDelta:r})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,t,i={}){let{dateEnv:s}=this._context,r={allDay:i.allDay},o=s.createMarker(e),a;if(o&&!(t!=null&&(a=s.createMarker(t),!a))&&this._instance){let l=this._instance.range;i.allDay===!0&&(l=YI(l));let c=$r(l.start,o,s,i.granularity);if(a){let u=$r(l.end,a,s,i.granularity);tW(c,u)?this.mutate({datesDelta:c,standardProps:r}):this.mutate({startDelta:c,endDelta:u,standardProps:r})}else r.hasEnd=!1,this.mutate({datesDelta:c,standardProps:r})}}moveStart(e){let t=Le(e);t&&this.mutate({startDelta:t})}moveEnd(e){let t=Le(e);t&&this.mutate({endDelta:t})}moveDates(e){let t=Le(e);t&&this.mutate({datesDelta:t})}setAllDay(e,t={}){let i={allDay:e},{maintainDuration:s}=t;s==null&&(s=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(i.hasEnd=s),this.mutate({standardProps:i})}formatRange(e){let{dateEnv:t}=this._context,i=this._instance,s=It(e);return this._def.hasEnd?t.formatRange(i.range.start,i.range.end,s,{forcedStartTzo:i.forcedStartTzo,forcedEndTzo:i.forcedEndTzo}):t.format(i.range.start,s,{forcedTzo:i.forcedStartTzo})}mutate(e){let t=this._instance;if(t){let i=this._def,s=this._context,{eventStore:r}=s.getCurrentData(),o=Cm(r,t.instanceId);o=Dm(o,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,s);let l=new at(s,i,t);this._def=o.defs[i.defId],this._instance=o.instances[t.instanceId],s.dispatch({type:"MERGE_EVENTS",eventStore:o}),s.emitter.trigger("eventChange",{oldEvent:l,event:this,relatedEvents:or(o,s,t),revert(){s.dispatch({type:"RESET_EVENTS",eventStore:r})}})}}remove(){let e=this._context,t=aC(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:t}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:t})}})}get source(){let{sourceId:e}=this._def;return e?new zr(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let t=this._def,{ui:i}=t,{startStr:s,endStr:r}=this,o={allDay:t.allDay};return t.title&&(o.title=t.title),s&&(o.start=s),r&&(o.end=r),t.publicId&&(o.id=t.publicId),t.groupId&&(o.groupId=t.groupId),t.url&&(o.url=t.url),i.display&&i.display!=="auto"&&(o.display=i.display),e.collapseColor&&i.backgroundColor&&i.backgroundColor===i.borderColor?o.color=i.backgroundColor:(i.backgroundColor&&(o.backgroundColor=i.backgroundColor),i.borderColor&&(o.borderColor=i.borderColor)),i.textColor&&(o.textColor=i.textColor),i.classNames.length&&(o.classNames=i.classNames),Object.keys(t.extendedProps).length&&(e.collapseExtendedProps?Object.assign(o,t.extendedProps):o.extendedProps=t.extendedProps),o}toJSON(){return this.toPlainObject()}}function aC(n){let e=n._def,t=n._instance;return{defs:{[e.defId]:e},instances:t?{[t.instanceId]:t}:{}}}function or(n,e,t){let{defs:i,instances:s}=n,r=[],o=t?t.instanceId:"";for(let a in s){let l=s[a],c=i[l.defId];l.instanceId!==o&&r.push(new at(e,c,l))}return r}function aw(n,e,t,i){let s={},r={},o={},a=[],l=[],c=oh(n.defs,e);for(let u in n.defs){let d=n.defs[u];c[d.defId].display==="inverse-background"&&(d.groupId?(s[d.groupId]=[],o[d.groupId]||(o[d.groupId]=d)):r[u]=[])}for(let u in n.instances){let d=n.instances[u],f=n.defs[d.defId],g=c[f.defId],m=d.range,_=!f.allDay&&i?XI(m,i):m,y=To(_,t);y&&(g.display==="inverse-background"?f.groupId?s[f.groupId].push(y):r[d.defId].push(y):g.display!=="none"&&(g.display==="background"?a:l).push({def:f,ui:g,instance:d,range:y,isStart:_.start&&_.start.valueOf()===y.start.valueOf(),isEnd:_.end&&_.end.valueOf()===y.end.valueOf()}))}for(let u in s){let d=s[u],f=nw(d,t);for(let g of f){let m=o[u],_=c[m.defId];a.push({def:m,ui:_,instance:null,range:g,isStart:!1,isEnd:!1})}}for(let u in r){let d=r[u],f=nw(d,t);for(let g of f)a.push({def:n.defs[u],ui:c[u],instance:null,range:g,isStart:!1,isEnd:!1})}return{bg:a,fg:l}}function lw(n,e){n.fcSeg=e}function So(n){return n.fcSeg||n.parentNode.fcSeg||null}function oh(n,e){return Ir(n,t=>lC(t,e))}function lC(n,e){let t=[];return e[""]&&t.push(e[""]),e[n.defId]&&t.push(e[n.defId]),t.push(n.ui),g4(t)}function P4(n,e){let t=n.map(M4);return t.sort((i,s)=>Kz(i,s,e)),t.map(i=>i._seg)}function M4(n){let{eventRange:e}=n,t=e.def,i=e.instance?e.instance.range:e.range,s=i.start?i.start.valueOf():0,r=i.end?i.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},t.extendedProps),t),{id:t.publicId,start:s,end:r,duration:r-s,allDay:Number(t.allDay),_seg:n})}function O4(n,e){let{pluginHooks:t}=e,i=t.isDraggableTransformers,{def:s,ui:r}=n.eventRange,o=r.startEditable;for(let a of i)o=a(o,s,r,e);return o}function N4(n,e){return n.isStart&&n.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function L4(n,e){return n.isEnd&&n.eventRange.ui.durationEditable}function cC(n,e,t,i,s,r,o){let{dateEnv:a,options:l}=t,{displayEventTime:c,displayEventEnd:u}=l,d=n.eventRange.def,f=n.eventRange.instance;c==null&&(c=i!==!1),u==null&&(u=s!==!1);let g=f.range.start,m=f.range.end,_=n.start||n.eventRange.range.start,y=n.end||n.eventRange.range.end,E=ot(g).valueOf()===ot(_).valueOf(),I=ot(Ss(m,-1)).valueOf()===ot(Ss(y,-1)).valueOf();return c&&!d.allDay&&(E||I)?(_=E?g:_,y=I?m:y,u&&d.hasEnd?a.formatRange(_,y,e,{forcedStartTzo:f.forcedStartTzo,forcedEndTzo:f.forcedEndTzo}):a.format(_,e,{forcedTzo:f.forcedStartTzo})):""}function Ha(n,e,t){let i=n.eventRange.range;return{isPast:i.end<=e.start,isFuture:i.start>=e.end,isToday:e&&fs(e,i.start)}}function V4(n){let e=["fc-event"];return n.isMirror&&e.push("fc-event-mirror"),n.isDraggable&&e.push("fc-event-draggable"),(n.isStartResizable||n.isEndResizable)&&e.push("fc-event-resizable"),n.isDragging&&e.push("fc-event-dragging"),n.isResizing&&e.push("fc-event-resizing"),n.isSelected&&e.push("fc-event-selected"),n.isStart&&e.push("fc-event-start"),n.isEnd&&e.push("fc-event-end"),n.isPast&&e.push("fc-event-past"),n.isToday&&e.push("fc-event-today"),n.isFuture&&e.push("fc-event-future"),e}function F4(n){return n.instance?n.instance.instanceId:`${n.def.defId}:${n.range.start.toISOString()}`}function uC(n,e){let{def:t,instance:i}=n.eventRange,{url:s}=t;if(s)return{href:s};let{emitter:r,options:o}=e,{eventInteractive:a}=o;return a==null&&(a=t.interactive,a==null&&(a=!!r.hasHandlers("eventClick"))),a?jI(l=>{r.trigger("eventClick",{el:l.target,event:new at(e,t,i),jsEvent:l,view:e.viewApi})}):{}}const B4={start:F,end:F,allDay:Boolean};function U4(n,e,t){let i=H4(n,e),{range:s}=i;if(!s.start)return null;if(!s.end){if(t==null)return null;s.end=e.add(s.start,t)}return i}function H4(n,e){let{refined:t,extra:i}=bm(n,B4),s=t.start?e.createMarkerMeta(t.start):null,r=t.end?e.createMarkerMeta(t.end):null,{allDay:o}=t;return o==null&&(o=s&&s.isTimeUnspecified&&(!r||r.isTimeUnspecified)),Object.assign({range:{start:s?s.marker:null,end:r?r.marker:null},allDay:o},i)}function j4(n,e){return t4(n.range,e.range)&&n.allDay===e.allDay&&z4(n,e)}function z4(n,e){for(let t in e)if(t!=="range"&&t!=="allDay"&&n[t]!==e[t])return!1;for(let t in n)if(!(t in e))return!1;return!0}function W4(n,e){return Object.assign(Object.assign({},dC(n.range,e,n.allDay)),{allDay:n.allDay})}function hC(n,e,t){return Object.assign(Object.assign({},dC(n,e,t)),{timeZone:e.timeZone})}function dC(n,e,t){return{start:e.toDate(n.start),end:e.toDate(n.end),startStr:e.formatIso(n.start,{omitTime:t}),endStr:e.formatIso(n.end,{omitTime:t})}}function $4(n,e,t){let i=tC({editable:!1},t),s=Rg(i.refined,i.extra,"",n.allDay,!0,t);return{def:s,ui:lC(s,e),instance:Sm(s.defId,n.range),range:n.range,isStart:!0,isEnd:!0}}function q4(n,e,t){let i=!1,s=function(a){i||(i=!0,e(a))},r=function(a){i||(i=!0,t(a))},o=n(s,r);o&&typeof o.then=="function"&&o.then(s,r)}class cw extends Error{constructor(e,t){super(e),this.response=t}}function G4(n,e,t){n=n.toUpperCase();const i={method:n};return n==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(t):(i.body=new URLSearchParams(t),i.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,i).then(s=>{if(s.ok)return s.json().then(r=>[r,s],()=>{throw new cw("Failure parsing JSON",s)});throw new cw("Request failed",s)})}let pf;function fC(){return pf==null&&(pf=K4()),pf}function K4(){if(typeof document>"u")return!0;let n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.innerHTML="<table><tr><td><div></div></td></tr></table>",n.querySelector("table").style.height="100px",n.querySelector("div").style.height="100%",document.body.appendChild(n);let t=n.querySelector("div").offsetHeight>0;return document.body.removeChild(n),t}class Q4 extends ut{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{ih(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{ih(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:t}=e,{forPrint:i}=this.state,s=i||t.height==="auto"||t.contentHeight==="auto",r=!s&&t.height!=null?t.height:"",o=["fc",i?"fc-media-print":"fc-media-screen",`fc-direction-${t.direction}`,e.theme.getClass("root")];return fC()||o.push("fc-liquid-hack"),e.children(o,r,s,i)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class Lo{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function Y4(n,e){return{component:n,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function km(n){return{[n.component.uid]:n}}const kg={};class X4{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,t){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:t})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,t){let{currentDataManager:i}=this;i.currentCalendarOptionsRefiners[e]?i.emitter.on(e,t):console.warn(`Unknown listener name '${e}'`)}off(e,t){this.currentDataManager.emitter.off(e,t)}trigger(e,...t){this.currentDataManager.emitter.trigger(e,...t)}changeView(e,t){this.batchRendering(()=>{if(this.unselect(),t)if(t.start&&t.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:t});else{let{dateEnv:i}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:i.createMarker(t)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,t){let i=this.getCurrentData(),s;t=t||"day",s=i.viewSpecs[t]||this.getUnitViewSpec(t),this.unselect(),s?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:s.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:t,toolbarConfig:i}=this.getCurrentData(),s=[].concat(i.header?i.header.viewsWithButtons:[],i.footer?i.footer.viewsWithButtons:[]),r,o;for(let a in t)s.push(a);for(r=0;r<s.length;r+=1)if(o=t[s[r]],o&&o.singleUnit===e)return o;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:Ol(e.calendarOptions.now,e.dateEnv)})}gotoDate(e){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.createMarker(e)})}incrementDate(e){let t=this.getCurrentData(),i=Le(e);i&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.add(t.currentDate,i)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,t){let{dateEnv:i}=this.getCurrentData();return i.format(i.createMarker(e),It(t))}formatRange(e,t,i){let{dateEnv:s}=this.getCurrentData();return s.formatRange(s.createMarker(e),s.createMarker(t),It(i),i)}formatIso(e,t){let{dateEnv:i}=this.getCurrentData();return i.formatIso(i.createMarker(e),{omitTime:t})}select(e,t){let i;t==null?e.start!=null?i=e:i={start:e,end:null}:i={start:e,end:t};let s=this.getCurrentData(),r=U4(i,s.dateEnv,Le({days:1}));r&&(this.dispatch({type:"SELECT_DATES",selection:r}),oC(r,null,s))}unselect(e){let t=this.getCurrentData();t.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),R4(e,t))}addEvent(e,t){if(e instanceof at){let o=e._def,a=e._instance;return this.getCurrentData().eventStore.defs[o.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:Dg({def:o,instance:a})}),this.triggerEventAdd(e)),e}let i=this.getCurrentData(),s;if(t instanceof zr)s=t.internalEventSource;else if(typeof t=="boolean")t&&([s]=wm(i.eventSources));else if(t!=null){let o=this.getEventSourceById(t);if(!o)return console.warn(`Could not find an event source with ID "${t}"`),null;s=o.internalEventSource}let r=eC(e,s,i,!1);if(r){let o=new at(i,r.def,r.def.recurringDef?null:r.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:Dg(r)}),this.triggerEventAdd(o),o}return null}triggerEventAdd(e){let{emitter:t}=this.getCurrentData();t.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:aC(e)})}})}getEventById(e){let t=this.getCurrentData(),{defs:i,instances:s}=t.eventStore;e=String(e);for(let r in i){let o=i[r];if(o.publicId===e){if(o.recurringDef)return new at(t,o,null);for(let a in s){let l=s[a];if(l.defId===o.defId)return new at(t,o,l)}}}return null}getEvents(){let e=this.getCurrentData();return or(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),t=e.eventSources,i=[];for(let s in t)i.push(new zr(e,t[s]));return i}getEventSourceById(e){let t=this.getCurrentData(),i=t.eventSources;e=String(e);for(let s in i)if(i[s].publicId===e)return new zr(t,i[s]);return null}addEventSource(e){let t=this.getCurrentData();if(e instanceof zr)return t.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let i=nC(e,t);return i?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[i]}),new zr(t,i)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let t=Le(e);t&&this.trigger("_scrollRequest",{time:t})}}function J4(n,e){return n.left>=e.left&&n.left<e.right&&n.top>=e.top&&n.top<e.bottom}function gC(n,e){let t={left:Math.max(n.left,e.left),right:Math.min(n.right,e.right),top:Math.max(n.top,e.top),bottom:Math.min(n.bottom,e.bottom)};return t.left<t.right&&t.top<t.bottom?t:!1}function Z4(n,e){return{left:Math.min(Math.max(n.left,e.left),e.right),top:Math.min(Math.max(n.top,e.top),e.bottom)}}function e$(n){return{left:(n.left+n.right)/2,top:(n.top+n.bottom)/2}}function t$(n,e){return{left:n.left-e.left,top:n.top-e.top}}function pC(n,e,t,i){return{dow:n.getUTCDay(),isDisabled:!!(i&&!fs(i.activeRange,n)),isOther:!!(i&&!fs(i.currentRange,n)),isToday:!!(e&&fs(e,n)),isPast:!!(e&&n<e.start),isFuture:!!(e&&n>=e.end)}}function Pm(n,e){let t=["fc-day",`fc-day-${rW[n.dow]}`];return n.isDisabled?t.push("fc-day-disabled"):(n.isToday&&(t.push("fc-day-today"),t.push(e.getClass("today"))),n.isPast&&t.push("fc-day-past"),n.isFuture&&t.push("fc-day-future"),n.isOther&&t.push("fc-day-other")),t}const n$=It({year:"numeric",month:"long",day:"numeric"}),i$=It({week:"long"});function Pg(n,e,t="day",i=!0){const{dateEnv:s,options:r,calendarApi:o}=n;let a=s.format(e,t==="week"?i$:n$);if(r.navLinks){let l=s.toDate(e);const c=u=>{let d=t==="day"?r.navLinkDayClick:t==="week"?r.navLinkWeekClick:null;typeof d=="function"?d.call(o,s.toDate(e),u):(typeof d=="string"&&(t=d),o.zoomTo(e,t))};return Object.assign({title:Ba(r.navLinkHint,[a,l],a),"data-navlink":""},i?HI(c):{onClick:c})}return{"aria-label":a}}let mf=null;function s$(){return mf===null&&(mf=r$()),mf}function r$(){let n=document.createElement("div");Fa(n,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),n.innerHTML="<div></div>",document.body.appendChild(n);let t=n.firstChild.getBoundingClientRect().left>n.getBoundingClientRect().left;return pm(n),t}let _f;function o$(){return _f||(_f=a$()),_f}function a$(){let n=document.createElement("div");n.style.overflow="scroll",n.style.position="absolute",n.style.top="-9999px",n.style.left="-9999px",document.body.appendChild(n);let e=mC(n);return document.body.removeChild(n),e}function mC(n){return{x:n.offsetHeight-n.clientHeight,y:n.offsetWidth-n.clientWidth}}function l$(n,e=!1){let t=window.getComputedStyle(n),i=parseInt(t.borderLeftWidth,10)||0,s=parseInt(t.borderRightWidth,10)||0,r=parseInt(t.borderTopWidth,10)||0,o=parseInt(t.borderBottomWidth,10)||0,a=mC(n),l=a.y-i-s,c=a.x-r-o,u={borderLeft:i,borderRight:s,borderTop:r,borderBottom:o,scrollbarBottom:c,scrollbarLeft:0,scrollbarRight:0};return s$()&&t.direction==="rtl"?u.scrollbarLeft=l:u.scrollbarRight=l,e&&(u.paddingLeft=parseInt(t.paddingLeft,10)||0,u.paddingRight=parseInt(t.paddingRight,10)||0,u.paddingTop=parseInt(t.paddingTop,10)||0,u.paddingBottom=parseInt(t.paddingBottom,10)||0),u}function c$(n,e=!1,t){let i=Mm(n),s=l$(n,e),r={left:i.left+s.borderLeft+s.scrollbarLeft,right:i.right-s.borderRight-s.scrollbarRight,top:i.top+s.borderTop,bottom:i.bottom-s.borderBottom-s.scrollbarBottom};return e&&(r.left+=s.paddingLeft,r.right-=s.paddingRight,r.top+=s.paddingTop,r.bottom-=s.paddingBottom),r}function Mm(n){let e=n.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function u$(n){let e=_C(n),t=n.getBoundingClientRect();for(let i of e){let s=gC(t,i.getBoundingClientRect());if(s)t=s;else return null}return t}function _C(n){let e=[];for(;n instanceof HTMLElement;){let t=window.getComputedStyle(n);if(t.position==="fixed")break;/(auto|scroll)/.test(t.overflow+t.overflowY+t.overflowX)&&e.push(n),n=n.parentNode}return e}class ah{constructor(e,t,i,s){this.els=t;let r=this.originClientRect=e.getBoundingClientRect();i&&this.buildElHorizontals(r.left),s&&this.buildElVerticals(r.top)}buildElHorizontals(e){let t=[],i=[];for(let s of this.els){let r=s.getBoundingClientRect();t.push(r.left-e),i.push(r.right-e)}this.lefts=t,this.rights=i}buildElVerticals(e){let t=[],i=[];for(let s of this.els){let r=s.getBoundingClientRect();t.push(r.top-e),i.push(r.bottom-e)}this.tops=t,this.bottoms=i}leftToIndex(e){let{lefts:t,rights:i}=this,s=t.length,r;for(r=0;r<s;r+=1)if(e>=t[r]&&e<i[r])return r}topToIndex(e){let{tops:t,bottoms:i}=this,s=t.length,r;for(r=0;r<s;r+=1)if(e>=t[r]&&e<i[r])return r}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return Dc(this.tops||[],e.tops||[])&&Dc(this.bottoms||[],e.bottoms||[])&&Dc(this.lefts||[],e.lefts||[])&&Dc(this.rights||[],e.rights||[])}}function Dc(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(Math.round(n[i])!==Math.round(e[i]))return!1;return!0}class Om{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class h$ extends Om{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class d$ extends Om{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class Rr extends ut{constructor(){super(...arguments),this.uid=Sr()}prepareHits(){}queryHit(e,t,i,s){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!Yt(e,".fc-event-mirror")}isValidDateDownEl(e){return!Yt(e,".fc-event:not(.fc-bg-event)")&&!Yt(e,".fc-more-link")&&!Yt(e,"a[data-navlink]")&&!Yt(e,".fc-popover")}}class f${constructor(e=t=>t.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let t=[];for(let i of e)this.insertEntry(i,t);return t}insertEntry(e,t){let i=this.findInsertion(e);this.isInsertionValid(i,e)?this.insertEntryAt(e,i):this.handleInvalidInsertion(i,e,t)}isInsertionValid(e,t){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(t)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,t,i){if(this.allowReslicing&&e.touchingEntry){const s=Object.assign(Object.assign({},t),{span:vC(t.span,e.touchingEntry.span)});i.push(s),this.splitEntry(t,e.touchingEntry,i)}else i.push(t)}splitEntry(e,t,i){let s=e.span,r=t.span;s.start<r.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:s.start,end:r.start}},i),s.end>r.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:r.end,end:s.end}},i)}insertEntryAt(e,t){let{entriesByLevel:i,levelCoords:s}=this;t.lateral===-1?(vf(s,t.level,t.levelCoord),vf(i,t.level,[e])):vf(i[t.level],t.lateral,e),this.stackCnts[ja(e)]=t.stackCnt}findInsertion(e){let{levelCoords:t,entriesByLevel:i,strictOrder:s,stackCnts:r}=this,o=t.length,a=0,l=-1,c=-1,u=null,d=0;for(let m=0;m<o;m+=1){const _=t[m];if(!s&&_>=a+this.getEntryThickness(e))break;let y=i[m],E,I=hw(y,e.span.start,uw),R=I[0]+I[1];for(;(E=y[R])&&E.span.start<e.span.end;){let S=_+this.getEntryThickness(E);S>a&&(a=S,u=E,l=m,c=R),S===a&&(d=Math.max(d,r[ja(E)]+1)),R+=1}}let f=0;if(u)for(f=l+1;f<o&&t[f]<a;)f+=1;let g=-1;return f<o&&t[f]===a&&(g=hw(i[f],e.span.end,uw)[0]),{touchingLevel:l,touchingLateral:c,touchingEntry:u,stackCnt:d,levelCoord:a,level:f,lateral:g}}toRects(){let{entriesByLevel:e,levelCoords:t}=this,i=e.length,s=[];for(let r=0;r<i;r+=1){let o=e[r],a=t[r];for(let l of o)s.push(Object.assign(Object.assign({},l),{thickness:this.getEntryThickness(l),levelCoord:a}))}return s}}function uw(n){return n.span.end}function ja(n){return n.index+":"+n.span.start}function vC(n,e){let t=Math.max(n.start,e.start),i=Math.min(n.end,e.end);return t<i?{start:t,end:i}:null}function vf(n,e,t){n.splice(e,0,t)}function hw(n,e,t){let i=0,s=n.length;if(!s||e<t(n[i]))return[0,0];if(e>t(n[s-1]))return[s,0];for(;i<s;){let r=Math.floor(i+(s-i)/2),o=t(n[r]);if(e<o)s=r;else if(e>o)i=r+1;else return[r,1]}return[i,0]}class g${constructor(e,t){this.emitter=new nd}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const Nm={};function p$(n,e){return!n||e>10?It({weekday:"short"}):e>1?It({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):It({weekday:"long"})}const yC="fc-col-header-cell";function bC(n){return n.text}class m$ extends ut{render(){let{dateEnv:e,options:t,theme:i,viewApi:s}=this.context,{props:r}=this,{date:o,dateProfile:a}=r,l=pC(o,r.todayRange,null,a),c=[yC].concat(Pm(l,i)),u=e.format(o,r.dayHeaderFormat),d=!l.isDisabled&&r.colCnt>1?Pg(this.context,o):{},f=Object.assign(Object.assign(Object.assign({date:e.toDate(o),view:s},r.extraRenderProps),{text:u}),l);return B(Fi,{elTag:"th",elClasses:c,elAttrs:Object.assign({role:"columnheader",colSpan:r.colSpan,"data-date":l.isDisabled?void 0:vm(o)},r.extraDataAttrs),renderProps:f,generatorName:"dayHeaderContent",customGenerator:t.dayHeaderContent,defaultGenerator:bC,classNameGenerator:t.dayHeaderClassNames,didMount:t.dayHeaderDidMount,willUnmount:t.dayHeaderWillUnmount},g=>B("div",{className:"fc-scrollgrid-sync-inner"},!l.isDisabled&&B(g,{elTag:"a",elAttrs:d,elClasses:["fc-col-header-cell-cushion",r.isSticky&&"fc-sticky"]})))}}const _$=It({weekday:"long"});class v$ extends ut{render(){let{props:e}=this,{dateEnv:t,theme:i,viewApi:s,options:r}=this.context,o=en(new Date(2592e5),e.dow),a={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},l=t.format(o,e.dayHeaderFormat),c=Object.assign(Object.assign(Object.assign(Object.assign({date:o},a),{view:s}),e.extraRenderProps),{text:l});return B(Fi,{elTag:"th",elClasses:[yC,...Pm(a,i),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:c,generatorName:"dayHeaderContent",customGenerator:r.dayHeaderContent,defaultGenerator:bC,classNameGenerator:r.dayHeaderClassNames,didMount:r.dayHeaderDidMount,willUnmount:r.dayHeaderWillUnmount},u=>B("div",{className:"fc-scrollgrid-sync-inner"},B(u,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":t.format(o,_$)}})))}}class Lm extends En{constructor(e,t){super(e,t),this.initialNowDate=Ol(t.options.now,t.dateEnv),this.initialNowQueriedMs=new Date().valueOf(),this.state=this.computeTiming().currentState}render(){let{props:e,state:t}=this;return e.children(t.nowDate,t.todayRange)}componentDidMount(){this.setTimeout()}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout()}computeTiming(){let{props:e,context:t}=this,i=Ss(this.initialNowDate,new Date().valueOf()-this.initialNowQueriedMs),s=t.dateEnv.startOf(i,e.unit),r=t.dateEnv.add(s,Le(1,e.unit)),o=r.valueOf()-i.valueOf();return o=Math.min(1e3*60*60*24,o),{currentState:{nowDate:s,todayRange:dw(s)},nextState:{nowDate:r,todayRange:dw(r)},waitMs:o}}setTimeout(){let{nextState:e,waitMs:t}=this.computeTiming();this.timeoutId=setTimeout(()=>{this.setState(e,()=>{this.setTimeout()})},t)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}Lm.contextType=Cr;function dw(n){let e=ot(n),t=en(e,1);return{start:e,end:t}}class y$ extends ut{constructor(){super(...arguments),this.createDayHeaderFormatter=Ve(b$)}render(){let{context:e}=this,{dates:t,dateProfile:i,datesRepDistinctDays:s,renderIntro:r}=this.props,o=this.createDayHeaderFormatter(e.options.dayHeaderFormat,s,t.length);return B(Lm,{unit:"day"},(a,l)=>B("tr",{role:"row"},r&&r("day"),t.map(c=>s?B(m$,{key:c.toISOString(),date:c,dateProfile:i,todayRange:l,colCnt:t.length,dayHeaderFormat:o}):B(v$,{key:c.getUTCDay(),dow:c.getUTCDay(),dayHeaderFormat:o}))))}}function b$(n,e,t){return n||p$(e,t)}class E${constructor(e,t){let i=e.start,{end:s}=e,r=[],o=[],a=-1;for(;i<s;)t.isHiddenDay(i)?r.push(a+.5):(a+=1,r.push(a),o.push(i)),i=en(i,1);this.dates=o,this.indices=r,this.cnt=o.length}sliceRange(e){let t=this.getDateDayIndex(e.start),i=this.getDateDayIndex(en(e.end,-1)),s=Math.max(0,t),r=Math.min(this.cnt-1,i);return s=Math.ceil(s),r=Math.floor(r),s<=r?{firstIndex:s,lastIndex:r,isStart:t===s,isEnd:i===r}:null}getDateDayIndex(e){let{indices:t}=this,i=Math.floor(No(this.dates[0],e));return i<0?t[0]-1:i>=t.length?t[t.length-1]+1:t[i]}}class w${constructor(e,t){let{dates:i}=e,s,r,o;if(t){for(r=i[0].getUTCDay(),s=1;s<i.length&&i[s].getUTCDay()!==r;s+=1);o=Math.ceil(i.length/s)}else o=1,s=i.length;this.rowCnt=o,this.colCnt=s,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let t=0;t<this.rowCnt;t+=1){let i=[];for(let s=0;s<this.colCnt;s+=1)i.push(this.buildCell(t,s));e.push(i)}return e}buildCell(e,t){let i=this.daySeries.dates[e*this.colCnt+t];return{key:i.toISOString(),date:i}}buildHeaderDates(){let e=[];for(let t=0;t<this.colCnt;t+=1)e.push(this.cells[0][t].date);return e}sliceRange(e){let{colCnt:t}=this,i=this.daySeries.sliceRange(e),s=[];if(i){let{firstIndex:r,lastIndex:o}=i,a=r;for(;a<=o;){let l=Math.floor(a/t),c=Math.min((l+1)*t,o+1);s.push({row:l,firstCol:a%t,lastCol:(c-1)%t,isStart:i.isStart&&a===r,isEnd:i.isEnd&&c-1===o}),a=c}}return s}}class A${constructor(){this.sliceBusinessHours=Ve(this._sliceBusinessHours),this.sliceDateSelection=Ve(this._sliceDateSpan),this.sliceEventStore=Ve(this._sliceEventStore),this.sliceEventDrag=Ve(this._sliceInteraction),this.sliceEventResize=Ve(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,t,i,s,...r){let{eventUiBases:o}=e,a=this.sliceEventStore(e.eventStore,o,t,i,...r);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,t,i,o,s,...r),businessHourSegs:this.sliceBusinessHours(e.businessHours,t,i,s,...r),fgEventSegs:a.fg,bgEventSegs:a.bg,eventDrag:this.sliceEventDrag(e.eventDrag,o,t,i,...r),eventResize:this.sliceEventResize(e.eventResize,o,t,i,...r),eventSelection:e.eventSelection}}sliceNowDate(e,t,i,s,...r){return this._sliceDateSpan({range:{start:e,end:Ss(e,1)},allDay:!1},t,i,{},s,...r)}_sliceBusinessHours(e,t,i,s,...r){return e?this._sliceEventStore(vr(e,kc(t,!!i),s),{},t,i,...r).bg:[]}_sliceEventStore(e,t,i,s,...r){if(e){let o=aw(e,t,kc(i,!!s),s);return{bg:this.sliceEventRanges(o.bg,r),fg:this.sliceEventRanges(o.fg,r)}}return{bg:[],fg:[]}}_sliceInteraction(e,t,i,s,...r){if(!e)return null;let o=aw(e.mutatedEvents,t,kc(i,!!s),s);return{segs:this.sliceEventRanges(o.fg,r),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,t,i,s,r,...o){if(!e)return[];let a=kc(t,!!i),l=To(e.range,a);if(l){e=Object.assign(Object.assign({},e),{range:l});let c=$4(e,s,r),u=this.sliceRange(e.range,...o);for(let d of u)d.eventRange=c;return u}return[]}sliceEventRanges(e,t){let i=[];for(let s of e)i.push(...this.sliceEventRange(s,t));return i}sliceEventRange(e,t){let i=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(i={start:i.start,end:en(i.start,1)});let s=this.sliceRange(i,...t);for(let r of s)r.eventRange=e,r.isStart=e.isStart&&r.isStart,r.isEnd=e.isEnd&&r.isEnd;return s}}function kc(n,e){let t=n.activeRange;return e?t:{start:Ss(t.start,n.slotMinTime.milliseconds),end:Ss(t.end,n.slotMaxTime.milliseconds-864e5)}}function EC(n,e,t){let{instances:i}=n.mutatedEvents;for(let s in i)if(!ed(e.validRange,i[s].range))return!1;return wC({eventDrag:n},t)}function T$(n,e,t){return ed(e.validRange,n.range)?wC({dateSelection:n},t):!1}function wC(n,e){let t=e.getCurrentData(),i=Object.assign({businessHours:t.businessHours,dateSelection:"",eventStore:t.eventStore,eventUiBases:t.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},n);return(e.pluginHooks.isPropsValid||S$)(i,e)}function S$(n,e,t={},i){return!(n.eventDrag&&!I$(n,e,t,i)||n.dateSelection&&!C$(n,e,t,i))}function I$(n,e,t,i){let s=e.getCurrentData(),r=n.eventDrag,o=r.mutatedEvents,a=o.defs,l=o.instances,c=oh(a,r.isEvent?n.eventUiBases:{"":s.selectionConfig});i&&(c=Ir(c,i));let u=w4(n.eventStore,r.affectedEvents.instances),d=u.defs,f=u.instances,g=oh(d,n.eventUiBases);for(let m in l){let _=l[m],y=_.range,E=c[_.defId],I=a[_.defId];if(!AC(E.constraints,y,u,n.businessHours,e))return!1;let{eventOverlap:R}=e.options,S=typeof R=="function"?R:null;for(let N in f){let T=f[N];if(Tm(y,T.range)&&(g[T.defId].overlap===!1&&r.isEvent||E.overlap===!1||S&&!S(new at(e,d[T.defId],T),new at(e,I,_))))return!1}let D=s.eventStore;for(let N of E.allows){let T=Object.assign(Object.assign({},t),{range:_.range,allDay:I.allDay}),b=D.defs[I.defId],w=D.instances[m],C;if(b?C=new at(e,b,w):C=new at(e,I),!N(Rm(T,e),C))return!1}}return!0}function C$(n,e,t,i){let s=n.eventStore,r=s.defs,o=s.instances,a=n.dateSelection,l=a.range,{selectionConfig:c}=e.getCurrentData();if(i&&(c=i(c)),!AC(c.constraints,l,s,n.businessHours,e))return!1;let{selectOverlap:u}=e.options,d=typeof u=="function"?u:null;for(let f in o){let g=o[f];if(Tm(l,g.range)&&(c.overlap===!1||d&&!d(new at(e,r[g.defId],g),null)))return!1}for(let f of c.allows){let g=Object.assign(Object.assign({},t),a);if(!f(Rm(g,e),null))return!1}return!0}function AC(n,e,t,i,s){for(let r of n)if(!R$(x$(r,e,t,i,s),e))return!1;return!0}function x$(n,e,t,i,s){return n==="businessHours"?yf(vr(i,e,s)):typeof n=="string"?yf(td(t,r=>r.groupId===n)):typeof n=="object"&&n?yf(vr(n,e,s)):[]}function yf(n){let{instances:e}=n,t=[];for(let i in e)t.push(e[i].range);return t}function R$(n,e){for(let t of n)if(ed(t,e))return!0;return!1}const Pc=/^(visible|hidden)$/;class D$ extends ut{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,Oi(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:t,liquidIsAbsolute:i}=e,s=t&&i,r=["fc-scroller"];return t&&(i?r.push("fc-scroller-liquid-absolute"):r.push("fc-scroller-liquid")),B("div",{ref:this.handleEl,className:r.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:s&&-(e.overcomeLeft||0)||"",right:s&&-(e.overcomeRight||0)||"",bottom:s&&-(e.overcomeBottom||0)||"",marginLeft:!s&&-(e.overcomeLeft||0)||"",marginRight:!s&&-(e.overcomeRight||0)||"",marginBottom:!s&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(Pc.test(this.props.overflowX))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:i}=e;for(let s=0;s<i.length;s+=1)if(i[s].getBoundingClientRect().width>t)return!0;return!1}needsYScrolling(){if(Pc.test(this.props.overflowY))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:i}=e;for(let s=0;s<i.length;s+=1)if(i[s].getBoundingClientRect().height>t)return!0;return!1}getXScrollbarWidth(){return Pc.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return Pc.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class er{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(t,i)=>{let{depths:s,currentMap:r}=this,o=!1,a=!1;t!==null?(o=i in r,r[i]=t,s[i]=(s[i]||0)+1,a=!0):(s[i]-=1,s[i]||(delete r[i],delete this.callbackMap[i],o=!0)),this.masterCallback&&(o&&this.masterCallback(null,String(i)),a&&this.masterCallback(t,String(i)))}}createRef(e){let t=this.callbackMap[e];return t||(t=this.callbackMap[e]=i=>{this.handleValue(i,String(e))}),t}collect(e,t,i){return FW(this.currentMap,e,t,i)}getAll(){return wm(this.currentMap)}}function k$(n){let e=Fz(n,".fc-scrollgrid-shrink"),t=0;for(let i of e)t=Math.max(t,Jz(i));return Math.ceil(t)}function TC(n,e){return n.liquid&&e.liquid}function P$(n,e){return e.maxHeight!=null||TC(n,e)}function M$(n,e,t,i){let{expandRows:s}=t;return typeof e.content=="function"?e.content(t):B("table",{role:"presentation",className:[e.tableClassName,n.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:t.tableMinWidth,width:t.clientWidth,height:s?t.clientHeight:""}},t.tableColGroupNode,B(i?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(t):e.rowContent))}function O$(n,e){return Ts(n,e,li)}function N$(n,e){let t=[];for(let i of n){let s=i.span||1;for(let r=0;r<s;r+=1)t.push(B("col",{style:{width:i.width==="shrink"?L$(e):i.width||"",minWidth:i.minWidth||""}}))}return B("colgroup",{},...t)}function L$(n){return n??4}function V$(n){for(let e of n)if(e.width==="shrink")return!0;return!1}function F$(n,e){let t=["fc-scrollgrid",e.theme.getClass("table")];return n&&t.push("fc-scrollgrid-liquid"),t}function B$(n,e){let t=["fc-scrollgrid-section",`fc-scrollgrid-section-${n.type}`,n.className];return e&&n.liquid&&n.maxHeight==null&&t.push("fc-scrollgrid-section-liquid"),n.isSticky&&t.push("fc-scrollgrid-section-sticky"),t}function U$(n){return B("div",{className:"fc-scrollgrid-sticky-shim",style:{width:n.clientWidth,minWidth:n.tableMinWidth}})}function fw(n){let{stickyHeaderDates:e}=n;return(e==null||e==="auto")&&(e=n.height==="auto"||n.viewHeight==="auto"),e}function H$(n){let{stickyFooterScrollbar:e}=n;return(e==null||e==="auto")&&(e=n.height==="auto"||n.viewHeight==="auto"),e}class SC extends ut{constructor(){super(...arguments),this.processCols=Ve(e=>e,O$),this.renderMicroColGroup=Ve(N$),this.scrollerRefs=new er,this.scrollerElRefs=new er(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:t,context:i}=this,s=e.sections||[],r=this.processCols(e.cols),o=this.renderMicroColGroup(r,t.shrinkWidth),a=F$(e.liquid,i);e.collapsibleWidth&&a.push("fc-scrollgrid-collapsible");let l=s.length,c=0,u,d=[],f=[],g=[];for(;c<l&&(u=s[c]).type==="header";)d.push(this.renderSection(u,o,!0)),c+=1;for(;c<l&&(u=s[c]).type==="body";)f.push(this.renderSection(u,o,!1)),c+=1;for(;c<l&&(u=s[c]).type==="footer";)g.push(this.renderSection(u,o,!0)),c+=1;let m=!fC();const _={role:"rowgroup"};return B("table",{role:"grid",className:a.join(" "),style:{height:e.height}},!!(!m&&d.length)&&B("thead",_,...d),!!(!m&&f.length)&&B("tbody",_,...f),!!(!m&&g.length)&&B("tfoot",_,...g),m&&B("tbody",_,...d,...f,...g))}renderSection(e,t,i){return"outerContent"in e?B(pt,{key:e.key},e.outerContent):B("tr",{key:e.key,role:"presentation",className:B$(e,this.props.liquid).join(" ")},this.renderChunkTd(e,t,e.chunk,i))}renderChunkTd(e,t,i,s){if("outerContent"in i)return i.outerContent;let{props:r}=this,{forceYScrollbars:o,scrollerClientWidths:a,scrollerClientHeights:l}=this.state,c=P$(r,e),u=TC(r,e),d=r.liquid?o?"scroll":c?"auto":"hidden":"visible",f=e.key,g=M$(e,i,{tableColGroupNode:t,tableMinWidth:"",clientWidth:!r.collapsibleWidth&&a[f]!==void 0?a[f]:null,clientHeight:l[f]!==void 0?l[f]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},s);return B(s?"th":"td",{ref:i.elRef,role:"presentation"},B("div",{className:`fc-scroller-harness${u?" fc-scroller-harness-liquid":""}`},B(D$,{ref:this.scrollerRefs.createRef(f),elRef:this.scrollerElRefs.createRef(f),overflowY:d,overflowX:r.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:u,liquidIsAbsolute:!0},g)))}_handleScrollerEl(e,t){let i=j$(this.props.sections,t);i&&Oi(i.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return V$(this.props.cols)?k$(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=o$(),{scrollerRefs:t,scrollerElRefs:i}=this,s=!1,r={},o={};for(let a in t.currentMap){let l=t.currentMap[a];if(l&&l.needsYScrolling()){s=!0;break}}for(let a of this.props.sections){let l=a.key,c=i.currentMap[l];if(c){let u=c.parentNode;r[l]=Math.floor(u.getBoundingClientRect().width-(s?e.y:0)),o[l]=Math.floor(u.getBoundingClientRect().height)}}return{forceYScrollbars:s,scrollerClientWidths:r,scrollerClientHeights:o}}}SC.addStateEquality({scrollerClientWidths:li,scrollerClientHeights:li});function j$(n,e){for(let t of n)if(t.key===e)return t;return null}class Vm extends ut{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,e&&lw(e,this.props.seg)}}render(){const{props:e,context:t}=this,{options:i}=t,{seg:s}=e,{eventRange:r}=s,{ui:o}=r,a={event:new at(t,r.def,r.instance),view:t.viewApi,timeText:e.timeText,textColor:o.textColor,backgroundColor:o.backgroundColor,borderColor:o.borderColor,isDraggable:!e.disableDragging&&O4(s,t),isStartResizable:!e.disableResizing&&N4(s,t),isEndResizable:!e.disableResizing&&L4(s),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!s.isStart,isEnd:!!s.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return B(Fi,Object.assign({},e,{elRef:this.handleEl,elClasses:[...V4(a),...s.eventRange.ui.classNames,...e.elClasses||[]],renderProps:a,generatorName:"eventContent",customGenerator:i.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:i.eventClassNames,didMount:i.eventDidMount,willUnmount:i.eventWillUnmount}))}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&lw(this.el,this.props.seg)}}class z$ extends ut{render(){let{props:e,context:t}=this,{options:i}=t,{seg:s}=e,{ui:r}=s.eventRange,o=i.eventTimeFormat||e.defaultTimeFormat,a=cC(s,o,t,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return B(Vm,Object.assign({},e,{elTag:"a",elStyle:{borderColor:r.borderColor,backgroundColor:r.backgroundColor},elAttrs:uC(s,t),defaultGenerator:W$,timeText:a}),(l,c)=>B(pt,null,B(l,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:c.textColor}}),!!c.isStartResizable&&B("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!c.isEndResizable&&B("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}function W$(n){return B("div",{className:"fc-event-main-frame"},n.timeText&&B("div",{className:"fc-event-time"},n.timeText),B("div",{className:"fc-event-title-container"},B("div",{className:"fc-event-title fc-sticky"},n.event.title||B(pt,null,""))))}const $$=It({day:"numeric"});class IC extends ut{constructor(){super(...arguments),this.refineRenderProps=cu(q$)}render(){let{props:e,context:t}=this,{options:i}=t,s=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:t.viewApi,dateEnv:t.dateEnv,monthStartFormat:i.monthStartFormat});return B(Fi,Object.assign({},e,{elClasses:[...Pm(s,t.theme),...e.elClasses||[]],elAttrs:Object.assign(Object.assign({},e.elAttrs),s.isDisabled?{}:{"data-date":vm(e.date)}),renderProps:s,generatorName:"dayCellContent",customGenerator:i.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:s.isDisabled?void 0:i.dayCellClassNames,didMount:i.dayCellDidMount,willUnmount:i.dayCellWillUnmount}))}}function CC(n){return!!(n.dayCellContent||xg("dayCellContent",n))}function q$(n){let{date:e,dateEnv:t,dateProfile:i,isMonthStart:s}=n,r=pC(e,n.todayRange,null,i),o=n.showDayNumber?t.format(e,s?n.monthStartFormat:$$):"";return Object.assign(Object.assign(Object.assign({date:t.toDate(e),view:n.viewApi},r),{isMonthStart:s,dayNumberText:o}),n.extraRenderProps)}class G$ extends ut{render(){let{props:e}=this,{seg:t}=e;return B(Vm,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:t.eventRange.ui.backgroundColor},defaultGenerator:K$,seg:t,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function K$(n){let{title:e}=n.event;return e&&B("div",{className:"fc-event-title"},n.event.title)}function Q$(n){return B("div",{className:`fc-${n}`})}const Y$=n=>B(Cr.Consumer,null,e=>{let{dateEnv:t,options:i}=e,{date:s}=n,r=i.weekNumberFormat||n.defaultFormat,o=t.computeWeekNumber(s),a=t.format(s,r);return B(Fi,Object.assign({},n,{renderProps:{num:o,text:a,date:s},generatorName:"weekNumberContent",customGenerator:i.weekNumberContent,defaultGenerator:X$,classNameGenerator:i.weekNumberClassNames,didMount:i.weekNumberDidMount,willUnmount:i.weekNumberWillUnmount}))});function X$(n){return n.text}const bf=10;class J$ extends ut{constructor(){super(...arguments),this.state={titleId:Jh()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&Oi(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const t=BI(e);this.rootEl.contains(t)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:t}=this.context,{props:i,state:s}=this,r=["fc-popover",e.getClass("popover")].concat(i.extraClassNames||[]);return Tz(B("div",Object.assign({},i.extraAttrs,{id:i.id,className:r.join(" "),"aria-labelledby":s.titleId,ref:this.handleRootEl}),B("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},B("span",{className:"fc-popover-title",id:s.titleId},i.title),B("span",{className:"fc-popover-close "+e.getIconClass("close"),title:t.closeHint,onClick:this.handleCloseClick})),B("div",{className:"fc-popover-body "+e.getClass("popoverContent")},i.children)),i.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:t,alignGridTop:i}=this.props,{rootEl:s}=this,r=u$(t);if(r){let o=s.getBoundingClientRect(),a=i?Yt(t,".fc-scrollgrid").getBoundingClientRect().top:r.top,l=e?r.right-o.width:r.left;a=Math.max(a,bf),l=Math.min(l,document.documentElement.clientWidth-bf-o.width),l=Math.max(l,bf);let c=s.offsetParent.getBoundingClientRect();Fa(s,{top:a-c.top,left:l-c.left})}}}class Z$ extends Rr{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:t}=this.context,{props:i}=this,{startDate:s,todayRange:r,dateProfile:o}=i,a=t.format(s,e.dayPopoverFormat);return B(IC,{elRef:this.handleRootEl,date:s,dateProfile:o,todayRange:r},(l,c,u)=>B(J$,{elRef:u.ref,id:i.id,title:a,extraClassNames:["fc-more-popover"].concat(u.className||[]),extraAttrs:u,parentEl:i.parentEl,alignmentEl:i.alignmentEl,alignGridTop:i.alignGridTop,onClose:i.onClose},CC(e)&&B(l,{elTag:"div",elClasses:["fc-more-popover-misc"]}),i.children))}queryHit(e,t,i,s){let{rootEl:r,props:o}=this;return e>=0&&e<i&&t>=0&&t<s?{dateProfile:o.dateProfile,dateSpan:Object.assign({allDay:!o.forceTimed,range:{start:o.startDate,end:o.endDate}},o.extraDateSpan),dayEl:r,rect:{left:0,top:0,right:i,bottom:s},layer:1}:null}}class e5 extends ut{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:Jh()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&Oi(this.props.elRef,e)},this.handleClick=e=>{let{props:t,context:i}=this,{moreLinkClick:s}=i.options,r=gw(t).start;function o(a){let{def:l,instance:c,range:u}=a.eventRange;return{event:new at(i,l,c),start:i.dateEnv.toDate(u.start),end:i.dateEnv.toDate(u.end),isStart:a.isStart,isEnd:a.isEnd}}typeof s=="function"&&(s=s({date:r,allDay:!!t.allDayDate,allSegs:t.allSegs.map(o),hiddenSegs:t.hiddenSegs.map(o),jsEvent:e,view:i.viewApi})),!s||s==="popover"?this.setState({isPopoverOpen:!0}):typeof s=="string"&&i.calendarApi.zoomTo(r,s)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:t}=this;return B(Cr.Consumer,null,i=>{let{viewApi:s,options:r,calendarApi:o}=i,{moreLinkText:a}=r,{moreCnt:l}=e,c=gw(e),u=typeof a=="function"?a.call(o,l):`+${l} ${a}`,d=Ba(r.moreLinkHint,[l],u),f={num:l,shortText:`+${l}`,text:u,view:s};return B(pt,null,!!e.moreCnt&&B(Fi,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),HI(this.handleClick)),{title:d,"aria-expanded":t.isPopoverOpen,"aria-controls":t.isPopoverOpen?t.popoverId:""}),renderProps:f,generatorName:"moreLinkContent",customGenerator:r.moreLinkContent,defaultGenerator:e.defaultGenerator||t5,classNameGenerator:r.moreLinkClassNames,didMount:r.moreLinkDidMount,willUnmount:r.moreLinkWillUnmount},e.children),t.isPopoverOpen&&B(Z$,{id:t.popoverId,startDate:c.start,endDate:c.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Yt(this.linkEl,".fc-view-harness"))}}function t5(n){return n.text}function gw(n){if(n.allDayDate)return{start:n.allDayDate,end:en(n.allDayDate,1)};let{hiddenSegs:e}=n;return{start:n5(e),end:s5(e)}}function n5(n){return n.reduce(i5).eventRange.range.start}function i5(n,e){return n.eventRange.range.start<e.eventRange.range.start?n:e}function s5(n){return n.reduce(r5).eventRange.range.end}function r5(n,e){return n.eventRange.range.end>e.eventRange.range.end?n:e}class o5{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let t of this.handlers)t(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class a5 extends o5{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:t}=this;let i=!1;e.isActive?(t.set(e.id,e),i=!0):t.has(e.id)&&(t.delete(e.id),i=!0),i&&this.set(t)}}const l5=[],xC={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},RC=Object.assign(Object.assign({},xC),{buttonHints:{prev:"Previous $0",next:"Next $0",today(n,e){return e==="day"?"Today":`This ${n}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(n){return`Show ${n} more event${n===1?"":"s"}`}});function c5(n){let e=n.length>0?n[0].code:"en",t=l5.concat(n),i={en:RC};for(let s of t)i[s.code]=s;return{map:i,defaultCode:e}}function DC(n,e){return typeof n=="object"&&!Array.isArray(n)?kC(n.code,[n.code],n):u5(n,e)}function u5(n,e){let t=[].concat(n||[]),i=h5(t,e)||RC;return kC(n,t,i)}function h5(n,e){for(let t=0;t<n.length;t+=1){let i=n[t].toLocaleLowerCase().split("-");for(let s=i.length;s>0;s-=1){let r=i.slice(0,s).join("-");if(e[r])return e[r]}}return null}function kC(n,e,t){let i=Em([xC,t],["buttonText"]);delete i.code;let{week:s}=i;return delete i.week,{codeArg:n,codes:e,week:s,simpleNumberFormat:new Intl.NumberFormat(n),options:i}}function Rs(n){return{id:Sr(),name:n.name,premiumReleaseDate:n.premiumReleaseDate?new Date(n.premiumReleaseDate):void 0,deps:n.deps||[],reducers:n.reducers||[],isLoadingFuncs:n.isLoadingFuncs||[],contextInit:[].concat(n.contextInit||[]),eventRefiners:n.eventRefiners||{},eventDefMemberAdders:n.eventDefMemberAdders||[],eventSourceRefiners:n.eventSourceRefiners||{},isDraggableTransformers:n.isDraggableTransformers||[],eventDragMutationMassagers:n.eventDragMutationMassagers||[],eventDefMutationAppliers:n.eventDefMutationAppliers||[],dateSelectionTransformers:n.dateSelectionTransformers||[],datePointTransforms:n.datePointTransforms||[],dateSpanTransforms:n.dateSpanTransforms||[],views:n.views||{},viewPropsTransformers:n.viewPropsTransformers||[],isPropsValid:n.isPropsValid||null,externalDefTransforms:n.externalDefTransforms||[],viewContainerAppends:n.viewContainerAppends||[],eventDropTransformers:n.eventDropTransformers||[],componentInteractions:n.componentInteractions||[],calendarInteractions:n.calendarInteractions||[],themeClasses:n.themeClasses||{},eventSourceDefs:n.eventSourceDefs||[],cmdFormatter:n.cmdFormatter,recurringTypes:n.recurringTypes||[],namedTimeZonedImpl:n.namedTimeZonedImpl,initialView:n.initialView||"",elementDraggingImpl:n.elementDraggingImpl,optionChangeHandlers:n.optionChangeHandlers||{},scrollGridImpl:n.scrollGridImpl||null,listenerRefiners:n.listenerRefiners||{},optionRefiners:n.optionRefiners||{},propSetHandlers:n.propSetHandlers||{}}}function d5(n,e){let t={},i={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function s(r){for(let o of r){const a=o.name,l=t[a];l===void 0?(t[a]=o.id,s(o.deps),i=g5(i,o)):l!==o.id&&console.warn(`Duplicate plugin '${a}'`)}}return n&&s(n),s(e),i}function f5(){let n=[],e=[],t;return(i,s)=>((!t||!Ts(i,n)||!Ts(s,e))&&(t=d5(i,s)),n=i,e=s,t)}function g5(n,e){return{premiumReleaseDate:p5(n.premiumReleaseDate,e.premiumReleaseDate),reducers:n.reducers.concat(e.reducers),isLoadingFuncs:n.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:n.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},n.eventRefiners),e.eventRefiners),eventDefMemberAdders:n.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},n.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:n.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:n.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:n.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:n.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:n.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:n.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},n.views),e.views),viewPropsTransformers:n.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||n.isPropsValid,externalDefTransforms:n.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:n.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:n.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:n.calendarInteractions.concat(e.calendarInteractions),componentInteractions:n.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},n.themeClasses),e.themeClasses),eventSourceDefs:n.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||n.cmdFormatter,recurringTypes:n.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||n.namedTimeZonedImpl,initialView:n.initialView||e.initialView,elementDraggingImpl:n.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},n.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||n.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},n.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},n.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},n.propSetHandlers),e.propSetHandlers)}}function p5(n,e){return n===void 0?e:e===void 0?n:new Date(Math.max(n.valueOf(),e.valueOf()))}class Ds extends Ml{}Ds.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};Ds.prototype.baseIconClass="fc-icon";Ds.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};Ds.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};Ds.prototype.iconOverrideOption="buttonIcons";Ds.prototype.iconOverrideCustomButtonOption="icon";Ds.prototype.iconOverridePrefix="fc-icon-";function m5(n,e){let t={},i;for(i in n)Mg(i,t,n,e);for(i in e)Mg(i,t,n,e);return t}function Mg(n,e,t,i){if(e[n])return e[n];let s=_5(n,e,t,i);return s&&(e[n]=s),s}function _5(n,e,t,i){let s=t[n],r=i[n],o=u=>s&&s[u]!==null?s[u]:r&&r[u]!==null?r[u]:null,a=o("component"),l=o("superType"),c=null;if(l){if(l===n)throw new Error("Can't have a custom view type that references itself");c=Mg(l,e,t,i)}return!a&&c&&(a=c.component),a?{type:n,component:a,defaults:Object.assign(Object.assign({},c?c.defaults:{}),s?s.rawOptions:{}),overrides:Object.assign(Object.assign({},c?c.overrides:{}),r?r.rawOptions:{})}:null}function pw(n){return Ir(n,v5)}function v5(n){let e=typeof n=="function"?{component:n}:n,{component:t}=e;return e.content?t=mw(e):t&&!(t.prototype instanceof ut)&&(t=mw(Object.assign(Object.assign({},e),{content:t}))),{superType:e.type,component:t,rawOptions:e}}function mw(n){return e=>B(Cr.Consumer,null,t=>B(Fi,{elTag:"div",elClasses:QI(t.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:t.options.nextDayThreshold}),generatorName:void 0,customGenerator:n.content,classNameGenerator:n.classNames,didMount:n.didMount,willUnmount:n.willUnmount}))}function y5(n,e,t,i){let s=pw(n),r=pw(e.views),o=m5(s,r);return Ir(o,a=>b5(a,r,e,t,i))}function b5(n,e,t,i,s){let r=n.overrides.duration||n.defaults.duration||i.duration||t.duration,o=null,a="",l="",c={};if(r&&(o=E5(r),o)){let f=Ig(o);a=f.unit,f.value===1&&(l=a,c=e[a]?e[a].rawOptions:{})}let u=f=>{let g=f.buttonText||{},m=n.defaults.buttonTextKey;return m!=null&&g[m]!=null?g[m]:g[n.type]!=null?g[n.type]:g[l]!=null?g[l]:null},d=f=>{let g=f.buttonHints||{},m=n.defaults.buttonTextKey;return m!=null&&g[m]!=null?g[m]:g[n.type]!=null?g[n.type]:g[l]!=null?g[l]:null};return{type:n.type,component:n.component,duration:o,durationUnit:a,singleUnit:l,optionDefaults:n.defaults,optionOverrides:Object.assign(Object.assign({},c),n.overrides),buttonTextOverride:u(i)||u(t)||n.overrides.buttonText,buttonTextDefault:u(s)||n.defaults.buttonText||u(Ua)||n.type,buttonTitleOverride:d(i)||d(t)||n.overrides.buttonHint,buttonTitleDefault:d(s)||n.defaults.buttonHint||d(Ua)}}let _w={};function E5(n){let e=JSON.stringify(n),t=_w[e];return t===void 0&&(t=Le(n),_w[e]=t),t}function w5(n,e){switch(e.type){case"CHANGE_VIEW_TYPE":n=e.viewType}return n}function A5(n,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},n),{[e.optionName]:e.rawOptionValue});default:return n}}function T5(n,e,t,i){let s;switch(e.type){case"CHANGE_VIEW_TYPE":return i.build(e.dateMarker||t);case"CHANGE_DATE":return i.build(e.dateMarker);case"PREV":if(s=i.buildPrev(n,t),s.isValid)return s;break;case"NEXT":if(s=i.buildNext(n,t),s.isValid)return s;break}return n}function S5(n,e,t){let i=e?e.activeRange:null;return MC({},P5(n,t),i,t)}function I5(n,e,t,i){let s=t?t.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return MC(n,e.sources,s,i);case"REMOVE_EVENT_SOURCE":return x5(n,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return t?OC(n,s,i):n;case"FETCH_EVENT_SOURCES":return Fm(n,e.sourceIds?WI(e.sourceIds):NC(n,i),s,e.isRefetch||!1,i);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return k5(n,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return n}}function C5(n,e,t){let i=e?e.activeRange:null;return Fm(n,NC(n,t),i,!0,t)}function PC(n){for(let e in n)if(n[e].isFetching)return!0;return!1}function MC(n,e,t,i){let s={};for(let r of e)s[r.sourceId]=r;return t&&(s=OC(s,t,i)),Object.assign(Object.assign({},n),s)}function x5(n,e){return _r(n,t=>t.sourceId!==e)}function OC(n,e,t){return Fm(n,_r(n,i=>R5(i,e,t)),e,!1,t)}function R5(n,e,t){return LC(n,t)?!t.options.lazyFetching||!n.fetchRange||n.isFetching||e.start<n.fetchRange.start||e.end>n.fetchRange.end:!n.latestFetchId}function Fm(n,e,t,i,s){let r={};for(let o in n){let a=n[o];e[o]?r[o]=D5(a,t,i,s):r[o]=a}return r}function D5(n,e,t,i){let{options:s,calendarApi:r}=i,o=i.pluginHooks.eventSourceDefs[n.sourceDefId],a=Sr();return o.fetch({eventSource:n,range:e,isRefetch:t,context:i},l=>{let{rawEvents:c}=l;s.eventSourceSuccess&&(c=s.eventSourceSuccess.call(r,c,l.response)||c),n.success&&(c=n.success.call(r,c,l.response)||c),i.dispatch({type:"RECEIVE_EVENTS",sourceId:n.sourceId,fetchId:a,fetchRange:e,rawEvents:c})},l=>{let c=!1;s.eventSourceFailure&&(s.eventSourceFailure.call(r,l),c=!0),n.failure&&(n.failure(l),c=!0),c||console.warn(l.message,l),i.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:n.sourceId,fetchId:a,fetchRange:e,error:l})}),Object.assign(Object.assign({},n),{isFetching:!0,latestFetchId:a})}function k5(n,e,t,i){let s=n[e];return s&&t===s.latestFetchId?Object.assign(Object.assign({},n),{[e]:Object.assign(Object.assign({},s),{isFetching:!1,fetchRange:i})}):n}function NC(n,e){return _r(n,t=>LC(t,e))}function P5(n,e){let t=iC(e),i=[].concat(n.eventSources||[]),s=[];n.initialEvents&&i.unshift(n.initialEvents),n.events&&i.unshift(n.events);for(let r of i){let o=nC(r,e,t);o&&s.push(o)}return s}function LC(n,e){return!e.pluginHooks.eventSourceDefs[n.sourceDefId].ignoreRange}function M5(n,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return n}}function O5(n,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return n}}function N5(n,e){let t;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function L5(n,e){let t;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function V5(n,e,t,i,s){let r=n.headerToolbar?vw(n.headerToolbar,n,e,t,i,s):null,o=n.footerToolbar?vw(n.footerToolbar,n,e,t,i,s):null;return{header:r,footer:o}}function vw(n,e,t,i,s,r){let o={},a=[],l=!1;for(let c in n){let u=n[c],d=F5(u,e,t,i,s,r);o[c]=d.widgets,a.push(...d.viewsWithButtons),l=l||d.hasTitle}return{sectionWidgets:o,viewsWithButtons:a,hasTitle:l}}function F5(n,e,t,i,s,r){let o=e.direction==="rtl",a=e.customButtons||{},l=t.buttonText||{},c=e.buttonText||{},u=t.buttonHints||{},d=e.buttonHints||{},f=n?n.split(" "):[],g=[],m=!1;return{widgets:f.map(y=>y.split(",").map(E=>{if(E==="title")return m=!0,{buttonName:E};let I,R,S,D,N,T;if(I=a[E])S=b=>{I.click&&I.click.call(b.target,b,b.target)},(D=i.getCustomButtonIconClass(I))||(D=i.getIconClass(E,o))||(N=I.text),T=I.hint||I.text;else if(R=s[E]){g.push(E),S=()=>{r.changeView(E)},(N=R.buttonTextOverride)||(D=i.getIconClass(E,o))||(N=R.buttonTextDefault);let b=R.buttonTextOverride||R.buttonTextDefault;T=Ba(R.buttonTitleOverride||R.buttonTitleDefault||e.viewHint,[b,E],b)}else if(r[E])if(S=()=>{r[E]()},(N=l[E])||(D=i.getIconClass(E,o))||(N=c[E]),E==="prevYear"||E==="nextYear"){let b=E==="prevYear"?"prev":"next";T=Ba(u[b]||d[b],[c.year||"year","year"],c[E])}else T=b=>Ba(u[E]||d[E],[c[b]||b,b],c[E]);return{buttonName:E,buttonClick:S,buttonIcon:D,buttonText:N,buttonHint:T}})),viewsWithButtons:g,hasTitle:m}}class B5{constructor(e,t,i){this.type=e,this.getCurrentData=t,this.dateEnv=i}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let U5={ignoreRange:!0,parseMeta(n){return Array.isArray(n.events)?n.events:null},fetch(n,e){e({rawEvents:n.eventSource.meta})}};const H5=Rs({name:"array-event-source",eventSourceDefs:[U5]});let j5={parseMeta(n){return typeof n.events=="function"?n.events:null},fetch(n,e,t){const{dateEnv:i}=n.context,s=n.eventSource.meta;q4(s.bind(null,hC(n.range,i)),r=>e({rawEvents:r}),t)}};const z5=Rs({name:"func-event-source",eventSourceDefs:[j5]}),W5={method:String,extraParams:F,startParam:String,endParam:String,timeZoneParam:String};let $5={parseMeta(n){return n.url&&(n.format==="json"||!n.format)?{url:n.url,format:"json",method:(n.method||"GET").toUpperCase(),extraParams:n.extraParams,startParam:n.startParam,endParam:n.endParam,timeZoneParam:n.timeZoneParam}:null},fetch(n,e,t){const{meta:i}=n.eventSource,s=G5(i,n.range,n.context);G4(i.method,i.url,s).then(([r,o])=>{e({rawEvents:r,response:o})},t)}};const q5=Rs({name:"json-event-source",eventSourceRefiners:W5,eventSourceDefs:[$5]});function G5(n,e,t){let{dateEnv:i,options:s}=t,r,o,a,l,c={};return r=n.startParam,r==null&&(r=s.startParam),o=n.endParam,o==null&&(o=s.endParam),a=n.timeZoneParam,a==null&&(a=s.timeZoneParam),typeof n.extraParams=="function"?l=n.extraParams():l=n.extraParams||{},Object.assign(c,l),c[r]=i.formatIso(e.start),c[o]=i.formatIso(e.end),i.timeZone!=="local"&&(c[a]=i.timeZone),c}const K5={daysOfWeek:F,startTime:Le,endTime:Le,duration:Le,startRecur:F,endRecur:F};let Q5={parse(n,e){if(n.daysOfWeek||n.startTime||n.endTime||n.startRecur||n.endRecur){let t={daysOfWeek:n.daysOfWeek||null,startTime:n.startTime||null,endTime:n.endTime||null,startRecur:n.startRecur?e.createMarker(n.startRecur):null,endRecur:n.endRecur?e.createMarker(n.endRecur):null},i;return n.duration&&(i=n.duration),!i&&n.startTime&&n.endTime&&(i=nW(n.endTime,n.startTime)),{allDayGuess:!n.startTime&&!n.endTime,duration:i,typeData:t}}return null},expand(n,e,t){let i=To(e,{start:n.startRecur,end:n.endRecur});return i?X5(n.daysOfWeek,n.startTime,i,t):[]}};const Y5=Rs({name:"simple-recurring-event",recurringTypes:[Q5],eventRefiners:K5});function X5(n,e,t,i){let s=n?WI(n):null,r=ot(t.start),o=t.end,a=[];for(;r<o;){let l;(!s||s[r.getUTCDay()])&&(e?l=i.add(r,e):l=r,a.push(l)),r=en(r,1)}return a}const J5=Rs({name:"change-handler",optionChangeHandlers:{events(n,e){yw([n],e)},eventSources:yw}});function yw(n,e){let t=wm(e.getCurrentData().eventSources);if(t.length===1&&n.length===1&&Array.isArray(t[0]._raw)&&Array.isArray(n[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:t[0].sourceId,rawEvents:n[0]});return}let i=[];for(let s of n){let r=!1;for(let o=0;o<t.length;o+=1)if(t[o]._raw===s){t.splice(o,1),r=!0;break}r||i.push(s)}for(let s of t)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:s.sourceId});for(let s of i)e.calendarApi.addEventSource(s)}function Z5(n,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},hC(n.activeRange,e.dateEnv)),{view:e.viewApi}))}function e9(n,e){let{emitter:t}=e;t.hasHandlers("eventsSet")&&t.trigger("eventsSet",or(n,e))}const t9=[H5,z5,q5,Y5,J5,Rs({name:"misc",isLoadingFuncs:[n=>PC(n.eventSources)],propSetHandlers:{dateProfile:Z5,eventStore:e9}})];class n9{constructor(e,t){this.runTaskOption=e,this.drainedOption=t,this.queue=[],this.delayedRunner=new gm(this.drain.bind(this))}request(e,t){this.queue.push(e),this.delayedRunner.request(t)}pause(e){this.delayedRunner.pause(e)}resume(e,t){this.delayedRunner.resume(e,t)}drain(){let{queue:e}=this;for(;e.length;){let t=[],i;for(;i=e.shift();)this.runTask(i),t.push(i);this.drained(t)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function i9(n,e,t){let i;return/^(year|month)$/.test(n.currentRangeUnit)?i=n.currentRange:i=n.activeRange,t.formatRange(i.start,i.end,It(e.titleFormat||s9(n)),{isEndExclusive:n.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function s9(n){let{currentRangeUnit:e}=n;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let t=Zu(n.currentRange.start,n.currentRange.end);return t!==null&&t>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class r9{constructor(e){this.computeCurrentViewData=Ve(this._computeCurrentViewData),this.organizeRawLocales=Ve(c5),this.buildLocale=Ve(DC),this.buildPluginHooks=f5(),this.buildDateEnv=Ve(o9),this.buildTheme=Ve(a9),this.parseToolbars=Ve(V5),this.buildViewSpecs=Ve(y5),this.buildDateProfileGenerator=cu(l9),this.buildViewApi=Ve(c9),this.buildViewUiProps=cu(d9),this.buildEventUiBySource=Ve(u9,li),this.buildEventUiBases=Ve(h9),this.parseContextBusinessHours=cu(f9),this.buildTitle=Ve(i9),this.emitter=new nd,this.actionRunner=new n9(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=f=>{this.actionRunner.request(f)},this.props=e,this.actionRunner.pause();let t={},i=this.computeOptionsData(e.optionOverrides,t,e.calendarApi),s=i.calendarOptions.initialView||i.pluginHooks.initialView,r=this.computeCurrentViewData(s,i,e.optionOverrides,t);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(r.options);let o=s4(i.calendarOptions,i.dateEnv),a=r.dateProfileGenerator.build(o);fs(a.activeRange,o)||(o=a.currentRange.start);let l={dateEnv:i.dateEnv,options:i.calendarOptions,pluginHooks:i.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData};for(let f of i.pluginHooks.contextInit)f(l);let c=S5(i.calendarOptions,a,l),u={dynamicOptionOverrides:t,currentViewType:s,currentDate:o,dateProfile:a,businessHours:this.parseContextBusinessHours(l),eventSources:c,eventUiBases:{},eventStore:Un(),renderableEventStore:Un(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(l).selectionConfig},d=Object.assign(Object.assign({},l),u);for(let f of i.pluginHooks.reducers)Object.assign(u,f(null,null,d));Ef(u,l)&&this.emitter.trigger("loading",!0),this.state=u,this.updateData(),this.actionRunner.resume()}resetOptions(e,t){let{props:i}=this;t===void 0?i.optionOverrides=e:(i.optionOverrides=Object.assign(Object.assign({},i.optionOverrides||{}),e),this.optionsForRefining.push(...t)),(t===void 0||t.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:t,state:i,emitter:s}=this,r=A5(i.dynamicOptionOverrides,e),o=this.computeOptionsData(t.optionOverrides,r,t.calendarApi),a=w5(i.currentViewType,e),l=this.computeCurrentViewData(a,o,t.optionOverrides,r);t.calendarApi.currentDataManager=this,s.setThisContext(t.calendarApi),s.setOptions(l.options);let c={dateEnv:o.dateEnv,options:o.calendarOptions,pluginHooks:o.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:s,getCurrentData:this.getCurrentData},{currentDate:u,dateProfile:d}=i;this.data&&this.data.dateProfileGenerator!==l.dateProfileGenerator&&(d=l.dateProfileGenerator.build(u)),u=i4(u,e),d=T5(d,e,u,l.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!fs(d.currentRange,u))&&(u=d.currentRange.start);let f=I5(i.eventSources,e,d,c),g=v4(i.eventStore,e,f,d,c),_=PC(f)&&!l.options.progressiveEventRendering&&i.renderableEventStore||g,{eventUiSingleBase:y,selectionConfig:E}=this.buildViewUiProps(c),I=this.buildEventUiBySource(f),R=this.buildEventUiBases(_.defs,y,I),S={dynamicOptionOverrides:r,currentViewType:a,currentDate:u,dateProfile:d,eventSources:f,eventStore:g,renderableEventStore:_,selectionConfig:E,eventUiBases:R,businessHours:this.parseContextBusinessHours(c),dateSelection:M5(i.dateSelection,e),eventSelection:O5(i.eventSelection,e),eventDrag:N5(i.eventDrag,e),eventResize:L5(i.eventResize,e)},D=Object.assign(Object.assign({},c),S);for(let b of o.pluginHooks.reducers)Object.assign(S,b(i,e,D));let N=Ef(i,c),T=Ef(S,c);!N&&T?s.trigger("loading",!0):N&&!T&&s.trigger("loading",!1),this.state=S,t.onAction&&t.onAction(e)}updateData(){let{props:e,state:t}=this,i=this.data,s=this.computeOptionsData(e.optionOverrides,t.dynamicOptionOverrides,e.calendarApi),r=this.computeCurrentViewData(t.currentViewType,s,e.optionOverrides,t.dynamicOptionOverrides),o=this.data=Object.assign(Object.assign(Object.assign({viewTitle:this.buildTitle(t.dateProfile,r.options,s.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},s),r),t),a=s.pluginHooks.optionChangeHandlers,l=i&&i.calendarOptions,c=s.calendarOptions;if(l&&l!==c){l.timeZone!==c.timeZone&&(t.eventSources=o.eventSources=C5(o.eventSources,t.dateProfile,o),t.eventStore=o.eventStore=rw(o.eventStore,i.dateEnv,o.dateEnv),t.renderableEventStore=o.renderableEventStore=rw(o.renderableEventStore,i.dateEnv,o.dateEnv));for(let u in a)(this.optionsForHandling.indexOf(u)!==-1||l[u]!==c[u])&&a[u](c[u],o)}this.optionsForHandling=[],e.onData&&e.onData(o)}computeOptionsData(e,t,i){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&t===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:s,pluginHooks:r,localeDefaults:o,availableLocaleData:a,extra:l}=this.processRawCalendarOptions(e,t);bw(l);let c=this.buildDateEnv(s.timeZone,s.locale,s.weekNumberCalculation,s.firstDay,s.weekText,r,a,s.defaultRangeSeparator),u=this.buildViewSpecs(r.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,o),d=this.buildTheme(s,r),f=this.parseToolbars(s,this.stableOptionOverrides,d,u,i);return this.stableCalendarOptionsData={calendarOptions:s,pluginHooks:r,dateEnv:c,viewSpecs:u,theme:d,toolbarConfig:f,localeDefaults:o,availableRawLocales:a.map}}processRawCalendarOptions(e,t){let{locales:i,locale:s}=ff([Ua,e,t]),r=this.organizeRawLocales(i),o=r.map,a=this.buildLocale(s||r.defaultCode,o).options,l=this.buildPluginHooks(e.plugins||[],t9),c=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},JE),ZE),ew),l.listenerRefiners),l.optionRefiners),u={},d=ff([Ua,a,e,t]),f={},g=this.currentCalendarOptionsInput,m=this.currentCalendarOptionsRefined,_=!1;for(let y in d)this.optionsForRefining.indexOf(y)===-1&&(d[y]===g[y]||$s[y]&&y in g&&$s[y](g[y],d[y]))?f[y]=m[y]:c[y]?(f[y]=c[y](d[y]),_=!0):u[y]=g[y];return _&&(this.currentCalendarOptionsInput=d,this.currentCalendarOptionsRefined=f,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=t),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:l,availableLocaleData:r,localeDefaults:a,extra:u}}_computeCurrentViewData(e,t,i,s){let r=t.viewSpecs[e];if(!r)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:o,extra:a}=this.processRawViewOptions(r,t.pluginHooks,t.localeDefaults,i,s);bw(a);let l=this.buildDateProfileGenerator({dateProfileGeneratorClass:r.optionDefaults.dateProfileGeneratorClass,duration:r.duration,durationUnit:r.durationUnit,usesMinMaxTime:r.optionDefaults.usesMinMaxTime,dateEnv:t.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:o.slotMinTime,slotMaxTime:o.slotMaxTime,showNonCurrentDates:o.showNonCurrentDates,dayCount:o.dayCount,dateAlignment:o.dateAlignment,dateIncrement:o.dateIncrement,hiddenDays:o.hiddenDays,weekends:o.weekends,nowInput:o.now,validRangeInput:o.validRange,visibleRangeInput:o.visibleRange,fixedWeekCount:o.fixedWeekCount}),c=this.buildViewApi(e,this.getCurrentData,t.dateEnv);return{viewSpec:r,options:o,dateProfileGenerator:l,viewApi:c}}processRawViewOptions(e,t,i,s,r){let o=ff([Ua,e.optionDefaults,i,s,e.optionOverrides,r]),a=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},JE),ZE),ew),OW),t.listenerRefiners),t.optionRefiners),l={},c=this.currentViewOptionsInput,u=this.currentViewOptionsRefined,d=!1,f={};for(let g in o)o[g]===c[g]||$s[g]&&$s[g](o[g],c[g])?l[g]=u[g]:(o[g]===this.currentCalendarOptionsInput[g]||$s[g]&&$s[g](o[g],this.currentCalendarOptionsInput[g])?g in this.currentCalendarOptionsRefined&&(l[g]=this.currentCalendarOptionsRefined[g]):a[g]?l[g]=a[g](o[g]):f[g]=o[g],d=!0);return d&&(this.currentViewOptionsInput=o,this.currentViewOptionsRefined=l),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:f}}}function o9(n,e,t,i,s,r,o,a){let l=DC(e||o.defaultCode,o.map);return new WW({calendarSystem:"gregory",timeZone:n,namedTimeZoneImpl:r.namedTimeZonedImpl,locale:l,weekNumberCalculation:t,firstDay:i,weekText:s,cmdFormatter:r.cmdFormatter,defaultSeparator:a})}function a9(n,e){let t=e.themeClasses[n.themeSystem]||Ds;return new t(n)}function l9(n){let e=n.dateProfileGeneratorClass||JI;return new e(n)}function c9(n,e,t){return new B5(n,e,t)}function u9(n){return Ir(n,e=>e.ui)}function h9(n,e,t){let i={"":e};for(let s in n){let r=n[s];r.sourceId&&t[r.sourceId]&&(i[s]=t[r.sourceId])}return i}function d9(n){let{options:e}=n;return{eventUiSingleBase:rh({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},n),selectionConfig:rh({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},n)}}function Ef(n,e){for(let t of e.pluginHooks.isLoadingFuncs)if(t(n))return!0;return!1}function f9(n){return C4(n.options.businessHours,n)}function bw(n,e){for(let t in n)console.warn(`Unknown option '${t}'`)}class g9 extends ut{render(){let e=this.props.widgetGroups.map(t=>this.renderWidgetGroup(t));return B("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:t}=this,{theme:i}=this.context,s=[],r=!0;for(let o of e){let{buttonName:a,buttonClick:l,buttonText:c,buttonIcon:u,buttonHint:d}=o;if(a==="title")r=!1,s.push(B("h2",{className:"fc-toolbar-title",id:t.titleId},t.title));else{let f=a===t.activeButton,g=!t.isTodayEnabled&&a==="today"||!t.isPrevEnabled&&a==="prev"||!t.isNextEnabled&&a==="next",m=[`fc-${a}-button`,i.getClass("button")];f&&m.push(i.getClass("buttonActive")),s.push(B("button",{type:"button",title:typeof d=="function"?d(t.navUnit):d,disabled:g,"aria-pressed":f,className:m.join(" "),onClick:l},c||(u?B("span",{className:u,role:"img"}):"")))}}if(s.length>1){let o=r&&i.getClass("buttonGroup")||"";return B("div",{className:o},...s)}return s[0]}}class Ew extends ut{render(){let{model:e,extraClassName:t}=this.props,i=!1,s,r,o=e.sectionWidgets,a=o.center;return o.left?(i=!0,s=o.left):s=o.start,o.right?(i=!0,r=o.right):r=o.end,B("div",{className:[t||"","fc-toolbar",i?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",s||[]),this.renderSection("center",a||[]),this.renderSection("end",r||[]))}renderSection(e,t){let{props:i}=this;return B(g9,{key:e,widgetGroups:t,title:i.title,navUnit:i.navUnit,activeButton:i.activeButton,isTodayEnabled:i.isTodayEnabled,isPrevEnabled:i.isPrevEnabled,isNextEnabled:i.isNextEnabled,titleId:i.titleId})}}class p9 extends ut{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,Oi(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:t}=this,{aspectRatio:i}=e,s=["fc-view-harness",i||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],r="",o="";return i?t.availableWidth!==null?r=t.availableWidth/i:o=`${1/i*100}%`:r=e.height||"",B("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:s.join(" "),style:{height:r,paddingBottom:o}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class m9 extends Lo{constructor(e){super(e),this.handleSegClick=(t,i)=>{let{component:s}=this,{context:r}=s,o=So(i);if(o&&s.isValidSegDownEl(t.target)){let a=Yt(t.target,".fc-event-forced-url"),l=a?a.querySelector("a[href]").href:"";r.emitter.trigger("eventClick",{el:i,event:new at(s.context,o.eventRange.def,o.eventRange.instance),jsEvent:t,view:r.viewApi}),l&&!t.defaultPrevented&&(window.location.href=l)}},this.destroy=UI(e.el,"click",".fc-event",this.handleSegClick)}}class _9 extends Lo{constructor(e){super(e),this.handleEventElRemove=t=>{t===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(t,i)=>{So(i)&&(this.currentSegEl=i,this.triggerEvent("eventMouseEnter",t,i))},this.handleSegLeave=(t,i)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",t,i))},this.removeHoverListeners=Hz(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,t,i){let{component:s}=this,{context:r}=s,o=So(i);(!t||s.isValidSegDownEl(t.target))&&r.emitter.trigger(e,{el:i,event:new at(r,o.eventRange.def,o.eventRange.instance),jsEvent:t,view:r.viewApi})}}class v9 extends xr{constructor(){super(...arguments),this.buildViewContext=Ve(GW),this.buildViewPropTransformers=Ve(b9),this.buildToolbarProps=Ve(y9),this.headerRef=Mi(),this.footerRef=Mi(),this.interactionsStore={},this.state={viewLabelId:Jh()},this.registerInteractiveComponent=(e,t)=>{let i=Y4(e,t),o=[m9,_9].concat(this.props.pluginHooks.componentInteractions).map(a=>new a(i));this.interactionsStore[e.uid]=o,kg[e.uid]=i},this.unregisterInteractiveComponent=e=>{let t=this.interactionsStore[e.uid];if(t){for(let i of t)i.destroy();delete this.interactionsStore[e.uid]}delete kg[e.uid]},this.resizeRunner=new gm(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:t}=this.props;t.handleWindowResize&&e.target===window&&this.resizeRunner.request(t.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:t,options:i}=e,s=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,Ol(e.options.now,e.dateEnv),e.viewTitle),r=!1,o="",a;e.isHeightAuto||e.forPrint?o="":i.height!=null?r=!0:i.contentHeight!=null?o=i.contentHeight:a=Math.max(i.aspectRatio,.5);let l=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),c=t.header&&t.header.hasTitle?this.state.viewLabelId:void 0;return B(Cr.Provider,{value:l},t.header&&B(Ew,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:t.header,titleId:c},s)),B(p9,{liquid:r,height:o,aspectRatio:a,labeledById:c},this.renderView(e),this.buildAppendContent()),t.footer&&B(Ew,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:t.footer,titleId:""},s)))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(i=>new i(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:t}=e.pluginHooks;for(let i in t)t[i](e[i],e)}componentDidUpdate(e){let{props:t}=this,{propSetHandlers:i}=t.pluginHooks;for(let s in i)t[s]!==e[s]&&i[s](t[s],t)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,t=e.pluginHooks.viewContainerAppends.map(i=>i(e));return B(pt,{},...t)}renderView(e){let{pluginHooks:t}=e,{viewSpec:i}=e,s={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},r=this.buildViewPropTransformers(t.viewPropsTransformers);for(let a of r)Object.assign(s,a.transform(s,e));let o=i.component;return B(o,Object.assign({},s))}}function y9(n,e,t,i,s,r){let o=t.build(s,void 0,!1),a=t.buildPrev(e,i,!1),l=t.buildNext(e,i,!1);return{title:r,activeButton:n.type,navUnit:n.singleUnit,isTodayEnabled:o.isValid&&!fs(e.currentRange,s),isPrevEnabled:a.isValid,isNextEnabled:l.isValid}}function b9(n){return n.map(e=>new e)}let E9=class extends X4{constructor(e,t={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=i=>{switch(i.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=i=>{this.currentData=i,this.renderRunner.request(i.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:i}=this;ih(()=>{gl(B(Q4,{options:i.calendarOptions,theme:i.theme,emitter:i.emitter},(s,r,o,a)=>(this.setClassNames(s),this.setHeight(r),B(KI.Provider,{value:this.customContentRenderId},B(v9,Object.assign({isHeightAuto:o,forPrint:a},i))))),this.el)})}else this.isRendered&&(this.isRendered=!1,gl(null,this.el),this.setClassNames([]),this.setHeight(""))},Pz(e),this.el=e,this.renderRunner=new gm(this.handleRenderRequest),new r9({optionOverrides:t,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){ih(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,t){this.currentDataManager.resetOptions(e,t)}setClassNames(e){if(!Ts(e,this.currentClassNames)){let{classList:t}=this.el;for(let i of this.currentClassNames)t.remove(i);for(let i of e)t.add(i);this.currentClassNames=e}}setHeight(e){FI(this.el,"height",e)}};const w9={headerToolbar:!0,footerToolbar:!0,events:!0,eventSources:!0,resources:!0},A9=yh({props:{options:Object},data(){return{renderId:0,customRenderingMap:new Map}},methods:{getApi(){return this.calendar},buildOptions(n){return{...n,customRenderingMetaMap:I9(this.$slots),handleCustomRendering:this.handleCustomRendering}}},render(){const n=[];for(const e of this.customRenderingMap.values())n.push(Xr(T9,{key:e.id,customRendering:e}));return Xr("div",{attrs:{"data-fc-render-id":this.renderId}},Xr(Mt,n))},mounted(){const n=new a5;this.handleCustomRendering=n.handle.bind(n);const e=this.buildOptions(this.options),t=new E9(this.$el,e);this.calendar=t,t.render(),n.subscribe(i=>{this.customRenderingMap=i,this.renderId++,this.needCustomRenderingResize=!0})},beforeUpdate(){this.getApi().resumeRendering()},updated(){this.needCustomRenderingResize&&(this.needCustomRenderingResize=!1,this.getApi().updateSize())},beforeUnmount(){this.getApi().destroy()},watch:S9()}),T9=yh({props:{customRendering:Object},render(){const n=this.customRendering,e=typeof n.generatorMeta=="function"?n.generatorMeta(n.renderProps):n.generatorMeta;return Xr(fR,{to:n.containerEl},e)}});function S9(){let n={options:{deep:!0,handler(e){let t=this.getApi();t.pauseRendering();let i=this.buildOptions(e);t.resetOptions(i),this.renderId++}}};for(let e in w9)n[`options.${e}`]={deep:!0,handler(t){if(t!==void 0){let i=this.getApi();i.pauseRendering(),i.resetOptions({[e]:t},[e]),this.renderId++}}};return n}function I9(n){const e={};for(const t in n)e[C9(t)]=n[t];return e}function C9(n){return n.split("-").map((e,t)=>t?x9(e):e).join("")}function x9(n){return n.charAt(0).toUpperCase()+n.slice(1)}class R9 extends Rr{constructor(){super(...arguments),this.headerElRef=Mi()}renderSimpleLayout(e,t){let{props:i,context:s}=this,r=[],o=fw(s.options);return e&&r.push({type:"header",key:"header",isSticky:o,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),r.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),B(tw,{elClasses:["fc-daygrid"],viewSpec:s.viewSpec},B(SC,{liquid:!i.isHeightAuto&&!i.forPrint,collapsibleWidth:i.forPrint,cols:[],sections:r}))}renderHScrollLayout(e,t,i,s){let r=this.context.pluginHooks.scrollGridImpl;if(!r)throw new Error("No ScrollGrid implementation");let{props:o,context:a}=this,l=!o.forPrint&&fw(a.options),c=!o.forPrint&&H$(a.options),u=[];return e&&u.push({type:"header",key:"header",isSticky:l,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),u.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),c&&u.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:U$}]}),B(tw,{elClasses:["fc-daygrid"],viewSpec:a.viewSpec},B(r,{liquid:!o.isHeightAuto&&!o.forPrint,forPrint:o.forPrint,collapsibleWidth:o.forPrint,colGroups:[{cols:[{span:i,minWidth:s}]}],sections:u}))}}function Mc(n,e){let t=[];for(let i=0;i<e;i+=1)t[i]=[];for(let i of n)t[i.row].push(i);return t}function Oc(n,e){let t=[];for(let i=0;i<e;i+=1)t[i]=[];for(let i of n)t[i.firstCol].push(i);return t}function ww(n,e){let t=[];if(n){for(let i=0;i<e;i+=1)t[i]={affectedInstances:n.affectedInstances,isEvent:n.isEvent,segs:[]};for(let i of n.segs)t[i.row].segs.push(i)}else for(let i=0;i<e;i+=1)t[i]=null;return t}const VC=It({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function FC(n){let{display:e}=n.eventRange.ui;return e==="list-item"||e==="auto"&&!n.eventRange.def.allDay&&n.firstCol===n.lastCol&&n.isStart&&n.isEnd}class BC extends ut{render(){let{props:e}=this;return B(z$,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:VC,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class UC extends ut{render(){let{props:e,context:t}=this,{options:i}=t,{seg:s}=e,r=i.eventTimeFormat||VC,o=cC(s,r,t,!0,e.defaultDisplayEventEnd);return B(Vm,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:uC(e.seg,t),defaultGenerator:D9,timeText:o,isResizing:!1,isDateSelecting:!1}))}}function D9(n){return B(pt,null,B("div",{className:"fc-daygrid-event-dot",style:{borderColor:n.borderColor||n.backgroundColor}}),n.timeText&&B("div",{className:"fc-event-time"},n.timeText),B("div",{className:"fc-event-title"},n.event.title||B(pt,null,"")))}class k9 extends ut{constructor(){super(...arguments),this.compileSegs=Ve(P9)}render(){let{props:e}=this,{allSegs:t,invisibleSegs:i}=this.compileSegs(e.singlePlacements);return B(e5,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:t,hiddenSegs:i,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let s=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return B(pt,null,t.map(r=>{let o=r.eventRange.instance.instanceId;return B("div",{className:"fc-daygrid-event-harness",key:o,style:{visibility:s[o]?"hidden":""}},FC(r)?B(UC,Object.assign({seg:r,isDragging:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},Ha(r,e.todayRange))):B(BC,Object.assign({seg:r,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},Ha(r,e.todayRange))))}))}})}}function P9(n){let e=[],t=[];for(let i of n)e.push(i.seg),i.isVisible||t.push(i.seg);return{allSegs:e,invisibleSegs:t}}const M9=It({week:"narrow"});class O9 extends Rr{constructor(){super(...arguments),this.rootElRef=Mi(),this.state={dayNumberId:Jh()},this.handleRootEl=e=>{Oi(this.rootElRef,e),Oi(this.props.elRef,e)}}render(){let{context:e,props:t,state:i,rootElRef:s}=this,{options:r,dateEnv:o}=e,{date:a,dateProfile:l}=t;const c=t.showDayNumber&&L9(a,l.currentRange,o);return B(IC,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...t.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},t.extraDataAttrs),t.showDayNumber?{"aria-labelledby":i.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:N9,date:a,dateProfile:l,todayRange:t.todayRange,showDayNumber:t.showDayNumber,isMonthStart:c,extraRenderProps:t.extraRenderProps},(u,d)=>B("div",{ref:t.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:t.minHeight}},t.showWeekNumber&&B(Y$,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:Pg(e,a,"week"),date:a,defaultFormat:M9}),!d.isDisabled&&(t.showDayNumber||CC(r)||t.forceDayTop)?B("div",{className:"fc-daygrid-day-top"},B(u,{elTag:"a",elClasses:["fc-daygrid-day-number",c&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},Pg(e,a)),{id:i.dayNumberId})})):t.showDayNumber?B("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},B("a",{className:"fc-daygrid-day-number"},"")):void 0,B("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,B("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},B(k9,{allDayDate:a,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:s,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),B("div",{className:"fc-daygrid-day-bg"},t.bgContent)))}}function N9(n){return n.dayNumberText||B(pt,null,"")}function L9(n,e,t){const{start:i,end:s}=e,r=Ss(s,-1),o=t.getYear(i),a=t.getMonth(i),l=t.getYear(r),c=t.getMonth(r);return!(o===l&&a===c)&&(n.valueOf()===i.valueOf()||t.getDay(n)===1&&n.valueOf()<s.valueOf())}function HC(n){return n.eventRange.instance.instanceId+":"+n.firstCol}function jC(n){return HC(n)+":"+n.lastCol}function V9(n,e,t,i,s,r,o){let a=new U9(E=>{let I=n[E.index].eventRange.instance.instanceId+":"+E.span.start+":"+(E.span.end-1);return s[I]||1});a.allowReslicing=!0,a.strictOrder=i,e===!0||t===!0?(a.maxCoord=r,a.hiddenConsumes=!0):typeof e=="number"?a.maxStackCnt=e:typeof t=="number"&&(a.maxStackCnt=t,a.hiddenConsumes=!0);let l=[],c=[];for(let E=0;E<n.length;E+=1){let I=n[E],R=jC(I);s[R]!=null?l.push({index:E,span:{start:I.firstCol,end:I.lastCol+1}}):c.push(I)}let u=a.addSegs(l),d=a.toRects(),{singleColPlacements:f,multiColPlacements:g,leftoverMargins:m}=F9(d,n,o),_=[],y=[];for(let E of c){g[E.firstCol].push({seg:E,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let I=E.firstCol;I<=E.lastCol;I+=1)f[I].push({seg:ro(E,I,I+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let E=0;E<o.length;E+=1)_.push(0);for(let E of u){let I=n[E.index],R=E.span;g[R.start].push({seg:ro(I,R.start,R.end,o),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let S=R.start;S<R.end;S+=1)_[S]+=1,f[S].push({seg:ro(I,S,S+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let E=0;E<o.length;E+=1)y.push(m[E]);return{singleColPlacements:f,multiColPlacements:g,moreCnts:_,moreMarginTops:y}}function F9(n,e,t){let i=B9(n,t.length),s=[],r=[],o=[];for(let a=0;a<t.length;a+=1){let l=i[a],c=[],u=0,d=0;for(let g of l){let m=e[g.index];c.push({seg:ro(m,a,a+1,t),isVisible:!0,isAbsolute:!1,absoluteTop:g.levelCoord,marginTop:g.levelCoord-u}),u=g.levelCoord+g.thickness}let f=[];u=0,d=0;for(let g of l){let m=e[g.index],_=g.span.end-g.span.start>1,y=g.span.start===a;d+=g.levelCoord-u,u=g.levelCoord+g.thickness,_?(d+=g.thickness,y&&f.push({seg:ro(m,g.span.start,g.span.end,t),isVisible:!0,isAbsolute:!0,absoluteTop:g.levelCoord,marginTop:0})):y&&(f.push({seg:ro(m,g.span.start,g.span.end,t),isVisible:!0,isAbsolute:!1,absoluteTop:g.levelCoord,marginTop:d}),d=0)}s.push(c),r.push(f),o.push(d)}return{singleColPlacements:s,multiColPlacements:r,leftoverMargins:o}}function B9(n,e){let t=[];for(let i=0;i<e;i+=1)t.push([]);for(let i of n)for(let s=i.span.start;s<i.span.end;s+=1)t[s].push(i);return t}function ro(n,e,t,i){if(n.firstCol===e&&n.lastCol===t-1)return n;let s=n.eventRange,r=s.range,o=To(r,{start:i[e].date,end:en(i[t-1].date,1)});return Object.assign(Object.assign({},n),{firstCol:e,lastCol:t-1,eventRange:{def:s.def,ui:Object.assign(Object.assign({},s.ui),{durationEditable:!1}),instance:s.instance,range:o},isStart:n.isStart&&o.start.valueOf()===r.start.valueOf(),isEnd:n.isEnd&&o.end.valueOf()===r.end.valueOf()})}class U9 extends f${constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const t=super.addSegs(e),{entriesByLevel:i}=this,s=r=>!this.forceHidden[ja(r)];for(let r=0;r<i.length;r+=1)i[r]=i[r].filter(s);return t}handleInvalidInsertion(e,t,i){const{entriesByLevel:s,forceHidden:r}=this,{touchingEntry:o,touchingLevel:a,touchingLateral:l}=e;if(this.hiddenConsumes&&o){const c=ja(o);if(!r[c])if(this.allowReslicing){const u=Object.assign(Object.assign({},o),{span:vC(o.span,t.span)}),d=ja(u);r[d]=!0,s[a][l]=u,i.push(u),this.splitEntry(o,t,i)}else r[c]=!0,i.push(o)}super.handleInvalidInsertion(e,t,i)}}class zC extends Rr{constructor(){super(...arguments),this.cellElRefs=new er,this.frameElRefs=new er,this.fgElRefs=new er,this.segHarnessRefs=new er,this.rootElRef=Mi(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:t,context:i}=this,{options:s}=i,r=e.cells.length,o=Oc(e.businessHourSegs,r),a=Oc(e.bgEventSegs,r),l=Oc(this.getHighlightSegs(),r),c=Oc(this.getMirrorSegs(),r),{singleColPlacements:u,multiColPlacements:d,moreCnts:f,moreMarginTops:g}=V9(P4(e.fgEventSegs,s.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,s.eventOrderStrict,t.segHeights,t.maxContentHeight,e.cells),m=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return B("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((_,y)=>{let E=this.renderFgSegs(y,e.forPrint?u[y]:d[y],e.todayRange,m),I=this.renderFgSegs(y,H9(c[y],d),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return B(O9,{key:_.key,elRef:this.cellElRefs.createRef(_.key),innerElRef:this.frameElRefs.createRef(_.key),dateProfile:e.dateProfile,date:_.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&y===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:_.extraRenderProps,extraDataAttrs:_.extraDataAttrs,extraClassNames:_.extraClassNames,extraDateSpan:_.extraDateSpan,moreCnt:f[y],moreMarginTop:g[y],singlePlacements:u[y],fgContentElRef:this.fgElRefs.createRef(_.key),fgContent:B(pt,null,B(pt,null,E),B(pt,null,I)),bgContent:B(pt,null,this.renderFillSegs(l[y],"highlight"),this.renderFillSegs(o[y],"non-business"),this.renderFillSegs(a[y],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,t){let i=this.props;this.updateSizing(!li(e,i))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,t,i,s,r,o,a){let{context:l}=this,{eventSelection:c}=this.props,{framePositions:u}=this.state,d=this.props.cells.length===1,f=r||o||a,g=[];if(u)for(let m of t){let{seg:_}=m,{instanceId:y}=_.eventRange.instance,E=m.isVisible&&!s[y],I=m.isAbsolute,R="",S="";I&&(l.isRtl?(S=0,R=u.lefts[_.lastCol]-u.lefts[_.firstCol]):(R=0,S=u.rights[_.firstCol]-u.rights[_.lastCol])),g.push(B("div",{className:"fc-daygrid-event-harness"+(I?" fc-daygrid-event-harness-abs":""),key:HC(_),ref:f?null:this.segHarnessRefs.createRef(jC(_)),style:{visibility:E?"":"hidden",marginTop:I?"":m.marginTop,top:I?m.absoluteTop:"",left:R,right:S}},FC(_)?B(UC,Object.assign({seg:_,isDragging:r,isSelected:y===c,defaultDisplayEventEnd:d},Ha(_,i))):B(BC,Object.assign({seg:_,isDragging:r,isResizing:o,isDateSelecting:a,isSelected:y===c,defaultDisplayEventEnd:d},Ha(_,i)))))}return g}renderFillSegs(e,t){let{isRtl:i}=this.context,{todayRange:s}=this.props,{framePositions:r}=this.state,o=[];if(r)for(let a of e){let l=i?{right:0,left:r.lefts[a.lastCol]-r.lefts[a.firstCol]}:{left:0,right:r.rights[a.firstCol]-r.rights[a.lastCol]};o.push(B("div",{key:F4(a.eventRange),className:"fc-daygrid-bg-harness",style:l},t==="bg-event"?B(G$,Object.assign({seg:a},Ha(a,s))):Q$(t)))}return B(pt,{},...o)}updateSizing(e){let{props:t,state:i,frameElRefs:s}=this;if(!t.forPrint&&t.clientWidth!==null){if(e){let l=t.cells.map(c=>s.currentMap[c.key]);if(l.length){let c=this.rootElRef.current,u=new ah(c,l,!0,!1);(!i.framePositions||!i.framePositions.similarTo(u))&&this.setState({framePositions:new ah(c,l,!0,!1)})}}const r=this.state.segHeights,o=this.querySegHeights(),a=t.dayMaxEvents===!0||t.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},r),o),maxContentHeight:a?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,t={};for(let i in e){let s=Math.round(e[i].getBoundingClientRect().height);t[i]=Math.max(t[i]||0,s)}return t}computeMaxContentHeight(){let e=this.props.cells[0].key,t=this.cellElRefs.currentMap[e],i=this.fgElRefs.currentMap[e];return t.getBoundingClientRect().bottom-i.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(t=>e[t.key])}}zC.addStateEquality({segHeights:li});function H9(n,e){if(!n.length)return[];let t=j9(e);return n.map(i=>({seg:i,isVisible:!0,isAbsolute:!0,absoluteTop:t[i.eventRange.instance.instanceId],marginTop:0}))}function j9(n){let e={};for(let t of n)for(let i of t)e[i.seg.eventRange.instance.instanceId]=i.absoluteTop;return e}class z9 extends Rr{constructor(){super(...arguments),this.splitBusinessHourSegs=Ve(Mc),this.splitBgEventSegs=Ve(Mc),this.splitFgEventSegs=Ve(Mc),this.splitDateSelectionSegs=Ve(Mc),this.splitEventDrag=Ve(ww),this.splitEventResize=Ve(ww),this.rowRefs=new er}render(){let{props:e,context:t}=this,i=e.cells.length,s=this.splitBusinessHourSegs(e.businessHourSegs,i),r=this.splitBgEventSegs(e.bgEventSegs,i),o=this.splitFgEventSegs(e.fgEventSegs,i),a=this.splitDateSelectionSegs(e.dateSelectionSegs,i),l=this.splitEventDrag(e.eventDrag,i),c=this.splitEventResize(e.eventResize,i),u=i>=7&&e.clientWidth?e.clientWidth/t.options.aspectRatio/6:null;return B(Lm,{unit:"day"},(d,f)=>B(pt,null,e.cells.map((g,m)=>B(zC,{ref:this.rowRefs.createRef(m),key:g.length?g[0].date.toISOString():m,showDayNumbers:i>1,showWeekNumbers:e.showWeekNumbers,todayRange:f,dateProfile:e.dateProfile,cells:g,renderIntro:e.renderRowIntro,businessHourSegs:s[m],eventSelection:e.eventSelection,bgEventSegs:r[m].filter(W9),fgEventSegs:o[m],dateSelectionSegs:a[m],eventDrag:l[m],eventResize:c[m],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:u,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],t=e?e.closest(".fc-daygrid-body"):null;t&&(this.rootEl=t,this.context.registerInteractiveComponent(this,{el:t,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new ah(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new ah(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,t){let{colPositions:i,rowPositions:s}=this,r=i.leftToIndex(e),o=s.topToIndex(t);if(o!=null&&r!=null){let a=this.props.cells[o][r];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(o,r),allDay:!0},a.extraDateSpan),dayEl:this.getCellEl(o,r),rect:{left:i.lefts[r],right:i.rights[r],top:s.tops[o],bottom:s.bottoms[o]},layer:0}}return null}getCellEl(e,t){return this.rowRefs.currentMap[e].getCellEls()[t]}getCellRange(e,t){let i=this.props.cells[e][t].date,s=en(i,1);return{start:i,end:s}}}function W9(n){return n.eventRange.def.allDay}class $9 extends Rr{constructor(){super(...arguments),this.elRef=Mi(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:t,dayMaxEvents:i,expandRows:s}=e,r=i===!0||t===!0;r&&!s&&(r=!1,t=null,i=null);let o=["fc-daygrid-body",r?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",s?"":"fc-daygrid-body-natural"];return B("div",{ref:this.elRef,className:o.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},B("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:s?e.clientHeight:""}},e.colGroupNode,B("tbody",{role:"presentation"},B(z9,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:i,dayMaxEventRows:t,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=q9(this.elRef.current,this.props.dateProfile);if(e){const t=e.closest(".fc-daygrid-body"),i=t.closest(".fc-scroller"),s=e.getBoundingClientRect().top-t.getBoundingClientRect().top;i.scrollTop=s?s+1:0}this.needsScrollReset=!1}}}function q9(n,e){let t;return e.currentRangeUnit.match(/year|month/)&&(t=n.querySelector(`[data-date="${vW(e.currentDate)}-01"]`)),t||(t=n.querySelector(`[data-date="${vm(e.currentDate)}"]`)),t}class G9 extends A${constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,t){return t.sliceRange(e)}}class K9 extends Rr{constructor(){super(...arguments),this.slicer=new G9,this.tableRef=Mi()}render(){let{props:e,context:t}=this;return B($9,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,t,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class Q9 extends R9{constructor(){super(...arguments),this.buildDayTableModel=Ve(Y9),this.headerRef=Mi(),this.tableRef=Mi()}render(){let{options:e,dateProfileGenerator:t}=this.context,{props:i}=this,s=this.buildDayTableModel(i.dateProfile,t),r=e.dayHeaders&&B(y$,{ref:this.headerRef,dateProfile:i.dateProfile,dates:s.headerDates,datesRepDistinctDays:s.rowCnt===1}),o=a=>B(K9,{ref:this.tableRef,dateProfile:i.dateProfile,dayTableModel:s,businessHours:i.businessHours,dateSelection:i.dateSelection,eventStore:i.eventStore,eventUiBases:i.eventUiBases,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:a.tableColGroupNode,tableMinWidth:a.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!i.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:a.clientWidth,clientHeight:a.clientHeight,forPrint:i.forPrint});return e.dayMinWidth?this.renderHScrollLayout(r,o,s.colCnt,e.dayMinWidth):this.renderSimpleLayout(r,o)}}function Y9(n,e){let t=new E$(n.renderRange,e);return new w$(t,/year|month|week/.test(n.currentRangeUnit))}class X9 extends JI{buildRenderRange(e,t,i){let s=super.buildRenderRange(e,t,i),{props:r}=this;return J9({currentRange:s,snapToWeek:/^(year|month)$/.test(t),fixedWeekCount:r.fixedWeekCount,dateEnv:r.dateEnv})}}function J9(n){let{dateEnv:e,currentRange:t}=n,{start:i,end:s}=t,r;if(n.snapToWeek&&(i=e.startOfWeek(i),r=e.startOfWeek(s),r.valueOf()!==s.valueOf()&&(s=qE(r,1))),n.fixedWeekCount){let o=e.startOfWeek(e.startOfMonth(en(t.end,-1))),a=Math.ceil(oW(o,s));s=qE(s,6-a)}return{start:i,end:s}}var Z9=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';NI(Z9);var e6=Rs({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:Q9,dateProfileGeneratorClass:X9},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});Nm.touchMouseIgnoreWait=500;let Og=0,lh=0,Ng=!1;class WC{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=t=>{if(!this.shouldIgnoreMouse()&&t6(t)&&this.tryStart(t)){let i=this.createEventFromMouse(t,!0);this.emitter.trigger("pointerdown",i),this.initScrollWatch(i),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=t=>{let i=this.createEventFromMouse(t);this.recordCoords(i),this.emitter.trigger("pointermove",i)},this.handleMouseUp=t=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(t)),this.cleanup()},this.handleTouchStart=t=>{if(this.tryStart(t)){this.isTouchDragging=!0;let i=this.createEventFromTouch(t,!0);this.emitter.trigger("pointerdown",i),this.initScrollWatch(i);let s=t.target;this.shouldIgnoreMove||s.addEventListener("touchmove",this.handleTouchMove),s.addEventListener("touchend",this.handleTouchEnd),s.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=t=>{let i=this.createEventFromTouch(t);this.recordCoords(i),this.emitter.trigger("pointermove",i)},this.handleTouchEnd=t=>{if(this.isDragging){let i=t.target;i.removeEventListener("touchmove",this.handleTouchMove),i.removeEventListener("touchend",this.handleTouchEnd),i.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(t)),this.cleanup(),this.isTouchDragging=!1,n6()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=t=>{if(!this.shouldIgnoreMove){let i=window.scrollX-this.prevScrollX+this.prevPageX,s=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:t,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:i,pageY:s,deltaX:i-this.origPageX,deltaY:s-this.origPageY})}},this.containerEl=e,this.emitter=new nd,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),i6()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),s6()}tryStart(e){let t=this.querySubjectEl(e),i=e.target;return t&&(!this.handleSelector||Yt(i,this.handleSelector))?(this.subjectEl=t,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){Ng=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?Yt(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return Og||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(Ng=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,t){let i=0,s=0;return t?(this.origPageX=e.pageX,this.origPageY=e.pageY):(i=e.pageX-this.origPageX,s=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:i,deltaY:s}}createEventFromTouch(e,t){let i=e.touches,s,r,o=0,a=0;return i&&i.length?(s=i[0].pageX,r=i[0].pageY):(s=e.pageX,r=e.pageY),t?(this.origPageX=s,this.origPageY=r):(o=s-this.origPageX,a=r-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:s,pageY:r,deltaX:o,deltaY:a}}}function t6(n){return n.button===0&&!n.ctrlKey}function n6(){Og+=1,setTimeout(()=>{Og-=1},Nm.touchMouseIgnoreWait)}function i6(){lh+=1,lh===1&&window.addEventListener("touchmove",$C,{passive:!1})}function s6(){lh-=1,lh||window.removeEventListener("touchmove",$C,{passive:!1})}function $C(n){Ng&&n.preventDefault()}class r6{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,t,i){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=t-window.scrollX,this.origScreenY=i-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,t){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=t-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,t){let i=()=>{this.cleanup(),t()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(i,this.revertDuration):setTimeout(i,0)}doRevertAnimation(e,t){let i=this.mirrorEl,s=this.sourceEl.getBoundingClientRect();i.style.transition="top "+t+"ms,left "+t+"ms",Fa(i,{left:s.left,top:s.top}),jz(i,()=>{i.style.transition="",e()})}cleanup(){this.mirrorEl&&(pm(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&Fa(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,t=this.mirrorEl;return t||(t=this.mirrorEl=this.sourceEl.cloneNode(!0),t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.pointerEvents="none",t.classList.add("fc-event-dragging"),Fa(t,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(t)),t}}class qC extends Om{constructor(e,t){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=t,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class GC extends qC{constructor(e,t){super(new h$(e),t)}getEventTarget(){return this.scrollController.el}computeClientRect(){return c$(this.scrollController.el)}}class o6 extends qC{constructor(e){super(new d$,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const Aw=typeof performance=="function"?performance.now:Date.now;class a6{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let t=Aw();this.handleSide(e,(t-this.msSinceRequest)/1e3),this.requestAnimation(t)}else this.isAnimating=!1}}}start(e,t,i){this.isEnabled&&(this.scrollCaches=this.buildCaches(i),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,t))}handleMove(e,t){if(this.isEnabled){let i=e-window.scrollX,s=t-window.scrollY,r=this.pointerScreenY===null?0:s-this.pointerScreenY,o=this.pointerScreenX===null?0:i-this.pointerScreenX;r<0?this.everMovedUp=!0:r>0&&(this.everMovedDown=!0),o<0?this.everMovedLeft=!0:o>0&&(this.everMovedRight=!0),this.pointerScreenX=i,this.pointerScreenY=s,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(Aw()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,t){let{scrollCache:i}=e,{edgeThreshold:s}=this,r=s-e.distance,o=r*r/(s*s)*this.maxVelocity*t,a=1;switch(e.name){case"left":a=-1;case"right":i.setScrollLeft(i.getScrollLeft()+o*a);break;case"top":a=-1;case"bottom":i.setScrollTop(i.getScrollTop()+o*a);break}}computeBestEdge(e,t){let{edgeThreshold:i}=this,s=null,r=this.scrollCaches||[];for(let o of r){let a=o.clientRect,l=e-a.left,c=a.right-e,u=t-a.top,d=a.bottom-t;l>=0&&c>=0&&u>=0&&d>=0&&(u<=i&&this.everMovedUp&&o.canScrollUp()&&(!s||s.distance>u)&&(s={scrollCache:o,name:"top",distance:u}),d<=i&&this.everMovedDown&&o.canScrollDown()&&(!s||s.distance>d)&&(s={scrollCache:o,name:"bottom",distance:d}),l<=i&&this.everMovedLeft&&o.canScrollLeft()&&(!s||s.distance>l)&&(s={scrollCache:o,name:"left",distance:l}),c<=i&&this.everMovedRight&&o.canScrollRight()&&(!s||s.distance>c)&&(s={scrollCache:o,name:"right",distance:c}))}return s}buildCaches(e){return this.queryScrollEls(e).map(t=>t===window?new o6(!1):new GC(t,!1))}queryScrollEls(e){let t=[];for(let i of this.scrollQuery)typeof i=="object"?t.push(i):t.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(i)));return t}}class Nl extends g${constructor(e,t){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=s=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,zz(document.body),$z(document.body),s.isTouch||s.origEvent.preventDefault(),this.emitter.trigger("pointerdown",s),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(s.subjectEl,s.pageX,s.pageY),this.startDelay(s),this.minDistance||this.handleDistanceSurpassed(s)))},this.onPointerMove=s=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",s),!this.isDistanceSurpassed){let r=this.minDistance,o,{deltaX:a,deltaY:l}=s;o=a*a+l*l,o>=r*r&&this.handleDistanceSurpassed(s)}this.isDragging&&(s.origEvent.type!=="scroll"&&(this.mirror.handleMove(s.pageX,s.pageY),this.autoScroller.handleMove(s.pageX,s.pageY)),this.emitter.trigger("dragmove",s))}},this.onPointerUp=s=>{this.isInteracting&&(this.isInteracting=!1,Wz(document.body),qz(document.body),this.emitter.trigger("pointerup",s),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(s)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let i=this.pointer=new WC(e);i.emitter.on("pointerdown",this.onPointerDown),i.emitter.on("pointermove",this.onPointerMove),i.emitter.on("pointerup",this.onPointerUp),t&&(i.selector=t),this.mirror=new r6,this.autoScroller=new a6}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class l6{constructor(e){this.el=e,this.origRect=Mm(e),this.scrollCaches=_C(e).map(t=>new GC(t,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let t of this.scrollCaches)e+=t.origScrollLeft-t.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let t of this.scrollCaches)e+=t.origScrollTop-t.getScrollTop();return e}isWithinClipping(e,t){let i={left:e,top:t};for(let s of this.scrollCaches)if(!c6(s.getEventTarget())&&!J4(i,s.clientRect))return!1;return!0}}function c6(n){let e=n.tagName;return e==="HTML"||e==="BODY"}class id{constructor(e,t){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=i=>{let{dragging:s}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(i),this.initialHit||!this.requireInitial?(s.setIgnoreMove(!1),this.emitter.trigger("pointerdown",i)):s.setIgnoreMove(!0)},this.handleDragStart=i=>{this.emitter.trigger("dragstart",i),this.handleMove(i,!0)},this.handleDragMove=i=>{this.emitter.trigger("dragmove",i),this.handleMove(i)},this.handlePointerUp=i=>{this.releaseHits(),this.emitter.trigger("pointerup",i)},this.handleDragEnd=i=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,i),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",i)},this.droppableStore=t,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new nd}processFirstCoord(e){let t={left:e.pageX,top:e.pageY},i=t,s=e.subjectEl,r;s instanceof HTMLElement&&(r=Mm(s),i=Z4(i,r));let o=this.initialHit=this.queryHitForOffset(i.left,i.top);if(o){if(this.useSubjectCenter&&r){let a=gC(r,o.rect);a&&(i=e$(a))}this.coordAdjust=t$(i,t)}else this.coordAdjust={left:0,top:0}}handleMove(e,t){let i=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(t||!sd(this.movingHit,i))&&(this.movingHit=i,this.emitter.trigger("hitupdate",i,!1,e))}prepareHits(){this.offsetTrackers=Ir(this.droppableStore,e=>(e.component.prepareHits(),new l6(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let t in e)e[t].destroy();this.offsetTrackers={}}queryHitForOffset(e,t){let{droppableStore:i,offsetTrackers:s}=this,r=null;for(let o in i){let a=i[o].component,l=s[o];if(l&&l.isWithinClipping(e,t)){let c=l.computeLeft(),u=l.computeTop(),d=e-c,f=t-u,{origRect:g}=l,m=g.right-g.left,_=g.bottom-g.top;if(d>=0&&d<m&&f>=0&&f<_){let y=a.queryHit(d,f,m,_);y&&ed(y.dateProfile.activeRange,y.dateSpan.range)&&(this.disablePointCheck||l.el.contains(l.el.getRootNode().elementFromPoint(d+c-window.scrollX,f+u-window.scrollY)))&&(!r||y.layer>r.layer)&&(y.componentId=o,y.context=a.context,y.rect.left+=c,y.rect.right+=c,y.rect.top+=u,y.rect.bottom+=u,r=y)}}}return r}}function sd(n,e){return!n&&!e?!0:!!n!=!!e?!1:j4(n.dateSpan,e.dateSpan)}function KC(n,e){let t={};for(let i of e.pluginHooks.datePointTransforms)Object.assign(t,i(n,e));return Object.assign(t,u6(n,e.dateEnv)),t}function u6(n,e){return{date:e.toDate(n.range.start),dateStr:e.formatIso(n.range.start,{omitTime:n.allDay}),allDay:n.allDay}}class h6 extends Lo{constructor(e){super(e),this.handlePointerDown=i=>{let{dragging:s}=this,r=i.origEvent.target;s.setIgnoreMove(!this.component.isValidDateDownEl(r))},this.handleDragEnd=i=>{let{component:s}=this,{pointer:r}=this.dragging;if(!r.wasTouchScroll){let{initialHit:o,finalHit:a}=this.hitDragging;if(o&&a&&sd(o,a)){let{context:l}=s,c=Object.assign(Object.assign({},KC(o.dateSpan,l)),{dayEl:o.dayEl,jsEvent:i.origEvent,view:l.viewApi||l.calendarApi.view});l.emitter.trigger("dateClick",c)}}},this.dragging=new Nl(e.el),this.dragging.autoScroller.isEnabled=!1;let t=this.hitDragging=new id(this.dragging,km(e));t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class d6 extends Lo{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=o=>{let{component:a,dragging:l}=this,{options:c}=a.context,u=c.selectable&&a.isValidDateDownEl(o.origEvent.target);l.setIgnoreMove(!u),l.delay=o.isTouch?f6(a):null},this.handleDragStart=o=>{this.component.context.calendarApi.unselect(o)},this.handleHitUpdate=(o,a)=>{let{context:l}=this.component,c=null,u=!1;if(o){let d=this.hitDragging.initialHit;o.componentId===d.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(d,o)||(c=g6(d,o,l.pluginHooks.dateSelectionTransformers)),(!c||!T$(c,o.dateProfile,l))&&(u=!0,c=null)}c?l.dispatch({type:"SELECT_DATES",selection:c}):a||l.dispatch({type:"UNSELECT_DATES"}),u?mm():_m(),a||(this.dragSelection=c)},this.handlePointerUp=o=>{this.dragSelection&&(oC(this.dragSelection,o,this.component.context),this.dragSelection=null)};let{component:t}=e,{options:i}=t.context,s=this.dragging=new Nl(e.el);s.touchScrollAllowed=!1,s.minDistance=i.selectMinDistance||0,s.autoScroller.isEnabled=i.dragScroll;let r=this.hitDragging=new id(this.dragging,km(e));r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function f6(n){let{options:e}=n.context,t=e.selectLongPressDelay;return t==null&&(t=e.longPressDelay),t}function g6(n,e,t){let i=n.dateSpan,s=e.dateSpan,r=[i.range.start,i.range.end,s.range.start,s.range.end];r.sort(Xz);let o={};for(let a of t){let l=a(n,e);if(l===!1)return null;l&&Object.assign(o,l)}return o.range={start:r[0],end:r[3]},o.allDay=i.allDay,o}class Ll extends Lo{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=o=>{let a=o.origEvent.target,{component:l,dragging:c}=this,{mirror:u}=c,{options:d}=l.context,f=l.context;this.subjectEl=o.subjectEl;let g=this.subjectSeg=So(o.subjectEl),_=(this.eventRange=g.eventRange).instance.instanceId;this.relevantEvents=Cm(f.getCurrentData().eventStore,_),c.minDistance=o.isTouch?0:d.eventDragMinDistance,c.delay=o.isTouch&&_!==l.props.eventSelection?m6(l):null,d.fixedMirrorParent?u.parentNode=d.fixedMirrorParent:u.parentNode=Yt(a,".fc"),u.revertDuration=d.dragRevertDuration;let y=l.isValidSegDownEl(a)&&!Yt(a,".fc-event-resizer");c.setIgnoreMove(!y),this.isDragging=y&&o.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=o=>{let a=this.component.context,l=this.eventRange,c=l.instance.instanceId;o.isTouch?c!==this.component.props.eventSelection&&a.dispatch({type:"SELECT_EVENT",eventInstanceId:c}):a.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(a.calendarApi.unselect(o),a.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new at(a,l.def,l.instance),jsEvent:o.origEvent,view:a.viewApi}))},this.handleHitUpdate=(o,a)=>{if(!this.isDragging)return;let l=this.relevantEvents,c=this.hitDragging.initialHit,u=this.component.context,d=null,f=null,g=null,m=!1,_={affectedEvents:l,mutatedEvents:Un(),isEvent:!0};if(o){d=o.context;let y=d.options;u===d||y.editable&&y.droppable?(f=p6(c,o,this.eventRange.instance.range.start,d.getCurrentData().pluginHooks.eventDragMutationMassagers),f&&(g=Dm(l,d.getCurrentData().eventUiBases,f,d),_.mutatedEvents=g,EC(_,o.dateProfile,d)||(m=!0,f=null,g=null,_.mutatedEvents=Un()))):d=null}this.displayDrag(d,_),m?mm():_m(),a||(u===d&&sd(c,o)&&(f=null),this.dragging.setMirrorNeedsRevert(!f),this.dragging.setMirrorIsVisible(!o||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=d,this.validMutation=f,this.mutatedRelevantEvents=g)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=o=>{if(this.isDragging){let a=this.component.context,l=a.viewApi,{receivingContext:c,validMutation:u}=this,d=this.eventRange.def,f=this.eventRange.instance,g=new at(a,d,f),m=this.relevantEvents,_=this.mutatedRelevantEvents,{finalHit:y}=this.hitDragging;if(this.clearDrag(),a.emitter.trigger("eventDragStop",{el:this.subjectEl,event:g,jsEvent:o.origEvent,view:l}),u){if(c===a){let E=new at(a,_.defs[d.defId],f?_.instances[f.instanceId]:null);a.dispatch({type:"MERGE_EVENTS",eventStore:_});let I={oldEvent:g,event:E,relatedEvents:or(_,a,f),revert(){a.dispatch({type:"MERGE_EVENTS",eventStore:m})}},R={};for(let S of a.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(R,S(u,a));a.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},I),R),{el:o.subjectEl,delta:u.datesDelta,jsEvent:o.origEvent,view:l})),a.emitter.trigger("eventChange",I)}else if(c){let E={event:g,relatedEvents:or(m,a,f),revert(){a.dispatch({type:"MERGE_EVENTS",eventStore:m})}};a.emitter.trigger("eventLeave",Object.assign(Object.assign({},E),{draggedEl:o.subjectEl,view:l})),a.dispatch({type:"REMOVE_EVENTS",eventStore:m}),a.emitter.trigger("eventRemove",E);let I=_.defs[d.defId],R=_.instances[f.instanceId],S=new at(c,I,R);c.dispatch({type:"MERGE_EVENTS",eventStore:_});let D={event:S,relatedEvents:or(_,c,R),revert(){c.dispatch({type:"REMOVE_EVENTS",eventStore:_})}};c.emitter.trigger("eventAdd",D),o.isTouch&&c.dispatch({type:"SELECT_EVENT",eventInstanceId:f.instanceId}),c.emitter.trigger("drop",Object.assign(Object.assign({},KC(y.dateSpan,c)),{draggedEl:o.subjectEl,jsEvent:o.origEvent,view:y.context.viewApi})),c.emitter.trigger("eventReceive",Object.assign(Object.assign({},D),{draggedEl:o.subjectEl,view:y.context.viewApi}))}}else a.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:t}=this,{options:i}=t.context,s=this.dragging=new Nl(e.el);s.pointer.selector=Ll.SELECTOR,s.touchScrollAllowed=!1,s.autoScroller.isEnabled=i.dragScroll;let r=this.hitDragging=new id(this.dragging,kg);r.useSubjectCenter=e.useEventCenter,r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("pointerup",this.handlePointerUp),r.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,t){let i=this.component.context,s=this.receivingContext;s&&s!==e&&(s===i?s.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:t.affectedEvents,mutatedEvents:Un(),isEvent:!0}}):s.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:t})}clearDrag(){let e=this.component.context,{receivingContext:t}=this;t&&t.dispatch({type:"UNSET_EVENT_DRAG"}),e!==t&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}Ll.SELECTOR=".fc-event-draggable, .fc-event-resizable";function p6(n,e,t,i){let s=n.dateSpan,r=e.dateSpan,o=s.range.start,a=r.range.start,l={};s.allDay!==r.allDay&&(l.allDay=r.allDay,l.hasEnd=e.context.options.allDayMaintainDuration,r.allDay?o=ot(t):o=t);let c=$r(o,a,n.context.dateEnv,n.componentId===e.componentId?n.largeUnit:null);c.milliseconds&&(l.allDay=!1);let u={datesDelta:c,standardProps:l};for(let d of i)d(u,n,e);return u}function m6(n){let{options:e}=n.context,t=e.eventLongPressDelay;return t==null&&(t=e.longPressDelay),t}class _6 extends Lo{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=r=>{let{component:o}=this,a=this.querySegEl(r),l=So(a),c=this.eventRange=l.eventRange;this.dragging.minDistance=o.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(r.origEvent.target)||r.isTouch&&this.component.props.eventSelection!==c.instance.instanceId)},this.handleDragStart=r=>{let{context:o}=this.component,a=this.eventRange;this.relevantEvents=Cm(o.getCurrentData().eventStore,this.eventRange.instance.instanceId);let l=this.querySegEl(r);this.draggingSegEl=l,this.draggingSeg=So(l),o.calendarApi.unselect(),o.emitter.trigger("eventResizeStart",{el:l,event:new at(o,a.def,a.instance),jsEvent:r.origEvent,view:o.viewApi})},this.handleHitUpdate=(r,o,a)=>{let{context:l}=this.component,c=this.relevantEvents,u=this.hitDragging.initialHit,d=this.eventRange.instance,f=null,g=null,m=!1,_={affectedEvents:c,mutatedEvents:Un(),isEvent:!0};r&&(r.componentId===u.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(u,r)||(f=v6(u,r,a.subjectEl.classList.contains("fc-event-resizer-start"),d.range))),f&&(g=Dm(c,l.getCurrentData().eventUiBases,f,l),_.mutatedEvents=g,EC(_,r.dateProfile,l)||(m=!0,f=null,g=null,_.mutatedEvents=null)),g?l.dispatch({type:"SET_EVENT_RESIZE",state:_}):l.dispatch({type:"UNSET_EVENT_RESIZE"}),m?mm():_m(),o||(f&&sd(u,r)&&(f=null),this.validMutation=f,this.mutatedRelevantEvents=g)},this.handleDragEnd=r=>{let{context:o}=this.component,a=this.eventRange.def,l=this.eventRange.instance,c=new at(o,a,l),u=this.relevantEvents,d=this.mutatedRelevantEvents;if(o.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:c,jsEvent:r.origEvent,view:o.viewApi}),this.validMutation){let f=new at(o,d.defs[a.defId],l?d.instances[l.instanceId]:null);o.dispatch({type:"MERGE_EVENTS",eventStore:d});let g={oldEvent:c,event:f,relatedEvents:or(d,o,l),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:u})}};o.emitter.trigger("eventResize",Object.assign(Object.assign({},g),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||Le(0),endDelta:this.validMutation.endDelta||Le(0),jsEvent:r.origEvent,view:o.viewApi})),o.emitter.trigger("eventChange",g)}else o.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:t}=e,i=this.dragging=new Nl(e.el);i.pointer.selector=".fc-event-resizer",i.touchScrollAllowed=!1,i.autoScroller.isEnabled=t.context.options.dragScroll;let s=this.hitDragging=new id(this.dragging,km(e));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return Yt(e.subjectEl,".fc-event")}}function v6(n,e,t,i){let s=n.context.dateEnv,r=n.dateSpan.range.start,o=e.dateSpan.range.start,a=$r(r,o,s,n.largeUnit);if(t){if(s.add(i.start,a)<i.end)return{startDelta:a}}else if(s.add(i.end,a)>i.start)return{endDelta:a};return null}class y6{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=i=>{i.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=i=>{let s=this.context.options.unselectCancel,r=BI(i.origEvent);this.matchesCancel=!!Yt(r,s),this.matchesEvent=!!Yt(r,Ll.SELECTOR)},this.onDocumentPointerUp=i=>{let{context:s}=this,{documentPointer:r}=this,o=s.getCurrentData();if(!r.wasTouchScroll){if(o.dateSelection&&!this.isRecentPointerDateSelect){let a=s.options.unselectAuto;a&&(!a||!this.matchesCancel)&&s.calendarApi.unselect(i)}o.eventSelection&&!this.matchesEvent&&s.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let t=this.documentPointer=new WC(document);t.shouldIgnoreMove=!0,t.shouldWatchScroll=!1,t.emitter.on("pointerdown",this.onDocumentPointerDown),t.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const b6={fixedMirrorParent:F},E6={dateClick:F,eventDragStart:F,eventDragStop:F,eventDrop:F,eventResizeStart:F,eventResizeStop:F,eventResize:F,drop:F,eventReceive:F,eventLeave:F};Nm.dataAttrPrefix="";var w6=Rs({name:"@fullcalendar/interaction",componentInteractions:[h6,d6,Ll,_6],calendarInteractions:[y6],elementDraggingImpl:Nl,optionRefiners:b6,listenerRefiners:E6});const A6={key:0,class:"modal"},T6={__name:"Calendar",setup(n){const e=Mp(),t=Mo(),i=Ce([]),s=Ce(""),r=Ce([]),o=Ce(0),a=Ce("zh-tw"),l=Ce({plugins:[e6,w6],initialView:"dayGridMonth",locale:a.value,events:i.value,dateClick:g=>{console.log(" :",g.dateStr),d(g.dateStr)}});Xn(a,g=>{console.log(" :",g),l.value.locale=g,o.value++});const c=()=>{a.value=a.value==="zh-tw"?"en":"zh-tw"},u=async g=>{const _=(await sl(_o(e,"users",g,"records"))).docs.map(y=>({id:y.id,...y.data()}));i.value=_.map(y=>({title:`${y.subCategory} - ${y.amount}`,start:y.date,fullData:y})),l.value.events=[...i.value],o.value++},d=g=>{s.value=g,r.value=i.value.filter(m=>m.start===g).map(m=>m.fullData),console.log(" :",r.value)},f=()=>{r.value=[]};return Io(()=>{yo(t,g=>{g?(console.log(" :",g.uid),u(g.uid)):console.warn(" ")})}),(g,m)=>(ve(),Ie("div",null,[m[0]||(m[0]=H("h2",null," ",-1)),H("button",{onClick:c},""+Xe(a.value==="zh-tw"?"English":"")+"",1),(ve(),Ea(ir(A9),{key:o.value,options:l.value},null,8,["options"])),r.value.length>0?(ve(),Ie("div",A6,[H("h3",null," "+Xe(s.value)+" ",1),H("ul",null,[(ve(!0),Ie(Mt,null,lr(r.value,(_,y)=>(ve(),Ie("li",{key:y},Xe(_.subCategory)+" - "+Xe(_.amount)+"  ",1))),128))]),H("button",{onClick:f},"")])):yt("",!0)]))}},S6=Oo(T6,[["__scopeId","data-v-c40d93e2"]]),I6={class:"container"},C6=["onClick"],x6={class:"content"},R6={key:0},D6={key:1,class:"bottom-nav"},k6=["onClick"],P6={__name:"DashboardPage",setup(n){const e=ep(),t=Mo(),i=Ce(!1),s=Ce("home"),r=Ce(window.innerWidth<768),o=Ce([{name:"",icon:"",view:"home"},{name:"",icon:"",view:"addAccounting"},{name:"",icon:"",view:"report"},{name:"",icon:"",view:"summary"}]),a=c=>{s.value=c},l=async()=>{console.log(" ...");try{await RL(t),console.log(" Firebase "),localStorage.clear(),yo(t,c=>{c||(console.log(" Firebase "),e.push("/"))})}catch(c){console.error(" :",c)}};return Io(()=>{window.addEventListener("resize",()=>{r.value=window.innerWidth<768}),yo(t,u=>{u?console.log(" :",u.uid):(console.log(" "),e.push("/"))}),localStorage.getItem("isLoggedIn")||e.push("/")}),(c,u)=>(ve(),Ie("div",I6,[r.value?yt("",!0):(ve(),Ie("nav",{key:0,class:tr(["sidebar",{open:i.value}])},[u[0]||(u[0]=H("h2",null,"",-1)),H("ul",null,[(ve(!0),Ie(Mt,null,lr(o.value,(d,f)=>(ve(),Ie("li",{key:f,onClick:g=>a(d.view),class:tr({active:s.value===d.view})},Xe(d.icon)+" "+Xe(d.name),11,C6))),128))]),H("button",{onClick:l}," ")],2)),H("div",x6,[u[1]||(u[1]=H("header",null,null,-1)),H("main",null,[s.value==="home"?(ve(),Ie("div",R6,[Xt(S6)])):yt("",!0),s.value==="addAccounting"?(ve(),Ea(hS,{key:1})):yt("",!0),s.value==="report"?(ve(),Ea(Qj,{key:2})):yt("",!0),s.value==="summary"?(ve(),Ea(hz,{key:3})):yt("",!0)]),u[2]||(u[2]=H("footer",null,[H("p",null,"  ")],-1))]),r.value?(ve(),Ie("nav",D6,[H("ul",null,[(ve(!0),Ie(Mt,null,lr(o.value,(d,f)=>(ve(),Ie("li",{key:f,onClick:g=>a(d.view),class:tr({active:s.value===d.view})},[H("span",null,Xe(d.icon),1),H("p",null,Xe(d.name),1)],10,k6))),128)),H("li",{onClick:l},u[3]||(u[3]=[H("span",null,"",-1),H("p",null,"",-1)]))])])):yt("",!0)]))}},M6=Oo(P6,[["__scopeId","data-v-8e87e54c"]]),O6=[{path:"/",component:qV},{path:"/dashboard",component:M6},{path:"/add-accounting",component:hS},{path:"/logout",redirect:"/"}],N6=Qk({history:Tk(),routes:O6}),Bm=zD(GD);Bm.config.errorHandler=(n,e,t)=>{console.error(" Vue :",n,t)};Bm.use(N6);Bm.mount("#app");
